var KM=Object.defineProperty,QM=Object.defineProperties;var YM=Object.getOwnPropertyDescriptors;var Jw=Object.getOwnPropertySymbols,JM=Object.getPrototypeOf,ZM=Object.prototype.hasOwnProperty,XM=Object.prototype.propertyIsEnumerable,ek=Reflect.get;var Zw=(n,e,t)=>e in n?KM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})ZM.call(e,t)&&Zw(n,t,e[t]);if(Jw)for(var t of Jw(e))XM.call(e,t)&&Zw(n,t,e[t]);return n},oe=(n,e)=>QM(n,YM(e));var Ar=(n,e,t)=>ek(JM(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Tp;function bp(){return Tp}function Gn(n){let e=Tp;return Tp=n,e}var tk=Symbol("NotFound"),Nu=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function bo(n){return n===tk||n?.name==="\u0275NotFound"}function xu(n,e){return Object.is(n,e)}var Be=null,Pu=!1,Dp=1,nk=null,ct=Symbol("SIGNAL");function ne(n){let e=Be;return Be=n,e}function Lu(){return Be}var gi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Do(n){if(Pu)throw new Error("");if(Be===null)return;Be.consumerOnSignalRead(n);let e=Be.nextProducerIndex++;if(Uu(Be),e<Be.producerNode.length&&Be.producerNode[e]!==n&&ma(Be)){let t=Be.producerNode[e];ju(t,Be.producerIndexOfThis[e])}Be.producerNode[e]!==n&&(Be.producerNode[e]=n,Be.producerIndexOfThis[e]=ma(Be)?eT(n,Be,e):0),Be.producerLastReadVersion[e]=n.version}function Xw(){Dp++}function Fu(n){if(!(ma(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Dp)){if(!n.producerMustRecompute(n)&&!ya(n)){Ou(n);return}n.producerRecomputeValue(n),Ou(n)}}function Cp(n){if(n.liveConsumerNode===void 0)return;let e=Pu;Pu=!0;try{for(let t of n.liveConsumerNode)t.dirty||rk(t)}finally{Pu=e}}function Sp(){return Be?.consumerAllowSignalWrites!==!1}function rk(n){n.dirty=!0,Cp(n),n.consumerMarkedDirty?.(n)}function Ou(n){n.dirty=!1,n.lastCleanEpoch=Dp}function mi(n){return n&&(n.nextProducerIndex=0),ne(n)}function Co(n,e){if(ne(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ma(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ju(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ya(n){Uu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Fu(t),r!==t.version))return!0}return!1}function Vu(n){if(Uu(n),ma(n))for(let e=0;e<n.producerNode.length;e++)ju(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function eT(n,e,t){if(tT(n),n.liveConsumerNode.length===0&&nT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=eT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function ju(n,e){if(tT(n),n.liveConsumerNode.length===1&&nT(n))for(let r=0;r<n.producerNode.length;r++)ju(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Uu(i),i.producerIndexOfThis[r]=e}}function ma(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Uu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function tT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function nT(n){return n.producerNode!==void 0}function Bu(n){nk?.(n)}function $u(n,e){let t=Object.create(ik);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Fu(t),Do(t),t.value===ga)throw t.error;return t.value};return r[ct]=t,Bu(t),r}var Mu=Symbol("UNSET"),ku=Symbol("COMPUTING"),ga=Symbol("ERRORED"),ik=oe(O({},gi),{value:Mu,dirty:!0,error:null,equal:xu,kind:"computed",producerMustRecompute(n){return n.value===Mu||n.value===ku},producerRecomputeValue(n){if(n.value===ku)throw new Error("");let e=n.value;n.value=ku;let t=mi(n),r,i=!1;try{r=n.computation(),ne(null),i=e!==Mu&&e!==ga&&r!==ga&&n.equal(e,r)}catch(o){r=ga,n.error=o}finally{Co(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function ok(){throw new Error}var rT=ok;function iT(n){rT(n)}function Ap(n){rT=n}var sk=null;function Rp(n,e){let t=Object.create(Hu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>oT(t);return r[ct]=t,Bu(t),[r,s=>So(t,s),s=>Np(t,s)]}function oT(n){return Do(n),n.value}function So(n,e){Sp()||iT(n),n.equal(n.value,e)||(n.value=e,ak(n))}function Np(n,e){Sp()||iT(n),So(n,e(n.value))}var Hu=oe(O({},gi),{equal:xu,value:void 0,kind:"signal"});function ak(n){n.version++,Xw(),Cp(n),sk?.(n)}function Z(n){return typeof n=="function"}function Ao(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var zu=Ao(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function va(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Oe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof zu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sT(o)}catch(s){e=e??[],s instanceof zu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new zu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&va(t,e)}remove(e){let{_finalizers:t}=this;t&&va(t,e),e instanceof n&&e._removeParent(this)}};Oe.EMPTY=(()=>{let n=new Oe;return n.closed=!0,n})();var Pp=Oe.EMPTY;function qu(n){return n instanceof Oe||n&&"closed"in n&&Z(n.remove)&&Z(n.add)&&Z(n.unsubscribe)}function sT(n){Z(n)?n():n.unsubscribe()}var Zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ro={setTimeout(n,e,...t){let{delegate:r}=Ro;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ro;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Gu(n){Ro.setTimeout(()=>{let{onUnhandledError:e}=Zt;if(e)e(n);else throw n})}function _a(){}var aT=Mp("C",void 0,void 0);function cT(n){return Mp("E",void 0,n)}function uT(n){return Mp("N",n,void 0)}function Mp(n,e,t){return{kind:n,value:e,error:t}}var yi=null;function No(n){if(Zt.useDeprecatedSynchronousErrorHandling){let e=!yi;if(e&&(yi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=yi;if(yi=null,t)throw r}}else n()}function lT(n){Zt.useDeprecatedSynchronousErrorHandling&&yi&&(yi.errorThrown=!0,yi.error=n)}var vi=class extends Oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qu(e)&&e.add(this)):this.destination=lk}static create(e,t,r){return new Po(e,t,r)}next(e){this.isStopped?Op(uT(e),this):this._next(e)}error(e){this.isStopped?Op(cT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Op(aT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ck=Function.prototype.bind;function kp(n,e){return ck.call(n,e)}var xp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Wu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Wu(r)}else Wu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Wu(t)}}},Po=class extends vi{constructor(e,t,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Zt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&kp(e.next,o),error:e.error&&kp(e.error,o),complete:e.complete&&kp(e.complete,o)}):i=e}this.destination=new xp(i)}};function Wu(n){Zt.useDeprecatedSynchronousErrorHandling?lT(n):Gu(n)}function uk(n){throw n}function Op(n,e){let{onStoppedNotification:t}=Zt;t&&Ro.setTimeout(()=>t(n,e))}var lk={closed:!0,next:_a,error:uk,complete:_a};var Mo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xt(n){return n}function Lp(...n){return Fp(n)}function Fp(n){return n.length===0?xt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=hk(t)?t:new Po(t,r,i);return No(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=dT(r),new r((i,o)=>{let s=new Po({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Mo](){return this}pipe(...t){return Fp(t)(this)}toPromise(t){return t=dT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function dT(n){var e;return(e=n??Zt.Promise)!==null&&e!==void 0?e:Promise}function dk(n){return n&&Z(n.next)&&Z(n.error)&&Z(n.complete)}function hk(n){return n&&n instanceof vi||dk(n)&&qu(n)}function Vp(n){return Z(n?.lift)}function fe(n){return e=>{if(Vp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new jp(n,e,t,r,i)}var jp=class extends vi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ko(){return fe((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Oo=class extends se{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Vp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oe;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oe.EMPTY)}return e}refCount(){return ko()(this)}};var hT=Ao(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class n extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ku(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new hT}next(t){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Pp:(this.currentObservers=null,o.push(t),new Oe(()=>{this.currentObservers=null,va(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new se;return t.source=this,t}}return n.create=(e,t)=>new Ku(e,t),n})(),Ku=class extends $e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Pp}};var _e=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Dt=new se(n=>n.complete());function fT(n){return n&&Z(n.schedule)}function pT(n){return n[n.length-1]}function Qu(n){return Z(pT(n))?n.pop():void 0}function Rr(n){return fT(pT(n))?n.pop():void 0}function Up(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function mT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function gT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _i(n){return this instanceof _i?(this.v=n,this):new _i(n)}function yT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,x){o.push([y,N,R,x])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof _i?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function vT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gT=="function"?gT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Yu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ju(n){return Z(n?.then)}function Zu(n){return Z(n[Mo])}function Xu(n){return Symbol.asyncIterator&&Z(n?.[Symbol.asyncIterator])}function el(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tl=fk();function nl(n){return Z(n?.[tl])}function rl(n){return yT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield _i(t.read());if(i)return yield _i(void 0);yield yield _i(r)}}finally{t.releaseLock()}})}function il(n){return Z(n?.getReader)}function xe(n){if(n instanceof se)return n;if(n!=null){if(Zu(n))return pk(n);if(Yu(n))return gk(n);if(Ju(n))return mk(n);if(Xu(n))return _T(n);if(nl(n))return yk(n);if(il(n))return vk(n)}throw el(n)}function pk(n){return new se(e=>{let t=n[Mo]();if(Z(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gk(n){return new se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function mk(n){return new se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Gu)})}function yk(n){return new se(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function _T(n){return new se(e=>{_k(n,e).catch(t=>e.error(t))})}function vk(n){return _T(rl(n))}function _k(n,e){var t,r,i,o;return mT(this,void 0,void 0,function*(){try{for(t=vT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ct(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ol(n,e=0){return fe((t,r)=>{t.subscribe(ue(r,i=>Ct(r,n,()=>r.next(i),e),()=>Ct(r,n,()=>r.complete(),e),i=>Ct(r,n,()=>r.error(i),e)))})}function sl(n,e=0){return fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function IT(n,e){return xe(n).pipe(sl(e),ol(e))}function ET(n,e){return xe(n).pipe(sl(e),ol(e))}function wT(n,e){return new se(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function TT(n,e){return new se(t=>{let r;return Ct(t,e,()=>{r=n[tl](),Ct(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function al(n,e){if(!n)throw new Error("Iterable cannot be null");return new se(t=>{Ct(t,e,()=>{let r=n[Symbol.asyncIterator]();Ct(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function bT(n,e){return al(rl(n),e)}function DT(n,e){if(n!=null){if(Zu(n))return IT(n,e);if(Yu(n))return wT(n,e);if(Ju(n))return ET(n,e);if(Xu(n))return al(n,e);if(nl(n))return TT(n,e);if(il(n))return bT(n,e)}throw el(n)}function we(n,e){return e?DT(n,e):xe(n)}function U(...n){let e=Rr(n);return we(n,e)}function xo(n,e){let t=Z(n)?n:()=>n,r=i=>i.error(t());return new se(e?i=>e.schedule(r,0,i):r)}function Bp(n){return!!n&&(n instanceof se||Z(n.lift)&&Z(n.subscribe))}var Wn=Ao(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return fe((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Ik}=Array;function Ek(n,e){return Ik(e)?n(...e):n(e)}function cl(n){return Q(e=>Ek(n,e))}var{isArray:wk}=Array,{getPrototypeOf:Tk,prototype:bk,keys:Dk}=Object;function ul(n){if(n.length===1){let e=n[0];if(wk(e))return{args:e,keys:null};if(Ck(e)){let t=Dk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Ck(n){return n&&typeof n=="object"&&Tk(n)===bk}function ll(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ia(...n){let e=Rr(n),t=Qu(n),{args:r,keys:i}=ul(n);if(r.length===0)return we([],e);let o=new se(Sk(r,e,i?s=>ll(i,s):xt));return t?o.pipe(cl(t)):o}function Sk(n,e,t=xt){return r=>{CT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)CT(e,()=>{let l=we(n[u],e),h=!1;l.subscribe(ue(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function CT(n,e,t){n?Ct(t,n,e):e()}function ST(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;xe(t(N,h++)).subscribe(ue(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();s?Ct(e,s,()=>C(x)):C(x)}m()}catch(x){e.error(x)}}))};return n.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Pe(n,e,t=1/0){return Z(e)?Pe((r,i)=>Q((o,s)=>e(r,o,i,s))(xe(n(r,i))),t):(typeof e=="number"&&(t=e),fe((r,i)=>ST(r,i,n,t)))}function Nr(n=1/0){return Pe(xt,n)}function AT(){return Nr(1)}function Lo(...n){return AT()(we(n,Rr(n)))}function Ea(n){return new se(e=>{xe(n()).subscribe(e)})}function Ak(...n){let e=Qu(n),{args:t,keys:r}=ul(n),i=new se(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;xe(t[h]).subscribe(ue(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?ll(r,a):a),o.complete())}))}});return e?i.pipe(cl(e)):i}function ut(n,e){return fe((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function lt(n){return fe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=xe(n(s,lt(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function RT(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ue(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function mn(n,e){return Z(e)?Pe(n,e,1):Pe(n,1)}function Pr(n){return fe((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Kn(n){return n<=0?()=>Dt:fe((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dl(n=Rk){return fe((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Rk(){return new Wn}function Ii(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):xt,Kn(1),t?Pr(e):dl(()=>new Wn))}function Fo(n){return n<=0?()=>Dt:fe((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $p(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):xt,Fo(1),t?Pr(e):dl(()=>new Wn))}function Hp(n,e){return fe(RT(n,e,arguments.length>=2,!0))}function zp(...n){let e=Rr(n);return fe((t,r)=>{(e?Lo(n,t,e):Lo(n,t)).subscribe(r)})}function _t(n,e){return fe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;xe(n(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function hl(n){return fe((e,t)=>{xe(n).subscribe(ue(t,()=>t.complete(),_a)),!t.closed&&e.subscribe(t)})}function qe(n,e,t){let r=Z(n)||e||t?{next:n,error:e,complete:t}:n;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):xt}function NT(n){let e=ne(null);try{return n()}finally{ne(e)}}var yl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(jo(e,t)),this.code=e}};function Nk(n){return`NG0${Math.abs(n)}`}function jo(n,e){return`${Nk(n)}${e?": "+e:""}`}var Da=globalThis;function Te(n){for(let e in n)if(n[e]===Te)return e;throw Error("")}function OT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function St(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(St).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function vl(n,e){return n?e?`${n} ${e}`:n:e||""}var Pk=Te({__forward_ref__:Te});function _l(n){return n.__forward_ref__=_l,n.toString=function(){return St(this())},n}function et(n){return rg(n)?n():n}function rg(n){return typeof n=="function"&&n.hasOwnProperty(Pk)&&n.__forward_ref__===_l}function xT(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function F(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ca(n){return Mk(n,Il)}function ig(n){return Ca(n)!==null}function Mk(n,e){return n.hasOwnProperty(e)&&n[e]||null}function kk(n){let e=n?.[Il]??null;return e||null}function Gp(n){return n&&n.hasOwnProperty(pl)?n[pl]:null}var Il=Te({\u0275prov:Te}),pl=Te({\u0275inj:Te}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=F({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function og(n){return n&&!!n.\u0275providers}var sg=Te({\u0275cmp:Te}),ag=Te({\u0275dir:Te}),cg=Te({\u0275pipe:Te}),ug=Te({\u0275mod:Te}),Ta=Te({\u0275fac:Te}),Di=Te({__NG_ELEMENT_ID__:Te}),PT=Te({__NG_ENV_ID__:Te});function Ci(n){return typeof n=="string"?n:n==null?"":String(n)}function LT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ci(n)}function lg(n,e){throw new j(-200,n)}function El(n,e){throw new j(-201,!1)}var Wp;function FT(){return Wp}function It(n){let e=Wp;return Wp=n,e}function dg(n,e,t){let r=Ca(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;El(n,"Injector")}var Ok={},Ei=Ok,Kp="__NG_DI_FLAG__",Qp=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=wi(t)||0;try{return this.injector.get(e,r&8?null:Ei,r)}catch(i){if(bo(i))return i;throw i}}},gl="ngTempTokenPath",xk="ngTokenPath",Lk=/\n/gm,Fk="\u0275",MT="__source";function Vk(n,e=0){let t=bp();if(t===void 0)throw new j(-203,!1);if(t===null)return dg(n,void 0,e);{let r=jk(e),i=t.retrieve(n,r);if(bo(i)){if(r.optional)return null;throw i}return i}}function B(n,e=0){return(FT()||Vk)(et(n),e)}function P(n,e){return B(n,wi(e))}function wi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function jk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Yp(n){let e=[];for(let t=0;t<n.length;t++){let r=et(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Uk(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(B(i,o))}else e.push(B(r))}return e}function hg(n,e){return n[Kp]=e,n.prototype[Kp]=e,n}function Uk(n){return n[Kp]}function Bk(n,e,t,r){let i=n[gl];throw e[MT]&&i.unshift(e[MT]),n.message=$k(`
`+n.message,i,t,r),n[xk]=i,n[gl]=null,n}function $k(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Fk?n.slice(2):n;let i=St(e);if(Array.isArray(e))i=e.map(St).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):St(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Lk,`
  `)}`}function Mr(n,e){let t=n.hasOwnProperty(Ta);return t?n[Ta]:null}function VT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function jT(n){return n.flat(Number.POSITIVE_INFINITY)}function wl(n,e){n.forEach(t=>Array.isArray(t)?wl(t,e):e(t))}function fg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Sa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function UT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Tl(n,e,t){let r=Uo(n,e);return r>=0?n[r|1]=t:(r=~r,UT(n,r,e,t)),r}function bl(n,e){let t=Uo(n,e);if(t>=0)return n[t|1]}function Uo(n,e){return Hk(n,e,1)}function Hk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Or={},Et=[],Xn=new H(""),pg=new H("",-1),gg=new H(""),ba=class{get(e,t=Ei){if(t===Ei)throw new Nu(`NullInjectorError: No provider for ${St(e)}!`);return t}};function mg(n){return n[ug]||null}function er(n){return n[sg]||null}function yg(n){return n[ag]||null}function BT(n){return n[cg]||null}function yn(n){return{\u0275providers:n}}function $T(n){return yn([{provide:Xn,multi:!0,useValue:n}])}function HT(...n){return{\u0275providers:vg(!0,n),\u0275fromNgModule:!0}}function vg(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return wl(e,s=>{let a=s;ml(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&zT(i,o),t}function zT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];_g(i,o=>{e(o,r)})}}function ml(n,e,t,r){if(n=et(n),!n)return!1;let i=null,o=Gp(n),s=!o&&er(n);if(!o&&!s){let u=n.ngModule;if(o=Gp(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ml(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{wl(o.imports,h=>{ml(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&zT(l,e)}if(!a){let l=Mr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Et},i),e({provide:gg,useValue:i,multi:!0},i),e({provide:Xn,useValue:()=>B(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;_g(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function _g(n,e){for(let t of n)og(t)&&(t=t.\u0275providers),Array.isArray(t)?_g(t,e):e(t)}var zk=Te({provide:String,useValue:Te});function qT(n){return n!==null&&typeof n=="object"&&zk in n}function qk(n){return!!(n&&n.useExisting)}function Gk(n){return!!(n&&n.useFactory)}function Ti(n){return typeof n=="function"}function GT(n){return!!n.useClass}var Aa=new H(""),fl={},kT={},qp;function Ra(){return qp===void 0&&(qp=new ba),qp}var Me=class{},bi=class extends Me{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Zp(e,s=>this.processProvider(s)),this.records.set(pg,Vo(void 0,this)),i.has("environment")&&this.records.set(Me,Vo(void 0,this));let o=this.records.get(Aa);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gg,Et,{self:!0}))}retrieve(e,t){let r=wi(t)||0;try{return this.get(e,Ei,r)}catch(i){if(bo(i))return i;throw i}}destroy(){wa(this),this._destroyed=!0;let e=ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ne(e)}}onDestroy(e){return wa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){wa(this);let t=Gn(this),r=It(void 0),i;try{return e()}finally{Gn(t),It(r)}}get(e,t=Ei,r){if(wa(this),e.hasOwnProperty(PT))return e[PT](this);let i=wi(r),o,s=Gn(this),a=It(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Jk(e)&&Ca(e);h&&this.injectableDefInScope(h)?l=Vo(Jp(e),fl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let u=i&2?Ra():this.parent;return t=i&8&&t===Ei?null:t,u.get(e,t)}catch(u){if(bo(u)){if((u[gl]=u[gl]||[]).unshift(St(e)),s)throw u;return Bk(u,e,"R3InjectorError",this.source)}else throw u}finally{It(a),Gn(s)}}resolveInjectorInitializers(){let e=ne(null),t=Gn(this),r=It(void 0),i;try{let o=this.get(Xn,Et,{self:!0});for(let s of o)s()}finally{Gn(t),It(r),ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(St(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=et(e);let t=Ti(e)?e:et(e&&e.provide),r=Kk(e);if(!Ti(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Vo(void 0,fl,!0),i.factory=()=>Yp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ne(null);try{return t.value===kT?lg(St(e)):t.value===fl&&(t.value=kT,t.value=t.factory()),typeof t.value=="object"&&t.value&&Yk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ne(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=et(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Jp(n){let e=Ca(n),t=e!==null?e.factory:Mr(n);if(t!==null)return t;if(n instanceof H)throw new j(204,!1);if(n instanceof Function)return Wk(n);throw new j(204,!1)}function Wk(n){if(n.length>0)throw new j(204,!1);let t=kk(n);return t!==null?()=>t.factory(n):()=>new n}function Kk(n){if(qT(n))return Vo(void 0,n.useValue);{let e=Ig(n);return Vo(e,fl)}}function Ig(n,e,t){let r;if(Ti(n)){let i=et(n);return Mr(i)||Jp(i)}else if(qT(n))r=()=>et(n.useValue);else if(Gk(n))r=()=>n.useFactory(...Yp(n.deps||[]));else if(qk(n))r=()=>B(et(n.useExisting));else{let i=et(n&&(n.useClass||n.provide));if(Qk(n))r=()=>new i(...Yp(n.deps));else return Mr(i)||Jp(i)}return r}function wa(n){if(n.destroyed)throw new j(205,!1)}function Vo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Qk(n){return!!n.deps}function Yk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Jk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Zp(n,e){for(let t of n)Array.isArray(t)?Zp(t,e):t&&og(t)?Zp(t.\u0275providers,e):e(t)}function dt(n,e){let t;n instanceof bi?(wa(n),t=n):t=new Qp(n);let r,i=Gn(t),o=It(void 0);try{return e()}finally{Gn(i),It(o)}}function WT(){return FT()!==void 0||bp()!=null}var en=0,ee=1,Y=2,Ge=3,zt=4,qt=5,Na=6,Bo=7,ht=8,Si=9,vn=10,Re=11,$o=12,Eg=13,Ai=14,Gt=15,xr=16,Ri=17,_n=18,Pa=19,wg=20,Yn=21,Dl=22,Ma=23,Ft=24,Ni=25,At=26,KT=1;var Lr=7,ka=8,Pi=9,wt=10;function In(n){return Array.isArray(n)&&typeof n[KT]=="object"}function tn(n){return Array.isArray(n)&&n[KT]===!0}function Tg(n){return(n.flags&4)!==0}function Fr(n){return n.componentOffset>-1}function Cl(n){return(n.flags&1)===1}function En(n){return!!n.template}function Ho(n){return(n[Y]&512)!==0}function Mi(n){return(n[Y]&256)===256}var QT="svg",YT="math";function Wt(n){for(;Array.isArray(n);)n=n[en];return n}function bg(n,e){return Wt(e[n])}function nn(n,e){return Wt(e[n.index])}function Sl(n,e){return n.data[e]}function Dg(n,e){return n[e]}function Cg(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Kt(n,e){let t=e[n];return In(t)?t:t[en]}function JT(n){return(n[Y]&4)===4}function Al(n){return(n[Y]&128)===128}function ZT(n){return tn(n[Ge])}function Oa(n,e){return e==null?null:n[e]}function Sg(n){n[Ri]=0}function Ag(n){n[Y]&1024||(n[Y]|=1024,Al(n)&&zo(n))}function XT(n,e){for(;n>0;)e=e[Ai],n--;return e}function xa(n){return!!(n[Y]&9216||n[Ft]?.dirty)}function Rl(n){n[vn].changeDetectionScheduler?.notify(8),n[Y]&64&&(n[Y]|=1024),xa(n)&&zo(n)}function zo(n){n[vn].changeDetectionScheduler?.notify(0);let e=kr(n);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!Al(e)));)e=kr(e)}function Rg(n,e){if(Mi(n))throw new j(911,!1);n[Yn]===null&&(n[Yn]=[]),n[Yn].push(e)}function eb(n,e){if(n[Yn]===null)return;let t=n[Yn].indexOf(e);t!==-1&&n[Yn].splice(t,1)}function kr(n){let e=n[Ge];return tn(e)?e[Ge]:e}function Ng(n){return n[Bo]??=[]}function Pg(n){return n.cleanup??=[]}function tb(n,e,t,r){let i=Ng(e);i.push(t),n.firstCreatePass&&Pg(n).push(r,i.length-1)}var re={lFrame:Ib(null),bindingsEnabled:!0,skipHydrationRootTNode:null},La=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(La||{}),Zk=0,Xp=!1;function nb(){return re.lFrame.elementDepthCount}function rb(){re.lFrame.elementDepthCount++}function ib(){re.lFrame.elementDepthCount--}function Mg(){return re.bindingsEnabled}function ob(){return re.skipHydrationRootTNode!==null}function sb(n){return re.skipHydrationRootTNode===n}function ab(){re.skipHydrationRootTNode=null}function le(){return re.lFrame.lView}function We(){return re.lFrame.tView}function cb(n){return re.lFrame.contextLView=n,n[ht]}function ub(n){return re.lFrame.contextLView=null,n}function tt(){let n=kg();for(;n!==null&&n.type===64;)n=n.parent;return n}function kg(){return re.lFrame.currentTNode}function lb(){let n=re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function qo(n,e){let t=re.lFrame;t.currentTNode=n,t.isParent=e}function Og(){return re.lFrame.isParent}function db(){re.lFrame.isParent=!1}function hb(){return re.lFrame.contextLView}function xg(n){xT("Must never be called in production mode"),Zk=n}function Lg(){return Xp}function Fg(n){let e=Xp;return Xp=n,e}function Nl(){let n=re.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function fb(){return re.lFrame.bindingIndex}function pb(n){return re.lFrame.bindingIndex=n}function Fa(){return re.lFrame.bindingIndex++}function Pl(n){let e=re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function gb(){return re.lFrame.inI18n}function mb(n,e){let t=re.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ml(e)}function yb(){return re.lFrame.currentDirectiveIndex}function Ml(n){re.lFrame.currentDirectiveIndex=n}function vb(n){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Vg(){return re.lFrame.currentQueryIndex}function kl(n){re.lFrame.currentQueryIndex=n}function Xk(n){let e=n[ee];return e.type===2?e.declTNode:e.type===1?n[qt]:null}function jg(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Xk(o),i===null||(o=o[Ai],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=re.lFrame=_b();return r.currentTNode=e,r.lView=n,!0}function Ol(n){let e=_b(),t=n[ee];re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function _b(){let n=re.lFrame,e=n===null?null:n.child;return e===null?Ib(n):e}function Ib(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Eb(){let n=re.lFrame;return re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ug=Eb;function xl(){let n=Eb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wb(n){return(re.lFrame.contextLView=XT(n,re.lFrame.contextLView))[ht]}function tr(){return re.lFrame.selectedIndex}function Vr(n){re.lFrame.selectedIndex=n}function Ll(){let n=re.lFrame;return Sl(n.tView,n.selectedIndex)}function Tb(){return re.lFrame.currentNamespace}var bb=!0;function Fl(){return bb}function Vl(n){bb=n}function eg(n,e=null,t=null,r){let i=Bg(n,e,t,r);return i.resolveInjectorInitializers(),i}function Bg(n,e=null,t=null,r,i=new Set){let o=[t||Et,HT(n)];return r=r||(typeof n=="object"?void 0:St(n)),new bi(o,e||Ra(),r||null,i)}var Lt=class n{static THROW_IF_NOT_FOUND=Ei;static NULL=new ba;static create(e,t){if(Array.isArray(e))return eg({name:""},t,e,"");{let r=e.name??"";return eg({name:r},e.parent,e.providers,r)}}static \u0275prov=F({token:n,providedIn:"any",factory:()=>B(pg)});static __NG_ELEMENT_ID__=-1},De=new H(""),wn=(()=>{class n{static __NG_ELEMENT_ID__=eO;static __NG_ENV_ID__=t=>t}return n})(),tg=class extends wn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Mi(this._lView)}onDestroy(e){let t=this._lView;return Rg(t,e),()=>eb(t,e)}};function eO(){return new tg(le())}var Xt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ft=new H("",{providedIn:"root",factory:()=>{let n=P(Me),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Xt),e.handleError(t))}}}),Db={provide:Xn,useValue:()=>void P(Xt),multi:!0},tO=new H("",{providedIn:"root",factory:()=>{let n=P(De).defaultView;if(!n)return;let e=P(ft),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),P(wn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function nO(){return yn([$T(()=>void P(tO))])}function $g(n){return typeof n=="function"&&n[ct]!==void 0}function jl(n,e){let[t,r,i]=Rp(n,e?.equal),o=t,s=o[ct];return o.set=r,o.update=i,o.asReadonly=Cb.bind(o),o}function Cb(){let n=this[ct];if(n.readonlyFn===void 0){let e=()=>this();e[ct]=n,n.readonlyFn=e}return n.readonlyFn}function Hg(n){return $g(n)&&typeof n.set=="function"}var Jn=class{},Va=new H("",{providedIn:"root",factory:()=>!1});var zg=new H(""),qg=new H("");var Ul=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=rO}return n})();function rO(){return new Ul(le(),tt())}var nr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new _e(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new se(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),Bl=(()=>{class n{internalPendingTasks=P(nr);scheduler=P(Jn);errorHandler=P(ft);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})();function ja(...n){}var Gg=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>new ng})}return n})(),ng=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Qo(n){return{toString:n}.toString()}var $l="__parameters__";function dO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function nD(n,e,t){return Qo(()=>{let r=dO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty($l)?u[$l]:Object.defineProperty(u,$l,{value:[]})[$l];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var rD=hg(nD("Optional"),8);var iD=hg(nD("SkipSelf"),4);function hO(n){return typeof n=="function"}var Ql=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function oD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ji=(()=>{let n=()=>sD;return n.ngInherit=!0,n})();function sD(n){return n.type.prototype.ngOnChanges&&(n.setInput=pO),fO}function fO(){let n=cD(this),e=n?.current;if(e){let t=n.previous;if(t===Or)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function pO(n,e,t,r,i){let o=this.declaredInputs[r],s=cD(n)||gO(n,{previous:Or,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Ql(l&&l.currentValue,t,u===Or),oD(n,e,i,t)}var aD="__ngSimpleChanges__";function cD(n){return n[aD]||null}function gO(n,e){return n[aD]=e}var Sb=[];var ve=function(n,e=null,t){for(let r=0;r<Sb.length;r++){let i=Sb[r];i(n,e,t)}};function mO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=sD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function uD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function ql(n,e,t){lD(n,e,3,t)}function Gl(n,e,t,r){(n[Y]&3)===t&&lD(n,e,t,r)}function Wg(n,e){let t=n[Y];(t&3)===e&&(t&=16383,t+=1,n[Y]=t)}function lD(n,e,t,r){let i=r!==void 0?n[Ri]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Ri]+=65536),(a<o||o==-1)&&(yO(n,t,e,u),n[Ri]=(n[Ri]&4294901760)+u+2),u++}function Ab(n,e){ve(4,n,e);let t=ne(null);try{e.call(n)}finally{ne(t),ve(5,n,e)}}function yO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Y]>>14<n[Ri]>>16&&(n[Y]&3)===e&&(n[Y]+=16384,Ab(a,o)):Ab(a,o)}var Wo=-1,Oi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function vO(n){return(n.flags&8)!==0}function _O(n){return(n.flags&16)!==0}function IO(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];EO(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function dD(n){return n===3||n===4||n===6}function EO(n){return n.charCodeAt(0)===64}function $a(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Rb(n,t,i,null,e[++r]):Rb(n,t,i,null,null))}}return n}function Rb(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function hD(n){return n!==Wo}function Yl(n){return n&32767}function wO(n){return n>>16}function Jl(n,e){let t=wO(n),r=e;for(;t>0;)r=r[Ai],t--;return r}var rm=!0;function Zl(n){let e=rm;return rm=n,e}var TO=256,fD=TO-1,pD=5,bO=0,Tn={};function DO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Di)&&(r=t[Di]),r==null&&(r=t[Di]=bO++);let i=r&fD,o=1<<i;e.data[n+(i>>pD)]|=o}function Xl(n,e){let t=gD(n,e);if(t!==-1)return t;let r=e[ee];r.firstCreatePass&&(n.injectorIndex=e.length,Kg(r.data,n),Kg(e,null),Kg(r.blueprint,null));let i=Rm(n,e),o=n.injectorIndex;if(hD(i)){let s=Yl(i),a=Jl(i,e),u=a[ee].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Kg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function gD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Rm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ID(i),r===null)return Wo;if(t++,i=i[Ai],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Wo}function im(n,e,t){DO(n,e,t)}function CO(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(dD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function mD(n,e,t){if(t&8||n!==void 0)return n;El(e,"NodeInjector")}function yD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Si],o=It(void 0);try{return i?i.get(e,r,t&8):dg(e,r,t&8)}finally{It(o)}}return mD(r,e,t)}function vD(n,e,t,r=0,i){if(n!==null){if(e[Y]&2048&&!(r&2)){let s=NO(n,e,t,r,Tn);if(s!==Tn)return s}let o=_D(n,e,t,r,Tn);if(o!==Tn)return o}return yD(e,t,r,i)}function _D(n,e,t,r,i){let o=AO(t);if(typeof o=="function"){if(!jg(e,n,r))return r&1?mD(i,t,r):yD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))El(t);else return s}finally{Ug()}}else if(typeof o=="number"){let s=null,a=gD(n,e),u=Wo,l=r&1?e[Gt][qt]:null;for((a===-1||r&4)&&(u=a===-1?Rm(n,e):e[a+8],u===Wo||!Pb(r,!1)?a=-1:(s=e[ee],a=Yl(u),e=Jl(u,e)));a!==-1;){let h=e[ee];if(Nb(o,a,h.data)){let p=SO(a,e,t,s,r,l);if(p!==Tn)return p}u=e[a+8],u!==Wo&&Pb(r,e[ee].data[a+8]===l)&&Nb(o,a,e)?(s=h,a=Yl(u),e=Jl(u,e)):a=-1}}return i}function SO(n,e,t,r,i,o){let s=e[ee],a=s.data[n+8],u=r==null?Fr(a)&&rm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Wl(a,s,t,u,l);return h!==null?Ha(e,s,h,a):Tn}function Wl(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&t===C||y>=u&&C.type===t)return y}if(i){let y=s[u];if(y&&En(y)&&y.type===t)return u}return null}function Ha(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Oi){let s=i;s.resolving&&lg(LT(o[t]));let a=Zl(s.canSeeViewProviders);s.resolving=!0;let u=o[t].type||o[t],l,h=s.injectImpl?It(s.injectImpl):null,p=jg(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&mO(t,o[t],e)}finally{h!==null&&It(h),Zl(a),s.resolving=!1,Ug()}}return i}function AO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Di)?n[Di]:void 0;return typeof e=="number"?e>=0?e&fD:RO:e}function Nb(n,e,t){let r=1<<n;return!!(t[e+(n>>pD)]&r)}function Pb(n,e){return!(n&2)&&!(n&1&&e)}var ki=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return vD(this._tNode,this._lView,e,wi(r),t)}};function RO(){return new ki(tt(),le())}function hd(n){return Qo(()=>{let e=n.prototype.constructor,t=e[Ta]||om(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ta]||om(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function om(n){return rg(n)?()=>{let e=om(et(n));return e&&e()}:Mr(n)}function NO(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Y]&2048&&!Ho(s);){let a=_D(o,s,t,r|2,Tn);if(a!==Tn)return a;let u=o.parent;if(!u){let l=s[wg];if(l){let h=l.get(t,Tn,r);if(h!==Tn)return h}u=ID(s),s=s[Ai]}o=u}return i}function ID(n){let e=n[ee],t=e.type;return t===2?e.declTNode:t===1?n[qt]:null}function Wa(n){return CO(tt(),n)}function PO(){return Yo(tt(),le())}function Yo(n,e){return new Dn(nn(n,e))}var Dn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=PO}return n})();function MO(n){return n instanceof Dn?n.nativeElement:n}function kO(){return this._results[Symbol.iterator]()}var ed=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new $e}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=jT(e);(this._changesDetected=!VT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=kO};function ED(n){return(n.flags&128)===128}var Nm=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Nm||{}),wD=new Map,OO=0;function xO(){return OO++}function LO(n){wD.set(n[Pa],n)}function sm(n){wD.delete(n[Pa])}var Mb="__ngContext__";function Ka(n,e){In(e)?(n[Mb]=e[Pa],LO(e)):n[Mb]=e}function TD(n){return DD(n[$o])}function bD(n){return DD(n[zt])}function DD(n){for(;n!==null&&!tn(n);)n=n[zt];return n}var am;function Pm(n){am=n}function CD(){if(am!==void 0)return am;if(typeof document<"u")return document;throw new j(210,!1)}var fd=new H("",{providedIn:"root",factory:()=>FO}),FO="ng",pd=new H(""),Jo=new H("",{providedIn:"platform",factory:()=>"unknown"});var gd=new H("",{providedIn:"root",factory:()=>CD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var VO="h",jO="b";var SD=!1,AD=new H("",{providedIn:"root",factory:()=>SD});var UO=(n,e,t,r)=>{};function BO(n,e,t,r){UO(n,e,t,r)}var $O=()=>null;function RD(n,e,t=!1){return $O(n,e,t)}function ND(n,e){let t=n.contentQueries;if(t!==null){let r=ne(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];kl(o),a.contentQueries(2,e[s],s)}}}finally{ne(r)}}}function cm(n,e,t){kl(0);let r=ne(null);try{e(n,t)}finally{ne(r)}}function PD(n,e,t){if(Tg(e)){let r=ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ne(r)}}}var rr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(rr||{});var Hl;function HO(){if(Hl===void 0&&(Hl=null,Da.trustedTypes))try{Hl=Da.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Hl}function kb(n){return HO()?.createScriptURL(n)||n}var td=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yl})`}};function Zo(n){return n instanceof td?n.changingThisBreaksApplicationSecurity:n}function Mm(n,e){let t=MD(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${yl})`)}return t===e}function MD(n){return n instanceof td&&n.getTypeName()||null}var zO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kD(n){return n=String(n),n.match(zO)?n:"unsafe:"+n}var md=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(md||{});function OD(n){let e=LD();return e?e.sanitize(md.URL,n)||"":Mm(n,"URL")?Zo(n):kD(Ci(n))}function xD(n){let e=LD();if(e)return kb(e.sanitize(md.RESOURCE_URL,n)||"");if(Mm(n,"ResourceURL"))return kb(Zo(n));throw new j(904,!1)}function qO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?xD:OD}function km(n,e,t){return qO(e,t)(n)}function LD(){let n=le();return n&&n[vn].sanitizer}function GO(n){return n.ownerDocument.defaultView}function FD(n){return n instanceof Function?n():n}function WO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var VD="ng-template";function KO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&WO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Om(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Om(n){return n.type===4&&n.value!==VD}function QO(n,e,t){let r=n.type===4&&!t?VD:n.value;return e===r}function YO(n,e,t){let r=4,i=n.attrs,o=i!==null?XO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!rn(r)&&!rn(u))return!1;if(s&&rn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!QO(n,u,t)||u===""&&e.length===1){if(rn(r))return!1;s=!0}}else if(r&8){if(i===null||!KO(n,i,u,t)){if(rn(r))return!1;s=!0}}else{let l=e[++a],h=JO(u,i,Om(n),t);if(h===-1){if(rn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(rn(r))return!1;s=!0}}}}return rn(r)||s}function rn(n){return(n&1)===0}function JO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ex(e,n)}function ZO(n,e,t=!1){for(let r=0;r<e.length;r++)if(YO(n,e[r],t))return!0;return!1}function XO(n){for(let e=0;e<n.length;e++){let t=n[e];if(dD(t))return e}return n.length}function ex(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Ob(n,e){return n?":not("+e.trim()+")":e}function tx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!rn(s)&&(e+=Ob(o,i),i=""),r=s,o=o||!rn(r);t++}return i!==""&&(e+=Ob(o,i)),e}function nx(n){return n.map(tx).join(",")}function rx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!rn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Rt={};function ix(n,e){return n.createText(e)}function ox(n,e,t){n.setValue(e,t)}function jD(n,e,t){return n.createElement(e,t)}function nd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function UD(n,e,t){n.appendChild(e,t)}function xb(n,e,t,r,i){r!==null?nd(n,e,t,r,i):UD(n,e,t)}function sx(n,e,t){n.removeChild(null,e,t)}function ax(n,e,t){n.setAttribute(e,"style",t)}function cx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function BD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&IO(n,e,r),i!==null&&cx(n,e,i),o!==null&&ax(n,e,o)}function xm(n,e,t,r,i,o,s,a,u,l,h){let p=At+r,m=p+i,y=ux(p,m),C=typeof l=="function"?l():l;return y[ee]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function ux(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Rt);return t}function lx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=xm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Lm(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[en]=i,p[Y]=r|4|128|8|64|1024,(l!==null||n&&n[Y]&2048)&&(p[Y]|=2048),Sg(p),p[Ge]=p[Ai]=n,p[ht]=t,p[vn]=s||n&&n[vn],p[Re]=a||n&&n[Re],p[Si]=u||n&&n[Si]||null,p[qt]=o,p[Pa]=xO(),p[Na]=h,p[wg]=l,p[Gt]=e.type==2?n[Gt]:p,p}function dx(n,e,t){let r=nn(e,n),i=lx(t),o=n[vn].rendererFactory,s=Fm(n,Lm(n,i,null,$D(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function $D(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function HD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Fm(n,e){return n[$o]?n[Eg][zt]=e:n[$o]=e,n[Eg]=e,e}function hx(n=1){zD(We(),le(),tr()+n,!1)}function zD(n,e,t,r){if(!r)if((e[Y]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ql(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Gl(e,o,0,t)}Vr(t)}var yd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(yd||{});function um(n,e,t,r){let i=ne(null);try{let[o,s,a]=n.inputs[t],u=null;(s&yd.SignalBased)!==0&&(u=e[o][ct]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):oD(e,u,o,r)}finally{ne(i)}}function qD(n,e,t,r,i){let o=tr(),s=r&2;try{Vr(-1),s&&e.length>At&&zD(n,e,At,!1),ve(s?2:0,i,t),t(r,i)}finally{Vr(o),ve(s?3:1,i,t)}}function Vm(n,e,t){_x(n,e,t),(t.flags&64)===64&&Ix(n,e,t)}function GD(n,e,t=nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function fx(n,e,t,r){let o=r.get(AD,SD)||t===rr.ShadowDom,s=n.selectRootElement(e,o);return px(s),s}function px(n){gx(n)}var gx=()=>null;function mx(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function WD(n,e,t,r,i,o){let s=e[ee];if(jm(n,s,e,t,r)){Fr(n)&&vx(e,n.index);return}yx(n,e,t,r,i,o)}function yx(n,e,t,r,i,o){if(n.type&3){let s=nn(n,e);t=mx(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function vx(n,e){let t=Kt(e,n);t[Y]&16||(t[Y]|=64)}function _x(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Fr(t)&&dx(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Xl(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Ha(e,n,s,t);if(Ka(u,e),o!==null&&bx(e,s-r,u,a,t,o),En(a)){let l=Kt(t.index,e);l[ht]=Ha(e,n,s,t)}}}function Ix(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=yb();try{Vr(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Ml(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ex(u,l)}}finally{Vr(-1),Ml(s)}}function Ex(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function KD(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];ZO(e,o.selectors,!1)&&(r??=[],En(o)?r.unshift(o):r.push(o))}return r}function wx(n,e,t,r,i,o){let s=nn(n,e);Tx(e[Re],s,o,n.value,t,r,i)}function Tx(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Ci(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function bx(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];um(r,t,u,l)}}function Dx(n,e){let t=n[Si];if(!t)return;t.get(ft,null)?.(e)}function jm(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];um(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];um(h,l,r,i),a=!0}return a}function Cx(n,e){let t=Kt(e,n),r=t[ee];Sx(r,t);let i=t[en];i!==null&&t[Na]===null&&(t[Na]=RD(i,t[Si])),ve(18),Um(r,t,t[ht]),ve(19,t[ht])}function Sx(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Um(n,e,t){Ol(e);try{let r=n.viewQuery;r!==null&&cm(1,r,t);let i=n.template;i!==null&&qD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[_n]?.finishViewCreation(n),n.staticContentQueries&&ND(n,e),n.staticViewQueries&&cm(2,n.viewQuery,t);let o=n.components;o!==null&&Ax(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Y]&=-5,xl()}}function Ax(n,e){for(let t=0;t<e.length;t++)Cx(n,e[t])}function Rx(n,e,t,r){let i=ne(null);try{let o=e.tView,a=n[Y]&4096?4096:16,u=Lm(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[xr]=l;let h=n[_n];return h!==null&&(u[_n]=h.createEmbeddedView(o)),Um(o,u,t),u}finally{ne(i)}}function Lb(n,e){return!e||e.firstChild===null||ED(n)}var Fb=!1,Nx=new H(""),Px;function Bm(n,e){return Px(n,e)}var bn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(bn||{});function $m(n){return(n.flags&32)===32}function Go(n,e,t,r,i){if(r!=null){let o,s=!1;tn(r)?o=r:In(r)&&(s=!0,r=r[en]);let a=Wt(r);n===0&&t!==null?i==null?UD(e,t,a):nd(e,t,a,i||null,!0):n===1&&t!==null?nd(e,t,a,i||null,!0):n===2?sx(e,a,s):n===3&&e.destroyNode(a),o!=null&&Hx(e,n,o,t,i)}}function Mx(n,e){QD(n,e),e[en]=null,e[qt]=null}function kx(n,e,t,r,i,o){r[en]=i,r[qt]=e,vd(n,r,t,1,i,o)}function QD(n,e){e[vn].changeDetectionScheduler?.notify(9),vd(n,e,e[Re],2,null,null)}function Ox(n){let e=n[$o];if(!e)return Qg(n[ee],n);for(;e;){let t=null;if(In(e))t=e[$o];else{let r=e[wt];r&&(t=r)}if(!t){for(;e&&!e[zt]&&e!==n;)In(e)&&Qg(e[ee],e),e=e[Ge];e===null&&(e=n),In(e)&&Qg(e[ee],e),t=e&&e[zt]}e=t}}function Hm(n,e){let t=n[Pi],r=t.indexOf(e);t.splice(r,1)}function YD(n,e){if(Mi(e))return;let t=e[Re];t.destroyNode&&vd(n,e,t,3,null,null),Ox(e)}function Qg(n,e){if(Mi(e))return;let t=ne(null);try{e[Y]&=-129,e[Y]|=256,e[Ft]&&Vu(e[Ft]),Lx(n,e),xx(n,e),e[ee].type===1&&e[Re].destroy();let r=e[xr];if(r!==null&&tn(e[Ge])){r!==e[Ge]&&Hm(r,e);let i=e[_n];i!==null&&i.detachView(n)}sm(e)}finally{ne(t)}}function xx(n,e){let t=n.cleanup,r=e[Bo];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Bo]=null);let i=e[Yn];if(i!==null){e[Yn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Ma];if(o!==null){e[Ma]=null;for(let s of o)s.destroy()}}function Lx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Oi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ve(4,a,u);try{u.call(a)}finally{ve(5,a,u)}}else{ve(4,i,o);try{o.call(i)}finally{ve(5,i,o)}}}}}function Fx(n,e,t){return Vx(n,e.parent,t)}function Vx(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[en];if(Fr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===rr.None||i===rr.Emulated)return null}return nn(r,t)}function jx(n,e,t){return Bx(n,e,t)}function Ux(n,e,t){return n.type&40?nn(n,t):null}var Bx=Ux,Vb;function zm(n,e,t,r){let i=Fx(n,r,e),o=e[Re],s=r.parent||e[qt],a=jx(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)xb(o,i,t[u],a,!1);else xb(o,i,t,a,!1);Vb!==void 0&&Vb(o,r,e,t,i)}function Ua(n,e){if(e!==null){let t=e.type;if(t&3)return nn(e,n);if(t&4)return lm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ua(n,r);{let i=n[e.index];return tn(i)?lm(-1,i):Wt(i)}}else{if(t&128)return Ua(n,e.next);if(t&32)return Bm(e,n)()||Wt(n[e.index]);{let r=JD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=kr(n[Gt]);return Ua(i,r)}else return Ua(n,e.next)}}}return null}function JD(n,e){if(e!==null){let r=n[Gt][qt],i=e.projection;return r.projection[i]}return null}function lm(n,e){let t=wt+n+1;if(t<e.length){let r=e[t],i=r[ee].firstChild;if(i!==null)return Ua(r,i)}return e[Lr]}function qm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Ka(Wt(a),r),t.flags|=2),!$m(t))if(u&8)qm(n,e,t.child,r,i,o,!1),Go(e,n,i,a,o);else if(u&32){let l=Bm(t,r),h;for(;h=l();)Go(e,n,i,h,o);Go(e,n,i,a,o)}else u&16?$x(n,e,r,t,i,o):Go(e,n,i,a,o);t=s?t.projectionNext:t.next}}function vd(n,e,t,r,i,o){qm(t,r,n.firstChild,e,i,o,!1)}function $x(n,e,t,r,i,o){let s=t[Gt],u=s[qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Go(e,n,i,h,o)}else{let l=u,h=s[Ge];ED(r)&&(l.flags|=128),qm(n,e,l,h,i,o,!0)}}function Hx(n,e,t,r,i){let o=t[Lr],s=Wt(t);o!==s&&Go(e,n,r,o,i);for(let a=wt;a<t.length;a++){let u=t[a];vd(u[ee],u,n,e,r,o)}}function zx(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:bn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=bn.Important),n.setStyle(t,r,i,o))}}function za(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Wt(o)),tn(o)&&ZD(o,r);let s=t.type;if(s&8)za(n,e,t.child,r);else if(s&32){let a=Bm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=JD(e,t);if(Array.isArray(a))r.push(...a);else{let u=kr(e[Gt]);za(u[ee],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function ZD(n,e){for(let t=wt;t<n.length;t++){let r=n[t],i=r[ee].firstChild;i!==null&&za(r[ee],r,i,e)}n[Lr]!==n[en]&&e.push(n[Lr])}function XD(n){if(n[Ni]!==null){for(let e of n[Ni])e.impl.addSequence(e);n[Ni].length=0}}var eC=[];function qx(n){return n[Ft]??Gx(n)}function Gx(n){let e=eC.pop()??Object.create(Kx);return e.lView=n,e}function Wx(n){n.lView[Ft]!==n&&(n.lView=null,eC.push(n))}var Kx=oe(O({},gi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{zo(n.lView)},consumerOnSignalRead(){this.lView[Ft]=this}});function Qx(n){let e=n[Ft]??Object.create(Yx);return e.lView=n,e}var Yx=oe(O({},gi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=kr(n.lView);for(;e&&!tC(e[ee]);)e=kr(e);e&&Ag(e)},consumerOnSignalRead(){this.lView[Ft]=this}});function tC(n){return n.type!==2}function nC(n){if(n[Ma]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Ma])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Y]&8192)}}var Jx=100;function Gm(n,e=0){let r=n[vn].rendererFactory,i=!1;i||r.begin?.();try{Zx(n,e)}finally{i||r.end?.()}}function Zx(n,e){let t=Lg();try{Fg(!0),dm(n,e);let r=0;for(;xa(n);){if(r===Jx)throw new j(103,!1);r++,dm(n,1)}}finally{Fg(t)}}function rC(n,e){xg(e?La.Exhaustive:La.OnlyDirtyViews);try{Gm(n)}finally{xg(La.Off)}}function Xx(n,e,t,r){if(Mi(e))return;let i=e[Y],o=!1,s=!1;Ol(e);let a=!0,u=null,l=null;o||(tC(n)?(l=qx(e),u=mi(l)):Lu()===null?(a=!1,l=Qx(e),u=mi(l)):e[Ft]&&(Vu(e[Ft]),e[Ft]=null));try{Sg(e),pb(n.bindingStartIndex),t!==null&&qD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&ql(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Gl(e,y,0,null),Wg(e,0)}if(s||e1(e),nC(e),iC(e,0),n.contentQueries!==null&&ND(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&ql(e,y)}else{let y=n.contentHooks;y!==null&&Gl(e,y,1),Wg(e,1)}n1(n,e);let p=n.components;p!==null&&sC(e,p,0);let m=n.viewQuery;if(m!==null&&cm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&ql(e,y)}else{let y=n.viewHooks;y!==null&&Gl(e,y,2),Wg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Dl]){for(let y of e[Dl])y();e[Dl]=null}o||(XD(e),e[Y]&=-73)}catch(h){throw o||zo(e),h}finally{l!==null&&(Co(l,u),a&&Wx(l)),xl()}}function iC(n,e){for(let t=TD(n);t!==null;t=bD(t))for(let r=wt;r<t.length;r++){let i=t[r];oC(i,e)}}function e1(n){for(let e=TD(n);e!==null;e=bD(e)){if(!(e[Y]&2))continue;let t=e[Pi];for(let r=0;r<t.length;r++){let i=t[r];Ag(i)}}}function t1(n,e,t){ve(18);let r=Kt(e,n);oC(r,t),ve(19,r[ht])}function oC(n,e){Al(n)&&dm(n,e)}function dm(n,e){let r=n[ee],i=n[Y],o=n[Ft],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ya(o)),s||=!1,o&&(o.dirty=!1),n[Y]&=-9217,s)Xx(r,n,r.template,n[ht]);else if(i&8192){let a=ne(null);try{nC(n),iC(n,1);let u=r.components;u!==null&&sC(n,u,1),XD(n)}finally{ne(a)}}}function sC(n,e,t){for(let r=0;r<e.length;r++)t1(n,e[r],t)}function n1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Vr(~i);else{let o=i,s=t[++r],a=t[++r];mb(s,o);let u=e[o];ve(24,u),a(2,u),ve(25,u)}}}finally{Vr(-1)}}function Wm(n,e){let t=Lg()?64:1088;for(n[vn].changeDetectionScheduler?.notify(e);n;){n[Y]|=t;let r=kr(n);if(Ho(n)&&!r)return n;n=r}return null}function aC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function r1(n,e,t,r=!0){let i=e[ee];if(i1(i,e,n,t),r){let s=lm(t,n),a=e[Re],u=a.parentNode(n[Lr]);u!==null&&kx(i,n[qt],a,e,u,s)}let o=e[Na];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function hm(n,e){if(n.length<=wt)return;let t=wt+e,r=n[t];if(r){let i=r[xr];i!==null&&i!==n&&Hm(i,r),e>0&&(n[t-1][zt]=r[zt]);let o=Sa(n,wt+e);Mx(r[ee],r);let s=o[_n];s!==null&&s.detachView(o[ee]),r[Ge]=null,r[zt]=null,r[Y]&=-129}return r}function i1(n,e,t,r){let i=wt+r,o=t.length;r>0&&(t[i-1][zt]=e),r<o-wt?(e[zt]=t[i],fg(t,wt+r,e)):(t.push(e),e[zt]=null),e[Ge]=t;let s=e[xr];s!==null&&t!==s&&cC(s,e);let a=e[_n];a!==null&&a.insertView(n),Rl(e),e[Y]|=128}function cC(n,e){let t=n[Pi],r=e[Ge];if(In(r))n[Y]|=2;else{let i=r[Ge][Gt];e[Gt]!==i&&(n[Y]|=2)}t===null?n[Pi]=[e]:t.push(e)}var jr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ee];return za(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[ht]}set context(e){this._lView[ht]=e}get destroyed(){return Mi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ge];if(tn(e)){let t=e[ka],r=t?t.indexOf(this):-1;r>-1&&(hm(e,r),Sa(t,r))}this._attachedToViewContainer=!1}YD(this._lView[ee],this._lView)}onDestroy(e){Rg(this._lView,e)}markForCheck(){Wm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){Rl(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,Gm(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Si].get(Nx,Fb)}catch{this.exhaustive=Fb}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ho(this._lView),t=this._lView[xr];t!==null&&!e&&Hm(t,this._lView),QD(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=Ho(this._lView),r=this._lView[xr];r!==null&&!t&&cC(r,this._lView),Rl(this._lView)}};var Ur=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=o1;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Rx(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new jr(o)}}return n})();function o1(){return _d(tt(),le())}function _d(n,e){return n.type&4?new Ur(e,n,Yo(n,e)):null}function Km(n,e,t,r,i){let o=n.data[e];if(o===null)o=s1(n,e,t,r,i),gb()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=lb();o.injectorIndex=s===null?-1:s.injectorIndex}return qo(o,!0),o}function s1(n,e,t,r,i){let o=kg(),s=Og(),a=s?o:o&&o.parent,u=n.data[e]=c1(n,a,t,e,r,i);return a1(n,u,o,s),u}function a1(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function c1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ob()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var vW=new RegExp(`^(\\d+)*(${jO}|${VO})*(.*)`);var u1=()=>null;function jb(n,e){return u1(n,e)}var uC=class{},Id=class{},fm=class{resolveComponentFactory(e){throw new j(917,!1)}},Qa=class{static NULL=new fm},xi=class{},Xo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>l1()}return n})();function l1(){let n=le(),e=tt(),t=Kt(e.index,n);return(In(t)?t:n)[Re]}var lC=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>null})}return n})();var Kl={},pm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Kl,r);return i!==Kl||t===Kl?i:this.parentInjector.get(e,t,r)}};function Ub(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=vl(i,a);else if(o==2){let u=a,l=e[++s];r=vl(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Se(n,e=0){let t=le();if(t===null)return B(n,e);let r=tt();return vD(r,t,et(n),e)}function Qm(){let n="invalid";throw new Error(n)}function dC(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}f1(n,e,t,a,o,u,l)}o!==null&&r!==null&&d1(t,r,o)}function d1(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function h1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function f1(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&En(y)&&(u=!0,h1(n,t,m)),im(Xl(t,e),n,y.type)}_1(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=HD(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=$a(t.mergedAttrs,y.hostAttrs),g1(n,t,e,p,y),v1(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);t.directiveToIndex.set(y.type,[p,N+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}p1(n,t,o)}function p1(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Bb(0,e,i,r),Bb(1,e,i,r),Hb(e,r,!1);else{let o=t.get(i);$b(0,e,o,r),$b(1,e,o,r),Hb(e,r,!0)}}}function Bb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),hC(e,o)}}function $b(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),hC(e,s)}}function hC(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Hb(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Om(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function g1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Mr(i.type,!0)),s=new Oi(o,En(i),Se);n.blueprint[r]=s,t[r]=s,m1(n,e,r,HD(n,t,i.hostVars,Rt),i)}function m1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;y1(s)!=a&&s.push(a),s.push(t,r,o)}}function y1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function v1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;En(e)&&(t[""]=n)}}function _1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function fC(n,e,t,r,i,o,s,a){let u=e.consts,l=Oa(u,s),h=Km(e,n,2,r,l);return o&&dC(e,t,h,Oa(u,a),i),h.mergedAttrs=$a(h.mergedAttrs,h.attrs),h.attrs!==null&&Ub(h,h.attrs,!1),h.mergedAttrs!==null&&Ub(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function pC(n,e){uD(n,e),Tg(e)&&n.queries.elementEnd(e)}function Ym(n){return mC(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function gC(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function mC(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function yC(n,e,t){return n[e]=t}function I1(n,e){return n[e]}function ir(n,e,t){if(t===Rt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function E1(n,e,t,r){let i=ir(n,e,t);return ir(n,e+1,r)||i}function Yg(n,e,t){return function r(i){let o=Fr(n)?Kt(n.index,e):e;Wm(o,5);let s=e[ht],a=zb(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=zb(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function zb(n,e,t,r){let i=ne(null);try{return ve(6,e,t),t(r)!==!1}catch(o){return Dx(n,o),!1}finally{ve(7,e,t),ne(i)}}function w1(n,e,t,r,i,o,s,a){let u=Cl(n),l=!1,h=null;if(!r&&u&&(h=T1(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=nn(n,t),m=r?r(p):p;BO(t,m,o,a);let y=i.listen(m,o,a),C=r?N=>r(Wt(N[n.index])):n.index;vC(C,e,t,o,a,y,!1)}return l}function T1(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Bo],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function vC(n,e,t,r,i,o,s){let a=e.firstCreatePass?Pg(e):null,u=Ng(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function qb(n,e,t,r,i,o){let s=e[t],a=e[ee],l=a.data[t].outputs[r],p=s[l].subscribe(o);vC(n.index,a,e,i,o,p,!0)}var gm=Symbol("BINDING");var rd=class extends Qa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=er(e);return new Li(t,this.ngModule)}};function b1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&yd.SignalBased)!==0};return i&&(o.transform=i),o})}function D1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function C1(n,e,t){let r=e instanceof Me?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new pm(t,r):t}function S1(n){let e=n.get(xi,null);if(e===null)throw new j(407,!1);let t=n.get(lC,null),r=n.get(Jn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function A1(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return jD(e,t,t==="svg"?QT:t==="math"?YT:null)}var Li=class extends Id{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=b1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=D1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=nx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ve(22);let a=ne(null);try{let u=this.componentDef,l=R1(r,u,s,o),h=C1(u,i||this.ngModule,e),p=S1(h),m=p.rendererFactory.createRenderer(null,u),y=r?fx(m,r,u.encapsulation,h):A1(u,m),C=s?.some(Gb)||o?.some(x=>typeof x!="function"&&x.bindings.some(Gb)),N=Lm(null,l,null,512|$D(u),null,null,p,m,h,null,RD(y,h,!0));N[At]=y,Ol(N);let R=null;try{let x=fC(At,l,N,"#host",()=>l.directiveRegistry,!0,0);y&&(BD(m,y,x),Ka(y,N)),Vm(l,N,x),PD(l,x,N),pC(l,x),t!==void 0&&P1(x,this.ngContentSelectors,t),R=Kt(x.index,N),N[ht]=R[ht],Um(l,N,null)}catch(x){throw R!==null&&sm(R),sm(N),x}finally{ve(23),xl()}return new id(this.componentType,N,!!C)}finally{ne(a)}}};function R1(n,e,t,r){let i=n?["ng-version","20.0.5"]:rx(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[gm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[gm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=yg(p);u.push(m)}return xm(0,null,N1(o,s),1,a,u,null,null,null,[i],null)}function N1(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Gb(n){let e=n[gm].kind;return e==="input"||e==="twoWay"}var id=class extends uC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Sl(t[ee],At),this.location=Yo(this._tNode,t),this.instance=Kt(this._tNode.index,t)[ht],this.hostView=this.changeDetectorRef=new jr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=jm(r,i[ee],i,e,t);this.previousInputValues.set(e,t);let s=Kt(r.index,i);Wm(s,1)}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function P1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var or=(()=>{class n{static __NG_ELEMENT_ID__=M1}return n})();function M1(){let n=tt();return IC(n,le())}var k1=or,_C=class extends k1{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Yo(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rm(this._hostTNode,this._hostLView);if(hD(e)){let t=Jl(e,this._hostLView),r=Yl(e),i=t[ee].data[r+8];return new ki(i,t)}else return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Wb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-wt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=jb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Lb(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!hO(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Li(er(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(Me,null);x&&(o=x)}let m=er(h.componentType??{}),y=jb(this._lContainer,m?.id??null),C=y?.firstChild??null,N=h.create(p,i,C,o,s,a);return this.insertImpl(N.hostView,l,Lb(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(ZT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ge],l=new _C(u,u[qt],u[Ge]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return r1(s,i,o,r),e.attachToViewContainerRef(),fg(Jg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Wb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=hm(this._lContainer,t);r&&(Sa(Jg(this._lContainer),t),YD(r[ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=hm(this._lContainer,t);return r&&Sa(Jg(this._lContainer),t)!=null?new jr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Wb(n){return n[ka]}function Jg(n){return n[ka]||(n[ka]=[])}function IC(n,e){let t,r=e[n.index];return tn(r)?t=r:(t=aC(r,e,null,n),e[n.index]=t,Fm(e,t)),x1(t,e,n,r),new _C(t,n,e)}function O1(n,e){let t=n[Re],r=t.createComment(""),i=nn(e,n),o=t.parentNode(i);return nd(t,o,r,t.nextSibling(i),!1),r}var x1=V1,L1=()=>!1;function F1(n,e,t){return L1(n,e,t)}function V1(n,e,t,r){if(n[Lr])return;let i;t.type&8?i=Wt(r):i=O1(e,t),n[Lr]=i}var mm=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},ym=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Jm(e,t).matches!==null&&this.queries[t].setDirty()}},vm=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=G1(e):this.predicate=e}},_m=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Im=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,j1(t,o)),this.matchTNodeWithReadOption(e,t,Wl(t,e,o,!1,!1))}else r===Ur?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Wl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Dn||i===or||i===Ur&&t.type&4)this.addMatch(t.index,-2);else{let o=Wl(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function j1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function U1(n,e){return n.type&11?Yo(n,e):n.type&4?_d(n,e):null}function B1(n,e,t,r){return t===-1?U1(e,n):t===-2?$1(n,e,r):Ha(n,n[ee],t,e)}function $1(n,e,t){if(t===Dn)return Yo(e,n);if(t===Ur)return _d(e,n);if(t===or)return IC(e,n)}function EC(n,e,t,r){let i=e[_n].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(B1(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Em(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=EC(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=wt;p<h.length;p++){let m=h[p];m[xr]===m[Ge]&&Em(m[ee],m,l,r)}if(h[Pi]!==null){let p=h[Pi];for(let m=0;m<p.length;m++){let y=p[m];Em(y[ee],y,l,r)}}}}}return r}function H1(n,e){return n[_n].queries[e].queryList}function z1(n,e,t){let r=new ed((t&4)===4);return tb(n,e,r,r.destroy),(e[_n]??=new ym).queries.push(new mm(r))-1}function q1(n,e,t,r){let i=We();if(i.firstCreatePass){let o=tt();W1(i,new vm(e,t,r),o.index),K1(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return z1(i,le(),t)}function G1(n){return n.split(",").map(e=>e.trim())}function W1(n,e,t){n.queries===null&&(n.queries=new _m),n.queries.track(new Im(e,t))}function K1(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Jm(n,e){return n.queries.getByIndex(e)}function Q1(n,e){let t=n[ee],r=Jm(t,e);return r.crossesNgTemplate?Em(t,n,e,[]):EC(t,n,r,e)}var Kb=new Set;function Ui(n){Kb.has(n)||(Kb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Fi=class{},Ed=class{};var od=class extends Fi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new rd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=mg(e);this._bootstrapComponents=FD(o.bootstrap),this._r3Injector=Bg(e,t,[{provide:Fi,useValue:this},{provide:Qa,useValue:this.componentFactoryResolver},...r],St(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},sd=class extends Ed{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new od(this.moduleType,e,[])}};var qa=class extends Fi{injector;componentFactoryResolver=new rd(this);instance=null;constructor(e){super();let t=new bi([...e.providers,{provide:Fi,useValue:this},{provide:Qa,useValue:this.componentFactoryResolver}],e.parent||Ra(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function es(n,e,t=null){return new qa({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Y1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=vg(!1,t.type),i=r.length>0?es([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:n,providedIn:"environment",factory:()=>new n(B(Me))})}return n})();function Zm(n){return Qo(()=>{let e=wC(n),t=oe(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Nm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Y1).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||rr.Emulated,styles:n.styles||Et,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ui("NgStandalone"),TC(t);let r=n.dependencies;return t.directiveDefs=Qb(r,!1),t.pipeDefs=Qb(r,!0),t.id=tL(t),t})}function J1(n){return er(n)||yg(n)}function Z1(n){return n!==null}function Br(n){return Qo(()=>({type:n.type,bootstrap:n.bootstrap||Et,declarations:n.declarations||Et,imports:n.imports||Et,exports:n.exports||Et,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function X1(n,e){if(n==null)return Or;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=yd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function eL(n){if(n==null)return Or;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function sr(n){return Qo(()=>{let e=wC(n);return TC(e),e})}function Xm(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function wC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Or,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Et,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:X1(n.inputs,e),outputs:eL(n.outputs),debugInfo:null}}function TC(n){n.features?.forEach(e=>e(n))}function Qb(n,e){if(!n)return null;let t=e?BT:J1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Z1)}function tL(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nL(n){return Object.getPrototypeOf(n.prototype).constructor}function bC(n){let e=nL(n.type),t=!0,r=[n];for(;e;){let i;if(En(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Zg(n.inputs),s.declaredInputs=Zg(n.declaredInputs),s.outputs=Zg(n.outputs);let a=i.hostBindings;a&&aL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&oL(n,u),l&&sL(n,l),rL(n,i),OT(n.outputs,i.outputs),En(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===bC&&(t=!1)}}e=Object.getPrototypeOf(e)}iL(r)}function rL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function iL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=$a(i.hostAttrs,t=$a(t,i.hostAttrs))}}function Zg(n){return n===Or?{}:n===Et?[]:n}function oL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function sL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function aL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function cL(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Km(e,n,4,s||null,a||null);Mg()&&dC(e,t,h,Oa(l,u),KD),h.mergedAttrs=$a(h.mergedAttrs,h.attrs),uD(e,h);let p=h.tView=xm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function uL(n,e,t,r,i,o,s,a,u,l,h){let p=t+At,m=e.firstCreatePass?cL(p,e,n,r,i,o,s,a,l):e.data[p];u&&(m.flags|=u),qo(m,!1);let y=lL(e,n,m,t);Fl()&&zm(e,n,y,m),Ka(y,n);let C=aC(y,n,y,m);return n[p]=C,Fm(n,C),F1(C,m,n),Cl(m)&&Vm(e,n,m),l!=null&&GD(n,m,h),m}function DC(n,e,t,r,i,o,s,a){let u=le(),l=We(),h=Oa(l.consts,o);return uL(u,l,n,e,t,r,i,h,void 0,s,a),DC}var lL=dL;function dL(n,e,t,r){return Vl(!0),e[Re].createComment("")}var wd=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(wd||{}),Bi=new H(""),CC=!1,wm=class extends $e{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,WT()&&(this.destroyRef=P(wn,{optional:!0})??void 0,this.pendingTasks=P(nr,{optional:!0})??void 0)}emit(e){let t=ne(null);try{super.next(e)}finally{ne(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Oe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},pt=wm;function SC(n){let e,t;function r(){n=ja;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Yb(n){return queueMicrotask(()=>n()),()=>{n=ja}}var ey="isAngularZone",ad=ey+"_ID",hL=0,Ce=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pt(!1);onMicrotaskEmpty=new pt(!1);onStable=new pt(!1);onError=new pt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=CC}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,gL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ey)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,fL,ja,ja);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},fL={};function ty(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function pL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){SC(()=>{n.callbackScheduled=!1,Tm(n),n.isCheckStableRunning=!0,ty(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Tm(n)}function gL(n){let e=()=>{pL(n)},t=hL++;n._inner=n._inner.fork({name:"angular",properties:{[ey]:!0,[ad]:t,[ad+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(mL(u))return r.invokeTask(o,s,a,u);try{return Jb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Zb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Jb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!yL(u)&&e(),Zb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Tm(n),ty(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Tm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Jb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Zb(n){n._nesting--,ty(n)}var cd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pt;onMicrotaskEmpty=new pt;onStable=new pt;onError=new pt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function mL(n){return AC(n,"__ignore_ng_zone__")}function yL(n){return AC(n,"__scheduler_tick__")}function AC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ny=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),RC=[0,1,2,3],NC=(()=>{class n{ngZone=P(Ce);scheduler=P(Jn);errorHandler=P(Xt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(Bi,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ve(16),this.executing=!0;for(let r of RC)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ve(17)}register(t){let{view:r}=t;r!==void 0?((r[Ni]??=[]).push(t),zo(r),r[Y]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(wd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),ud=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ni];e&&(this.view[Ni]=e.filter(t=>t!==this))}};function ry(n,e){let t=e?.injector??P(Lt);return Ui("NgAfterNextRender"),_L(n,t,e,!0)}function vL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function _L(n,e,t,r){let i=e.get(ny);i.impl??=e.get(NC);let o=e.get(Bi,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(wn):null,a=e.get(Ul,null,{optional:!0}),u=new ud(i.impl,vL(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var iy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var oy=new H("");function $i(n){return!!n&&typeof n.then=="function"}function Td(n){return!!n&&typeof n.subscribe=="function"}var sy=new H("");function bd(n){return yn([{provide:sy,multi:!0,useValue:n}])}var ay=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(sy,{optional:!0})??[];injector=P(Lt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=dt(this.injector,i);if($i(o))t.push(o);else if(Td(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ya=new H("");function PC(){Ap(()=>{let n="";throw new j(600,n)})}function MC(n){return n.isBoundToModule}var IL=10;var Hi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(ft);afterRenderManager=P(ny);zonelessEnabled=P(Va);rootEffectScheduler=P(Gg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new $e;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(nr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Q(t=>!t))}constructor(){P(Bi,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(Me);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Lt.NULL){return this._injector.get(Ce).run(()=>{ve(10);let s=t instanceof Id;if(!this._injector.get(ay).done){let C="";throw new j(405,C)}let u;s?u=t:u=this._injector.get(Qa).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=MC(u)?void 0:this._injector.get(Fi),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(oy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Ba(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ve(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ve(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(wd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=ne(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ne(t),this.afterTick.next(),ve(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<IL;)ve(14),this.synchronizeOnce(),ve(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!xa(i))continue;let o=r&&!this.zonelessEnabled?0:1;Gm(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>xa(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ba(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ya,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ba(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ba(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Dd(n,e,t,r){let i=le(),o=Fa();if(ir(i,o,e)){let s=We(),a=Ll();wx(a,i,n,e,t,r)}return Dd}function kC(n,e,t){let r=le(),i=Fa();if(ir(r,i,e)){let o=We(),s=Ll();WD(s,r,n,e,r[Re],t)}return kC}function bm(n,e,t,r,i){jm(e,n,t,i?"class":"style",r)}function cy(n,e,t,r){let i=le(),o=We(),s=At+n,a=i[Re],u=o.firstCreatePass?fC(s,o,i,e,KD,Mg(),t,r):o.data[s],l=EL(o,i,u,a,e,n);i[s]=l;let h=Cl(u);return qo(u,!0),BD(a,l,u),!$m(u)&&Fl()&&zm(o,i,l,u),(nb()===0||h)&&Ka(l,i),rb(),h&&(Vm(o,i,u),PD(o,u,i)),r!==null&&GD(i,u),cy}function uy(){let n=tt();Og()?db():(n=n.parent,qo(n,!1));let e=n;sb(e)&&ab(),ib();let t=We();return t.firstCreatePass&&pC(t,e),e.classesWithoutHost!=null&&vO(e)&&bm(t,e,le(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&_O(e)&&bm(t,e,le(),e.stylesWithoutHost,!1),uy}function Cd(n,e,t,r){return cy(n,e,t,r),uy(),Cd}var EL=(n,e,t,r,i,o)=>(Vl(!0),jD(r,i,Tb()));function wL(){return le()}var Ja="en-US";var TL=Ja;function OC(n){typeof n=="string"&&(TL=n.toLowerCase().replace(/_/g,"-"))}function Sd(n,e,t){let r=le(),i=We(),o=tt();return xC(i,r,r[Re],o,n,e,t),Sd}function xC(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Yg(r,e,o),w1(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Yg(r,e,o),qb(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Yg(r,e,o),qb(r,e,p,i,i,u)}}function bL(n=1){return wb(n)}function ly(n,e,t,r){q1(n,e,t,r)}function dy(n){let e=le(),t=We(),r=Vg();kl(r+1);let i=Jm(t,r);if(n.dirty&&JT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=Q1(e,r);n.reset(o,MO),n.notifyOnChanges()}return!0}return!1}function hy(){return H1(le(),Vg())}function DL(n){let e=hb();return Dg(e,At+n)}function zl(n,e){return n<<17|e<<2}function Vi(n){return n>>17&32767}function CL(n){return(n&2)==2}function SL(n,e){return n&131071|e<<17}function Dm(n){return n|2}function Ko(n){return(n&131068)>>2}function Xg(n,e){return n&-131069|e<<2}function AL(n){return(n&1)===1}function Cm(n){return n|1}function RL(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vi(s),u=Ko(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Uo(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Vi(n[a+1]);n[r+1]=zl(m,a),m!==0&&(n[m+1]=Xg(n[m+1],r)),n[a+1]=SL(n[a+1],r)}else n[r+1]=zl(a,0),a!==0&&(n[a+1]=Xg(n[a+1],r)),a=r;else n[r+1]=zl(u,0),a===0?a=r:n[u+1]=Xg(n[u+1],r),u=r;l&&(n[r+1]=Dm(n[r+1])),Xb(n,h,r,!0),Xb(n,h,r,!1),NL(e,h,n,r,o),s=zl(a,u),o?e.classBindings=s:e.styleBindings=s}function NL(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Uo(o,e)>=0&&(t[r+1]=Cm(t[r+1]))}function Xb(n,e,t,r){let i=n[t+1],o=e===null,s=r?Vi(i):Ko(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];PL(u,e)&&(a=!0,n[s+1]=r?Cm(l):Dm(l)),s=r?Vi(l):Ko(l)}a&&(n[t+1]=r?Dm(i):Cm(i))}function PL(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Uo(n,e)>=0:!1}var on={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ML(n){return n.substring(on.key,on.keyEnd)}function kL(n){return OL(n),LC(n,FC(n,0,on.textEnd))}function LC(n,e){let t=on.textEnd;return t===e?-1:(e=on.keyEnd=xL(n,on.key=e,t),FC(n,e,t))}function OL(n){on.key=0,on.keyEnd=0,on.value=0,on.valueEnd=0,on.textEnd=n.length}function FC(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function xL(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function VC(n,e,t){return UC(n,e,t,!1),VC}function jC(n,e){return UC(n,e,null,!0),jC}function LL(n){VL(zL,FL,n,!0)}function FL(n,e){for(let t=kL(e);t>=0;t=LC(e,t))Tl(n,ML(e),!0)}function UC(n,e,t,r){let i=le(),o=We(),s=Pl(2);if(o.firstUpdatePass&&$C(o,n,s,r),e!==Rt&&ir(i,s,e)){let a=o.data[tr()];HC(o,a,i,i[Re],n,i[s+1]=GL(e,t),r,s)}}function VL(n,e,t,r){let i=We(),o=Pl(2);i.firstUpdatePass&&$C(i,null,o,r);let s=le();if(t!==Rt&&ir(s,o,t)){let a=i.data[tr()];if(zC(a,r)&&!BC(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=vl(u,t||"")),bm(i,a,s,t,r)}else qL(i,a,s,s[Re],s[o+1],s[o+1]=HL(n,e,t),r,o)}}function BC(n,e){return e>=n.expandoStartIndex}function $C(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[tr()],s=BC(n,t);zC(o,r)&&e===null&&!s&&(e=!1),e=jL(i,o,e,r),RL(i,o,e,t,s,r)}}function jL(n,e,t,r){let i=vb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=em(null,n,e,t,r),t=Ga(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=em(i,n,e,t,r),o===null){let u=UL(n,e,r);u!==void 0&&Array.isArray(u)&&(u=em(null,n,e,u[1],r),u=Ga(u,e.attrs,r),BL(n,e,r,u))}else o=$L(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function UL(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ko(r)!==0)return n[Vi(r)]}function BL(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Vi(i)]=r}function $L(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ga(r,s,t)}return Ga(r,e.attrs,t)}function em(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ga(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ga(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Tl(n,s,t?!0:e[++o]))}return n===void 0?null:n}function HL(n,e,t){if(t==null||t==="")return Et;let r=[],i=Zo(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function zL(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Tl(n,r,t)}function qL(n,e,t,r,i,o,s,a){i===Rt&&(i=Et);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,C=null,N;h===p?(u+=2,l+=2,m!==y&&(C=p,N=y)):p===null||h!==null&&h<p?(u+=2,C=h):(l+=2,C=p,N=y),C!==null&&HC(n,e,t,r,C,N,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function HC(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=AL(l)?eD(u,e,t,i,Ko(l),s):void 0;if(!ld(h)){ld(o)||CL(l)&&(o=eD(u,null,t,i,a,s));let p=bg(tr(),t);zx(r,s,p,i,o)}}function eD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Rt&&(m=p?Et:void 0);let y=p?bl(m,r):h===r?m:void 0;if(l&&!ld(y)&&(y=bl(u,r)),ld(y)&&(a=y,s))return a;let C=n[i+1];i=s?Vi(C):Ko(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=bl(u,r))}return a}function ld(n){return n!==void 0}function GL(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=St(Zo(n)))),n}function zC(n,e){return(n.flags&(e?8:16))!==0}function WL(n,e=""){let t=le(),r=We(),i=n+At,o=r.firstCreatePass?Km(r,i,1,e,null):r.data[i],s=KL(r,t,o,e,n);t[i]=s,Fl()&&zm(r,t,s,o),qo(o,!1)}var KL=(n,e,t,r,i)=>(Vl(!0),ix(e[Re],r));function QL(n,e,t,r=""){return ir(n,Fa(),t)?e+Ci(t)+r:Rt}function YL(n,e,t,r,i,o=""){let s=fb(),a=E1(n,s,t,i);return Pl(2),a?e+Ci(t)+r+Ci(i)+o:Rt}function qC(n){return fy("",n),qC}function fy(n,e,t){let r=le(),i=QL(r,n,e,t);return i!==Rt&&WC(r,tr(),i),fy}function GC(n,e,t,r,i){let o=le(),s=YL(o,n,e,t,r,i);return s!==Rt&&WC(o,tr(),s),GC}function WC(n,e,t){let r=bg(e,n);ox(n[Re],r,t)}function KC(n,e,t){Hg(e)&&(e=e());let r=le(),i=Fa();if(ir(r,i,e)){let o=We(),s=Ll();WD(s,r,n,e,r[Re],t)}return KC}function JL(n,e){let t=Hg(n);return t&&n.set(e),t}function QC(n,e){let t=le(),r=We(),i=tt();return xC(r,t,t[Re],i,n,e),QC}function ZL(n,e,t){let r=We();if(r.firstCreatePass){let i=En(n);Sm(t,r.data,r.blueprint,i,!0),Sm(e,r.data,r.blueprint,i,!1)}}function Sm(n,e,t,r,i){if(n=et(n),Array.isArray(n))for(let o=0;o<n.length;o++)Sm(n[o],e,t,r,i);else{let o=We(),s=le(),a=tt(),u=Ti(n)?n:et(n.provide),l=Ig(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ti(n)||!n.multi){let y=new Oi(l,i,Se),C=nm(u,e,i?h:h+m,p);C===-1?(im(Xl(a,s),o,u),tm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=nm(u,e,h+m,p),C=nm(u,e,h,h+m),N=y>=0&&t[y],R=C>=0&&t[C];if(i&&!R||!i&&!N){im(Xl(a,s),o,u);let x=tF(i?eF:XL,t.length,i,r,l);!i&&R&&(t[C].providerFactory=x),tm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(x),s.push(x)}else{let x=YC(t[i?C:y],l,!i&&r);tm(o,n,y>-1?y:C,x)}!i&&r&&R&&t[C].componentProviders++}}}function tm(n,e,t,r){let i=Ti(e),o=GT(e);if(i||o){let u=(o?et(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function YC(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function nm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function XL(n,e,t,r){return Am(this.multi,[])}function eF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ha(t,t[ee],this.providerFactory.index,r);o=a.slice(0,s),Am(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Am(i,o);return o}function Am(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function tF(n,e,t,r,i){let o=new Oi(n,t,Se);return o.multi=[],o.index=e,o.componentProviders=0,YC(o,i,r&&!t),o}function nF(n,e=[]){return t=>{t.providersResolver=(r,i)=>ZL(r,i?i(n):n,e)}}function rF(n,e,t){let r=Nl()+n,i=le();return i[r]===Rt?yC(i,r,t?e.call(t):e()):I1(i,r)}function iF(n,e,t,r){return JC(le(),Nl(),n,e,t,r)}function oF(n,e){let t=n[e];return t===Rt?void 0:t}function JC(n,e,t,r,i,o){let s=e+t;return ir(n,s,i)?yC(n,s+1,o?r.call(o,i):r(i)):oF(n,s+1)}function sF(n,e){let t=We(),r,i=n+At;t.firstCreatePass?(r=aF(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Mr(r.type,!0)),s,a=It(Se);try{let u=Zl(!1),l=o();return Zl(u),Cg(t,le(),i,l),l}finally{It(a)}}function aF(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function cF(n,e,t){let r=n+At,i=le(),o=Dg(i,r);return uF(i,r)?JC(i,Nl(),e,o.transform,t,o):o.transform(t)}function uF(n,e){return n[ee].data[e].pure}function lF(n,e){return _d(n,e)}var dd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},py=(()=>{class n{compileModuleSync(t){return new sd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=mg(t),o=FD(i.declarations).reduce((s,a)=>{let u=er(a);return u&&s.push(new Li(u)),s},[]);return new dd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dF=(()=>{class n{zone=P(Ce);changeDetectionScheduler=P(Jn);applicationRef=P(Hi);applicationErrorHandler=P(ft);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZC=new H("",{factory:()=>!1});function gy({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce(oe(O({},my()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:Xn,multi:!0,useFactory:()=>{let r=P(dF,{optional:!0});return()=>r.initialize()}},{provide:Xn,multi:!0,useFactory:()=>{let r=P(fF);return()=>{r.initialize()}}},e===!0?{provide:zg,useValue:!0}:[],{provide:qg,useValue:t??CC},{provide:ft,useFactory:()=>{let r=P(Ce),i=P(Me),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Xt),o.handleError(s))})}}}]}function hF(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=gy({ngZoneFactory:()=>{let i=my(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ui("NgZone_CoalesceEvent"),new Ce(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return yn([{provide:ZC,useValue:!0},{provide:Va,useValue:!1},r])}function my(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var fF=(()=>{class n{subscription=new Oe;initialized=!1;zone=P(Ce);pendingTasks=P(nr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XC=(()=>{class n{applicationErrorHandler=P(ft);appRef=P(Hi);taskService=P(nr);ngZone=P(Ce);zonelessEnabled=P(Va);tracing=P(Bi,{optional:!0});disableScheduling=P(zg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Oe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ad):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(qg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof cd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Yb:SC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ad+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Yb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pF(){return typeof $localize<"u"&&$localize.locale||Ja}var Ad=new H("",{providedIn:"root",factory:()=>P(Ad,{optional:!0,skipSelf:!0})||pF()});function ts(n){return NT(n)}function gF(n,e){return $u(n,e?.equal)}var eS=class{[ct];constructor(e){this[ct]=e}destroy(){this[ct].destroy()}};var oS=Symbol("InputSignalNode#UNSET"),RF=oe(O({},Hu),{transformFn:void 0,applyValueToInputSignal(n,e){So(n,e)}});function sS(n,e){let t=Object.create(RF);t.value=n,t.transformFn=e?.transform;function r(){if(Do(t),t.value===oS){let i=null;throw new j(-950,i)}return t.value}return r[ct]=t,r}var Nd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Wa(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},NF=new H("");NF.__NG_ELEMENT_ID__=n=>{let e=tt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function tS(n,e){return sS(n,e)}function PF(n){return sS(oS,n)}var aS=(tS.required=PF,tS);var yy=new H(""),MF=new H("");function Za(n){return!n.moduleRef}function kF(n){let e=Za(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{Za(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ft),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Za(n)){let o=()=>e.destroy(),s=n.platformInjector.get(yy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(yy);s.add(o),n.moduleRef.onDestroy(()=>{Ba(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return xF(r,t,()=>{let o=e.get(ay);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ad,Ja);if(OC(s||Ja),!e.get(MF,!0))return Za(n)?e.get(Hi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Za(n)){let u=e.get(Hi);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return OF?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var OF;function xF(n,e,t){try{let r=t();return $i(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Rd=null;function LF(n=[],e){return Lt.create({name:e,providers:[{provide:Aa,useValue:"platform"},{provide:yy,useValue:new Set([()=>Rd=null])},...n]})}function FF(n=[]){if(Rd)return Rd;let e=LF(n);return Rd=e,PC(),VF(e),e}function VF(n){let e=n.get(pd,null);dt(n,()=>{e?.forEach(t=>t())})}var zi=(()=>{class n{static __NG_ELEMENT_ID__=jF}return n})();function jF(n){return UF(tt(),le(),(n&16)===16)}function UF(n,e,t){if(Fr(n)&&!t){let r=Kt(n.index,e);return new jr(r,r)}else if(n.type&175){let r=e[Gt];return new jr(r,e)}return null}var vy=class{constructor(){}supports(e){return Ym(e)}create(e){return new _y(e)}},BF=(n,e)=>e,_y=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||BF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<nS(r,i,o)?t:r,a=nS(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,C=y+m;h<=C&&C<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Ym(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,gC(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Iy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Iy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Ey=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Pd=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ey,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function nS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function rS(){return new wy([new vy])}var wy=(()=>{class n{factories;static \u0275prov=F({token:n,providedIn:"root",factory:rS});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||rS()),deps:[[n,new iD,new rD]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function cS(n){ve(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=FF(r),o=[gy({}),{provide:Jn,useExisting:XC},Db,...t||[]],s=new qa({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return kF({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ve(9)}}function Xa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function uS(n){let e=er(n);if(!e)return null;let t=new Li(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var hS=null;function ar(){return hS}function Ty(n){hS??=n}var ec=class{},tc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>P(fS),providedIn:"platform"})}return n})(),by=new H(""),fS=(()=>{class n extends tc{_location;_history;_doc=P(De);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ar().getBaseHref(this._doc)}onPopState(t){let r=ar().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ar().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Md(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function lS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function sn(n){return n&&n[0]!=="?"?`?${n}`:n}var an=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>P(Od),providedIn:"root"})}return n})(),kd=new H(""),Od=(()=>{class n extends an{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(De).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Md(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+sn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+sn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+sn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(B(tc),B(kd,8))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$r=(()=>{class n{_subject=new $e;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=zF(lS(dS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+sn(r))}normalize(t){return n.stripTrailingSlash(HF(this._basePath,dS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=sn;static joinWithSlash=Md;static stripTrailingSlash=lS;static \u0275fac=function(r){return new(r||n)(B(an))};static \u0275prov=F({token:n,factory:()=>$F(),providedIn:"root"})}return n})();function $F(){return new $r(B(an))}function HF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function dS(n){return n.replace(/\/index.html$/,"")}function zF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Sy=(()=>{class n extends an{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Md(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+sn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+sn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(B(tc),B(kd,8))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();var xd=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},mS=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new xd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),pS(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);pS(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Se(or),Se(Ur),Se(wy))};static \u0275dir=sr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function pS(n,e){n.context.$implicit=e.item}var qF=(()=>{class n{_viewContainer;_context=new Ld;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gS(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gS(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Se(or),Se(Ur))};static \u0275dir=sr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ld=class{$implicit=null;ngIf=null};function gS(n,e){if(n&&!n.createEmbeddedView)throw new j(2020,!1)}function GF(n,e){return new j(2100,!1)}var Dy=class{createSubscription(e,t,r){return ts(()=>e.subscribe({next:t,error:r}))}dispose(e){ts(()=>e.unsubscribe())}},Cy=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},WF=new Cy,KF=new Dy,QF=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(ft);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if($i(t))return WF;if(Td(t))return KF;throw GF(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(Se(zi,16))};static \u0275pipe=Xm({name:"async",type:n,pure:!1})}return n})();var yS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Br({type:n});static \u0275inj=Zn({})}return n})();function nc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var qi=class{};var Ry="browser",YF="server";function ree(n){return n===Ry}function vS(n){return n===YF}var _S=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>new Ay(P(De),window)})}return n})(),Ay=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(oe(O({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=JF(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(jo(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(oe(O({},t),{left:i-s[0],top:o-s[1]}))}};function JF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var jd=new H(""),ky=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(B(jd),B(Ce))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),rc=class{_doc;constructor(e){this._doc=e}manager},Fd="ng-app-id";function IS(n){for(let e of n)e.remove()}function ES(n,e){let t=e.createElement("style");return t.textContent=n,t}function XF(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Fd}="${e}"],link[${Fd}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Fd),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Py(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Oy=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=vS(o),XF(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ES);r?.forEach(i=>this.addUsage(i,this.external,Py))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(IS(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])IS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ES(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Py(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Fd,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(B(De),B(fd),B(gd,8),B(Jo))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),Ny={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xy=/%COMP%/g;var TS="%COMP%",eV=`_nghost-${TS}`,tV=`_ngcontent-${TS}`,nV=!0,rV=new H("",{providedIn:"root",factory:()=>nV});function iV(n){return tV.replace(xy,n)}function oV(n){return eV.replace(xy,n)}function bS(n,e){return e.map(t=>t.replace(xy,n))}var Ly=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new ic(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Vd?i.applyToHost(t):i instanceof oc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case rr.Emulated:o=new Vd(u,l,r,this.appId,h,s,a,p,m);break;case rr.ShadowDom:return new My(u,l,t,r,s,a,this.nonce,p,m);default:o=new oc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(B(ky),B(Oy),B(fd),B(rV),B(De),B(Jo),B(Ce),B(gd),B(Bi,8))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),ic=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ny[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ny[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ny[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(bn.DashCase|bn.Important)?e.style.setProperty(t,r,i&bn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&bn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ar().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function wS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var My=class extends ic{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=bS(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Py(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oc=class extends ic{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?bS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Vd=class extends oc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=iV(h),this.hostAttr=oV(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ud=class n extends ec{supportsDOMEvents=!0;static makeCurrent(){Ty(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=sV();return t==null?null:aV(t)}resetBaseElement(){sc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nc(document.cookie,e)}},sc=null;function sV(){return sc=sc||document.head.querySelector("base"),sc?sc.getAttribute("href"):null}function aV(n){return new URL(n,document.baseURI).pathname}var cV=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),CS=(()=>{class n extends rc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(B(De))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),DS=["alt","control","meta","shift"],uV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},SS=(()=>{class n extends rc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ar().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),DS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=uV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),DS.forEach(s=>{if(s!==i){let a=lV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(B(De))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();function dV(n,e){return cS(O({rootComponent:n},hV(e)))}function hV(n){return{appProviders:[...yV,...n?.providers??[]],platformProviders:mV}}function fV(){Ud.makeCurrent()}function pV(){return new Xt}function gV(){return Pm(document),document}var mV=[{provide:Jo,useValue:Ry},{provide:pd,useValue:fV,multi:!0},{provide:De,useFactory:gV}];var yV=[{provide:Aa,useValue:"root"},{provide:Xt,useFactory:pV},{provide:jd,useClass:CS,multi:!0,deps:[De]},{provide:jd,useClass:SS,multi:!0,deps:[De]},Ly,Oy,ky,{provide:xi,useExisting:Ly},{provide:qi,useClass:cV},[]];var rs=class{},is=class{},Cn=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Hd=class{encodeKey(e){return AS(e)}encodeValue(e){return AS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function vV(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var _V=/%(\d[a-f0-9])/gi,IV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function AS(n){return encodeURIComponent(n).replace(_V,(e,t)=>IV[t]??e)}function Bd(n){return`${n}`}var cn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Hd,e.fromString){if(e.fromObject)throw new j(2805,!1);this.map=vV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Bd):[Bd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Bd(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Bd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var zd=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function EV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function RS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function NS(n){return typeof Blob<"u"&&n instanceof Blob}function PS(n){return typeof FormData<"u"&&n instanceof FormData}function wV(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ac="Content-Type",qd="Accept",By="X-Request-URL",kS="text/plain",OS="application/json",xS=`${OS}, ${kS}, */*`,ns=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(EV(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Cn,this.context??=new zd,!this.params)this.params=new cn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||RS(this.body)||NS(this.body)||PS(this.body)||wV(this.body)?this.body:this.body instanceof cn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||PS(this.body)?null:NS(this.body)?this.body.type||null:RS(this.body)?null:typeof this.body=="string"?kS:this.body instanceof cn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?OS:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,u=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,p=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((y,C)=>y.set(C,e.setHeaders[C]),h)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,C)=>y.set(C,e.setParams[C]),p)),new n(t,r,a,{params:p,headers:h,context:m,reportProgress:l,responseType:i,withCredentials:u,transferCache:s,keepalive:o})}},ur=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ur||{}),os=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Cn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},cc=class n extends os{constructor(e={}){super(e)}type=ur.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ss=class n extends os{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=ur.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},cr=class extends os{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},LS=200,TV=204;function Fy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var Wd=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof ns)o=t;else{let u;i.headers instanceof Cn?u=i.headers:u=new Cn(i.headers);let l;i.params&&(i.params instanceof cn?l=i.params:l=new cn({fromObject:i.params})),o=new ns(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=U(o).pipe(mn(u=>this.handler.handle(u)));if(t instanceof ns||i.observe==="events")return s;let a=s.pipe(ut(u=>u instanceof ss));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Q(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new j(2806,!1);return u.body}));case"blob":return a.pipe(Q(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new j(2807,!1);return u.body}));case"text":return a.pipe(Q(u=>{if(u.body!==null&&typeof u.body!="string")throw new j(2808,!1);return u.body}));case"json":default:return a.pipe(Q(u=>u.body))}case"response":return a;default:throw new j(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new cn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Fy(i,r))}post(t,r,i={}){return this.request("POST",t,Fy(i,r))}put(t,r,i={}){return this.request("PUT",t,Fy(i,r))}static \u0275fac=function(r){return new(r||n)(B(rs))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),bV=/^\)\]\}',?\n/;function MS(n){if(n.url)return n.url;let e=By.toLocaleLowerCase();return n.headers.get(e)}var FS=new H(""),$d=(()=>{class n{fetchImpl=P(Vy,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t));ngZone=P(Ce);destroyRef=P(wn);destroyed=!1;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0})}handle(t){return new se(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(jy,o=>r.error(new cr({error:o}))),()=>i.abort()})}doRequest(t,r,i){return v(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,O({signal:r},o)));DV(y),i.next({type:ur.Sent}),s=yield y}catch(y){i.error(new cr({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new Cn(s.headers),u=s.statusText,l=MS(s)??t.urlWithParams,h=s.status,p=null;if(t.reportProgress&&i.next(new cc({headers:a,status:h,statusText:u,url:l})),s.body){let y=s.headers.get("content-length"),C=[],N=s.body.getReader(),R=0,x,q,$=typeof Zone<"u"&&Zone.current,he=!1;if(yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){if(this.destroyed){yield N.cancel(),he=!0;break}let{done:ae,value:T}=yield N.read();if(ae)break;if(C.push(T),R+=T.length,t.reportProgress){q=t.responseType==="text"?(q??"")+(x??=new TextDecoder).decode(T,{stream:!0}):void 0;let _=()=>i.next({type:ur.DownloadProgress,total:y?+y:void 0,loaded:R,partialText:q});$?$.run(_):_()}}})),he){i.complete();return}let Ue=this.concatChunks(C,R);try{let ae=s.headers.get(ac)??"";p=this.parseBody(t,Ue,ae)}catch(ae){i.error(new cr({error:ae,headers:new Cn(s.headers),status:s.status,statusText:s.statusText,url:MS(s)??t.urlWithParams}));return}}h===0&&(h=p?LS:0),h>=200&&h<300?(i.next(new ss({body:p,headers:a,status:h,statusText:u,url:l})),i.complete()):i.error(new cr({error:p,headers:a,status:h,statusText:u,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(bV,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has(qd)||(r[qd]=xS),!t.headers.has(ac)){let o=t.detectContentTypeHeader();o!==null&&(r[ac]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i,keepalive:t.keepalive}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),Vy=class{};function jy(){}function DV(n){n.then(jy,jy)}function CV(n,e){return e(n)}function SV(n,e,t){return(r,i)=>dt(t,()=>e(r,o=>n(o,i)))}var VS=new H(""),jS=new H(""),US=new H("",{providedIn:"root",factory:()=>!0});var Gd=(()=>{class n extends rs{backend;injector;chain=null;pendingTasks=P(Bl);contributeToStability=P(US);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(VS),...this.injector.get(jS,[])]));this.chain=r.reduceRight((i,o)=>SV(i,o,this.injector),CV)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ii(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(B(is),B(Me))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();var AV=/^\)\]\}',?\n/,RV=RegExp(`^${By}:`,"m");function NV(n){return"responseURL"in n&&n.responseURL?n.responseURL:RV.test(n.getAllResponseHeaders())?n.getResponseHeader(By):null}var Uy=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new j(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?we(r.\u0275loadImpl()):U(null)).pipe(_t(()=>new se(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,R)=>s.setRequestHeader(N,R.join(","))),t.headers.has(qd)||s.setRequestHeader(qd,xS),!t.headers.has(ac)){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader(ac,N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=s.statusText||"OK",R=new Cn(s.getAllResponseHeaders()),x=NV(s)||t.url;return u=new cc({headers:R,status:s.status,statusText:N,url:x}),u},h=()=>{let{headers:N,status:R,statusText:x,url:q}=l(),$=null;R!==TV&&($=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=$?LS:0);let he=R>=200&&R<300;if(t.responseType==="json"&&typeof $=="string"){let Ue=$;$=$.replace(AV,"");try{$=$!==""?JSON.parse($):null}catch(ae){$=Ue,he&&(he=!1,$={error:ae,text:$})}}he?(o.next(new ss({body:$,headers:N,status:R,statusText:x,url:q||void 0})),o.complete()):o.error(new cr({error:$,headers:N,status:R,statusText:x,url:q||void 0}))},p=N=>{let{url:R}=l(),x=new cr({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(x)},m=!1,y=N=>{m||(o.next(l()),m=!0);let R={type:ur.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},C=N=>{let R={type:ur.UploadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:ur.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(B(qi))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),BS=new H(""),PV="XSRF-TOKEN",MV=new H("",{providedIn:"root",factory:()=>PV}),kV="X-XSRF-TOKEN",OV=new H("",{providedIn:"root",factory:()=>kV}),uc=class{},xV=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=nc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(B(De),B(MV))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();function LV(n,e){let t=n.url.toLowerCase();if(!P(BS)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=P(uc).getToken(),i=P(OV);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var $y=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}($y||{});function FV(n,e){return{\u0275kind:n,\u0275providers:e}}function VV(...n){let e=[Wd,Uy,Gd,{provide:rs,useExisting:Gd},{provide:is,useFactory:()=>P(FS,{optional:!0})??P(Uy)},{provide:VS,useValue:LV,multi:!0},{provide:BS,useValue:!0},{provide:uc,useClass:xV}];for(let t of n)e.push(...t.\u0275providers);return yn(e)}function jV(){return FV($y.Fetch,[$d,{provide:FS,useExisting:$d},{provide:is,useExisting:$d}])}var $S=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(B(De))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var te="primary",wc=Symbol("RouteTitle"),Wy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ki(n){return new Wy(n)}function YS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function $V(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sn(n[t],e[t]))return!1;return!0}function Sn(n,e){let t=n?Ky(n):void 0,r=e?Ky(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!JS(n[i],e[i]))return!1;return!0}function Ky(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function JS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function ZS(n){return n.length>0?n[n.length-1]:null}function lr(n){return Bp(n)?n:$i(n)?we(Promise.resolve(n)):U(n)}var HV={exact:e0,subset:t0},XS={exact:zV,subset:qV,ignored:()=>!0};function HS(n,e,t){return HV[t.paths](n.root,e.root,t.matrixParams)&&XS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function zV(n,e){return Sn(n,e)}function e0(n,e,t){if(!Gi(n.segments,e.segments)||!Yd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!e0(n.children[r],e.children[r],t))return!1;return!0}function qV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JS(n[t],e[t]))}function t0(n,e,t){return n0(n,e,e.segments,t)}function n0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Gi(i,t)||e.hasChildren()||!Yd(i,t,r))}else if(n.segments.length===t.length){if(!Gi(n.segments,t)||!Yd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!t0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Gi(n.segments,i)||!Yd(n.segments,i,r)||!n.children[te]?!1:n0(n.children[te],e,o,r)}}function Yd(n,e,t){return e.every((r,i)=>XS[t](n[i].parameters,r.parameters))}var Rn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ki(this.queryParams),this._queryParamMap}toString(){return KV.serialize(this)}},me=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jd(this)}},Hr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ki(this.parameters),this._parameterMap}toString(){return i0(this)}};function GV(n,e){return Gi(n,e)&&n.every((t,r)=>Sn(t.parameters,e[r].parameters))}function Gi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function WV(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===te&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==te&&(t=t.concat(e(i,r)))}),t}var Qi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>new zr,providedIn:"root"})}return n})(),zr=class{parse(e){let t=new Yy(e);return new Rn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${lc(e.root,!0)}`,r=JV(e.queryParams),i=typeof e.fragment=="string"?`#${QV(e.fragment)}`:"";return`${t}${r}${i}`}},KV=new zr;function Jd(n){return n.segments.map(e=>i0(e)).join("/")}function lc(n,e){if(!n.hasChildren())return Jd(n);if(e){let t=n.children[te]?lc(n.children[te],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==te&&r.push(`${i}:${lc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=WV(n,(r,i)=>i===te?[lc(n.children[te],!1)]:[`${i}:${lc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[te]!=null?`${Jd(n)}/${t[0]}`:`${Jd(n)}/(${t.join("//")})`}}function r0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kd(n){return r0(n).replace(/%3B/gi,";")}function QV(n){return encodeURI(n)}function Qy(n){return r0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zd(n){return decodeURIComponent(n)}function zS(n){return Zd(n.replace(/\+/g,"%20"))}function i0(n){return`${Qy(n.path)}${YV(n.parameters)}`}function YV(n){return Object.entries(n).map(([e,t])=>`;${Qy(e)}=${Qy(t)}`).join("")}function JV(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Kd(t)}=${Kd(i)}`).join("&"):`${Kd(t)}=${Kd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var ZV=/^[^\/()?;#]+/;function Hy(n){let e=n.match(ZV);return e?e[0]:""}var XV=/^[^\/()?;=#]+/;function ej(n){let e=n.match(XV);return e?e[0]:""}var tj=/^[^=?&#]+/;function nj(n){let e=n.match(tj);return e?e[0]:""}var rj=/^[^&#]+/;function ij(n){let e=n.match(rj);return e?e[0]:""}var Yy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[te]=new me(e,t)),r}parseSegment(){let e=Hy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Hr(Zd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=ej(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Hy(this.remaining);i&&(r=i,this.capture(r))}e[Zd(t)]=Zd(r)}parseQueryParam(e){let t=nj(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=ij(this.remaining);s&&(r=s,this.capture(r))}let i=zS(t),o=zS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Hy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=te);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[te]:new me([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function o0(n){return n.segments.length>0?new me([],{[te]:n}):n}function s0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=s0(i);if(r===te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new me(n.segments,e);return oj(t)}function oj(n){if(n.numberOfChildren===1&&n.children[te]){let e=n.children[te];return new me(n.segments.concat(e.segments),e.children)}return n}function qr(n){return n instanceof Rn}function a0(n,e,t=null,r=null){let i=c0(n);return u0(i,e,t,r)}function c0(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new me(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=o0(r);return e??i}function u0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return zy(i,i,i,t,r);let o=sj(e);if(o.toRoot())return zy(i,i,new me([],{}),t,r);let s=aj(o,i,n),a=s.processChildren?hc(s.segmentGroup,s.index,o.commands):d0(s.segmentGroup,s.index,o.commands);return zy(i,s.segmentGroup,a,t,r)}function Xd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function pc(n){return typeof n=="object"&&n!=null&&n.outlets}function zy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=l0(n,e,t);let a=o0(s0(s));return new Rn(a,o,i)}function l0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=l0(o,e,t)}),new me(n.segments,r)}var eh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Xd(r[0]))throw new j(4003,!1);let i=r.find(pc);if(i&&i!==ZS(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function sj(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new eh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new eh(t,e,r)}var us=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function aj(n,e,t){if(n.isAbsolute)return new us(e,!0,0);if(!t)return new us(e,!1,NaN);if(t.parent===null)return new us(t,!0,0);let r=Xd(n.commands[0])?0:1,i=t.segments.length-1+r;return cj(t,i,n.numberOfDoubleDots)}function cj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new us(r,!1,i-o)}function uj(n){return pc(n[0])?n[0].outlets:{[te]:n}}function d0(n,e,t){if(n??=new me([],{}),n.segments.length===0&&n.hasChildren())return hc(n,e,t);let r=lj(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new me(n.segments.slice(0,r.pathIndex),{});return o.children[te]=new me(n.segments.slice(r.pathIndex),n.children),hc(o,0,i)}else return r.match&&i.length===0?new me(n.segments,{}):r.match&&!n.hasChildren()?Jy(n,e,t):r.match?hc(n,0,i):Jy(n,e,t)}function hc(n,e,t){if(t.length===0)return new me(n.segments,{});{let r=uj(t),i={};if(Object.keys(r).some(o=>o!==te)&&n.children[te]&&n.numberOfChildren===1&&n.children[te].segments.length===0){let o=hc(n.children[te],e,t);return new me(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=d0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(n.segments,i)}}function lj(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(pc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!GS(u,l,s))return o;r+=2}else{if(!GS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(pc(o)){let u=dj(o.outlets);return new me(r,u)}if(i===0&&Xd(t[0])){let u=n.segments[e];r.push(new Hr(u.path,qS(t[0]))),i++;continue}let s=pc(o)?o.outlets[te]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Xd(a)?(r.push(new Hr(s,qS(a))),i+=2):(r.push(new Hr(s,{})),i++)}return new me(r,{})}function dj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Jy(new me([],{}),0,r))}),e}function qS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function GS(n,e,t){return n==t.path&&Sn(e,t.parameters)}var ls="imperative",He=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(He||{}),jt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Gr=class extends jt{type=He.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ut=class extends jt{urlAfterRedirects;type=He.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Tt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Tt||{}),hs=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(hs||{}),An=class extends jt{reason;code;type=He.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nn=class extends jt{reason;code;type=He.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},fs=class extends jt{error;target;type=He.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gc=class extends jt{urlAfterRedirects;state;type=He.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},th=class extends jt{urlAfterRedirects;state;type=He.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nh=class extends jt{urlAfterRedirects;state;shouldActivate;type=He.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},rh=class extends jt{urlAfterRedirects;state;type=He.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ih=class extends jt{urlAfterRedirects;state;type=He.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oh=class{route;type=He.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sh=class{route;type=He.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ah=class{snapshot;type=He.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ch=class{snapshot;type=He.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uh=class{snapshot;type=He.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lh=class{snapshot;type=He.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ps=class{routerEvent;position;anchor;type=He.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},mc=class{},gs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function hj(n){return!(n instanceof mc)&&!(n instanceof gs)}function fj(n,e){return n.providers&&!n._injector&&(n._injector=es(n.providers,e,`Route: ${n.path}`)),n._injector??e}function un(n){return n.outlet||te}function pj(n,e){let t=n.filter(r=>un(r)===e);return t.push(...n.filter(r=>un(r)!==e)),t}function Tc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var dh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Tc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Yi(this.rootInjector)}},Yi=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(B(Me))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Zy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Zy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Xy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xy(e,this._root).map(t=>t.value)}};function Zy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Zy(n,t);if(r)return r}return null}function Xy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Xy(n,t);if(r.length)return r.unshift(e),r}return[]}var Vt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function cs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var yc=class extends hh{snapshot;constructor(e,t){super(e),this.snapshot=t,av(this,e)}toString(){return this.snapshot.toString()}};function h0(n){let e=gj(n),t=new _e([new Hr("",{})]),r=new _e({}),i=new _e({}),o=new _e({}),s=new _e(""),a=new Pn(t,r,o,s,i,te,n,e.root);return a.snapshot=e.root,new yc(new Vt(a,[]),e)}function gj(n){let e={},t={},r={},i="",o=new Wi([],e,r,i,t,te,n,null,{});return new vc("",new Vt(o,[]))}var Pn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Q(l=>l[wc]))??U(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Ki(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Ki(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&p0(i)&&(r.resolve[wc]=i.title),r}var Wi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[wc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ki(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ki(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},vc=class extends hh{url;constructor(e,t){super(t),this.url=e,av(this,t)}toString(){return f0(this._root)}};function av(n,e){e.value._routerState=n,e.children.forEach(t=>av(n,t))}function f0(n){let e=n.children.length>0?` { ${n.children.map(f0).join(", ")} } `:"";return`${n.value}${e}`}function qy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Sn(e.params,t.params)||n.paramsSubject.next(t.params),$V(e.url,t.url)||n.urlSubject.next(t.url),Sn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ev(n,e){let t=Sn(n.params,e.params)&&GV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ev(n.parent,e.parent))}function p0(n){return typeof n.title=="string"||n.title===null}var g0=new H(""),cv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=te;activateEvents=new pt;deactivateEvents=new pt;attachEvents=new pt;detachEvents=new pt;routerOutletData=aS(void 0);parentContexts=P(Yi);location=P(or);changeDetector=P(zi);inputBinder=P(bc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new tv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=sr({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ji]})}return n})(),tv=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Pn?this.route:e===Yi?this.childContexts:e===g0?this.outletData:this.parent.get(e,t)}},bc=new H(""),uv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ia([r.queryParams,r.params,r.data]).pipe(_t(([o,s,a],u)=>(a=O(O(O({},o),s),a),u===0?U(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=uS(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),lv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Zm({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Cd(0,"router-outlet")},dependencies:[cv],encapsulation:2})}return n})();function dv(n){let e=n.children&&n.children.map(dv),t=e?oe(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==te&&(t.component=lv),t}function mj(n,e,t){let r=_c(n,e._root,t?t._root:void 0);return new yc(r,e)}function _c(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=yj(n,e,t);return new Vt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>_c(n,a)),s}}let r=vj(e.value),i=e.children.map(o=>_c(n,o));return new Vt(r,i)}}function yj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _c(n,r,i);return _c(n,r)})}function vj(n){return new Pn(new _e(n.url),new _e(n.params),new _e(n.queryParams),new _e(n.fragment),new _e(n.data),n.outlet,n.component,n)}var ms=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},m0="ngNavigationCancelingError";function ph(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=y0(!1,Tt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function y0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[m0]=!0,t.cancellationCode=e,t}function _j(n){return v0(n)&&qr(n.url)}function v0(n){return!!n&&n[m0]}var Ij=(n,e,t,r)=>Q(i=>(new nv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),nv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),qy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=cs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=cs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new lh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ch(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(qy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),qy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},gh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ds=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Ej(n,e,t){let r=n._root,i=e?e._root:null;return dc(r,i,t,[r.value])}function wj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function vs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ig(n)?n:e.get(n):r}function dc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=cs(e);return n.children.forEach(s=>{Tj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>fc(a,t.getContext(s),i)),i}function Tj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=bj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new gh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?dc(n,e,a?a.children:null,r,i):dc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ds(a.outlet.component,s))}else s&&fc(e,a,i),i.canActivateChecks.push(new gh(r)),o.component?dc(n,null,a?a.children:null,r,i):dc(n,null,t,r,i);return i}function bj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Gi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Gi(n.url,e.url)||!Sn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ev(n,e)||!Sn(n.queryParams,e.queryParams);case"paramsChange":default:return!ev(n,e)}}function fc(n,e,t){let r=cs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?fc(s,e.children.getContext(o),t):fc(s,null,t):fc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ds(e.outlet.component,i)):t.canDeactivateChecks.push(new ds(null,i)):t.canDeactivateChecks.push(new ds(null,i))}function Dc(n){return typeof n=="function"}function Dj(n){return typeof n=="boolean"}function Cj(n){return n&&Dc(n.canLoad)}function Sj(n){return n&&Dc(n.canActivate)}function Aj(n){return n&&Dc(n.canActivateChild)}function Rj(n){return n&&Dc(n.canDeactivate)}function Nj(n){return n&&Dc(n.canMatch)}function _0(n){return n instanceof Wn||n?.name==="EmptyError"}var Qd=Symbol("INITIAL_VALUE");function ys(){return _t(n=>Ia(n.map(e=>e.pipe(Kn(1),zp(Qd)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===Qd)return Qd;if(t===!1||Pj(t))return t}return!0}),ut(e=>e!==Qd),Kn(1)))}function Pj(n){return qr(n)||n instanceof ms}function Mj(n,e){return Pe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?U(oe(O({},t),{guardsResult:!0})):kj(s,r,i,n).pipe(Pe(a=>a&&Dj(a)?Oj(r,o,n,e):U(a)),Q(a=>oe(O({},t),{guardsResult:a})))})}function kj(n,e,t,r){return we(n).pipe(Pe(i=>jj(i.component,i.route,t,e,r)),Qn(i=>i!==!0,!0))}function Oj(n,e,t,r){return we(e).pipe(mn(i=>Lo(Lj(i.route.parent,r),xj(i.route,r),Vj(n,i.path,t),Fj(n,i.route,t))),Qn(i=>i!==!0,!0))}function xj(n,e){return n!==null&&e&&e(new uh(n)),U(!0)}function Lj(n,e){return n!==null&&e&&e(new ah(n)),U(!0)}function Fj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return U(!0);let i=r.map(o=>Ea(()=>{let s=Tc(e)??t,a=vs(o,s),u=Sj(a)?a.canActivate(e,n):dt(s,()=>a(e,n));return lr(u).pipe(Qn())}));return U(i).pipe(ys())}function Vj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>wj(s)).filter(s=>s!==null).map(s=>Ea(()=>{let a=s.guards.map(u=>{let l=Tc(s.node)??t,h=vs(u,l),p=Aj(h)?h.canActivateChild(r,n):dt(l,()=>h(r,n));return lr(p).pipe(Qn())});return U(a).pipe(ys())}));return U(o).pipe(ys())}function jj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return U(!0);let s=o.map(a=>{let u=Tc(e)??i,l=vs(a,u),h=Rj(l)?l.canDeactivate(n,e,t,r):dt(u,()=>l(n,e,t,r));return lr(h).pipe(Qn())});return U(s).pipe(ys())}function Uj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return U(!0);let o=i.map(s=>{let a=vs(s,n),u=Cj(a)?a.canLoad(e,t):dt(n,()=>a(e,t));return lr(u)});return U(o).pipe(ys(),I0(r))}function I0(n){return Lp(qe(e=>{if(typeof e!="boolean")throw ph(n,e)}),Q(e=>e===!0))}function Bj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return U(!0);let o=i.map(s=>{let a=vs(s,n),u=Nj(a)?a.canMatch(e,t):dt(n,()=>a(e,t));return lr(u)});return U(o).pipe(ys(),I0(r))}var Ic=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ec=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function as(n){return xo(new Ic(n))}function $j(n){return xo(new j(4e3,!1))}function Hj(n){return xo(y0(!1,Tt.GuardRejected))}var rv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return U(r);if(i.numberOfChildren>1||!i.children[te])return $j(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,t,r,i,o){return zj(t,i,o).pipe(Q(s=>{if(s instanceof Rn)throw new Ec(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ec(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Rn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new me(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function zj(n,e,t){if(typeof n=="string")return U(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return lr(dt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var iv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qj(n,e,t,r,i){let o=E0(n,e,t);return o.matched?(r=fj(e,r),Bj(r,e,t,i).pipe(Q(s=>s===!0?o:O({},iv)))):U(o)}function E0(n,e,t){if(e.path==="**")return Gj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},iv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||YS)(t,n,e);if(!i)return O({},iv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Gj(n){return{matched:!0,parameters:n.length>0?ZS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function WS(n,e,t,r){return t.length>0&&Qj(n,t,r)?{segmentGroup:new me(e,Kj(r,new me(t,n.children))),slicedSegments:[]}:t.length===0&&Yj(n,t,r)?{segmentGroup:new me(n.segments,Wj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new me(n.segments,n.children),slicedSegments:t}}function Wj(n,e,t,r){let i={};for(let o of t)if(yh(n,e,o)&&!r[un(o)]){let s=new me([],{});i[un(o)]=s}return O(O({},r),i)}function Kj(n,e){let t={};t[te]=e;for(let r of n)if(r.path===""&&un(r)!==te){let i=new me([],{});t[un(r)]=i}return t}function Qj(n,e,t){return t.some(r=>yh(n,e,r)&&un(r)!==te)}function Yj(n,e,t){return t.some(r=>yh(n,e,r))}function yh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Jj(n,e,t){return e.length===0&&!n.children[t]}var ov=class{};function Zj(n,e,t,r,i,o,s="emptyOnly"){return new sv(n,e,t,r,i,s,o).recognize()}var Xj=31,sv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new rv(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=WS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new Vt(r,t),o=new vc("",i),s=a0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Wi([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,t).pipe(Q(r=>({children:r,rootSnapshot:t})),lt(r=>{if(r instanceof Ec)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ic?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof Vt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(mn(s=>{let a=r.children[s],u=pj(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Hp((s,a)=>(s.push(...a),s)),Pr(null),$p(),Pe(s=>{if(s===null)return as(r);let a=w0(s);return e2(a),U(a)}))}processSegment(e,t,r,i,o,s,a){return we(t).pipe(mn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(lt(l=>{if(l instanceof Ic)return U(null);throw l}))),Qn(u=>!!u),lt(u=>{if(_0(u))return Jj(r,i,o)?U(new ov):as(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return un(r)!==s&&(s===te||!yh(i,o,r))?as(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):as(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=E0(t,i,o);if(!u)return as(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Xj&&(this.allowRedirects=!1));let y=new Wi(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,KS(i),un(i),i.component??i._loadedComponent??null,i,QS(i)),C=fh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(_t(R=>this.applyRedirects.lineralizeSegments(i,R)),Pe(R=>this.processSegment(e,r,t,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=qj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(_t(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(_t(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new Wi(m,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,KS(r),un(r),r.component??r._loadedComponent??null,r,QS(r)),N=fh(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:x}=WS(t,m,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(Q($=>new Vt(C,$)));if(l.length===0&&x.length===0)return U(new Vt(C,[]));let q=un(r)===o;return this.processSegment(h,l,R,x,q?te:o,!0,C).pipe(Q($=>new Vt(C,$ instanceof Vt?[$]:[])))}))):as(t)))}getChildConfig(e,t,r){return t.children?U({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?U({routes:t._loadedRoutes,injector:t._loadedInjector}):Uj(e,t,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,t).pipe(qe(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Hj(t))):U({routes:[],injector:e})}};function e2(n){n.sort((e,t)=>e.value.outlet===te?-1:t.value.outlet===te?1:e.value.outlet.localeCompare(t.value.outlet))}function t2(n){let e=n.value.routeConfig;return e&&e.path===""}function w0(n){let e=[],t=new Set;for(let r of n){if(!t2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=w0(r.children);e.push(new Vt(r.value,i))}return e.filter(r=>!t.has(r))}function KS(n){return n.data||{}}function QS(n){return n.resolve||{}}function n2(n,e,t,r,i,o){return Pe(s=>Zj(n,e,t,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:u})=>oe(O({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function r2(n,e){return Pe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return U(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of T0(u))s.add(l);let a=0;return we(s).pipe(mn(u=>o.has(u)?i2(u,r,n,e):(u.data=fh(u,u.parent,n).resolve,U(void 0))),qe(()=>a++),Fo(1),Pe(u=>a===s.size?U(t):Dt))})}function T0(n){let e=n.children.map(t=>T0(t)).flat();return[n,...e]}function i2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!p0(i)&&(o[wc]=i.title),Ea(()=>(n.data=fh(n,n.parent,t).resolve,o2(o,n,e,r).pipe(Q(s=>(n._resolvedData=s,n.data=O(O({},n.data),s),null)))))}function o2(n,e,t,r){let i=Ky(n);if(i.length===0)return U({});let o={};return we(i).pipe(Pe(s=>s2(n[s],e,t,r).pipe(Qn(),qe(a=>{if(a instanceof ms)throw ph(new zr,a);o[s]=a}))),Fo(1),Q(()=>o),lt(s=>_0(s)?Dt:xo(s)))}function s2(n,e,t,r){let i=Tc(e)??r,o=vs(n,i),s=o.resolve?o.resolve(e,t):dt(i,()=>o(e,t));return lr(s)}function Gy(n){return _t(e=>{let t=n(e);return t?we(t).pipe(Q(()=>e)):U(e)})}var hv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===te);return r}getResolvedTitleForRoute(t){return t.data[wc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>P(b0),providedIn:"root"})}return n})(),b0=(()=>{class n extends hv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(B($S))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wr=new H("",{providedIn:"root",factory:()=>({})}),Ji=new H(""),vh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(py);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return U(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=lr(t.loadComponent()).pipe(Q(C0),qe(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ii(()=>{this.componentLoaders.delete(t)})),i=new Oo(r,()=>new $e).pipe(ko());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return U({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=D0(r,this.compiler,t,this.onLoadEndListener).pipe(Ii(()=>{this.childrenLoaders.delete(r)})),s=new Oo(o,()=>new $e).pipe(ko());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function D0(n,e,t,r){return lr(n.loadChildren()).pipe(Q(C0),Pe(i=>i instanceof Ed||Array.isArray(i)?U(i):we(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ji,[],{optional:!0,self:!0}).flat()),{routes:s.map(dv),injector:o}}))}function a2(n){return n&&typeof n=="object"&&"default"in n}function C0(n){return a2(n)?n.default:n}var _h=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>P(c2),providedIn:"root"})}return n})(),c2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fv=new H(""),pv=new H("");function S0(n,e,t){let r=n.get(pv),i=n.get(De);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),u2(n))),{onViewTransitionCreated:u}=r;return u&&dt(n,()=>u({transition:a,from:e,to:t})),s}function u2(n){return new Promise(e=>{ry({read:()=>setTimeout(e)},{injector:n})})}var gv=new H(""),Ih=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new $e;transitionAbortWithErrorSubject=new $e;configLoader=P(vh);environmentInjector=P(Me);destroyRef=P(wn);urlSerializer=P(Qi);rootContexts=P(Yi);location=P($r);inputBindingEnabled=P(bc,{optional:!0})!==null;titleStrategy=P(hv);options=P(Wr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(_h);createViewTransition=P(fv,{optional:!0});navigationErrorHandler=P(gv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>U(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new oh(i)),r=i=>this.events.next(new sh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(oe(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new _e(null),this.transitions.pipe(ut(r=>r!==null),_t(r=>{let i=!1;return U(r).pipe(_t(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Tt.SupersededByNewNavigation),Dt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?oe(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Nn(o.id,this.urlSerializer.serialize(o.rawUrl),u,hs.IgnoredSameUrlNavigation)),o.resolve(!1),Dt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return U(o).pipe(_t(u=>(this.events.next(new Gr(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Dt:Promise.resolve(u))),n2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=oe(O({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new gc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new Gr(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=h0(this.rootComponentType).snapshot;return this.currentTransition=r=oe(O({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:oe(O({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,U(r)}else{let u="";return this.events.next(new Nn(o.id,this.urlSerializer.serialize(o.extractedUrl),u,hs.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Dt}}),qe(o=>{let s=new th(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Q(o=>(this.currentTransition=r=oe(O({},o),{guards:Ej(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Mj(this.environmentInjector,o=>this.events.next(o)),qe(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw ph(this.urlSerializer,o.guardsResult);let s=new nh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ut(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Tt.GuardRejected),!1)),Gy(o=>{if(o.guards.canActivateChecks.length!==0)return U(o).pipe(qe(s=>{let a=new rh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),_t(s=>{let a=!1;return U(s).pipe(r2(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Tt.NoDataFromResolver)}}))}),qe(s=>{let a=new ih(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Gy(o=>{let s=a=>{let u=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(a.routeConfig).pipe(qe(l=>{a.component=l}),Q(()=>{})));for(let l of a.children)u.push(...s(l));return u};return Ia(s(o.targetSnapshot.root)).pipe(Pr(null),Kn(1))}),Gy(()=>this.afterPreactivation()),_t(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?we(a).pipe(Q(()=>r)):U(r)}),Q(o=>{let s=mj(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=oe(O({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),qe(()=>{this.events.next(new mc)}),Ij(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Kn(1),hl(new se(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ut(()=>!i&&!r.targetRouterState),qe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Tt.Aborted)}))),qe({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ut(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),hl(this.transitionAbortWithErrorSubject.pipe(qe(o=>{throw o}))),Ii(()=>{i||this.cancelNavigationTransition(r,"",Tt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),lt(o=>{if(this.destroyed)return r.resolve(!1),Dt;if(i=!0,v0(o))this.events.next(new An(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),_j(o)?this.events.next(new gs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new fs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=dt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof ms){let{message:u,cancellationCode:l}=ph(this.urlSerializer,a);this.events.next(new An(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new gs(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Dt}))}))}cancelNavigationTransition(t,r,i){let o=new An(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function l2(n){return n!==ls}var A0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>P(d2),providedIn:"root"})}return n})(),mh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},d2=(()=>{class n extends mh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hd(n)))(i||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R0=(()=>{class n{urlSerializer=P(Qi);options=P(Wr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P($r);urlHandlingStrategy=P(_h);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Rn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Rn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=h0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>P(h2),providedIn:"root"})}return n})(),h2=(()=>{class n extends R0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Gr?this.updateStateMemento():t instanceof Nn?this.commitTransition(r):t instanceof gc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof mc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof An&&t.code!==Tt.SupersededByNewNavigation&&t.code!==Tt.Redirect?this.restoreHistory(r):t instanceof fs?this.restoreHistory(r,!0):t instanceof Ut&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hd(n)))(i||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Eh(n,e){n.events.pipe(ut(t=>t instanceof Ut||t instanceof An||t instanceof fs||t instanceof Nn),Q(t=>t instanceof Ut||t instanceof Nn?0:(t instanceof An?t.code===Tt.Redirect||t.code===Tt.SupersededByNewNavigation:!1)?2:1),ut(t=>t!==2),Kn(1)).subscribe(()=>{e()})}var f2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ln=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(iy);stateManager=P(R0);options=P(Wr,{optional:!0})||{};pendingTasks=P(nr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(Ih);urlSerializer=P(Qi);location=P($r);urlHandlingStrategy=P(_h);injector=P(Me);_events=new $e;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(A0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(Ji,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(bc,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Oe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof An&&r.code!==Tt.Redirect&&r.code!==Tt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ut)this.navigated=!0;else if(r instanceof gs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||l2(i.source)},s);this.scheduleNavigation(a,ls,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}hj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ls,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.injector.get(ft)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(dv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=c0(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return u0(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=qr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ls,null,r)}navigate(t,r={skipLocationChange:!1}){return g2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},f2):r===!1?i=O({},p2):i=r,qr(t))return HS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return HS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Eh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function g2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var wh=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=jl(null);get href(){return ts(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new $e;applicationErrorHandler=P(ft);options=P(Wr,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(P(new Nd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ut&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(qr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:qr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Se(ln),Se(Pn),Wa("tabindex"),Se(Xo),Se(Dn),Se(an))};static \u0275dir=sr({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Sd("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Dd("href",i.reactiveHref(),km)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Xa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Xa],replaceUrl:[2,"replaceUrl","replaceUrl",Xa],routerLink:"routerLink"},features:[ji]})}return n})(),m2=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new pt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Ut&&this.update()})}ngAfterContentInit(){U(this.links.changes,U(null)).pipe(Nr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=we(t).pipe(Nr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=y2(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Se(ln),Se(Dn),Se(Xo),Se(zi),Se(wh,8))};static \u0275dir=sr({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&ly(o,wh,5),r&2){let s;dy(s=hy())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ji]})}return n})();function y2(n){return!!n.paths}var Cc=class{};var N0=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ut(t=>t instanceof Ut),mn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=es(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return we(i).pipe(Nr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=U(null);let o=i.pipe(Pe(s=>s===null?U(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return we([o,s]).pipe(Nr())}else return o})}static \u0275fac=function(r){return new(r||n)(B(ln),B(Me),B(Cc),B(vh))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),P0=new H(""),v2=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ls;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Gr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ut?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Nn&&t.code===hs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ps&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>v(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ps(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Qm()};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();function _2(n,...e){return yn([{provide:Ji,multi:!0,useValue:n},[],{provide:Pn,useFactory:M0,deps:[ln]},{provide:Ya,multi:!0,useFactory:k0},e.map(t=>t.\u0275providers)])}function M0(n){return n.routerState.root}function Sc(n,e){return{\u0275kind:n,\u0275providers:e}}function k0(){let n=P(Lt);return e=>{let t=n.get(Hi);if(e!==t.components[0])return;let r=n.get(ln),i=n.get(O0);n.get(yv)===1&&r.initialNavigation(),n.get(F0,null,{optional:!0})?.setUpPreloading(),n.get(P0,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var O0=new H("",{factory:()=>new $e}),yv=new H("",{providedIn:"root",factory:()=>1});function x0(){let n=[{provide:yv,useValue:0},bd(()=>{let e=P(Lt);return e.get(by,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(ln),o=e.get(O0);Eh(i,()=>{r(!0)}),e.get(Ih).afterPreactivation=()=>(r(!0),o.closed?U(void 0):o),i.initialNavigation()}))})];return Sc(2,n)}function L0(){let n=[bd(()=>{P(ln).setUpLocationChangeListener()}),{provide:yv,useValue:2}];return Sc(3,n)}var F0=new H("");function V0(n){return Sc(0,[{provide:F0,useExisting:N0},{provide:Cc,useExisting:n}])}function j0(){return Sc(8,[uv,{provide:bc,useExisting:uv}])}function U0(n){Ui("NgRouterViewTransitions");let e=[{provide:fv,useValue:S0},{provide:pv,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return Sc(9,e)}var B0=[$r,{provide:Qi,useClass:zr},ln,Yi,{provide:Pn,useFactory:M0,deps:[ln]},vh,[]],I2=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[B0,[],{provide:Ji,multi:!0,useValue:t},[],r?.errorHandler?{provide:gv,useValue:r.errorHandler}:[],{provide:Wr,useValue:r||{}},r?.useHash?w2():T2(),E2(),r?.preloadingStrategy?V0(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?b2(r):[],r?.bindToComponentInputs?j0().\u0275providers:[],r?.enableViewTransitions?U0().\u0275providers:[],D2()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ji,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Br({type:n});static \u0275inj=Zn({})}return n})();function E2(){return{provide:P0,useFactory:()=>{let n=P(_S),e=P(Ce),t=P(Wr),r=P(Ih),i=P(Qi);return t.scrollOffset&&n.setOffset(t.scrollOffset),new v2(i,r,n,e,t)}}}function w2(){return{provide:an,useClass:Sy}}function T2(){return{provide:an,useClass:Od}}function b2(n){return[n.initialNavigation==="disabled"?L0().\u0275providers:[],n.initialNavigation==="enabledBlocking"?x0().\u0275providers:[]]}var mv=new H("");function D2(){return[{provide:mv,useFactory:k0},{provide:Ya,multi:!0,useExisting:mv}]}var _s=class n{currentCurrency=new _e({code:"USD",symbol:"$",name:"US Dollar",rate:1});currency$=this.currentCurrency.asObservable();currencies=[{code:"USD",symbol:"$",name:"US Dollar",rate:1},{code:"EUR",symbol:"\u20AC",name:"Euro",rate:.85},{code:"TRY",symbol:"\u20BA",name:"Turkish Lira",rate:27.5}];pricingConfig={basePrices:{fiction:12.99,programming:45.99,science:35.99,history:18.99,biography:22.99,business:28.99,philosophy:16.99,psychology:24.99,art:29.99,health:19.99,education:39.99,religion:15.99,general:14.99},modifiers:{bestseller:1.3,featured:1.15,newBook:1.1,pageCount:{under200:.8,between200And400:1,between400And600:1.2,over600:1.4},publishedYear:{current:1.2,recent:1.1,older:.9},authorPopularity:{famous:1.5,known:1.2,unknown:1}}};constructor(){let e=localStorage.getItem("selectedCurrency");if(e){let t=this.currencies.find(r=>r.code===e);t&&this.currentCurrency.next(t)}}calculateBookPrice(e){let t=e.category?.toLowerCase()||"general",r=this.pricingConfig.basePrices[t]||this.pricingConfig.basePrices.general;if(e.isBestseller&&(r*=this.pricingConfig.modifiers.bestseller),e.isFeatured&&(r*=this.pricingConfig.modifiers.featured),e.isNew&&(r*=this.pricingConfig.modifiers.newBook),e.pageCount&&(e.pageCount<200?r*=this.pricingConfig.modifiers.pageCount.under200:e.pageCount<=400?r*=this.pricingConfig.modifiers.pageCount.between200And400:e.pageCount<=600?r*=this.pricingConfig.modifiers.pageCount.between400And600:r*=this.pricingConfig.modifiers.pageCount.over600),e.publishedDate){let i=new Date(e.publishedDate).getFullYear(),s=new Date().getFullYear()-i;s===0?r*=this.pricingConfig.modifiers.publishedYear.current:s<=3?r*=this.pricingConfig.modifiers.publishedYear.recent:r*=this.pricingConfig.modifiers.publishedYear.older}if(e.author){let i=["Stephen King","J.K. Rowling","Dan Brown","John Grisham","Agatha Christie"],o=["Malcolm Gladwell","Yuval Noah Harari","Jordan Peterson"];i.some(s=>e.author.includes(s))?r*=this.pricingConfig.modifiers.authorPopularity.famous:o.some(s=>e.author.includes(s))&&(r*=this.pricingConfig.modifiers.authorPopularity.known)}return Math.round(r*100)/100}convertPrice(e){let t=this.currentCurrency.value,r=e*t.rate;return Math.round(r*100)/100}formatPrice(e){let t=this.currentCurrency.value,r=this.convertPrice(e);switch(t.code){case"EUR":return`${r.toFixed(2)}${t.symbol}`;case"TRY":return`${r.toFixed(2)} ${t.symbol}`;default:return`${t.symbol}${r.toFixed(2)}`}}getCurrencies(){return this.currencies}getCurrentCurrency(){return this.currentCurrency.value}setCurrency(e){let t=this.currencies.find(r=>r.code===e);t&&(this.currentCurrency.next(t),localStorage.setItem("selectedCurrency",e))}updateExchangeRates(e){this.currencies.forEach(r=>{e[r.code]&&(r.rate=e[r.code])});let t=this.getCurrentCurrency();e[t.code]&&this.currentCurrency.next(oe(O({},t),{rate:e[t.code]}))}getPricingConfig(){return O({},this.pricingConfig)}updatePricingConfig(e){this.pricingConfig=O(O({},this.pricingConfig),e),localStorage.setItem("pricingConfig",JSON.stringify(this.pricingConfig))}resetToDefaults(){this.pricingConfig={basePrices:{fiction:12.99,programming:45.99,science:35.99,history:18.99,biography:22.99,business:28.99,philosophy:16.99,psychology:24.99,art:29.99,health:19.99,education:39.99,religion:15.99,general:14.99},modifiers:{bestseller:1.3,featured:1.15,newBook:1.1,pageCount:{under200:.8,between200And400:1,between400And600:1.2,over600:1.4},publishedYear:{current:1.2,recent:1.1,older:.9},authorPopularity:{famous:1.5,known:1.2,unknown:1}}},localStorage.removeItem("pricingConfig")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Th=class n{constructor(e,t){this.http=e;this.pricingService=t;console.log("OpenLibraryService initialized")}baseUrl="https://openlibrary.org";searchUrl=`${this.baseUrl}/search.json`;coversUrl="https://covers.openlibrary.org";searchBooks(e,t=40,r=0,i){let o=new cn().set("q",e).set("limit",t.toString()).set("offset",r.toString()).set("fields","key,title,author_name,author_key,first_publish_year,publisher,isbn,cover_i,cover_edition_key,edition_count,subject,language,has_fulltext,public_scan_b,ia,ebook_access,ebook_count_i,publish_date,publish_year,ratings_average,ratings_count,want_to_read_count,currently_reading_count,already_read_count");return i&&(o=o.set("sort",i)),this.http.get(this.searchUrl,{params:o}).pipe(lt(s=>(console.error("Error searching books:",s),U({start:0,num_found:0,numFound:0,numFoundExact:!0,docs:[]}))))}searchBySubject(e,t=40,r=0,i){return this.searchBooks(`subject:${e}`,t,r,i)}searchByAuthor(e,t=40,r=0){return this.searchBooks(`author:${e}`,t,r)}getRandomBooksBySubject(e,t=10){return this.searchBySubject(e,t,0,"random")}getPopularBooks(e=40){return this.searchBooks("*",e,0,"rating desc")}getNewReleases(e=40){return this.searchBooks("*",e,0,"new")}convertToBook(e){let t=e.key?.replace("/works/","")||e.key||Math.random().toString(36).substr(2,9),r=e.first_publish_year||parseInt(e.publish_date?.[0]||"2000"),i=this.extractCategory(e.subject),o=(e.ratings_count||0)>100,s=r>2020,a=e.author_name?.join(", ")||"Unknown Author",u=this.pricingService.calculateBookPrice({category:i,isBestseller:o,isFeatured:!1,isNew:s,pageCount:300,publishedDate:r.toString(),author:a});return{id:t,title:e.title||"Unknown Title",author:a,isbn:e.isbn?.[0]||"",publishedDate:r.toString(),publisher:e.publisher?.[0]||"",pageCount:300,category:i,description:"",coverImage:this.getCoverImageUrl(e.cover_i,e.cover_edition_key),price:u,originalPrice:o?u*1.2:void 0,rating:e.ratings_average||0,reviewCount:e.ratings_count||0,language:e.language?.[0]||"en",format:e.has_fulltext?"Digital":"Physical",availability:e.ebook_access==="public"?"Available":"Limited",tags:e.subject?.slice(0,5)||[],isFeatured:!1,isBestseller:o,isNew:s,createdAt:new Date,updatedAt:new Date}}extractCategory(e){if(!e||e.length===0)return"General";let t={fiction:"Fiction",fantasy:"Fiction","science fiction":"Fiction",mystery:"Mystery",romance:"Romance",biography:"Biography",history:"History",science:"Science","self-help":"Self-Help",business:"Business",psychology:"Psychology",philosophy:"Philosophy",religion:"Religion",politics:"Politics",travel:"Travel",cooking:"Cooking",art:"Arts",music:"Arts",sports:"Sports",health:"Health",medicine:"Science",technology:"Technology",computer:"Technology",education:"Education",children:"Children",juvenile:"Children","young adult":"Young Adult",poetry:"Poetry",drama:"Drama",humor:"Humor",thriller:"Mystery",crime:"Mystery",horror:"Horror"};for(let r of e){let i=r.toLowerCase();for(let[o,s]of Object.entries(t))if(i.includes(o))return s}return"General"}getCoverImageUrl(e,t,r="M"){return e?`${this.coversUrl}/b/id/${e}-${r}.jpg`:t?`${this.coversUrl}/b/olid/${t}-${r}.jpg`:"assets/images/no-book-cover.jpg"}getAuthorImageUrl(e,t="M"){return`${this.coversUrl}/a/olid/${e}-${t}.jpg`}convertSearchResponseToBooks(e){return e.docs.map(t=>this.convertToBook(t))}getBookById(e){let t=`${this.baseUrl}/works/${e}.json`;return this.http.get(t).pipe(Q(r=>r?{key:r.key,title:r.title,author_name:r.authors?.map(o=>o.name||"Unknown Author")||["Unknown Author"],first_publish_year:r.first_publish_date?parseInt(r.first_publish_date.substring(0,4)):void 0,subject:r.subjects?.slice(0,10)||[],publisher:r.publishers||[],isbn:r.isbn_13||r.isbn_10||[],cover_i:r.covers?.[0],ratings_average:0,ratings_count:0,has_fulltext:!1,ebook_access:"no",publish_date:r.first_publish_date?[r.first_publish_date]:[],language:r.languages?.map(o=>o.key?.replace("/languages/","")||"en")||["en"],edition_count:r.edition_count||1}:null),lt(r=>(console.error("Error fetching book by ID:",r),U(null))))}static \u0275fac=function(t){return new(t||n)(B(Wd),B(_s))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var H0=class n{constructor(e,t){this.openLibraryService=e;this.pricingService=t}booksSubject=new _e([]);books$=this.booksSubject.asObservable();currentBooks=[];getReliableCoverUrl(e){return e.includes("assets/images/no-book-cover.jpg")?e:e.includes("covers.openlibrary.org")?e.replace("http://","https://"):e}getAlternativeCoverUrls(){return{"The Great Gatsby":["https://covers.openlibrary.org/b/isbn/9780743273565-M.jpg","https://covers.openlibrary.org/b/olid/OL82563W-M.jpg","assets/images/no-book-cover.jpg"],"To Kill a Mockingbird":["https://covers.openlibrary.org/b/isbn/9780061120084-M.jpg","https://covers.openlibrary.org/b/olid/OL5735363W-M.jpg","assets/images/no-book-cover.jpg"],1984:["https://covers.openlibrary.org/b/isbn/9780451524935-M.jpg","https://covers.openlibrary.org/b/olid/OL14934393M-M.jpg","assets/images/no-book-cover.jpg"]}}loadBooks(){return v(this,null,function*(){try{console.log("Starting to load books from Open Library API..."),this.loadFallbackBooks();let e=this.openLibraryService.getPopularBooks(20),t=this.openLibraryService.searchBooks("*",20,0,"random"),[r,i]=yield Promise.all([e.toPromise(),t.toPromise()]),o=[];if(r){let s=this.openLibraryService.convertSearchResponseToBooks(r);o.push(...s)}if(i){let s=this.openLibraryService.convertSearchResponseToBooks(i);o.push(...s)}if(o.length>0){let s=o.filter((a,u,l)=>u===l.findIndex(h=>h.openLibraryId===a.openLibraryId));console.log(`Total unique books loaded from API: ${s.length}`),this.currentBooks=s,this.booksSubject.next(this.currentBooks)}else console.log("No books loaded from API, keeping fallback books")}catch(e){console.error("Error loading books from Open Library:",e)}})}searchBooks(e){return this.openLibraryService.searchBooks(e,40).pipe(Q(t=>t&&t.docs?this.openLibraryService.convertSearchResponseToBooks(t):[]),lt(t=>(console.error("Error searching books:",t),U([]))))}getBooksByCategory(e){return this.openLibraryService.searchBySubject(e.toLowerCase(),40).pipe(Q(t=>t&&t.docs?this.openLibraryService.convertSearchResponseToBooks(t):[]),lt(t=>(console.error("Error getting books by category:",t),U([]))))}getRandomFeaturedBooks(e=6){return v(this,null,function*(){try{let t=["fiction","mystery","science","history","biography","romance"],r=t[Math.floor(Math.random()*t.length)],i=yield this.openLibraryService.getRandomBooksBySubject(r,e*2).toPromise();if(i&&i.docs){let o=this.openLibraryService.convertSearchResponseToBooks(i);return this.shuffleArray(o).slice(0,e).map(s=>oe(O({},s),{isFeatured:!0}))}}catch(t){console.error("Error getting random featured books:",t)}return this.getFallbackBooks().slice(0,e)})}getBookById(e){let t=this.currentBooks.find(r=>r.id===e);return U(t||null)}getAllBooks(){return this.books$}addBook(e){return console.log("Add book functionality - would integrate with backend"),U(e)}updateBook(e){return console.log("Update book functionality - would integrate with backend"),U(e)}deleteBook(e){return console.log("Delete book functionality - would integrate with backend"),U(!0)}importBookFromOpenLibrary(e){let t=this.openLibraryService.convertToBook(e);return console.log("Importing book from Open Library:",t),U(t)}calculateAutomatedPrice(e){return this.pricingService.calculateBookPrice({category:e.category,isBestseller:e.isBestseller,isFeatured:e.isFeatured,isNew:e.isNew,pageCount:e.pageCount,publishedDate:e.publishedDate,author:e.author})}formatPrice(e){return this.pricingService.formatPrice(e)}shuffleArray(e){let t=[...e];for(let r=t.length-1;r>0;r--){let i=Math.floor(Math.random()*(r+1));[t[r],t[i]]=[t[i],t[r]]}return t}loadFallbackBooks(){let e=this.getFallbackBooks();this.currentBooks=e,this.booksSubject.next(this.currentBooks),console.log(`Loaded ${e.length} fallback books`)}getFallbackBooks(){return[{id:"fallback-1",openLibraryId:"OL82563W",title:"The Great Gatsby",author:"F. Scott Fitzgerald",description:"A classic American novel set in the Jazz Age.",category:"Fiction",coverImage:"https://covers.openlibrary.org/b/id/8225261-M.jpg",rating:4.2,reviewCount:1500,stock:25,isActive:!0,isFeatured:!0,isBestseller:!0,isNew:!1,publishedDate:"1925-04-10",pageCount:180,createdAt:new Date,updatedAt:new Date,tags:["classic","american-literature","jazz-age"]},{id:"fallback-2",openLibraryId:"OL5735363W",title:"To Kill a Mockingbird",author:"Harper Lee",description:"A gripping tale of racial injustice and childhood innocence.",category:"Fiction",coverImage:"https://covers.openlibrary.org/b/id/8227691-M.jpg",rating:4.5,reviewCount:2100,stock:18,isActive:!0,isFeatured:!1,isBestseller:!0,isNew:!1,publishedDate:"1960-07-11",pageCount:376,createdAt:new Date,updatedAt:new Date,tags:["classic","social-justice","coming-of-age"]},{id:"fallback-3",openLibraryId:"OL14934393M",title:"1984",author:"George Orwell",description:"A dystopian social science fiction novel and cautionary tale.",category:"Fiction",coverImage:"https://covers.openlibrary.org/b/id/7222246-M.jpg",rating:4.3,reviewCount:2800,stock:30,isActive:!0,isFeatured:!0,isBestseller:!1,isNew:!1,publishedDate:"1949-06-08",pageCount:328,createdAt:new Date,updatedAt:new Date,tags:["dystopian","political","classic"]},{id:"fallback-4",openLibraryId:"OL8509161M",title:"Clean Code",author:"Robert C. Martin",description:"A handbook of agile software craftsmanship.",category:"Programming",coverImage:"https://covers.openlibrary.org/b/id/8509161-M.jpg",rating:4.6,reviewCount:890,stock:15,isActive:!0,isFeatured:!0,isBestseller:!1,isNew:!1,publishedDate:"2008-08-01",pageCount:464,createdAt:new Date,updatedAt:new Date,tags:["programming","software-engineering","best-practices"]},{id:"fallback-5",openLibraryId:"OL8494321M",title:"Sapiens",author:"Yuval Noah Harari",description:"A brief history of humankind.",category:"History",coverImage:"https://covers.openlibrary.org/b/id/8494321-M.jpg",rating:4.4,reviewCount:1200,stock:22,isActive:!0,isFeatured:!1,isBestseller:!0,isNew:!1,publishedDate:"2014-09-04",pageCount:512,createdAt:new Date,updatedAt:new Date,tags:["history","anthropology","evolution"]},{id:"fallback-6",openLibraryId:"OL8225261M",title:"JavaScript: The Good Parts",author:"Douglas Crockford",description:"Essential JavaScript techniques and best practices.",category:"Programming",coverImage:"https://covers.openlibrary.org/b/id/8225261-M.jpg",rating:4.1,reviewCount:650,stock:12,isActive:!0,isFeatured:!1,isBestseller:!1,isNew:!0,publishedDate:"2023-01-15",pageCount:176,createdAt:new Date,updatedAt:new Date,tags:["programming","javascript","web-development"]}].map(t=>oe(O({},t),{price:this.calculateAutomatedPrice(t),originalPrice:void 0}))}getBestsellerBooks(e=5){return v(this,null,function*(){try{let t=yield this.openLibraryService.searchBooks("*",e*2,0,"rating desc").toPromise();if(t&&t.docs)return this.openLibraryService.convertSearchResponseToBooks(t).slice(0,e).map(i=>oe(O({},i),{isBestseller:!0}))}catch(t){console.error("Error getting bestseller books:",t)}return this.getFallbackBooks().filter(t=>t.isBestseller).slice(0,e)})}getNewArrivalBooks(e=4){return v(this,null,function*(){try{let t=yield this.openLibraryService.getNewReleases(e*2).toPromise();if(t&&t.docs)return this.openLibraryService.convertSearchResponseToBooks(t).slice(0,e).map(i=>oe(O({},i),{isNew:!0}))}catch(t){console.error("Error getting new arrival books:",t)}return this.getFallbackBooks().slice(0,e)})}static \u0275fac=function(t){return new(t||n)(B(Th),B(_s))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var z0=()=>{};var W0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},S2=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},K0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(W0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):S2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new _v;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_v=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},A2=function(n){let e=W0(n);return K0.encodeByteArray(e,!0)},Rc=function(n){return A2(n).replace(/\./g,"")},Dh=function(n){try{return K0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Q0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var R2=()=>Q0().__FIREBASE_DEFAULTS__,N2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},P2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Dh(n[1]);return e&&JSON.parse(e)},Ch=()=>{try{return z0()||R2()||N2()||P2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ev=n=>{var e,t;return(t=(e=Ch())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Y0=n=>{let e=Ev(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wv=()=>{var n;return(n=Ch())===null||n===void 0?void 0:n.config},Tv=n=>{var e;return(e=Ch())===null||e===void 0?void 0:e[`_${n}`]};var bh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Kr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Sh(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function J0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Rc(JSON.stringify(t)),Rc(JSON.stringify(s)),""].join(".")}var Ac={};function M2(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ac))Ac[e]?n.emulator.push(e):n.prod.push(e);return n}function k2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var q0=!1;function Ah(n,e){if(typeof window>"u"||typeof document>"u"||!Kr(window.location.host)||Ac[n]===e||Ac[n]||q0)return;Ac[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=M2().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{q0=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=k2(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),x=t("preprendIcon"),q=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let $=m.element;a($),h(R,N);let he=l();u(q,x),$.append(q,C,R,he),document.body.appendChild($)}o?(C.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function O2(){var n;let e=(n=Ch())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rh(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tA(){let n=Ke();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nA(){return!O2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nc(){try{return typeof indexedDB=="object"}catch{return!1}}function Nh(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function rA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var x2="FirebaseError",nt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=x2,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bt.prototype.create)}},Bt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?L2(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new nt(i,a,r)}};function L2(n,e){return n.replace(F2,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var F2=/\{\$([^}]+)}/g;function iA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(G0(o)&&G0(s)){if(!Qt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function G0(n){return n!==null&&typeof n=="object"}function Pc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Is(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Es(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function oA(n,e){let t=new Iv(n,e);return t.subscribe.bind(t)}var Iv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");V2(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=vv),i.error===void 0&&(i.error=vv),i.complete===void 0&&(i.complete=vv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function V2(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vv(){}var j2=1e3,U2=2,B2=4*60*60*1e3,$2=.5;function bv(n,e=j2,t=U2){let r=e*Math.pow(t,n),i=Math.round($2*r*(Math.random()-.5)*2);return Math.min(B2,r+i)}function Qe(n){return n&&n._delegate?n._delegate:n}var Ye=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zi="[DEFAULT]";var Dv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new bh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z2(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function H2(n){return n===Zi?void 0:n}function z2(n){return n.instantiationMode==="EAGER"}var Ph=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Dv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var q2=[],ce=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ce||{}),G2={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},W2=ce.INFO,K2={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},Q2=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=K2[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mn=class{constructor(e){this.name=e,this._logLevel=W2,this._logHandler=Q2,this._userLogHandler=null,q2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var Y2=(n,e)=>e.some(t=>n instanceof t),sA,aA;function J2(){return sA||(sA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z2(){return aA||(aA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var cA=new WeakMap,Sv=new WeakMap,uA=new WeakMap,Cv=new WeakMap,Rv=new WeakMap;function X2(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(kn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&cA.set(t,n)}).catch(()=>{}),Rv.set(e,n),e}function eU(n){if(Sv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Sv.set(n,e)}var Av={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return kn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function lA(n){Av=n(Av)}function tU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Mh(this),e,...t);return uA.set(r,e.sort?e.sort():[e]),kn(r)}:Z2().includes(n)?function(...e){return n.apply(Mh(this),e),kn(cA.get(this))}:function(...e){return kn(n.apply(Mh(this),e))}}function nU(n){return typeof n=="function"?tU(n):(n instanceof IDBTransaction&&eU(n),Y2(n,J2())?new Proxy(n,Av):n)}function kn(n){if(n instanceof IDBRequest)return X2(n);if(Cv.has(n))return Cv.get(n);let e=nU(n);return e!==n&&(Cv.set(n,e),Rv.set(e,n)),e}var Mh=n=>Rv.get(n);function kh(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=kn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(kn(s.result),u.oldVersion,u.newVersion,kn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var rU=["get","getKey","getAll","getAllKeys","count"],iU=["put","add","delete","clear"],Nv=new Map;function dA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nv.get(e))return Nv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=iU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rU.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Nv.set(e,o),o}lA(n=>oe(O({},n),{get:(e,t,r)=>dA(e,t)||n.get(e,t,r),has:(e,t)=>!!dA(e,t)||n.has(e,t)}));var Mv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oU(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function oU(n){let e=n.getComponent();return e?.type==="VERSION"}var kv="@firebase/app",hA="0.13.2";var dr=new Mn("@firebase/app"),sU="@firebase/app-compat",aU="@firebase/analytics-compat",cU="@firebase/analytics",uU="@firebase/app-check-compat",lU="@firebase/app-check",dU="@firebase/auth",hU="@firebase/auth-compat",fU="@firebase/database",pU="@firebase/data-connect",gU="@firebase/database-compat",mU="@firebase/functions",yU="@firebase/functions-compat",vU="@firebase/installations",_U="@firebase/installations-compat",IU="@firebase/messaging",EU="@firebase/messaging-compat",wU="@firebase/performance",TU="@firebase/performance-compat",bU="@firebase/remote-config",DU="@firebase/remote-config-compat",CU="@firebase/storage",SU="@firebase/storage-compat",AU="@firebase/firestore",RU="@firebase/ai",NU="@firebase/firestore-compat",PU="firebase",MU="11.10.0";var Ov="[DEFAULT]",kU={[kv]:"fire-core",[sU]:"fire-core-compat",[cU]:"fire-analytics",[aU]:"fire-analytics-compat",[lU]:"fire-app-check",[uU]:"fire-app-check-compat",[dU]:"fire-auth",[hU]:"fire-auth-compat",[fU]:"fire-rtdb",[pU]:"fire-data-connect",[gU]:"fire-rtdb-compat",[mU]:"fire-fn",[yU]:"fire-fn-compat",[vU]:"fire-iid",[_U]:"fire-iid-compat",[IU]:"fire-fcm",[EU]:"fire-fcm-compat",[wU]:"fire-perf",[TU]:"fire-perf-compat",[bU]:"fire-rc",[DU]:"fire-rc-compat",[CU]:"fire-gcs",[SU]:"fire-gcs-compat",[AU]:"fire-fst",[NU]:"fire-fst-compat",[RU]:"fire-vertex","fire-js":"fire-js",[PU]:"fire-js-all"};var Oh=new Map,OU=new Map,xv=new Map;function fA(n,e){try{n.container.addComponent(e)}catch(t){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pt(n){let e=n.name;if(xv.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;xv.set(e,n);for(let t of Oh.values())fA(t,n);for(let t of OU.values())fA(t,n);return!0}function dn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mt(n){return n==null?!1:n.settings!==void 0}var xU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new Bt("app","Firebase",xU);var Lv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ye("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}};var Yr=MU;function jv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ov,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Qr.create("bad-app-name",{appName:String(i)});if(t||(t=wv()),!t)throw Qr.create("no-options");let o=Oh.get(i);if(o){if(Qt(t,o.options)&&Qt(r,o.config))return o;throw Qr.create("duplicate-app",{appName:i})}let s=new Ph(i);for(let u of xv.values())s.addComponent(u);let a=new Lv(t,r,s);return Oh.set(i,a),a}function Xi(n=Ov){let e=Oh.get(n);if(!e&&n===Ov&&wv())return jv();if(!e)throw Qr.create("no-app",{appName:n});return e}function rt(n,e,t){var r;let i=(r=kU[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(a.join(" "));return}Pt(new Ye(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var LU="firebase-heartbeat-database",FU=1,Mc="firebase-heartbeat-store",Pv=null;function yA(){return Pv||(Pv=kh(LU,FU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Mc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qr.create("idb-open",{originalErrorMessage:n.message})})),Pv}function VU(n){return v(this,null,function*(){try{let t=(yield yA()).transaction(Mc),r=yield t.objectStore(Mc).get(vA(n));return yield t.done,r}catch(e){if(e instanceof nt)dr.warn(e.message);else{let t=Qr.create("idb-get",{originalErrorMessage:e?.message});dr.warn(t.message)}}})}function pA(n,e){return v(this,null,function*(){try{let r=(yield yA()).transaction(Mc,"readwrite");yield r.objectStore(Mc).put(e,vA(n)),yield r.done}catch(t){if(t instanceof nt)dr.warn(t.message);else{let r=Qr.create("idb-set",{originalErrorMessage:t?.message});dr.warn(r.message)}}})}function vA(n){return`${n.name}!${n.options.appId}`}var jU=1024,UU=30,Fv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Vv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>UU){let s=$U(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){dr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=gA(),{heartbeatsToSend:r,unsentEntries:i}=BU(this._heartbeatsCache.heartbeats),o=Rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return dr.warn(t),""}})}};function gA(){return new Date().toISOString().substring(0,10)}function BU(n,e=jU){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),mA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),mA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Vv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Nc()?Nh().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield VU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return pA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function mA(n){return Rc(JSON.stringify({version:2,heartbeats:n})).length}function $U(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function HU(n){Pt(new Ye("platform-logger",e=>new Mv(e),"PRIVATE")),Pt(new Ye("heartbeat",e=>new Fv(e),"PRIVATE")),rt(kv,hA,n),rt(kv,hA,"esm2017"),rt("fire-js","")}HU("");var _A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IA={};var hr,Uv;(function(){var n;function e(T,_){function E(){}E.prototype=_.prototype,T.D=_.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(w,b,S){for(var I=Array(arguments.length-2),Hn=2;Hn<arguments.length;Hn++)I[Hn-2]=arguments[Hn];return _.prototype[b].apply(w,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,E){E||(E=0);var w=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)w[b]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(b=0;16>b;++b)w[b]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=T.g[0],E=T.g[1],b=T.g[2];var S=T.g[3],I=_+(S^E&(b^S))+w[0]+3614090360&4294967295;_=E+(I<<7&4294967295|I>>>25),I=S+(b^_&(E^b))+w[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(E^S&(_^E))+w[2]+606105819&4294967295,b=S+(I<<17&4294967295|I>>>15),I=E+(_^b&(S^_))+w[3]+3250441966&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(S^E&(b^S))+w[4]+4118548399&4294967295,_=E+(I<<7&4294967295|I>>>25),I=S+(b^_&(E^b))+w[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(E^S&(_^E))+w[6]+2821735955&4294967295,b=S+(I<<17&4294967295|I>>>15),I=E+(_^b&(S^_))+w[7]+4249261313&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(S^E&(b^S))+w[8]+1770035416&4294967295,_=E+(I<<7&4294967295|I>>>25),I=S+(b^_&(E^b))+w[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(E^S&(_^E))+w[10]+4294925233&4294967295,b=S+(I<<17&4294967295|I>>>15),I=E+(_^b&(S^_))+w[11]+2304563134&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(S^E&(b^S))+w[12]+1804603682&4294967295,_=E+(I<<7&4294967295|I>>>25),I=S+(b^_&(E^b))+w[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(E^S&(_^E))+w[14]+2792965006&4294967295,b=S+(I<<17&4294967295|I>>>15),I=E+(_^b&(S^_))+w[15]+1236535329&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(b^S&(E^b))+w[1]+4129170786&4294967295,_=E+(I<<5&4294967295|I>>>27),I=S+(E^b&(_^E))+w[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(S^_))+w[11]+643717713&4294967295,b=S+(I<<14&4294967295|I>>>18),I=E+(S^_&(b^S))+w[0]+3921069994&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(E^b))+w[5]+3593408605&4294967295,_=E+(I<<5&4294967295|I>>>27),I=S+(E^b&(_^E))+w[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(S^_))+w[15]+3634488961&4294967295,b=S+(I<<14&4294967295|I>>>18),I=E+(S^_&(b^S))+w[4]+3889429448&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(E^b))+w[9]+568446438&4294967295,_=E+(I<<5&4294967295|I>>>27),I=S+(E^b&(_^E))+w[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(S^_))+w[3]+4107603335&4294967295,b=S+(I<<14&4294967295|I>>>18),I=E+(S^_&(b^S))+w[8]+1163531501&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(E^b))+w[13]+2850285829&4294967295,_=E+(I<<5&4294967295|I>>>27),I=S+(E^b&(_^E))+w[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(S^_))+w[7]+1735328473&4294967295,b=S+(I<<14&4294967295|I>>>18),I=E+(S^_&(b^S))+w[12]+2368359562&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(E^b^S)+w[5]+4294588738&4294967295,_=E+(I<<4&4294967295|I>>>28),I=S+(_^E^b)+w[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^E)+w[11]+1839030562&4294967295,b=S+(I<<16&4294967295|I>>>16),I=E+(b^S^_)+w[14]+4259657740&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^S)+w[1]+2763975236&4294967295,_=E+(I<<4&4294967295|I>>>28),I=S+(_^E^b)+w[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^E)+w[7]+4139469664&4294967295,b=S+(I<<16&4294967295|I>>>16),I=E+(b^S^_)+w[10]+3200236656&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^S)+w[13]+681279174&4294967295,_=E+(I<<4&4294967295|I>>>28),I=S+(_^E^b)+w[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^E)+w[3]+3572445317&4294967295,b=S+(I<<16&4294967295|I>>>16),I=E+(b^S^_)+w[6]+76029189&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^S)+w[9]+3654602809&4294967295,_=E+(I<<4&4294967295|I>>>28),I=S+(_^E^b)+w[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^E)+w[15]+530742520&4294967295,b=S+(I<<16&4294967295|I>>>16),I=E+(b^S^_)+w[2]+3299628645&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(b^(E|~S))+w[0]+4096336452&4294967295,_=E+(I<<6&4294967295|I>>>26),I=S+(E^(_|~b))+w[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~E))+w[14]+2878612391&4294967295,b=S+(I<<15&4294967295|I>>>17),I=E+(S^(b|~_))+w[5]+4237533241&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~S))+w[12]+1700485571&4294967295,_=E+(I<<6&4294967295|I>>>26),I=S+(E^(_|~b))+w[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~E))+w[10]+4293915773&4294967295,b=S+(I<<15&4294967295|I>>>17),I=E+(S^(b|~_))+w[1]+2240044497&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~S))+w[8]+1873313359&4294967295,_=E+(I<<6&4294967295|I>>>26),I=S+(E^(_|~b))+w[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~E))+w[6]+2734768916&4294967295,b=S+(I<<15&4294967295|I>>>17),I=E+(S^(b|~_))+w[13]+1309151649&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~S))+w[4]+4149444226&4294967295,_=E+(I<<6&4294967295|I>>>26),I=S+(E^(_|~b))+w[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~E))+w[2]+718787259&4294967295,b=S+(I<<15&4294967295|I>>>17),I=E+(S^(b|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var E=_-this.blockSize,w=this.B,b=this.h,S=0;S<_;){if(b==0)for(;S<=E;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<_;)if(w[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,w),b=0;break}}else for(;S<_;)if(w[b++]=T[S++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var E=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=E&255,E/=256;for(this.u(T),T=Array(16),_=E=0;4>_;++_)for(var w=0;32>w;w+=8)T[E++]=this.g[_]>>>w&255;return T};function o(T,_){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=_(T)}function s(T,_){this.h=_;for(var E=[],w=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;w&&S==_||(E[b]=S,w=!1)}this.g=E}var a={};function u(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var _=[],E=1,w=0;T>=E;w++)_[w]=T/E|0,E*=4294967296;return new s(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return R(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(_,8)),w=p,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),I=parseInt(T.substring(b,b+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(I))):(w=w.j(E),w=w.add(l(I)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-R(this).m();for(var T=0,_=1,E=0;E<this.g.length;E++){var w=this.i(E);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var _=l(Math.pow(T,6)),E=this,w="";;){var b=he(E,_).g;E=x(E,b.j(_));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=b,C(E))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=x(this,T),N(T)?-1:C(T)?0:1};function R(T){for(var _=T.g.length,E=[],w=0;w<_;w++)E[w]=~T.g[w];return new s(E,~T.h).add(m)}n.abs=function(){return N(this)?R(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],w=0,b=0;b<=_;b++){var S=w+(this.i(b)&65535)+(T.i(b)&65535),I=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=I>>>16,S&=65535,I&=65535,E[b]=I<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function x(T,_){return T.add(R(_))}n.j=function(T){if(C(this)||C(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,E=[],w=0;w<2*_;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var S=this.i(w)>>>16,I=this.i(w)&65535,Hn=T.i(b)>>>16,Ys=T.i(b)&65535;E[2*w+2*b]+=I*Ys,q(E,2*w+2*b),E[2*w+2*b+1]+=S*Ys,q(E,2*w+2*b+1),E[2*w+2*b+1]+=I*Hn,q(E,2*w+2*b+1),E[2*w+2*b+2]+=S*Hn,q(E,2*w+2*b+2)}for(w=0;w<_;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=_;w<2*_;w++)E[w]=0;return new s(E,0)};function q(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function $(T,_){this.g=T,this.h=_}function he(T,_){if(C(_))throw Error("division by zero");if(C(T))return new $(p,p);if(N(T))return _=he(R(T),_),new $(R(_.g),R(_.h));if(N(_))return _=he(T,R(_)),new $(R(_.g),_.h);if(30<T.g.length){if(N(T)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var E=m,w=_;0>=w.l(T);)E=Ue(E),w=Ue(w);var b=ae(E,1),S=ae(w,1);for(w=ae(w,2),E=ae(E,2);!C(w);){var I=S.add(w);0>=I.l(T)&&(b=b.add(E),S=I),w=ae(w,1),E=ae(E,1)}return _=x(T,b.j(_)),new $(b,_)}for(b=p;0<=T.l(_);){for(E=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(E),I=S.j(_);N(I)||0<I.l(T);)E-=w,S=l(E),I=S.j(_);C(S)&&(S=m),b=b.add(S),T=x(T,I)}return new $(b,T)}n.A=function(T){return he(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)&T.i(w);return new s(E,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)|T.i(w);return new s(E,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],w=0;w<_;w++)E[w]=this.i(w)^T.i(w);return new s(E,this.h^T.h)};function Ue(T){for(var _=T.g.length+1,E=[],w=0;w<_;w++)E[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(E,T.h)}function ae(T,_){var E=_>>5;_%=32;for(var w=T.g.length-E,b=[],S=0;S<w;S++)b[S]=0<_?T.i(S+E)>>>_|T.i(S+E+1)<<32-_:T.i(S+E);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Uv=IA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,hr=IA.Integer=s}).apply(typeof _A<"u"?_A:typeof self<"u"?self:typeof window<"u"?window:{});var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={};var Bv,zU,ws,$v,kc,Lh,Hv,zv,qv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof xh=="object"&&xh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,A){for(var L=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)L[Ie-2]=arguments[Ie];return d.prototype[D].apply(g,L)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,A=g.length||0;c.length=D+A;for(let L=0;L<A;L++)c[D+L]=g[L]}else c.push(g)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var Ue=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ae(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Zf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Hn{constructor(){this.h=this.g=null}add(d,f){let g=Ys.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ys=new x(()=>new pM,c=>c.reset());class pM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Js,Zs=!1,Zf=new Hn,YE=()=>{let c=a.Promise.resolve(void 0);Js=()=>{c.then(gM)}};var gM=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ys;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Zs=!1};function br(){this.s=this.s,this.C=this.C}br.prototype.s=!1,br.prototype.ma=function(){this.s||(this.s=!0,this.N())},br.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var mM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Xs(c,d){if(it.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ue){e:{try{he(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:yM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Xs.aa.h.call(this)}}C(Xs,it);var yM={2:"touch",3:"pen",4:"mouse"};Xs.prototype.h=function(){Xs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ea="closure_listenable_"+(1e6*Math.random()|0),vM=0;function _M(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++vM,this.da=this.fa=!1}function fu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pu(c){this.src=c,this.g={},this.h=0}pu.prototype.add=function(c,d,f,g,D){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var L=ep(c,d,g,D);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new _M(d,this.src,A,!!g,D),d.fa=f,c.push(d)),d};function Xf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(fu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function ep(c,d,f,g){for(var D=0;D<c.length;++D){var A=c[D];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return D}return-1}var tp="closure_lm_"+(1e6*Math.random()|0),np={};function JE(c,d,f,g,D){if(g&&g.once)return XE(c,d,f,g,D);if(Array.isArray(d)){for(var A=0;A<d.length;A++)JE(c,d[A],f,g,D);return null}return f=sp(f),c&&c[ea]?c.K(d,f,l(g)?!!g.capture:!!g,D):ZE(c,d,f,!1,g,D)}function ZE(c,d,f,g,D,A){if(!d)throw Error("Invalid event type");var L=l(D)?!!D.capture:!!D,Ie=ip(c);if(Ie||(c[tp]=Ie=new pu(c)),f=Ie.add(d,f,g,L,A),f.proxy)return f;if(g=IM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)mM||(D=L),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(tw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function IM(){function c(f){return d.call(c.src,c.listener,f)}let d=EM;return c}function XE(c,d,f,g,D){if(Array.isArray(d)){for(var A=0;A<d.length;A++)XE(c,d[A],f,g,D);return null}return f=sp(f),c&&c[ea]?c.L(d,f,l(g)?!!g.capture:!!g,D):ZE(c,d,f,!0,g,D)}function ew(c,d,f,g,D){if(Array.isArray(d))for(var A=0;A<d.length;A++)ew(c,d[A],f,g,D);else g=l(g)?!!g.capture:!!g,f=sp(f),c&&c[ea]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=ep(A,f,g,D),-1<f&&(fu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=ip(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ep(d,f,g,D)),(f=-1<c?d[c]:null)&&rp(f))}function rp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ea])Xf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(tw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=ip(d))?(Xf(f,c),f.h==0&&(f.src=null,d[tp]=null)):fu(c)}}}function tw(c){return c in np?np[c]:np[c]="on"+c}function EM(c,d){if(c.da)c=!0;else{d=new Xs(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&rp(c),c=f.call(g,d)}return c}function ip(c){return c=c[tp],c instanceof pu?c:null}var op="__closure_events_fn_"+(1e9*Math.random()>>>0);function sp(c){return typeof c=="function"?c:(c[op]||(c[op]=function(d){return c.handleEvent(d)}),c[op])}function ot(){br.call(this),this.i=new pu(this),this.M=this,this.F=null}C(ot,br),ot.prototype[ea]=!0,ot.prototype.removeEventListener=function(c,d,f,g){ew(this,c,d,f,g)};function yt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new it(d,c);else if(d instanceof it)d.target=d.target||c;else{var D=d;d=new it(g,c),w(d,D)}if(D=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];D=gu(L,g,!0,d)&&D}if(L=d.g=c,D=gu(L,g,!0,d)&&D,D=gu(L,g,!1,d)&&D,f)for(A=0;A<f.length;A++)L=d.g=f[A],D=gu(L,g,!1,d)&&D}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)fu(f[g]);delete c.g[d],c.h--}}this.F=null},ot.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ot.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function gu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Ie=L.listener,Xe=L.ha||L.src;L.fa&&Xf(c.i,L),D=Ie.call(Xe,g)!==!1&&D}}return D&&!g.defaultPrevented}function nw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function rw(c){c.g=nw(()=>{c.g=null,c.i&&(c.i=!1,rw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class wM extends br{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ta(c){br.call(this),this.h=c,this.g={}}C(ta,br);var iw=[];function ow(c){ae(c.g,function(d,f){this.g.hasOwnProperty(f)&&rp(d)},c),c.g={}}ta.prototype.N=function(){ta.aa.N.call(this),ow(this)},ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ap=a.JSON.stringify,TM=a.JSON.parse,bM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function cp(){}cp.prototype.h=null;function sw(c){return c.h||(c.h=c.i())}function aw(){}var na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function up(){it.call(this,"d")}C(up,it);function lp(){it.call(this,"c")}C(lp,it);var di={},cw=null;function mu(){return cw=cw||new ot}di.La="serverreachability";function uw(c){it.call(this,di.La,c)}C(uw,it);function ra(c){let d=mu();yt(d,new uw(d))}di.STAT_EVENT="statevent";function lw(c,d){it.call(this,di.STAT_EVENT,c),this.stat=d}C(lw,it);function vt(c){let d=mu();yt(d,new lw(d,c))}di.Ma="timingevent";function dw(c,d){it.call(this,di.Ma,c),this.size=d}C(dw,it);function ia(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function oa(){this.g=!0}oa.prototype.xa=function(){this.g=!1};function DM(c,d,f,g,D,A){c.info(function(){if(c.g)if(A)for(var L="",Ie=A.split("&"),Xe=0;Xe<Ie.length;Xe++){var ge=Ie[Xe].split("=");if(1<ge.length){var st=ge[0];ge=ge[1];var at=st.split("_");L=2<=at.length&&at[1]=="type"?L+(st+"="+ge+"&"):L+(st+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+L})}function CM(c,d,f,g,D,A,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+A+" "+L})}function Io(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+AM(c,f)+(g?" "+g:"")})}function SM(c,d){c.info(function(){return"TIMEOUT: "+d})}oa.prototype.info=function(){};function AM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<D.length;L++)D[L]=""}}}}return ap(f)}catch{return d}}var yu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dp;function vu(){}C(vu,cp),vu.prototype.g=function(){return new XMLHttpRequest},vu.prototype.i=function(){return{}},dp=new vu;function Dr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new ta(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fw}function fw(){this.i=null,this.g="",this.h=!1}var pw={},hp={};function fp(c,d,f){c.L=1,c.v=wu(zn(d)),c.m=f,c.P=!0,gw(c,null)}function gw(c,d){c.F=Date.now(),_u(c),c.A=zn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Rw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new fw,c.g=Ww(c.j,f?d:null,!c.m),0<c.O&&(c.M=new wM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(iw[0]=D.toString()),D=iw);for(var A=0;A<D.length;A++){var L=JE(f,D[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ra(),DM(c.i,c.u,c.A,c.l,c.R,c.m)}Dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&qn(c)==3?d.j():this.Y(c)},Dr.prototype.Y=function(c){try{if(c==this.g)e:{let at=qn(this.g);var d=this.g.Ba();let To=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||Lw(this.g)))){this.J||at!=4||d==7||(d==8||0>=To?ra(3):ra(2)),pp(this);var f=this.g.Z();this.X=f;t:if(mw(this)){var g=Lw(this.g);c="";var D=g.length,A=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hi(this),sa(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,CM(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,Xe=this.g;if((Ie=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Ie)){var ge=Ie;break t}}ge=null}if(f=ge)Io(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gp(this,f);else{this.o=!1,this.s=3,vt(12),hi(this),sa(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<L.length;)if(Jt=RM(this,L),Jt==hp){at==4&&(this.s=4,vt(14),f=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==pw){this.s=4,vt(15),Io(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Io(this.i,this.l,Jt,null),gp(this,Jt);if(mw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||L.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)Io(this.i,this.l,L,"[Invalid Chunked Response]"),hi(this),sa(this);else if(0<L.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Ep(st),st.M=!0,vt(11))}}else Io(this.i,this.l,L,null),gp(this,L);at==4&&hi(this),this.o&&!this.J&&(at==4?Hw(this.j,this):(this.o=!1,_u(this)))}else GM(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),hi(this),sa(this)}}}catch{}finally{}};function mw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function RM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?hp:(f=Number(d.substring(f,g)),isNaN(f)?pw:(g+=1,g+f>d.length?hp:(d=d.slice(g,g+f),c.C=g+f,d)))}Dr.prototype.cancel=function(){this.J=!0,hi(this)};function _u(c){c.S=Date.now()+c.I,yw(c,c.I)}function yw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ia(m(c.ba,c),d)}function pp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(SM(this.i,this.A),this.L!=2&&(ra(),vt(17)),hi(this),this.s=2,sa(this)):yw(this,this.S-c)};function sa(c){c.j.G==0||c.J||Hw(c.j,c)}function hi(c){pp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ow(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function gp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||mp(f.h,c))){if(!c.K&&mp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Su(f),Du(f);else break e;Ip(f),vt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=ia(m(f.Za,f),6e3));if(1>=Iw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else pi(f,11)}else if((c.K||f.g==c)&&Su(f),!q(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let ge=D[d];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];let st=ge[3];st!=null&&(f.la=st,f.j.info("VER="+f.la));let at=ge[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));let To=ge[5];To!=null&&typeof To=="number"&&0<To&&(g=1.5*To,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Jt=c.g;if(Jt){let Ru=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var A=g.h;A.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(yp(A,A.h),A.h=null))}if(g.D){let wp=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;wp&&(g.ya=wp,Ee(g.I,g.D,wp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=Gw(g,g.J?g.ia:null,g.W),L.K){Ew(g.h,L);var Ie=L,Xe=g.L;Xe&&(Ie.I=Xe),Ie.B&&(pp(Ie),_u(Ie)),g.g=L}else Bw(g);0<f.i.length&&Cu(f)}else ge[0]!="stop"&&ge[0]!="close"||pi(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?pi(f,7):_p(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}ra(4)}catch{}}var NM=class{constructor(c,d){this.g=c,this.map=d}};function vw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _w(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Iw(c){return c.h?1:c.g?c.g.size:0}function mp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function yp(c,d){c.g?c.g.add(d):c.h=d}function Ew(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}vw.prototype.cancel=function(){if(this.i=ww(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function ww(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function PM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function MM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Tw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=MM(c),g=PM(c),D=g.length,A=0;A<D;A++)d.call(void 0,g[A],f&&f[A],c)}var bw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var A=c[f].substring(0,g);D=c[f].substring(g+1)}else A=c[f];d(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function fi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof fi){this.h=c.h,Iu(this,c.j),this.o=c.o,this.g=c.g,Eu(this,c.s),this.l=c.l;var d=c.i,f=new ua;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Dw(this,f),this.m=c.m}else c&&(d=String(c).match(bw))?(this.h=!1,Iu(this,d[1]||"",!0),this.o=aa(d[2]||""),this.g=aa(d[3]||"",!0),Eu(this,d[4]),this.l=aa(d[5]||"",!0),Dw(this,d[6]||"",!0),this.m=aa(d[7]||"")):(this.h=!1,this.i=new ua(null,this.h))}fi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ca(d,Cw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ca(d,Cw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ca(f,f.charAt(0)=="/"?LM:xM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ca(f,VM)),c.join("")};function zn(c){return new fi(c)}function Iu(c,d,f){c.j=f?aa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Eu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Dw(c,d,f){d instanceof ua?(c.i=d,jM(c.i,c.h)):(f||(d=ca(d,FM)),c.i=new ua(d,c.h))}function Ee(c,d,f){c.i.set(d,f)}function wu(c){return Ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function aa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ca(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,OM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function OM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cw=/[#\/\?@]/g,xM=/[#\?:]/g,LM=/[#\?]/g,FM=/[#\?@]/g,VM=/#/g;function ua(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Cr(c){c.g||(c.g=new Map,c.h=0,c.i&&kM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ua.prototype,n.add=function(c,d){Cr(this),this.i=null,c=Eo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Sw(c,d){Cr(c),d=Eo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Aw(c,d){return Cr(c),d=Eo(c,d),c.g.has(d)}n.forEach=function(c,d){Cr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},n.na=function(){Cr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let A=0;A<D.length;A++)f.push(d[g])}return f},n.V=function(c){Cr(this);let d=[];if(typeof c=="string")Aw(this,c)&&(d=d.concat(this.g.get(Eo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Cr(this),this.i=null,c=Eo(this,c),Aw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Rw(c,d,f){Sw(c,d),0<f.length&&(c.i=null,c.g.set(Eo(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var D=A;L[g]!==""&&(D+="="+encodeURIComponent(String(L[g]))),c.push(D)}}return this.i=c.join("&")};function Eo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function jM(c,d){d&&!c.j&&(Cr(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(Sw(this,g),Rw(this,D,f))},c)),c.j=d}function UM(c,d){let f=new oa;if(a.Image){let g=new Image;g.onload=y(Sr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Sr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Sr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Sr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function BM(c,d){let f=new oa,g=new AbortController,D=setTimeout(()=>{g.abort(),Sr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?Sr(f,"TestPingServer: ok",!0,d):Sr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Sr(f,"TestPingServer: error",!1,d)})}function Sr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function $M(){this.g=new bM}function HM(c,d,f){let g=f||"";try{Tw(c,function(D,A){let L=D;l(D)&&(L=ap(D)),d.push(g+A+"="+encodeURIComponent(L))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function la(c){this.l=c.Ub||null,this.j=c.eb||!1}C(la,cp),la.prototype.g=function(){return new Tu(this.l,this.j)},la.prototype.i=function(c){return function(){return c}}({});function Tu(c,d){ot.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Tu,ot),n=Tu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ha(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,da(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?da(this):ha(this),this.readyState==3&&Nw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,da(this))},n.Qa=function(c){this.g&&(this.response=c,da(this))},n.ga=function(){this.g&&da(this)};function da(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ha(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ha(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Pw(c){let d="";return ae(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function vp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Pw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ee(c,d,f))}function Ae(c){ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,ot);var zM=/^https?$/i,qM=["POST","PUT"];n=Ae.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dp.g(),this.v=this.o?sw(this.o):sw(dp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Mw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qM,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Mw(this,A)}};function Mw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,kw(c),bu(c)}function kw(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,yt(this,"complete"),yt(this,"abort"),bu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bu(this,!0)),Ae.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ow(this):this.bb())},n.bb=function(){Ow(this)};function Ow(c){if(c.h&&typeof s<"u"&&(!c.v[1]||qn(c)!=4||c.Z()!=2)){if(c.u&&qn(c)==4)nw(c.Ea,0,c);else if(yt(c,"readystatechange"),qn(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var D=String(c.D).match(bw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!zM.test(D?D.toLowerCase():"")}f=g}if(f)yt(c,"complete"),yt(c,"success");else{c.m=6;try{var A=2<qn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",kw(c)}}finally{bu(c)}}}}function bu(c,d){if(c.g){xw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||yt(c,"ready");try{f.onreadystatechange=g}catch{}}}function xw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function qn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),TM(d)}};function Lw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function GM(c){let d={};c=(c.g&&2<=qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=b(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[D]||[];d[D]=A,A.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Fw(c){this.Aa=0,this.i=[],this.j=new oa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fa("baseRetryDelayMs",5e3,c),this.cb=fa("retryDelaySeedMs",1e4,c),this.Wa=fa("forwardChannelMaxRetries",2,c),this.wa=fa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new vw(c&&c.concurrentRequestLimit),this.Da=new $M,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){vt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Gw(this,null,this.W),Cu(this)};function _p(c){if(Vw(c),c.G==3){var d=c.U++,f=zn(c.I);if(Ee(f,"SID",c.K),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),pa(c,f),d=new Dr(c,c.j,d),d.L=2,d.v=wu(zn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Ww(d.j,null),d.g.ea(d.v)),d.F=Date.now(),_u(d)}qw(c)}function Du(c){c.g&&(Ep(c),c.g.cancel(),c.g=null)}function Vw(c){Du(c),c.u&&(a.clearTimeout(c.u),c.u=null),Su(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Cu(c){if(!_w(c.h)&&!c.s){c.s=!0;var d=c.Ga;Js||YE(),Zs||(Js(),Zs=!0),Zf.add(d,c),c.B=0}}function WM(c,d){return Iw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ia(m(c.Ga,c,d),zw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new Dr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Uw(this,D,d),f=zn(this.I),Ee(f,"RID",c),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),pa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Pw(A)))+"&"+d:this.m&&vp(f,this.m,A)),yp(this.h,D),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",d),Ee(f,"SID","null"),D.T=!0,fp(D,f,null)):fp(D,f,d),this.G=2}}else this.G==3&&(c?jw(this,c):this.i.length==0||_w(this.h)||jw(this))};function jw(c,d){var f;d?f=d.l:f=c.U++;let g=zn(c.I);Ee(g,"SID",c.K),Ee(g,"RID",f),Ee(g,"AID",c.T),pa(c,g),c.m&&c.o&&vp(g,c.m,c.o),f=new Dr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Uw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),yp(c.h,f),fp(f,g,d)}function pa(c,d){c.H&&ae(c.H,function(f,g){Ee(d,g,f)}),c.l&&Tw({},function(f,g){Ee(d,g,f)})}function Uw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=D[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Ie=!0;for(let Xe=0;Xe<f;Xe++){let ge=D[Xe].g,st=D[Xe].map;if(ge-=A,0>ge)A=Math.max(0,D[Xe].g-100),Ie=!1;else try{HM(st,L,"req"+ge+"_")}catch{g&&g(st)}}if(Ie){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Bw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Js||YE(),Zs||(Js(),Zs=!0),Zf.add(d,c),c.v=0}}function Ip(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ia(m(c.Fa,c),zw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,$w(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ia(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Du(this),$w(this))};function Ep(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function $w(c){c.g=new Dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=zn(c.qa);Ee(d,"RID","rpc"),Ee(d,"SID",c.K),Ee(d,"AID",c.T),Ee(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ee(d,"TO",c.ja),Ee(d,"TYPE","xmlhttp"),pa(c,d),c.m&&c.o&&vp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=wu(zn(d)),f.m=null,f.P=!0,gw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Du(this),Ip(this),vt(19))};function Su(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Hw(c,d){var f=null;if(c.g==d){Su(c),Ep(c),c.g=null;var g=2}else if(mp(c.h,d))f=d.D,Ew(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=mu(),yt(g,new dw(g,f)),Cu(c)}else Bw(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&WM(c,d)||g==2&&Ip(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:pi(c,5);break;case 4:pi(c,10);break;case 3:pi(c,6);break;default:pi(c,2)}}}function zw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function pi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new fi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Iu(g,"https"),wu(g),D?UM(g.toString(),f):BM(g.toString(),f)}else vt(2);c.G=0,c.l&&c.l.sa(d),qw(c),Vw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function qw(c){if(c.G=0,c.ka=[],c.l){let d=ww(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Gw(c,d,f){var g=f instanceof fi?zn(f):new fi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Eu(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var A=new fi(null);g&&Iu(A,g),d&&(A.g=d),D&&Eu(A,D),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ee(g,f,d),Ee(g,"VER",c.la),pa(c,g),g}function Ww(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new la({eb:f})):new Ae(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kw(){}n=Kw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Au(){}Au.prototype.g=function(c,d){return new Ot(c,d)};function Ot(c,d){ot.call(this),this.g=new Fw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new wo(this)}C(Ot,ot),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){_p(this.g)},Ot.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=ap(c),c=f);d.i.push(new NM(d.Ya++,c)),d.G==3&&Cu(d)},Ot.prototype.N=function(){this.g.l=null,delete this.j,_p(this.g),delete this.g,Ot.aa.N.call(this)};function Qw(c){up.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(Qw,up);function Yw(){lp.call(this),this.status=1}C(Yw,lp);function wo(c){this.g=c}C(wo,Kw),wo.prototype.ua=function(){yt(this.g,"a")},wo.prototype.ta=function(c){yt(this.g,new Qw(c))},wo.prototype.sa=function(c){yt(this.g,new Yw)},wo.prototype.ra=function(){yt(this.g,"b")},Au.prototype.createWebChannel=Au.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,qv=fr.createWebChannelTransport=function(){return new Au},zv=fr.getStatEventTarget=function(){return mu()},Hv=fr.Event=di,Lh=fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yu.NO_ERROR=0,yu.TIMEOUT=8,yu.HTTP_ERROR=6,kc=fr.ErrorCode=yu,hw.COMPLETE="complete",$v=fr.EventType=hw,aw.EventType=na,na.OPEN="a",na.CLOSE="b",na.ERROR="c",na.MESSAGE="d",ot.prototype.listen=ot.prototype.K,ws=fr.WebChannel=aw,zU=fr.FetchXmlHttpFactory=la,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,Bv=fr.XhrIo=Ae}).apply(typeof xh<"u"?xh:typeof self<"u"?self:typeof window<"u"?window:{});var EA="@firebase/firestore",wA="4.8.0";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var zs="11.10.0";var io=new Mn("@firebase/firestore");function Ts(){return io.logLevel}function V(n,...e){if(io.logLevel<=ce.DEBUG){let t=e.map(kI);io.debug(`Firestore (${zs}): ${n}`,...t)}}function pr(n,...e){if(io.logLevel<=ce.ERROR){let t=e.map(kI);io.error(`Firestore (${zs}): ${n}`,...t)}}function ti(n,...e){if(io.logLevel<=ce.WARN){let t=e.map(kI);io.warn(`Firestore (${zs}): ${n}`,...t)}}function kI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,uR(n,r,t)}function uR(n,e,t){let r=`FIRESTORE (${zs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pr(r),new Error(r)}function ye(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||uR(e,i,r)}function J(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends nt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Hh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Yv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}},Jv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Zv=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new Hh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Je(e)}},Xv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},e_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Xv(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},t_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new zh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function lR(){return new TextEncoder}var Uc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=qU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function n_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ie(r,i);{let o=lR(),s=GU(o.encode(TA(n,t)),o.encode(TA(e,t)));return s!==0?s:ie(r,i)}}t+=r>65535?2:1}return ie(n.length,e.length)}function TA(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function GU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ie(n[t],e[t]);return ie(n.length,e.length)}function Ns(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var bA="__name__",qh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&G(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ie(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):n_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}},ke=class n extends qh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},WU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$t=class n extends qh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return WU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bA}static keyField(){return new n([bA])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(ke.fromString(e))}static fromName(e){return new n(ke.fromString(e).popFirst(5))}static empty(){return new n(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ke(e.slice()))}};function KU(n,e,t){if(!t)throw new z(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QU(n,e,t,r){if(e===!0&&r===!0)throw new z(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DA(n){if(!W.isDocumentKey(n))throw new z(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function OI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G(12329,{type:typeof n})}function Ps(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=OI(n);throw new z(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ve(n,e){let t={typeString:n};return e&&(t.value=e),t}function Xc(n,e){if(!dR(n))throw new z(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new z(M.INVALID_ARGUMENT,t);return!0}var CA=-62135596800,SA=1e6,je=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*SA);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<CA)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SA}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xc(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-CA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:Ve("string",je._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};var X=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bc=-1,r_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};r_.UNKNOWN_ID=-1;function YU(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new oo(i,W.empty(),e)}function JU(n){return new oo(n.readTime,n.key,Bc)}var oo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(X.min(),W.empty(),Bc)}static max(){return new n(X.max(),W.empty(),Bc)}};function ZU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var XU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",i_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function qs(n){return v(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==XU)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function eB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Gs(n){return n.name==="IndexedDbTransactionError"}var xI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),LI=-1;function If(n){return n==null}function $c(n){return n===0&&1/n==-1/0}function tB(n){return typeof n=="number"&&Number.isInteger(n)&&!$c(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var hR="";function nB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AA(e)),e=rB(n.get(t),e);return AA(e)}function rB(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case hR:t+="";break;default:t+=o}}return t}function AA(n){return n+hR+""}var iB="remoteDocuments",fR="owner";var pR="mutationQueues";var gR="mutations";var mR="documentMutations",oB="remoteDocumentsV14";var yR="remoteDocumentGlobal";var vR="targets";var _R="targetDocuments";var IR="targetGlobal",ER="collectionParents";var wR="clientMetadata";var TR="bundles";var bR="namedQueries";var sB="indexConfiguration";var aB="indexState";var cB="indexEntries";var DR="documentOverlays";var uB="globals";var lB=[pR,gR,mR,iB,vR,fR,IR,_R,wR,yR,ER,TR,bR],Hne=[...lB,DR],dB=[pR,gR,mR,oB,vR,fR,IR,_R,wR,yR,ER,TR,bR,DR],hB=dB,fB=[...hB,sB,aB,cB];var zne=[...fB,uB];function RA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ss(this.root,e,this.comparator,!0)}},Ss=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ln=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gh(this.data.getIterator())}getIteratorFrom(e){return new Gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Gh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var On=class n{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ze($t.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Wh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var mt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};mt.EMPTY_BYTE_STRING=new mt("");var pB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(ye(!!n,39018),typeof n=="string"){let e=0,t=pB.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(n.seconds),nanos:be(n.nanos)}}function be(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mr(n){return typeof n=="string"?mt.fromBase64String(n):mt.fromUint8Array(n)}var SR="server_timestamp",AR="__type__",RR="__previous_value__",NR="__local_write_time__";function FI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[AR])===null||t===void 0?void 0:t.stringValue)===SR}function Ef(n){let e=n.mapValue.fields[RR];return FI(e)?Ef(e):e}function Hc(n){let e=gr(n.mapValue.fields[NR].timestampValue);return new je(e.seconds,e.nanos)}var o_=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Kh="(default)",Qh=class n{constructor(e,t){this.projectId=e,this.database=t||Kh}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Kh}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var VI="__type__",PR="__max__",Fh={mapValue:{fields:{__type__:{stringValue:PR}}}},jI="__vector__",Ms="value";function ni(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?FI(n)?4:kR(n)?9007199254740991:MR(n)?10:11:G(28295,{value:n})}function jn(n,e){if(n===e)return!0;let t=ni(n);if(t!==ni(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hc(n).isEqual(Hc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gr(i.timestampValue),a=gr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return mr(i.bytesValue).isEqual(mr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?$c(s)===$c(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ns(n.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(RA(s)!==RA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!jn(s[u],a[u])))return!1;return!0}(n,e);default:return G(52216,{left:n})}}function zc(n,e){return(n.values||[]).find(t=>jn(t,e))!==void 0}function ks(n,e){if(n===e)return 0;let t=ni(n),r=ni(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return NA(n.timestampValue,e.timestampValue);case 4:return NA(Hc(n),Hc(e));case 5:return n_(n.stringValue,e.stringValue);case 6:return function(o,s){let a=mr(o),u=mr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ie(a[l],u[l]);if(h!==0)return h}return ie(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ie(be(o.latitude),be(s.latitude));return a!==0?a:ie(be(o.longitude),be(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return PA(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[Ms])===null||a===void 0?void 0:a.arrayValue,C=(u=m[Ms])===null||u===void 0?void 0:u.arrayValue,N=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:PA(y,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Fh.mapValue&&s===Fh.mapValue)return 0;if(o===Fh.mapValue)return 1;if(s===Fh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=n_(u[p],h[p]);if(m!==0)return m;let y=ks(a[u[p]],l[h[p]]);if(y!==0)return y}return ie(u.length,h.length)}(n.mapValue,e.mapValue);default:throw G(23264,{le:t})}}function NA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=gr(n),r=gr(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function PA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ks(t[i],r[i]);if(o)return o}return ie(t.length,r.length)}function Os(n){return s_(n)}function s_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return mr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=s_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${s_(t.fields[s])}`;return i+"}"}(n.mapValue):G(61005,{value:n})}function Uh(n){switch(ni(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ef(n);return e?16+Uh(e):16;case 5:return 2*n.stringValue.length;case 6:return mr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Uh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return lo(r.fields,(o,s)=>{i+=o.length+Uh(s)}),i}(n.mapValue);default:throw G(13486,{value:n})}}function a_(n){return!!n&&"integerValue"in n}function UI(n){return!!n&&"arrayValue"in n}function MA(n){return!!n&&"nullValue"in n}function kA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bh(n){return!!n&&"mapValue"in n}function MR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[VI])===null||t===void 0?void 0:t.stringValue)===jI}function xc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return lo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PR}var Gne={mapValue:{fields:{[VI]:{stringValue:jI},[Ms]:{arrayValue:{}}}}};var hn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xc(t)}setAll(e){let t=$t.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=xc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(xc(this.value))}};function OR(n){let e=[];return lo(n.fields,(t,r)=>{let i=new $t([t]);if(Bh(r)){let o=OR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new On(e)}var fn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),hn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xs=class{constructor(e,t){this.position=e,this.inclusive=t}};function OA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),t.key):r=ks(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jn(n.position[t],e.position[t]))return!1;return!0}var Ls=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function gB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Yh=class{},ze=class n extends Yh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new u_(e,t,r):t==="array-contains"?new h_(e,r):t==="in"?new f_(e,r):t==="not-in"?new p_(e,r):t==="array-contains-any"?new g_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new l_(e,r):new d_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ks(t,this.value)):t!==null&&ni(this.value)===ni(t)&&this.matchesComparison(ks(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Un=class n extends Yh{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return xR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function xR(n){return n.op==="and"}function LR(n){return mB(n)&&xR(n)}function mB(n){for(let e of n.filters)if(e instanceof Un)return!1;return!0}function c_(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+Os(n.value);if(LR(n))return n.filters.map(e=>c_(e)).join(",");{let e=n.filters.map(t=>c_(t)).join(",");return`${n.op}(${e})`}}function FR(n,e){return n instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(n,e):n instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&FR(s,i.filters[a]),!0):!1}(n,e):void G(19439)}function VR(n){return n instanceof ze?function(t){return`${t.field.canonicalString()} ${t.op} ${Os(t.value)}`}(n):n instanceof Un?function(t){return t.op.toString()+" {"+t.getFilters().map(VR).join(" ,")+"}"}(n):"Filter"}var u_=class extends ze{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},l_=class extends ze{constructor(e,t){super(e,"in",t),this.keys=jR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},d_=class extends ze{constructor(e,t){super(e,"not-in",t),this.keys=jR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function jR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var h_=class extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return UI(t)&&zc(t.arrayValue,this.value)}},f_=class extends ze{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&zc(this.value.arrayValue,t)}},p_=class extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zc(this.value.arrayValue,t)}},g_=class extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!UI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zc(this.value.arrayValue,r))}};var m_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function LA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new m_(n,e,t,r,i,o,s)}function BI(n){let e=J(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>c_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),If(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Os(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Os(r)).join(",")),e.Pe=t}return e.Pe}function $I(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xA(n.startAt,e.startAt)&&xA(n.endAt,e.endAt)}function y_(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Fs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function yB(n,e,t,r,i,o,s,a){return new Fs(n,e,t,r,i,o,s,a)}function HI(n){return new Fs(n)}function FA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vB(n){return n.collectionGroup!==null}function Lc(n){let e=J(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ze($t.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ls(o,r))}),t.has($t.keyField().canonicalString())||e.Te.push(new Ls($t.keyField(),r))}return e.Te}function Fn(n){let e=J(n);return e.Ie||(e.Ie=_B(e,Lc(n))),e.Ie}function _B(n,e){if(n.limitType==="F")return LA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ls(i.field,o)});let t=n.endAt?new xs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xs(n.startAt.position,n.startAt.inclusive):null;return LA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function v_(n,e,t){return new Fs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wf(n,e){return $I(Fn(n),Fn(e))&&n.limitType===e.limitType}function UR(n){return`${BI(Fn(n))}|lt:${n.limitType}`}function bs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>VR(i)).join(", ")}]`),If(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Os(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Os(i)).join(",")),`Target(${r})`}(Fn(n))}; limitType=${n.limitType})`}function Tf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Lc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=OA(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Lc(r),i)||r.endAt&&!function(s,a,u){let l=OA(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Lc(r),i))}(n,e)}function IB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BR(n){return(e,t)=>{let r=!1;for(let i of Lc(n)){let o=EB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function EB(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ks(u,l):G(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:n.dir})}}var yr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return CR(this.inner)}size(){return this.innerSize}};var wB=new Ne(W.comparator);function vr(){return wB}var $R=new Ne(W.comparator);function Oc(...n){let e=$R;for(let t of n)e=e.insert(t.key,t);return e}function HR(n){let e=$R;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function eo(){return Fc()}function zR(){return Fc()}function Fc(){return new yr(n=>n.toString(),(n,e)=>n.isEqual(e))}var TB=new Ne(W.comparator),bB=new Ze(W.comparator);function de(...n){let e=bB;for(let t of n)e=e.add(t);return e}var DB=new Ze(ie);function CB(){return DB}function zI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function qR(n){return{integerValue:""+n}}function SB(n,e){return tB(e)?qR(e):zI(n,e)}var Vs=class{constructor(){this._=void 0}};function AB(n,e,t){return n instanceof js?function(i,o){let s={fields:{[AR]:{stringValue:SR},[NR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&FI(o)&&(o=Ef(o)),o&&(s.fields[RR]=o),{mapValue:s}}(t,e):n instanceof so?WR(n,e):n instanceof ao?KR(n,e):function(i,o){let s=GR(i,o),a=VA(s)+VA(i.Ee);return a_(s)&&a_(i.Ee)?qR(a):zI(i.serializer,a)}(n,e)}function RB(n,e,t){return n instanceof so?WR(n,e):n instanceof ao?KR(n,e):t}function GR(n,e){return n instanceof Us?function(r){return a_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var js=class extends Vs{},so=class extends Vs{constructor(e){super(),this.elements=e}};function WR(n,e){let t=QR(e);for(let r of n.elements)t.some(i=>jn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ao=class extends Vs{constructor(e){super(),this.elements=e}};function KR(n,e){let t=QR(e);for(let r of n.elements)t=t.filter(i=>!jn(i,r));return{arrayValue:{values:t}}}var Us=class extends Vs{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function VA(n){return be(n.integerValue||n.doubleValue)}function QR(n){return UI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function NB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof so&&i instanceof so||r instanceof ao&&i instanceof ao?Ns(r.elements,i.elements,jn):r instanceof Us&&i instanceof Us?jn(r.Ee,i.Ee):r instanceof js&&i instanceof js}(n.transform,e.transform)}var __=class{constructor(e,t){this.version=e,this.transformResults=t}},Jr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function $h(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Bs=class{};function YR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qc(n.key,Jr.none()):new co(n.key,n.data,Jr.none());{let t=n.data,r=hn.empty(),i=new Ze($t.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _r(n.key,r,new On(i.toArray()),Jr.none())}}function PB(n,e,t){n instanceof co?function(i,o,s){let a=i.value.clone(),u=UA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof _r?function(i,o,s){if(!$h(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=UA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(JR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Vc(n,e,t,r){return n instanceof co?function(o,s,a,u){if(!$h(o.precondition,s))return a;let l=o.value.clone(),h=BA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof _r?function(o,s,a,u){if(!$h(o.precondition,s))return a;let l=BA(o.fieldTransforms,u,s),h=s.data;return h.setAll(JR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return $h(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function MB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=GR(r.transform,i||null);o!=null&&(t===null&&(t=hn.empty()),t.set(r.field,o))}return t||null}function jA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ns(r,i,(o,s)=>NB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var co=class extends Bs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_r=class extends Bs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function JR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function UA(n,e,t){let r=new Map;ye(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,RB(s,a,t[i]))}return r}function BA(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,AB(o,s,e))}return r}var qc=class extends Bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},I_=class extends Bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var E_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&PB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Vc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=zR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=YR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(t,r)=>jA(t,r))&&Ns(this.baseMutations,e.baseMutations,(t,r)=>jA(t,r))}},w_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return TB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var T_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var b_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Le,pe;function kB(n){switch(n){case M.OK:return G(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return G(15467,{code:n})}}function ZR(n){if(n===void 0)return pr("GRPC error has no .code"),M.UNKNOWN;switch(n){case Le.OK:return M.OK;case Le.CANCELLED:return M.CANCELLED;case Le.UNKNOWN:return M.UNKNOWN;case Le.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Le.INTERNAL:return M.INTERNAL;case Le.UNAVAILABLE:return M.UNAVAILABLE;case Le.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Le.NOT_FOUND:return M.NOT_FOUND;case Le.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Le.ABORTED:return M.ABORTED;case Le.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Le.DATA_LOSS:return M.DATA_LOSS;default:return G(39323,{code:n})}}(pe=Le||(Le={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var $A=null;var OB=new hr([4294967295,4294967295],0);function HA(n){let e=lR().encode(n),t=new Uv;return t.update(e),new Uint8Array(t.digest())}function zA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hr([t,r],0),new hr([i,o],0)]}var D_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new to(`Invalid padding: ${t}`);if(r<0)throw new to(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new to(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new to(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=hr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(hr.fromNumber(r)));return i.compare(OB)===1&&(i=new hr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=HA(e),[r,i]=zA(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=HA(e),[r,i]=zA(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},to=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Jh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(X.min(),i,new Ne(ie),vr(),de())}},Gc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var As=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Zh=class{constructor(e,t){this.targetId=e,this.De=t}},Xh=class{constructor(e,t,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ef=class{constructor(){this.ve=0,this.Ce=qA(),this.Fe=mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=de(),t=de(),r=de();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:o})}}),new Gc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=qA()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},C_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=vr(),this.je=Vh(),this.Je=Vh(),this.He=new Ne(ie)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(y_(o))if(r===0){let s=new W(o.path);this.Xe(t,s,fn.newNoDocument(s,X.min()))}else ye(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}$A?.ct(function(h,p,m,y,C){var N,R,x,q,$,he;let Ue={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ae=p.unchangedNames;return ae&&(Ue.bloomFilter={applied:C===0,hashCount:(N=ae?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(q=(x=(R=ae?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&q!==void 0?q:0,padding:(he=($=ae?.bits)===null||$===void 0?void 0:$.padding)!==null&&he!==void 0?he:0,mightContain:T=>{var _;return(_=y?.mightContain(T))!==null&&_!==void 0&&_}}),Ue}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=mr(r).toUint8Array()}catch(u){if(u instanceof Wh)return ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new D_(s,i,o)}catch(u){return ti(u instanceof to?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&y_(a.target)){let u=new W(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,fn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=de();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Jh(e,t,this.He,this.ze,r);return this.ze=vr(),this.je=Vh(),this.Je=Vh(),this.He=new Ne(ie),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ef,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ze(ie),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ze(ie),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ef),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Vh(){return new Ne(W.comparator)}function qA(){return new Ne(W.comparator)}var xB={asc:"ASCENDING",desc:"DESCENDING"},LB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FB={and:"AND",or:"OR"},S_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function A_(n,e){return n.useProto3Json||If(e)?e:{value:e}}function tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VB(n,e){return tf(n,e.toTimestamp())}function Vn(n){return ye(!!n,49232),X.fromTimestamp(function(t){let r=gr(t);return new je(r.seconds,r.nanos)}(n))}function qI(n,e){return R_(n,e).canonicalString()}function R_(n,e){let t=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function eN(n){let e=ke.fromString(n);return ye(oN(e),10190,{key:e.toString()}),e}function N_(n,e){return qI(n.databaseId,e.path)}function Gv(n,e){let t=eN(e);if(t.get(1)!==n.databaseId.projectId)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(nN(t))}function tN(n,e){return qI(n.databaseId,e)}function jB(n){let e=eN(n);return e.length===4?ke.emptyPath():nN(e)}function P_(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nN(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function GA(n,e,t){return{name:N_(n,e),fields:t.value.mapValue.fields}}function UB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ye(h===void 0||typeof h=="string",58123),mt.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),mt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:ZR(l.code);return new z(h,l.message||"")}(s);t=new Xh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Gv(n,r.document.name),o=Vn(r.document.updateTime),s=r.document.createTime?Vn(r.document.createTime):X.min(),a=new hn({mapValue:{fields:r.document.fields}}),u=fn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new As(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Gv(n,r.document),o=r.readTime?Vn(r.readTime):X.min(),s=fn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new As([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Gv(n,r.document),o=r.removedTargetIds||[];t=new As([],o,i,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new b_(i,o),a=r.targetId;t=new Zh(a,s)}}return t}function BB(n,e){let t;if(e instanceof co)t={update:GA(n,e.key,e.value)};else if(e instanceof qc)t={delete:N_(n,e.key)};else if(e instanceof _r)t={update:GA(n,e.key,e.data),updateMask:YB(e.fieldMask)};else{if(!(e instanceof I_))return G(16599,{Rt:e.type});t={verify:N_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof js)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof so)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ao)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Us)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw G(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:VB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G(27497)}(n,e.precondition)),t}function $B(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Vn(i.updateTime):Vn(o);return s.isEqual(X.min())&&(s=Vn(o)),new __(s,i.transformResults||[])}(t,e))):[]}function HB(n,e){return{documents:[tN(n,e.path)]}}function zB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tN(n,i);let o=function(l){if(l.length!==0)return iN(Un.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ds(m.field),direction:WB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=A_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function qB(n){let e=jB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ye(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=rN(p);return m instanceof Un&&LR(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(C){return new Ls(Cs(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,If(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new xs(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new xs(y,m)}(t.endAt)),yB(e,i,s,o,a,"F",u,l)}function GB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Cs(t.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Cs(t.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Cs(t.unaryFilter.field);return ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Cs(t.unaryFilter.field);return ze.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(n):n.fieldFilter!==void 0?function(t){return ze.create(Cs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Un.create(t.compositeFilter.filters.map(r=>rN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(t.compositeFilter.op))}(n):G(30097,{filter:n})}function WB(n){return xB[n]}function KB(n){return LB[n]}function QB(n){return FB[n]}function Ds(n){return{fieldPath:n.canonicalString()}}function Cs(n){return $t.fromServerFormat(n.fieldPath)}function iN(n){return n instanceof ze?function(t){if(t.op==="=="){if(kA(t.value))return{unaryFilter:{field:Ds(t.field),op:"IS_NAN"}};if(MA(t.value))return{unaryFilter:{field:Ds(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kA(t.value))return{unaryFilter:{field:Ds(t.field),op:"IS_NOT_NAN"}};if(MA(t.value))return{unaryFilter:{field:Ds(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ds(t.field),op:KB(t.op),value:t.value}}}(n):n instanceof Un?function(t){let r=t.getFilters().map(i=>iN(i));return r.length===1?r[0]:{compositeFilter:{op:QB(t.op),filters:r}}}(n):G(54877,{filter:n})}function YB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function oN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wc=class n{constructor(e,t,r,i,o=X.min(),s=X.min(),a=mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var M_=class{constructor(e){this.gt=e}};function JB(n){let e=qB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?v_(e,e.limit,"L"):e}var nf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),$c(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=gr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(mr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?kR(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):MR(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):G(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ms,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(be(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),W.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};nf.Ut=new nf;var k_=class{constructor(){this.Dn=new O_}addToCollectionParentIndex(e,t){return this.Dn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(oo.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},O_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ze(ke.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(ke.comparator)).toArray()}};var Wne=new Uint8Array(0);var WA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sN=41943040,Yt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(sN,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);var Kc=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var KA="LruGarbageCollector",ZB=1048576;function QA([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var x_=class{constructor(e){this.Tr=e,this.buffer=new Ze(QA),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();QA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},L_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(KA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gs(t)?V(KA,"Ignoring IndexedDB error during garbage collection: ",t):yield qs(t)}yield this.Rr(3e5)}))}},F_=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(xI.ue);let r=new x_(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(WA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WA):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ts()<=ce.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function XB(n,e){return new F_(n,e)}var V_=class{constructor(){this.changes=new yr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var j_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var U_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vc(r.mutation,i,On.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=eo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Oc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=eo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=vr(),s=Fc(),a=function(){return Fc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof _r)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Vc(h.mutation,l,h.mutation.getFieldMask(),je.now())):s.set(l.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new j_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Fc(),i=new Ne((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||On.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=zR();h.forEach(m=>{if(!o.has(m)){let y=YR(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):k.resolve(eo()),a=Bc,u=o;return s.next(l=>k.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:HR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=Oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Oc();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,u=>{let l=function(p,m){return new Fs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,fn.newInvalidDocument(h)))});let a=Oc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Vc(h.mutation,l,On.empty(),je.now()),Tf(t,l)&&(a=a.insert(u,l))}),a})}};var B_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return k.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}}(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:JB(i.bundledQuery),readTime:Vn(i.readTime)}}(t)),k.resolve()}};var $_=class{constructor(){this.overlays=new Ne(W.comparator),this.kr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=eo();return k.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=eo(),o=t.length+1,s=new W(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=eo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=eo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return k.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new T_(t,r));let o=this.kr.get(t);o===void 0&&(o=de(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var H_=class{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var Qc=class{constructor(){this.qr=new Ze(Fe.Qr),this.$r=new Ze(Fe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Fe(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Fe(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new W(new ke([])),r=new Fe(t,e),i=new Fe(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new W(new ke([])),r=new Fe(t,e),i=new Fe(t,e+1),o=de();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Fe(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return W.comparator(e.key,t.key)||ie(e.Hr,t.Hr)}static Ur(e,t){return ie(e.Hr,t.Hr)||W.comparator(e.key,t.key)}};var z_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ze(Fe.Qr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new E_(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Fe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,t){return k.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?LI:this.er-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Fe(t,0),i=new Fe(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(ie);return t.forEach(i=>{let o=new Fe(i,0),s=new Fe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),k.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new Fe(new W(o),0),a=new Ze(ie);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),k.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ye(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return k.forEach(t.mutations,i=>{let o=new Fe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Fe(t,0),i=this.Yr.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var q_=class{constructor(e){this.ni=e,this.docs=function(){return new Ne(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=vr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():fn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=vr(),s=t.path,a=new W(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ZU(JU(h),r)<=0||(i.has(h.key)||Tf(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G(9500)}ri(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new G_(this)}getSize(e){return k.resolve(this.size)}},G_=class extends V_{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var W_=class{constructor(e){this.persistence=e,this.ii=new yr(t=>BI(t),$I),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.si=0,this.oi=new Qc,this.targetCount=0,this._i=Kc.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),k.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.hr(t),k.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.oi.containsKey(t))}};var rf=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new xI(0),this.ci=!1,this.ci=!0,this.li=new H_,this.referenceDelegate=e(this),this.hi=new W_(this),this.indexManager=new k_,this.remoteDocumentCache=function(i){return new q_(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new M_(t),this.Ti=new B_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new z_(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new K_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return k.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},K_=class extends i_{constructor(e){super(),this.currentSequenceNumber=e}},Q_=class n{constructor(e){this.persistence=e,this.Ai=new Qc,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.mi,r=>{let i=W.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,X.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return k.or([()=>k.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},of=class n{constructor(e,t){this.persistence=e,this.gi=new yr(r=>nB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=XB(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return k.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?k.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,X.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),k.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}Sr(e,t,r){return k.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Y_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=de(),i=de();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var J_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Z_=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return nA()?8:eB(Ke())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new J_;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ts()<=ce.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),k.resolve()):(Ts()<=ce.DEBUG&&V("QueryEngine","Query:",bs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ts()<=ce.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):k.resolve())}ps(e,t){if(FA(t))return k.resolve(null);let r=Fn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=v_(t,null,"F"),r=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,v_(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return FA(t)||i.isEqual(X.min())?k.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?k.resolve(null):(Ts()<=ce.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bs(t)),this.vs(e,s,t,YU(i,Bc)).next(a=>a))})}bs(e,t){let r=new Ze(BR(e));return t.forEach((i,o)=>{Tf(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ts()<=ce.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",bs(t)),this.gs.getDocumentsMatchingQuery(e,t,oo.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var GI="LocalStore",e$=3e8,X_=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ne(ie),this.Ms=new yr(o=>BI(o),$I),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function t$(n,e,t,r){return new X_(n,e,t,r)}function aN(n,e){return v(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=de();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function n$(n,e){let t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=k.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);ye(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function cN(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function r$(n,e){let t=J(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(mt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=e$?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=vr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(i$(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(X.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function i$(n,e,t){let r=de(),i=de();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=vr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(GI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function o$(n,e){let t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=LI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function s$(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Wc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function eI(n,e,t){return v(this,null,function*(){let r=J(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Gs(s))throw s;V(GI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function YA(n,e,t){let r=J(n),i=X.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=J(u),m=p.Ms.get(h);return m!==void 0?k.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,Fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:X.min(),t?o:de())).next(a=>(a$(r,IB(e),a),{documents:a,qs:o})))}function a$(n,e,t){let r=n.xs.get(e)||X.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var sf=class{constructor(){this.activeTargetIds=CB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var tI=class{constructor(){this.Fo=new sf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var nI=class{xo(e){}shutdown(){}};var JA="ConnectivityMonitor",af=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(JA,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(JA,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var jh=null;function rI(){return jh===null?jh=function(){return 268435456+Math.round(2147483648*Math.random())}():jh++,"0x"+jh.toString(16)}var Wv="RestConnection",c$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},iI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Kh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=rI(),a=this.Go(e,t.toUriEncodedString());V(Wv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Kr(l);return this.jo(e,a,u,r,h).then(p=>(V(Wv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ti(Wv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=c$[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var oI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var gt="WebChannelConnection",sI=class extends iI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=rI();return new Promise((a,u)=>{let l=new Bv;l.setWithCredentials(!0),l.listenOnce($v.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case kc.NO_ERROR:let p=l.getResponseJson();V(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case kc.TIMEOUT:V(gt,`RPC '${e}' ${s} timed out`),u(new z(M.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:let m=l.getStatus();if(V(gt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=function(x){let q=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(q)>=0?q:M.UNKNOWN}(C.status);u(new z(N,C.message))}else u(new z(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new z(M.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(gt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(gt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=rI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=qv(),a=zv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(gt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,C=new oI({Ho:R=>{y?V(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(gt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(gt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,x,q)=>{R.listen(x,$=>{try{q($)}catch(he){setTimeout(()=>{throw he},0)}})};return N(p,ws.EventType.OPEN,()=>{y||(V(gt,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),N(p,ws.EventType.CLOSE,()=>{y||(y=!0,V(gt,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),N(p,ws.EventType.ERROR,R=>{y||(y=!0,ti(gt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new z(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,ws.EventType.MESSAGE,R=>{var x;if(!y){let q=R.data[0];ye(!!q,16349);let $=q,he=$?.error||((x=$[0])===null||x===void 0?void 0:x.error);if(he){V(gt,`RPC '${e}' stream ${i} received error:`,he);let Ue=he.status,ae=function(E){let w=Le[E];if(w!==void 0)return ZR(w)}(Ue),T=he.message;ae===void 0&&(ae=M.INTERNAL,T="Unknown error status: "+Ue+" with message "+he.message),y=!0,C.__(new z(ae,T)),p.close()}else V(gt,`RPC '${e}' stream ${i} received:`,q),C.a_(q)}}),N(a,Hv.STAT_EVENT,R=>{R.stat===Lh.PROXY?V(gt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Lh.NOPROXY&&V(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function Kv(){return typeof document<"u"?document:null}function bf(n){return new S_(n,!0)}var cf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ZA="PersistentStream",uf=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new cf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new z(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(ZA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(V(ZA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},aI=class extends uf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=UB(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Vn(s.readTime):X.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=P_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=y_(u)?{documents:HB(o,u)}:{query:zB(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=XR(o,s.resumeToken);let l=A_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=tf(o,s.snapshotVersion.toTimestamp());let l=A_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=GB(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=P_(this.serializer),t.removeTarget=e,this.k_(t)}},cI=class extends uf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=$B(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=P_(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>BB(this.serializer,r))};this.k_(t)}};var uI=class{},lI=class extends uI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,R_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(M.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,R_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},dI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(pr(t),this._a=!1):V("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var uo="RemoteStore",hI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){ho(this)&&(V(uo,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=J(u);l.Ia.add(4),yield eu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Df(l)})}(this))}))}),this.Aa=new dI(r,i)}};function Df(n){return v(this,null,function*(){if(ho(n))for(let e of n.da)yield e(!0)})}function eu(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function uN(n,e){let t=J(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),YI(t)?QI(t):Ws(t).x_()&&KI(t,e))}function WI(n,e){let t=J(n),r=Ws(t);t.Ta.delete(e),r.x_()&&lN(t,e),t.Ta.size===0&&(r.x_()?r.B_():ho(t)&&t.Aa.set("Unknown"))}function KI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ws(n).H_(e)}function lN(n,e){n.Ra.$e(e),Ws(n).Y_(e)}function QI(n){n.Ra=new C_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ws(n).start(),n.Aa.aa()}function YI(n){return ho(n)&&!Ws(n).M_()&&n.Ta.size>0}function ho(n){return J(n).Ia.size===0}function dN(n){n.Ra=void 0}function u$(n){return v(this,null,function*(){n.Aa.set("Online")})}function l$(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{KI(n,e)})})}function d$(n,e){return v(this,null,function*(){dN(n),YI(n)?(n.Aa.la(e),QI(n)):n.Aa.set("Unknown")})}function h$(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof Xh&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){V(uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lf(n,r)}else if(e instanceof As?n.Ra.Ye(e):e instanceof Zh?n.Ra.it(e):n.Ra.et(e),!t.isEqual(X.min()))try{let r=yield cN(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),lN(o,u);let p=new Wc(h.target,u,l,h.sequenceNumber);KI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V(uo,"Failed to raise snapshot:",r),yield lf(n,r)}})}function lf(n,e,t){return v(this,null,function*(){if(!Gs(e))throw e;n.Ia.add(1),yield eu(n),n.Aa.set("Offline"),t||(t=()=>cN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){V(uo,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Df(n)}))})}function hN(n,e){return e().catch(t=>lf(n,t,e))}function Cf(n){return v(this,null,function*(){let e=J(n),t=ri(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:LI;for(;f$(e);)try{let i=yield o$(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,p$(e,i)}catch(i){yield lf(e,i)}fN(e)&&pN(e)})}function f$(n){return ho(n)&&n.Pa.length<10}function p$(n,e){n.Pa.push(e);let t=ri(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function fN(n){return ho(n)&&!ri(n).M_()&&n.Pa.length>0}function pN(n){ri(n).start()}function g$(n){return v(this,null,function*(){ri(n).na()})}function m$(n){return v(this,null,function*(){let e=ri(n);for(let t of n.Pa)e.X_(t.mutations)})}function y$(n,e,t){return v(this,null,function*(){let r=n.Pa.shift(),i=w_.from(r,e,t);yield hN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cf(n)})}function v$(n,e){return v(this,null,function*(){e&&ri(n).Z_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return kB(s)&&s!==M.ABORTED}(i.code)){let o=r.Pa.shift();ri(r).N_(),yield hN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Cf(r)}})}(n,e)),fN(n)&&pN(n)})}function XA(n,e){return v(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),V(uo,"RemoteStore received new credentials");let r=ho(t);t.Ia.add(3),yield eu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Df(t)})}function _$(n,e){return v(this,null,function*(){let t=J(n);e?(t.Ia.delete(2),yield Df(t)):e||(t.Ia.add(2),yield eu(t),t.Aa.set("Unknown"))})}function Ws(n){return n.Va||(n.Va=function(t,r,i){let o=J(t);return o.ia(),new aI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:u$.bind(null,n),e_:l$.bind(null,n),n_:d$.bind(null,n),J_:h$.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),YI(n)?QI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),dN(n))}))),n.Va}function ri(n){return n.ma||(n.ma=function(t,r,i){let o=J(t);return o.ia(),new cI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:g$.bind(null,n),n_:v$.bind(null,n),ea:m$.bind(null,n),ta:y$.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.N_(),yield Cf(n)):(yield n.ma.stop(),n.Pa.length>0&&(V(uo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var fI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function JI(n,e){if(pr("AsyncQueue",`${e}: ${n}`),Gs(n))return new z(M.UNAVAILABLE,`${e}: ${n}`);throw n}var df=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=Oc(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var hf=class{constructor(){this.fa=new Ne(W.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},$s=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,df.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var pI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},gI=class{constructor(){this.queries=eR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=J(t),o=i.queries;i.queries=eR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new z(M.ABORTED,"Firestore shutting down"))}};function eR(){return new yr(n=>UR(n),wf)}function I$(n,e){return v(this,null,function*(){let t=J(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new pI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=JI(s,`Initialization of query '${bs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&ZI(t)})}function E$(n,e){return v(this,null,function*(){let t=J(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function w$(n,e){let t=J(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&ZI(t)}function T$(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function ZI(n){n.Da.forEach(e=>{e.next()})}var mI,tR;(tR=mI||(mI={})).Fa="default",tR.Cache="cache";var yI=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=$s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==mI.Cache}};var ff=class{constructor(e){this.key=e}},pf=class{constructor(e){this.key=e}},vI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=de(),this.mutatedKeys=de(),this.Xa=BR(e),this.eu=new df(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new hf,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Tf(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:R})}};return N(y)-N(C)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new $s(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new hf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=de(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new pf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new ff(r))}),t}uu(e){this.Ha=e.qs,this.Za=de();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return $s.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},XI="SyncEngine",_I=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},II=class{constructor(e){this.key=e,this.lu=!1}},EI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new yr(a=>UR(a),wf),this.Tu=new Map,this.Iu=new Set,this.du=new Ne(W.comparator),this.Eu=new Map,this.Au=new Qc,this.Ru={},this.Vu=new Map,this.mu=Kc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function b$(n,e,t=!0){return v(this,null,function*(){let r=IN(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield gN(r,e,t,!0),i})}function D$(n,e){return v(this,null,function*(){let t=IN(n);yield gN(t,e,!0,!1)})}function gN(n,e,t,r){return v(this,null,function*(){let i=yield s$(n.localStore,Fn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield C$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&uN(n.remoteStore,i),a})}function C$(n,e,t,r,i){return v(this,null,function*(){n.gu=(p,m,y)=>function(N,R,x,q){return v(this,null,function*(){let $=R.view.nu(x);$.Ds&&($=yield YA(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,$)));let he=q&&q.targetChanges.get(R.targetId),Ue=q&&q.targetMismatches.get(R.targetId)!=null,ae=R.view.applyChanges($,N.isPrimaryClient,he,Ue);return rR(N,R.targetId,ae._u),ae.snapshot})}(n,p,m,y);let o=yield YA(n.localStore,e,!0),s=new vI(e,o.qs),a=s.nu(o.documents),u=Gc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);rR(n,t,l._u);let h=new _I(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function S$(n,e,t){return v(this,null,function*(){let r=J(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!wf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield eI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&WI(r.remoteStore,i.targetId),wI(r,i.targetId)}).catch(qs))):(wI(r,i.targetId),yield eI(r.localStore,i.targetId,!0))})}function A$(n,e){return v(this,null,function*(){let t=J(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),WI(t.remoteStore,r.targetId))})}function R$(n,e,t){return v(this,null,function*(){let r=L$(n);try{let i=yield function(s,a){let u=J(s),l=je.now(),h=a.reduce((y,C)=>y.add(C.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=vr(),N=de();return u.Os.getEntries(y,h).next(R=>{C=R,C.forEach((x,q)=>{q.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let x=[];for(let q of a){let $=MB(q,p.get(q.key).overlayedDocument);$!=null&&x.push(new _r(q.key,$,OR($.value.mapValue),Jr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{m=R;let x=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:m.batchId,changes:HR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ne(ie)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield tu(r,i.changes),yield Cf(r.remoteStore)}catch(i){let o=JI(i,"Failed to persist write");t.reject(o)}})}function mN(n,e){return v(this,null,function*(){let t=J(n);try{let r=yield r$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ye(s.lu,14607):i.removedDocuments.size>0&&(ye(s.lu,42227),s.lu=!1))}),yield tu(t,r,e)}catch(r){yield qs(r)}})}function nR(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=J(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&ZI(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function N$(n,e,t){return v(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ne(W.comparator);s=s.insert(o,fn.newNoDocument(o,X.min()));let a=de().add(o),u=new Jh(X.min(),new Map,new Ne(ie),s,a);yield mN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),eE(r)}else yield eI(r.localStore,e,!1).then(()=>wI(r,e,t)).catch(qs)})}function P$(n,e){return v(this,null,function*(){let t=J(n),r=e.batch.batchId;try{let i=yield n$(t.localStore,e);vN(t,r,null),yN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tu(t,i)}catch(i){yield qs(i)}})}function M$(n,e,t){return v(this,null,function*(){let r=J(n);try{let i=yield function(s,a){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ye(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);vN(r,e,t),yN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tu(r,i)}catch(i){yield qs(i)}})}function yN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function vN(n,e,t){let r=J(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function wI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||_N(n,r)})}function _N(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(WI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),eE(n))}function rR(n,e,t){for(let r of t)r instanceof ff?(n.Au.addReference(r.key,e),k$(n,r)):r instanceof pf?(V(XI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||_N(n,r.key)):G(19791,{yu:r})}function k$(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(V(XI,"New document in limbo: "+t),n.Iu.add(r),eE(n))}function eE(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new W(ke.fromString(e)),r=n.mu.next();n.Eu.set(r,new II(t)),n.du=n.du.insert(t,r),uN(n.remoteStore,new Wc(Fn(HI(t.path)),r,"TargetPurposeLimboResolution",xI.ue))}}function tu(n,e,t){return v(this,null,function*(){let r=J(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Y_.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return v(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,m=>k.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>k.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Gs(p))throw p;V(GI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(m,N)}}})}(r.localStore,o))})}function O$(n,e){return v(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){V(XI,"User change. New user:",e.toKey());let r=yield aN(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new z(M.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tu(t,r.Bs)}})}function x$(n,e){let t=J(n),r=t.Eu.get(e);if(r&&r.lu)return de().add(r.key);{let i=de(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function IN(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N$.bind(null,e),e.hu.J_=w$.bind(null,e.eventManager),e.hu.pu=T$.bind(null,e.eventManager),e}function L$(n){let e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M$.bind(null,e),e}var EN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=bf(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return t$(this.persistence,new Z_,t.initialUser,this.serializer)}Du(t){return new rf(Q_.Vi,this.serializer)}bu(t){return new tI}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),TI=class extends EN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ye(this.persistence.referenceDelegate instanceof of,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new L_(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new rf(r=>of.Vi(r,t),this.serializer)}};var F$=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=O$.bind(null,this.syncEngine),yield _$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new gI}()}createDatastore(t){let r=bf(t.databaseInfo.databaseId),i=function(s){return new sI(s)}(t.databaseInfo);return function(s,a,u,l){return new lI(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new hI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>nR(this.syncEngine,r,0),function(){return af.C()?new af:new nI}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new EI(o,s,a,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=J(o);V(uo,"RemoteStore shutting down."),s.Ia.add(5),yield eu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var bI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ii="FirestoreClient",DI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=Uc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){V(ii,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(ii,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=JI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Qv(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V(ii,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield aN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{ti("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ti("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function iR(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield V$(n);V(ii,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>XA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>XA(e.remoteStore,i)),n._onlineComponents=e})}function V$(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(ii,"Using user provided OfflineComponentProvider");try{yield Qv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ti("Error using user provided cache. Falling back to memory cache: "+t),yield Qv(n,new EN)}}else V(ii,"Using default OfflineComponentProvider"),yield Qv(n,new TI(void 0));return n._offlineComponents})}function wN(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(ii,"Using user provided OnlineComponentProvider"),yield iR(n,n._uninitializedComponentsProvider._online)):(V(ii,"Using default OnlineComponentProvider"),yield iR(n,new F$))),n._onlineComponents})}function j$(n){return wN(n).then(e=>e.syncEngine)}function U$(n){return v(this,null,function*(){let e=yield wN(n),t=e.eventManager;return t.onListen=b$.bind(null,e.syncEngine),t.onUnlisten=S$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=D$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A$.bind(null,e.syncEngine),t})}function B$(n,e,t={}){let r=new xn;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,u,l){let h=new bI({next:m=>{h.Ou(),s.enqueueAndForget(()=>E$(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new z(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new z(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new yI(HI(a.path),h,{includeMetadataChanges:!0,ka:!0});return I$(o,p)}(yield U$(n),n.asyncQueue,e,t,r)})),r.promise}function TN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var oR=new Map;var bN="firestore.googleapis.com",sR=!0,gf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bN,this.ssl=sR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:sR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZB)throw new z(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yv;switch(r.type){case"firstParty":return new e_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=oR.get(t);r&&(V("ComponentProvider","Removing Datastore"),oR.delete(t),r.terminate())}(this),Promise.resolve()}};function $$(n,e,t,r={}){var i;n=Ps(n,Yc);let o=Kr(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Sh(`https://${u}`),Ah("Firestore",!0)),s.host!==bN&&s.host!==u&&ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Qt(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Je.MOCK_USER;else{h=J0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new z(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Je(m)}n._authCredentials=new Jv(new Hh(h,p))}}var CI=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},bt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Xc(t,n._jsonSchema))return new n(e,r||null,new W(ke.fromString(t.referencePath)))}};bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:Ve("string",bt._jsonSchemaVersion),referencePath:Ve("string")};var Jc=class n extends CI{constructor(e,t,r){super(e,t,HI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pn(n,e,...t){if(n=Qe(n),arguments.length===1&&(e=Uc.newId()),KU("doc","path",e),n instanceof Yc){let r=ke.fromString(e,...t);return DA(r),new bt(n,null,new W(r))}{if(!(n instanceof bt||n instanceof Jc))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ke.fromString(e,...t));return DA(r),new bt(n.firestore,n instanceof Jc?n.converter:null,new W(r))}}var aR="AsyncQueue",mf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new cf(this,"async_queue_retry"),this.oc=()=>{let r=Kv();r&&V(aR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Kv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Kv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new xn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Gs(e))throw e;V(aR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,pr("INTERNAL UNHANDLED ERROR: ",cR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=fI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&G(47125,{hc:cR(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function cR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Hs=class extends Yc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new mf(e),this._firestoreClient=void 0,yield e}})}};function DN(n,e){let t=typeof n=="object"?n:Xi(),r=typeof n=="string"?n:e||Kh,i=dn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Y0("firestore");o&&$$(i,...o)}return i}function CN(n){if(n._terminated)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||H$(n),n._firestoreClient}function H$(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new o_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new DI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Zr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(mt.fromBase64String(e))}catch(t){throw new z(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xc(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Zr._jsonSchemaVersion="firestore/bytes/1.0",Zr._jsonSchema={type:Ve("string",Zr._jsonSchemaVersion),bytes:Ve("string")};var Zc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yf=class{constructor(e){this._methodName=e}};var Xr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Xc(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Xr._jsonSchemaVersion="firestore/geoPoint/1.0",Xr._jsonSchema={type:Ve("string",Xr._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};var ei=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xc(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new z(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Ve("string",ei._jsonSchemaVersion),vectorValues:Ve("object")};var z$=/^__.*__$/,SI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,t,this.fieldTransforms):new co(e,this.data,t,this.fieldTransforms)}};function SN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:n})}}var AI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return vf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(SN(this.Ec)&&z$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},RI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||bf(e)}Dc(e,t,r,i=!1){return new AI({Ec:e,methodName:t,bc:r,path:$t.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function q$(n){let e=n._freezeSettings(),t=bf(n._databaseId);return new RI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function G$(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);PN("Data must be an object, but it was:",s,r);let a=RN(r,s),u,l;if(o.merge)u=new On(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=W$(e,p,t);if(!s.contains(m))throw new z(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Q$(h,m)||h.push(m)}u=new On(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new SI(new hn(a),u,l)}function AN(n,e){if(NN(n=Qe(n)))return PN("Unsupported field value:",e,n),RN(n,e);if(n instanceof yf)return function(r,i){if(!SN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=AN(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=je.fromDate(r);return{timestampValue:tf(i.serializer,o)}}if(r instanceof je){let o=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tf(i.serializer,o)}}if(r instanceof Xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zr)return{bytesValue:XR(i.serializer,r._byteString)};if(r instanceof bt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ei)return function(s,a){return{mapValue:{fields:{[VI]:{stringValue:jI},[Ms]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return zI(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${OI(r)}`)}(n,e)}function RN(n,e){let t={};return CR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,(r,i)=>{let o=AN(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function NN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof Xr||n instanceof Zr||n instanceof bt||n instanceof yf||n instanceof ei)}function PN(n,e,t){if(!NN(t)||!dR(t)){let r=OI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function W$(n,e,t){if((e=Qe(e))instanceof Zc)return e._internalPath;if(typeof e=="string")return MN(n,e);throw vf("Field path arguments must be of type string or ",n,!1,void 0,t)}var K$=new RegExp("[~\\*/\\[\\]]");function MN(n,e,t){if(e.search(K$)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zc(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new z(M.INVALID_ARGUMENT,a+n+u)}function Q$(n,e){return n.some(t=>t.isEqual(e))}var _f=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new NI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(kN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},NI=class extends _f{data(){return super.data()}};function kN(n,e){return typeof e=="string"?MN(n,e):e instanceof Zc?e._internalPath:e._delegate._internalPath}var PI=class{convertValue(e,t="none"){switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return lo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ms].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>be(s.doubleValue));return new ei(o)}convertGeoPoint(e){return new Xr(be(e.latitude),be(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Ef(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){let t=gr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ke.fromString(e);ye(oN(r),9688,{name:e});let i=new Qh(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(t)||pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Y$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var no=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ro=class n extends _f{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Rs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(kN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",ro._jsonSchema={type:Ve("string",ro._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};var Rs=class extends ro{data(e={}){return super.data(e)}},jc=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new no(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rs(this._firestore,this._userDataWriter,r.key,r,new no(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Rs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new no(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Rs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new no(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:J$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Uc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function J$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:n})}}function nu(n){n=Ps(n,bt);let e=Ps(n.firestore,Hs);return B$(CN(e),n._key).then(t=>Z$(e,n,t))}jc._jsonSchemaVersion="firestore/querySnapshot/1.0",jc._jsonSchema={type:Ve("string",jc._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};var MI=class extends PI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}};function oi(n,e,t){n=Ps(n,bt);let r=Ps(n.firestore,Hs),i=Y$(n.converter,e,t);return xN(r,[G$(q$(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Jr.none())])}function ON(n){return xN(Ps(n.firestore,Hs),[new qc(n._key,Jr.none())])}function xN(n,e){return function(r,i){let o=new xn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return R$(yield j$(r),i,o)})),o.promise}(CN(n),e)}function Z$(n,e,t){let r=t.docs.get(e._key),i=new MI(n);return new ro(n,i,e._key,r,new no(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){zs=i})(Yr),Pt(new Ye("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Hs(new Zv(r.getProvider("auth-internal")),new t_(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qh(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),rt(EA,wA,e),rt(EA,wA,"esm2017")})();var X$="firebase",eH="11.10.0";rt(X$,eH,"app");var VN="@firebase/installations",iE="0.6.18";var jN=1e4,UN=`w:${iE}`,BN="FIS_v2",tH="https://firebaseinstallations.googleapis.com/v1",nH=60*60*1e3,rH="installations",iH="Installations";var oH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},po=new Bt(rH,iH,oH);function $N(n){return n instanceof nt&&n.code.includes("request-failed")}function HN({projectId:n}){return`${tH}/projects/${n}/installations`}function zN(n){return{token:n.token,requestStatus:2,expiresIn:aH(n.expiresIn),creationTime:Date.now()}}function qN(n,e){return v(this,null,function*(){let r=(yield e.json()).error;return po.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function GN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function sH(n,{refreshToken:e}){let t=GN(n);return t.append("Authorization",cH(e)),t}function WN(n){return v(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function aH(n){return Number(n.replace("s","000"))}function cH(n){return`${BN} ${n}`}function uH(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=HN(n),s=GN(n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:t,authVersion:BN,appId:n.appId,sdkVersion:UN},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield WN(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:zN(p.authToken)}}else throw yield qN("Create Installation",h)})}function KN(n){return new Promise(e=>{setTimeout(e,n)})}function lH(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var dH=/^[cdef][\w-]{21}$/,rE="";function hH(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=fH(n);return dH.test(t)?t:rE}catch{return rE}}function fH(n){return lH(n).substr(0,22)}function Af(n){return`${n.appName}!${n.appId}`}var QN=new Map;function YN(n,e){let t=Af(n);JN(t,e),pH(t,e)}function JN(n,e){let t=QN.get(n);if(t)for(let r of t)r(e)}function pH(n,e){let t=gH();t&&t.postMessage({key:n,fid:e}),mH()}var fo=null;function gH(){return!fo&&"BroadcastChannel"in self&&(fo=new BroadcastChannel("[Firebase] FID Change"),fo.onmessage=n=>{JN(n.data.key,n.data.fid)}),fo}function mH(){QN.size===0&&fo&&(fo.close(),fo=null)}var yH="firebase-installations-database",vH=1,go="firebase-installations-store",tE=null;function oE(){return tE||(tE=kh(yH,vH,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(go)}}})),tE}function Sf(n,e){return v(this,null,function*(){let t=Af(n),i=(yield oE()).transaction(go,"readwrite"),o=i.objectStore(go),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&YN(n,e.fid),e})}function ZN(n){return v(this,null,function*(){let e=Af(n),r=(yield oE()).transaction(go,"readwrite");yield r.objectStore(go).delete(e),yield r.done})}function Rf(n,e){return v(this,null,function*(){let t=Af(n),i=(yield oE()).transaction(go,"readwrite"),o=i.objectStore(go),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&YN(n,a.fid),a})}function sE(n){return v(this,null,function*(){let e,t=yield Rf(n.appConfig,r=>{let i=_H(r),o=IH(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===rE?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function _H(n){let e=n||{fid:hH(),registrationStatus:0};return XN(e)}function IH(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(po.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=EH(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:wH(n)}:{installationEntry:e}}function EH(n,e){return v(this,null,function*(){try{let t=yield uH(n,e);return Sf(n.appConfig,t)}catch(t){throw $N(t)&&t.customData.serverCode===409?yield ZN(n.appConfig):yield Sf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function wH(n){return v(this,null,function*(){let e=yield LN(n.appConfig);for(;e.registrationStatus===1;)yield KN(100),e=yield LN(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield sE(n);return r||t}return e})}function LN(n){return Rf(n,e=>{if(!e)throw po.create("installation-not-found");return XN(e)})}function XN(n){return TH(n)?{fid:n.fid,registrationStatus:0}:n}function TH(n){return n.registrationStatus===1&&n.registrationTime+jN<Date.now()}function bH(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=DH(n,t),s=sH(n,t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:UN,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield WN(()=>fetch(o,l));if(h.ok){let p=yield h.json();return zN(p)}else throw yield qN("Generate Auth Token",h)})}function DH(n,{fid:e}){return`${HN(n)}/${e}/authTokens:generate`}function aE(n,e=!1){return v(this,null,function*(){let t,r=yield Rf(n.appConfig,o=>{if(!eP(o))throw po.create("not-registered");let s=o.authToken;if(!e&&AH(s))return o;if(s.requestStatus===1)return t=CH(n,e),o;{if(!navigator.onLine)throw po.create("app-offline");let a=NH(o);return t=SH(n,a),a}});return t?yield t:r.authToken})}function CH(n,e){return v(this,null,function*(){let t=yield FN(n.appConfig);for(;t.authToken.requestStatus===1;)yield KN(100),t=yield FN(n.appConfig);let r=t.authToken;return r.requestStatus===0?aE(n,e):r})}function FN(n){return Rf(n,e=>{if(!eP(e))throw po.create("not-registered");let t=e.authToken;return PH(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function SH(n,e){return v(this,null,function*(){try{let t=yield bH(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Sf(n.appConfig,r),t}catch(t){if($N(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield ZN(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Sf(n.appConfig,r)}throw t}})}function eP(n){return n!==void 0&&n.registrationStatus===2}function AH(n){return n.requestStatus===2&&!RH(n)}function RH(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+nH}function NH(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function PH(n){return n.requestStatus===1&&n.requestTime+jN<Date.now()}function MH(n){return v(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield sE(e);return r?r.catch(console.error):aE(e).catch(console.error),t.fid})}function kH(n,e=!1){return v(this,null,function*(){let t=n;return yield OH(t),(yield aE(t,e)).token})}function OH(n){return v(this,null,function*(){let{registrationPromise:e}=yield sE(n);e&&(yield e)})}function xH(n){if(!n||!n.options)throw nE("App Configuration");if(!n.name)throw nE("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw nE(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function nE(n){return po.create("missing-app-config-values",{valueName:n})}var tP="installations",LH="installations-internal",FH=n=>{let e=n.getProvider("app").getImmediate(),t=xH(e),r=dn(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},VH=n=>{let e=n.getProvider("app").getImmediate(),t=dn(e,tP).getImmediate();return{getId:()=>MH(t),getToken:i=>kH(t,i)}};function jH(){Pt(new Ye(tP,FH,"PUBLIC")),Pt(new Ye(LH,VH,"PRIVATE"))}jH();rt(VN,iE);rt(VN,iE,"esm2017");var Nf="analytics",UH="firebase_id",BH="origin",$H=60*1e3,HH="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pE="https://www.googletagmanager.com/gtag/js";var kt=new Mn("@firebase/analytics");var zH={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ht=new Bt("analytics","Analytics",zH);function qH(n){if(!n.startsWith(pE)){let e=Ht.create("invalid-gtag-resource",{gtagURL:n});return kt.warn(e.message),""}return n}function cP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function GH(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function WH(n,e){let t=GH("firebase-js-sdk-policy",{createScriptURL:qH}),r=document.createElement("script"),i=`${pE}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function KH(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function QH(n,e,t,r,i,o){return v(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield cP(t)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){kt.error(a)}n("config",i,o)})}function YH(n,e,t,r,i){return v(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield cP(t);for(let u of s){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){kt.error(o)}})}function JH(n,e,t,r){function i(o,...s){return v(this,null,function*(){try{if(o==="event"){let[a,u]=s;yield YH(n,e,t,a,u)}else if(o==="config"){let[a,u]=s;yield QH(n,e,t,r,a,u)}else if(o==="consent"){let[a,u]=s;n("consent",a,u)}else if(o==="get"){let[a,u,l]=s;n("get",a,u,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){kt.error(a)}})}return i}function ZH(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=JH(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function XH(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(pE)&&t.src.includes(n))return t;return null}var e4=30,t4=1e3,uE=class{constructor(e={},t=t4){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},uP=new uE;function n4(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function r4(n){return v(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:n4(r)},o=HH.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Ht.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function i4(r){return v(this,arguments,function*(n,e=uP,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Ht.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Ht.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new lE;return setTimeout(()=>v(null,null,function*(){u.abort()}),t!==void 0?t:$H),lP({appId:i,apiKey:o,measurementId:s},a,u,e)})}function lP(o,s,a){return v(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=uP){var u;let{appId:l,measurementId:h}=n;try{yield o4(r,e)}catch(p){if(h)return kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield r4(n);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!s4(m)){if(i.deleteThrottleMetadata(l),h)return kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:h};throw p}let y=Number((u=m?.customData)===null||u===void 0?void 0:u.httpStatus)===503?bv(t,i.intervalMillis,e4):bv(t,i.intervalMillis),C={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return i.setThrottleMetadata(l,C),kt.debug(`Calling attemptFetch again in ${y} millis`),lP(n,C,r,i)}})}function o4(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Ht.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function s4(n){if(!(n instanceof nt)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var lE=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var dE;function a4(n,e,t,r,i){return v(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var hE;function c4(n){hE=n}function u4(n){dE=n}function l4(){return v(this,null,function*(){if(Nc())try{yield Nh()}catch(n){return kt.warn(Ht.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return kt.warn(Ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function d4(n,e,t,r,i,o,s){return v(this,null,function*(){var a;let u=i4(n);u.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&kt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>kt.error(y)),e.push(u);let l=l4().then(y=>{if(y)return r.getId()}),[h,p]=yield Promise.all([u,l]);XH(o)||WH(o,h.measurementId),hE&&(i("consent","default",hE),c4(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[BH]="firebase",m.update=!0,p!=null&&(m[UH]=p),i("config",h.measurementId,m),dE&&(i("set",dE),u4(void 0)),h.measurementId})}var fE=class{constructor(e){this.app=e}_delete(){return delete ru[this.app.options.appId],Promise.resolve()}},ru={},nP=[],rP={},cE="dataLayer",h4="gtag",iP,dP,oP=!1;function f4(){let n=[];if(Rh()&&n.push("This is a browser extension environment."),rA()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ht.create("invalid-analytics-context",{errorInfo:e});kt.warn(t.message)}}function p4(n,e,t){f4();let r=n.options.appId;if(!r)throw Ht.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ht.create("no-api-key");if(ru[r]!=null)throw Ht.create("already-exists",{id:r});if(!oP){KH(cE);let{wrappedGtag:o,gtagCore:s}=ZH(ru,nP,rP,cE,h4);dP=o,iP=s,oP=!0}return ru[r]=d4(n,nP,rP,e,iP,cE,t),new fE(n)}function hP(n=Xi()){n=Qe(n);let e=dn(n,Nf);return e.isInitialized()?e.getImmediate():g4(n)}function g4(n,e={}){let t=dn(n,Nf);if(t.isInitialized()){let i=t.getImmediate();if(Qt(e,t.getOptions()))return i;throw Ht.create("already-initialized")}return t.initialize({options:e})}function m4(n,e,t,r){n=Qe(n),a4(dP,ru[n.app.options.appId],e,t,r).catch(i=>kt.error(i))}var sP="@firebase/analytics",aP="0.10.17";function y4(){Pt(new Ye(Nf,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return p4(r,i,t)},"PUBLIC")),Pt(new Ye("analytics-internal",n,"PRIVATE")),rt(sP,aP),rt(sP,aP,"esm2017");function n(e){try{let t=e.getProvider(Nf).getImmediate();return{logEvent:(r,i,o)=>m4(t,r,i,o)}}catch(t){throw Ht.create("interop-component-reg-failed",{reason:t})}}}y4();function AP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var RP=AP,NP=new Bt("auth","Firebase",AP());var Lf=new Mn("@firebase/auth");function v4(n,...e){Lf.logLevel<=ce.WARN&&Lf.warn(`Auth (${Yr}): ${n}`,...e)}function Mf(n,...e){Lf.logLevel<=ce.ERROR&&Lf.error(`Auth (${Yr}): ${n}`,...e)}function $n(n,...e){throw jE(n,...e)}function mo(n,...e){return jE(n,...e)}function PP(n,e,t){let r=Object.assign(Object.assign({},RP()),{[e]:t});return new Bt("auth","Firebase",r).create(e,{appName:n.name})}function wr(n){return PP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return NP.create(n,...e)}function K(n,e,...t){if(!n)throw jE(e,...t)}function Ir(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Mf(e),new Error(e)}function ci(n,e){n||Ir(e)}function vE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _4(){return fP()==="http:"||fP()==="https:"}function fP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function I4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_4()||Rh()||"connection"in navigator)?navigator.onLine:!0}function E4(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var yo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ci(t>e,"Short delay should be less than long delay!"),this.isMobile=Z0()||eA()}get(){return I4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function UE(n,e){ci(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ff=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var w4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var T4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],b4=new yo(3e4,6e4);function ui(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Tr(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return MP(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Pc(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return X0()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Kr(n.emulatorConfig.host)&&(y.credentials="include"),Ff.fetch()(yield kP(n,n.config.apiHost,t,p),y)}))})}function MP(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},w4),e);try{let i=new _E(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Pf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Pf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Pf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw PP(n,h,l);$n(n,h)}}catch(i){if(i instanceof nt)throw i;$n(n,"network-request-failed",{message:String(i)})}})}function du(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Tr(n,e,t,r,i);return"mfaPendingCredential"in l&&$n(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function kP(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?UE(n.config,i):`${n.config.apiScheme}://${i}`;return T4.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function D4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var _E=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mo(this.auth,"network-request-failed")),b4.get())})}};function Pf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=mo(n,e,r);return i.customData._tokenResponse=t,i}function pP(n){return n!==void 0&&n.enterprise!==void 0}var IE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function C4(n,e){return v(this,null,function*(){return Tr(n,"GET","/v2/recaptchaConfig",ui(n,e))})}function S4(n,e){return v(this,null,function*(){return Tr(n,"POST","/v1/accounts:delete",e)})}function Vf(n,e){return v(this,null,function*(){return Tr(n,"POST","/v1/accounts:lookup",e)})}function ou(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function OP(n,e=!1){return v(this,null,function*(){let t=Qe(n),r=yield t.getIdToken(e),i=BE(r);K(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ou(gE(i.auth_time)),issuedAtTime:ou(gE(i.iat)),expirationTime:ou(gE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function gE(n){return Number(n)*1e3}function BE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Dh(t);return i?JSON.parse(i):(Mf("Failed to decode base64 JWT payload"),null)}catch(i){return Mf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gP(n){let e=BE(n);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ks(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof nt&&A4(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function A4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var EE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var au=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function jf(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ks(n,Vf(t,{idToken:r}));K(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?LP(o.providerUserInfo):[],a=R4(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new au(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function xP(n){return v(this,null,function*(){let e=Qe(n);yield jf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function R4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function LP(n){return n.map(e=>{var{providerId:t}=e,r=Up(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function N4(n,e){return v(this,null,function*(){let t=yield MP(n,{},()=>v(null,null,function*(){let r=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield kP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Kr(n.emulatorConfig.host)&&(u.credentials="include"),Ff.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function P4(n,e){return v(this,null,function*(){return Tr(n,"POST","/v2/accounts:revokeToken",ui(n,e))})}var su=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){K(e.length!==0,"internal-error");let t=gP(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield N4(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(K(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(K(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ir("not implemented")}};function si(n,e){K(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ai=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new au(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Ks(this,this.stsTokenManager.getToken(this.auth,e));return K(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return OP(this,e)}reload(){return xP(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield jf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Mt(this.auth.app))return Promise.reject(wr(this.auth));let e=yield this.getIdToken();return yield Ks(this,S4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=t.createdAt)!==null&&l!==void 0?l:void 0,q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:he,isAnonymous:Ue,providerData:ae,stsTokenManager:T}=t;K($&&T,e,"internal-error");let _=su.fromJSON(this.name,T);K(typeof $=="string",e,"internal-error"),si(p,e.name),si(m,e.name),K(typeof he=="boolean",e,"internal-error"),K(typeof Ue=="boolean",e,"internal-error"),si(y,e.name),si(C,e.name),si(N,e.name),si(R,e.name),si(x,e.name),si(q,e.name);let E=new n({uid:$,auth:e,email:m,emailVerified:he,displayName:p,isAnonymous:Ue,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:x,lastLoginAt:q});return ae&&Array.isArray(ae)&&(E.providerData=ae.map(w=>Object.assign({},w))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new su;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];K(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?LP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new su;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new au(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var mP=new Map;function Er(n){ci(n instanceof Function,"Expected a class definition");let e=mP.get(n);return e?(ci(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mP.set(n,e),e)}var M4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),wE=M4;function kf(n,e,t){return`firebase:${n}:${e}:${t}`}var Uf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=kf(this.userKey,i.apiKey,o),this.fullPersistenceKey=kf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Vf(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Er(wE),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Er(wE),s=kf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Vf(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield ai._fromGetAccountInfoResponse(e,m,h)}else p=ai._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function yP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($P(e))return"Blackberry";if(HP(e))return"Webos";if(VP(e))return"Safari";if((e.includes("chrome/")||jP(e))&&!e.includes("edge/"))return"Chrome";if(BP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function FP(n=Ke()){return/firefox\//i.test(n)}function VP(n=Ke()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jP(n=Ke()){return/crios\//i.test(n)}function UP(n=Ke()){return/iemobile/i.test(n)}function BP(n=Ke()){return/android/i.test(n)}function $P(n=Ke()){return/blackberry/i.test(n)}function HP(n=Ke()){return/webos/i.test(n)}function $E(n=Ke()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function k4(n=Ke()){var e;return $E(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function O4(){return tA()&&document.documentMode===10}function zP(n=Ke()){return $E(n)||BP(n)||HP(n)||$P(n)||/windows phone/i.test(n)||UP(n)}function qP(n,e=[]){let t;switch(n){case"Browser":t=yP(Ke());break;case"Worker":t=`${yP(Ke())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yr}/${r}`}var TE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function x4(t){return v(this,arguments,function*(n,e={}){return Tr(n,"GET","/v2/passwordPolicy",ui(n,e))})}var L4=6,bE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:L4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var DE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bf(this),this.idTokenSubscription=new Bf(this),this.beforeStateQueue=new TE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Er(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Uf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield Vf(this,{idToken:e}),r=yield ai._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Mt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield jf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=E4()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Mt(this.app))return Promise.reject(wr(this));let t=e?Qe(e):null;return t&&K(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Mt(this.app)?Promise.reject(wr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Mt(this.app)?Promise.reject(wr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Er(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield x4(this),t=new bE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield P4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Er(e)||this._popupRedirectResolver;K(t,this,"argument-error"),this.redirectPersistenceManager=yield Uf.create(this,[Er(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&v4(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function _o(n){return Qe(n)}var Bf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=oA(t=>this.observer=t)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Kf={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F4(n){Kf=n}function GP(n){return Kf.loadJS(n)}function V4(){return Kf.recaptchaEnterpriseScript}function j4(){return Kf.gapiScript}function WP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var CE=class{constructor(){this.enterprise=new SE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},SE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var U4="recaptcha-enterprise",KP="NO_RECAPTCHA",AE=class{constructor(e){this.type=U4,this.auth=_o(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){C4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new IE(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;pP(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(KP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&pP(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=V4();u.length!==0&&(u+=a),GP(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function iu(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new AE(n),s;if(i)s=KP;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function RE(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield iu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield iu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield iu(n,e,t);return r(n,a).catch(u=>v(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield iu(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield iu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function QP(n,e){let t=dn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Qt(o,e??{}))return i;$n(i,"already-initialized")}return t.initialize({options:e})}function B4(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Er);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function YP(n,e,t){let r=_o(n);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=JP(e),{host:s,port:a}=$4(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(Qt(l,r.config.emulator)&&Qt(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Kr(s)?(Sh(`${o}//${s}${u}`),Ah("Auth",!0)):i||H4()}function JP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $4(n){let e=JP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:vP(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:vP(s)}}}function vP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function H4(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var cu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,t){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}};function z4(n,e){return v(this,null,function*(){return Tr(n,"POST","/v1/accounts:signUp",e)})}function q4(n,e){return v(this,null,function*(){return du(n,"POST","/v1/accounts:signInWithPassword",ui(n,e))})}function G4(n,e){return v(this,null,function*(){return du(n,"POST","/v1/accounts:signInWithEmailLink",ui(n,e))})}function W4(n,e){return v(this,null,function*(){return du(n,"POST","/v1/accounts:signInWithEmailLink",ui(n,e))})}var uu=class n extends cu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return RE(e,t,"signInWithPassword",q4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return G4(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return RE(e,r,"signUpPassword",z4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return W4(e,{idToken:t,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function mE(n,e){return v(this,null,function*(){return du(n,"POST","/v1/accounts:signInWithIdp",ui(n,e))})}function K4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Q4(n){let e=Is(Es(n)).link,t=e?Is(Es(e)).deep_link_id:null,r=Is(Es(n)).deep_link_id;return(r?Is(Es(r)).link:null)||r||t||e||n}var $f=class n{constructor(e){var t,r,i,o,s,a;let u=Is(Es(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=K4((i=u.mode)!==null&&i!==void 0?i:null);K(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Q4(e);try{return new n(t)}catch{return null}}};var ZP=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return uu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=$f.parseLink(r);return K(i,"argument-error"),uu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Hf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var NE=class extends Hf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Y4(n,e){return v(this,null,function*(){return du(n,"POST","/v1/accounts:signUp",ui(n,e))})}var Qs=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield ai._fromIdTokenResponse(e,r,i),s=_P(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=_P(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function _P(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var PE=class n extends nt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function XP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?PE._fromErrorAndOperation(n,o,e,r):o})}function J4(n,e,t=!1){return v(this,null,function*(){let r=yield Ks(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Qs._forOperation(n,"link",r)})}function Z4(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Mt(r.app))return Promise.reject(wr(r));let i="reauthenticate";try{let o=yield Ks(n,XP(r,i,e,n),t);K(o.idToken,r,"internal-error");let s=BE(o.idToken);K(s,r,"internal-error");let{sub:a}=s;return K(n.uid===a,r,"user-mismatch"),Qs._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&$n(r,"user-mismatch"),o}})}function eM(n,e,t=!1){return v(this,null,function*(){if(Mt(n.app))return Promise.reject(wr(n));let r="signIn",i=yield XP(n,r,e),o=yield Qs._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function tM(n,e){return v(this,null,function*(){return eM(_o(n),e)})}function nM(n){return v(this,null,function*(){let e=_o(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function HE(n,e,t){return v(this,null,function*(){if(Mt(n.app))return Promise.reject(wr(n));let r=_o(n),s=yield RE(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Y4,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&nM(n),u}),a=yield Qs._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function zE(n,e,t){return Mt(n.app)?Promise.reject(wr(n)):tM(Qe(n),ZP.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&nM(n),r}))}function X4(n,e){return v(this,null,function*(){return Tr(n,"POST","/v1/accounts:update",e)})}function qE(r,i){return v(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=Qe(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Ks(o,X4(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function rM(n,e,t,r){return Qe(n).onIdTokenChanged(e,t,r)}function iM(n,e,t){return Qe(n).beforeAuthStateChanged(e,t)}function GE(n){return Qe(n).signOut()}var zf="__sak";var qf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zf,"1"),this.storage.removeItem(zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var ez=1e3,tz=10,nz=(()=>{class n extends qf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);O4()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,tz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},ez)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Ar(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Ar(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Ar(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),oM=nz;var rz=(()=>{class n extends qf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),WE=rz;function iz(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var oz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield iz(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function sM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ME=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=sM("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Bn(){return window}function sz(n){Bn().location.href=n}function aM(){return typeof Bn().WorkerGlobalScope<"u"&&typeof Bn().importScripts=="function"}function az(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function cz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function uz(){return aM()?self:null}var cM="firebaseLocalStorageDb",lz=1,Gf="firebaseLocalStorage",uM="fbase_key",vo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Qf(n,e){return n.transaction([Gf],e?"readwrite":"readonly").objectStore(Gf)}function dz(){let n=indexedDB.deleteDatabase(cM);return new vo(n).toPromise()}function kE(){let n=indexedDB.open(cM,lz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Gf,{keyPath:uM})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Gf)?e(r):(r.close(),yield dz(),e(yield kE()))}))})}function IP(n,e,t){return v(this,null,function*(){let r=Qf(n,!0).put({[uM]:e,value:t});return new vo(r).toPromise()})}function hz(n,e){return v(this,null,function*(){let t=Qf(n,!1).get(e),r=yield new vo(t).toPromise();return r===void 0?null:r.value})}function EP(n,e){let t=Qf(n,!0).delete(e);return new vo(t).toPromise()}var fz=800,pz=3,gz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield kE(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>pz)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return aM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=oz._getInstance(uz()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield az(),!this.activeServiceWorker)return;this.sender=new ME(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||cz()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield kE();return yield IP(t,zf,"1"),yield EP(t,zf),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>IP(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>hz(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>EP(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Qf(o,!1).getAll();return new vo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),fz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lM=gz;var Ere=WP("rcb"),wre=new yo(3e4,6e4);function mz(n,e){return e?Er(e):(K(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var lu=class extends cu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function yz(n){return eM(n.auth,new lu(n),n.bypassAuthState)}function vz(n){let{auth:e,user:t}=n;return K(t,e,"internal-error"),Z4(t,new lu(n),n.bypassAuthState)}function _z(n){return v(this,null,function*(){let{auth:e,user:t}=n;return K(t,e,"internal-error"),J4(t,new lu(n),n.bypassAuthState)})}var OE=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yz;case"linkViaPopup":case"linkViaRedirect":return _z;case"reauthViaPopup":case"reauthViaRedirect":return vz;default:$n(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Tre=new yo(2e3,1e4);var Iz="pendingRedirect",Of=new Map,xE=class n extends OE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Of.get(this.auth._key());if(!e){try{let r=(yield Ez(this.resolver,this.auth))?yield Ar(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Of.set(this.auth._key(),e)}return this.bypassAuthState||Of.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Ar(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ar(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function Ez(n,e){return v(this,null,function*(){let t=bz(e),r=Tz(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function wz(n,e){Of.set(n._key(),e)}function Tz(n){return Er(n._redirectPersistence)}function bz(n){return kf(Iz,n.config.apiKey,n.name)}function Dz(n,e,t=!1){return v(this,null,function*(){if(Mt(n.app))return Promise.reject(wr(n));let r=_o(n),i=mz(r,e),s=yield new xE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Cz=10*60*1e3,LE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(mo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Cz&&this.cachedEventUids.clear(),this.cachedEventUids.has(wP(e))}saveEventToCache(e){this.cachedEventUids.add(wP(e)),this.lastProcessedEventTime=Date.now()}};function wP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Sz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dM(n);default:return!1}}function Az(t){return v(this,arguments,function*(n,e={}){return Tr(n,"GET","/v1/projects",e)})}var Rz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nz=/^https?/;function Pz(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Az(n);for(let t of e)try{if(Mz(t))return}catch{}$n(n,"unauthorized-domain")})}function Mz(n){let e=vE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Nz.test(t))return!1;if(Rz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var kz=new yo(3e4,6e4);function TP(){let n=Bn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Oz(n){return new Promise((e,t)=>{var r,i,o;function s(){TP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TP(),t(mo(n,"network-request-failed"))},timeout:kz.get()})}if(!((i=(r=Bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Bn().gapi)===null||o===void 0)&&o.load)s();else{let a=WP("iframefcb");return Bn()[a]=()=>{gapi.load?s():t(mo(n,"network-request-failed"))},GP(`${j4()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw xf=null,e})}var xf=null;function xz(n){return xf=xf||Oz(n),xf}var Lz=new yo(5e3,15e3),Fz="__/auth/iframe",Vz="emulator/auth/iframe",jz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bz(n){let e=n.config;K(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?UE(e,Vz):`https://${n.config.authDomain}/${Fz}`,r={apiKey:e.apiKey,appName:n.name,v:Yr},i=Uz.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Pc(r).slice(1)}`}function $z(n){return v(this,null,function*(){let e=yield xz(n),t=Bn().gapi;return K(t,n,"internal-error"),e.open({where:document.body,url:Bz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jz,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=mo(n,"network-request-failed"),a=Bn().setTimeout(()=>{o(s)},Lz.get());function u(){Bn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var Hz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zz=500,qz=600,Gz="_blank",Wz="http://localhost",Wf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Kz(n,e,t,r=zz,i=qz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},Hz),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ke().toLowerCase();t&&(a=jP(l)?Gz:t),FP(l)&&(e=e||Wz,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(k4(l)&&a!=="_self")return Qz(e||"",a),new Wf(null);let p=window.open(e||"",a,h);K(p,n,"popup-blocked");try{p.focus()}catch{}return new Wf(p)}function Qz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Yz="__/auth/handler",Jz="emulator/auth/handler",Zz=encodeURIComponent("fac");function bP(n,e,t,r,i,o){return v(this,null,function*(){K(n.config.authDomain,n,"auth-domain-config-required"),K(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Yr,eventId:i};if(e instanceof Hf){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",iA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof NE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${Zz}=${encodeURIComponent(u)}`:"";return`${Xz(n)}?${Pc(a).slice(1)}${l}`})}function Xz({config:n}){return n.emulator?UE(n,Jz):`https://${n.authDomain}/${Yz}`}var yE="webStorageSupport",FE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WE,this._completeRedirectFn=Dz,this._overrideRedirectResult=wz}_openPopup(e,t,r,i){return v(this,null,function*(){var o;ci((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield bP(e,t,r,vE(),i);return Kz(e,s,sM())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield bP(e,t,r,vE(),i);return sz(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ci(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield $z(e),r=new LE(e);return t.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yE,{type:yE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[yE];s!==void 0&&t(!!s),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zP()||VP()||$E()}},hM=FE;var DP="@firebase/auth",CP="1.10.8";var VE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function eq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tq(n){Pt(new Ye("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qP(n)},l=new DE(r,i,o,u);return B4(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pt(new Ye("auth-internal",e=>{let t=_o(e.getProvider("auth").getImmediate());return(r=>new VE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rt(DP,CP,eq(n)),rt(DP,CP,"esm2017")}var nq=5*60,rq=Tv("authIdTokenMaxAge")||nq,SP=null,iq=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>rq)return;let i=t?.token;SP!==i&&(SP=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function KE(n=Xi()){let e=dn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=QP(n,{popupRedirectResolver:hM,persistence:[lM,oM,WE]}),r=Tv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=iq(o.toString());iM(t,s,()=>s(t.currentUser)),rM(t,a=>s(a))}}let i=Ev("auth");return i&&YP(t,`http://${i}`),t}function oq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}F4({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=mo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",oq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tq("Browser");var li={production:!1,firebase:{apiKey:"AIzaSyBO2LgH44L2i_SgV9iEwBr9sznXatAbDLY",authDomain:"database-9f5ec.firebaseapp.com",projectId:"database-9f5ec",storageBucket:"database-9f5ec.firebasestorage.app",messagingSenderId:"225913763350",appId:"1:225913763350:web:ae6008a4ecf405f0d62737",measurementId:"G-5EYMTM0X1L"}};var sq={apiKey:li.firebase.apiKey,authDomain:li.firebase.authDomain,projectId:li.firebase.projectId,storageBucket:li.firebase.storageBucket,messagingSenderId:li.firebase.messagingSenderId,appId:li.firebase.appId,measurementId:li.firebase.measurementId},QE=jv(sq),hu=KE(QE),gn=DN(QE),Qie=hP(QE);var Yf=class n{currentUserSubject=new _e(null);currentUser$=this.currentUserSubject.asObservable();currentUserProfileSubject=new _e(null);currentUserProfile$=this.currentUserProfileSubject.asObservable();constructor(){hu.onAuthStateChanged(e=>v(this,null,function*(){if(this.currentUserSubject.next(e),e){this.updateLastLogin(e.uid);let t=yield this.getUserProfile(e.uid);this.currentUserProfileSubject.next(t)}else this.currentUserProfileSubject.next(null)}))}register(e,t,r,i){return v(this,null,function*(){try{let s=(yield HE(hu,e,t)).user;if(r||i){let a=`${r||""} ${i||""}`.trim();yield qE(s,{displayName:a})}return yield this.saveUserProfile(s,r,i),s}catch(o){throw new Error(this.getErrorMessage(o.code))}})}signIn(e,t){return v(this,null,function*(){try{return(yield zE(hu,e,t)).user}catch(r){throw new Error(this.getErrorMessage(r.code))}})}signOut(){return v(this,null,function*(){try{yield GE(hu)}catch{throw new Error("Sign out failed")}})}saveUserProfile(e,t,r){return v(this,null,function*(){let i={uid:e.uid,email:e.email,displayName:e.displayName||void 0,firstName:t,lastName:r,role:"user",createdAt:new Date,lastLoginAt:new Date,preferences:{favoriteGenres:[],newsletter:!1}};yield oi(pn(gn,"users",e.uid),i)})}updateLastLogin(e){return v(this,null,function*(){try{let t=pn(gn,"users",e);(yield nu(t)).exists()&&(yield oi(t,{lastLoginAt:new Date},{merge:!0}))}catch(t){console.error("Error updating last login:",t)}})}getUserProfile(e){return v(this,null,function*(){try{let t=pn(gn,"users",e),r=yield nu(t);return r.exists()?r.data():null}catch(t){return console.error("Error getting user profile:",t),null}})}updateUserProfile(e,t){return v(this,null,function*(){try{let r=pn(gn,"users",e);yield oi(r,t,{merge:!0})}catch(r){throw console.error("Error updating user profile:",r),new Error("Failed to update profile")}})}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return!!this.currentUserSubject.value}isAdmin(){return this.currentUserProfileSubject.value?.role==="admin"}getCurrentUserProfile(){return this.currentUserProfileSubject.value}promoteToAdmin(e){return v(this,null,function*(){try{let t=pn(gn,"users",e);if(yield oi(t,{role:"admin"},{merge:!0}),e===this.getCurrentUser()?.uid){let r=yield this.getUserProfile(e);this.currentUserProfileSubject.next(r)}}catch(t){throw console.error("Error promoting user to admin:",t),new Error("Failed to promote user to admin")}})}demoteFromAdmin(e){return v(this,null,function*(){try{let t=pn(gn,"users",e);if(yield oi(t,{role:"user"},{merge:!0}),e===this.getCurrentUser()?.uid){let r=yield this.getUserProfile(e);this.currentUserProfileSubject.next(r)}}catch(t){throw console.error("Error demoting user from admin:",t),new Error("Failed to demote user from admin")}})}getErrorMessage(e){switch(e){case"auth/user-not-found":return"No user found with this email address.";case"auth/wrong-password":return"Incorrect password.";case"auth/email-already-in-use":return"This email address is already registered.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Invalid email address format.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"An error occurred. Please try again."}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Jf=class n{notifications=[];notificationsSubject=new _e([]);notifications$=this.notificationsSubject.asObservable();show(e){let t=this.generateId(),r=O({id:t,duration:5e3},e);return this.notifications.push(r),this.notificationsSubject.next([...this.notifications]),!r.persistent&&r.duration&&setTimeout(()=>{this.hide(t)},r.duration),t}hide(e){this.notifications=this.notifications.filter(t=>t.id!==e),this.notificationsSubject.next([...this.notifications])}clearAll(){this.notifications=[],this.notificationsSubject.next([])}success(e,t,r){return this.show({type:"success",title:e,message:t,duration:r})}info(e,t,r){return this.show({type:"info",title:e,message:t,duration:r})}warning(e,t,r){return this.show({type:"warning",title:e,message:t,duration:r})}error(e,t,r){return this.show({type:"error",title:e,message:t,persistent:r})}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var fM=class n{constructor(e,t){this.authService=e;this.notificationService=t;this.initializeCart(),this.setupAuthListener()}cartItems=[];cartSubject=new _e([]);CART_STORAGE_KEY="readify_cart";cart$=this.cartSubject.asObservable();initializeCart(){return v(this,null,function*(){this.loadCartFromLocalStorage();let e=this.authService.getCurrentUser();e&&(yield this.syncCartWithFirebase(e.uid))})}setupAuthListener(){this.authService.currentUser$.subscribe(e=>v(this,null,function*(){e?(this.cartItems.length>0&&this.notificationService.info("Cart Sync","Syncing your cart with your account...",2e3),yield this.syncCartWithFirebase(e.uid)):(this.cartItems.length>0&&this.notificationService.info("Signed Out","Cart saved locally. Sign in to sync across devices.",4e3),yield this.handleUserLogout())}))}syncCartWithFirebase(e){return v(this,null,function*(){try{let t=yield this.loadCartFromFirebase(e),r=this.cartItems,i=r.length>0,o=t.length>0,s=[...t],a=0;r.forEach(u=>{t.some(h=>h.book.id===u.book.id)||(s.push(u),a++)}),this.cartItems=s,this.cartSubject.next([...this.cartItems]),s.length>0&&(yield this.saveCartToFirebase(e)),localStorage.removeItem(this.CART_STORAGE_KEY),o&&i&&a>0?this.notificationService.success("Cart Merged",`Added ${a} local items to your account cart.`,3e3):o&&!i&&this.notificationService.success("Cart Restored",`Restored ${t.length} items from your account.`,3e3)}catch(t){console.error("Error syncing cart with Firebase:",t),this.loadCartFromLocalStorage()}})}handleUserLogout(){return v(this,null,function*(){this.saveCartToLocalStorage()})}addToCart(e,t=1){return v(this,null,function*(){let r=this.cartItems.find(i=>i.book.id===e.id);if(r)r.quantity+=t;else{let i={book:e,quantity:t,addedAt:new Date};this.cartItems.push(i)}yield this.updateCart()})}removeFromCart(e){return v(this,null,function*(){this.cartItems=this.cartItems.filter(t=>t.book.id!==e),yield this.updateCart()})}updateQuantity(e,t){return v(this,null,function*(){let r=this.cartItems.find(i=>i.book.id===e);r&&(t<=0?yield this.removeFromCart(e):(r.quantity=t,yield this.updateCart()))})}clearCart(){return v(this,null,function*(){this.cartItems=[],yield this.updateCart()})}getTotalItems(){return this.cartItems.reduce((e,t)=>e+t.quantity,0)}getTotalPrice(){return this.cartItems.reduce((e,t)=>e+t.book.price*t.quantity,0)}isInCart(e){return this.cartItems.some(t=>t.book.id===e)}getBookQuantity(e){let t=this.cartItems.find(r=>r.book.id===e);return t?t.quantity:0}updateCart(){return v(this,null,function*(){this.cartSubject.next([...this.cartItems]);let e=this.authService.getCurrentUser();e?yield this.saveCartToFirebase(e.uid):this.saveCartToLocalStorage()})}saveCartToFirebase(e){return v(this,null,function*(){try{let t=pn(gn,"carts",e),r={items:this.cartItems,updatedAt:new Date,totalItems:this.getTotalItems(),totalPrice:this.getTotalPrice()};yield oi(t,r)}catch(t){console.error("Error saving cart to Firebase:",t),this.saveCartToLocalStorage()}})}loadCartFromFirebase(e){return v(this,null,function*(){try{let t=pn(gn,"carts",e),r=yield nu(t);return r.exists()?r.data().items||[]:[]}catch(t){return console.error("Error loading cart from Firebase:",t),[]}})}deleteCartFromFirebase(e){return v(this,null,function*(){try{let t=pn(gn,"carts",e);yield ON(t)}catch(t){console.error("Error deleting cart from Firebase:",t)}})}saveCartToLocalStorage(){try{localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(this.cartItems))}catch(e){console.error("Error saving cart to localStorage:",e)}}loadCartFromLocalStorage(){try{let e=localStorage.getItem(this.CART_STORAGE_KEY);e&&(this.cartItems=JSON.parse(e),this.cartSubject.next([...this.cartItems]))}catch(e){console.error("Error loading cart from localStorage:",e),this.cartItems=[]}}static \u0275fac=function(t){return new(t||n)(B(Yf),B(Jf))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};export{O as a,oe as b,v as c,Oe as d,$e as e,we as f,Q as g,Ak as h,ut as i,Kn as j,j as k,_l as l,F as m,Zn as n,H as o,B as p,cb as q,ub as r,nO as s,jl as t,ji as u,hd as v,Dn as w,Jo as x,OD as y,GO as z,hx as A,Xo as B,Se as C,Zm as D,Br as E,sr as F,Xm as G,bC as H,DC as I,pt as J,$i as K,Dd as L,kC as M,cy as N,uy as O,Cd as P,wL as Q,Sd as R,bL as S,DL as T,VC as U,jC as V,LL as W,WL as X,qC as Y,fy as Z,GC as _,KC as $,JL as aa,QC as ba,nF as ca,rF as da,iF as ea,sF as fa,cF as ga,lF as ha,hF as ia,ts as ja,gF as ka,zi as la,Xa as ma,ar as na,mS as oa,qF as pa,QF as qa,yS as ra,ree as sa,dV as ta,VV as ua,jV as va,Ut as wa,Pn as xa,cv as ya,ln as za,wh as Aa,m2 as Ba,_2 as Ca,I2 as Da,_s as Ea,Th as Fa,H0 as Ga,Yf as Ha,Jf as Ia,fM as Ja};
