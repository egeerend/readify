var jx=Object.defineProperty,Ux=Object.defineProperties;var Bx=Object.getOwnPropertyDescriptors;var lT=Object.getOwnPropertySymbols,$x=Object.getPrototypeOf,Hx=Object.prototype.hasOwnProperty,zx=Object.prototype.propertyIsEnumerable,qx=Reflect.get;var dT=(n,e,t)=>e in n?jx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e)=>{for(var t in e||={})Hx.call(e,t)&&dT(n,t,e[t]);if(lT)for(var t of lT(e))zx.call(e,t)&&dT(n,t,e[t]);return n},Y=(n,e)=>Ux(n,Bx(e));var Wr=(n,e,t)=>qx($x(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function ee(n){return typeof n=="function"}function Yo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pl=Yo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ji(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var De=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof pl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{hT(o)}catch(s){e=e??[],s instanceof pl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)hT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ji(t,e)}remove(e){let{_finalizers:t}=this;t&&ji(t,e),e instanceof n&&e._removeParent(this)}};De.EMPTY=(()=>{let n=new De;return n.closed=!0,n})();var Dg=De.EMPTY;function gl(n){return n instanceof De||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function hT(n){ee(n)?n():n.unsubscribe()}var pn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jo={setTimeout(n,e,...t){let{delegate:r}=Jo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Jo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ml(n){Jo.setTimeout(()=>{let{onUnhandledError:e}=pn;if(e)e(n);else throw n})}function qa(){}var fT=Cg("C",void 0,void 0);function pT(n){return Cg("E",void 0,n)}function gT(n){return Cg("N",n,void 0)}function Cg(n,e,t){return{kind:n,value:e,error:t}}var Ui=null;function Zo(n){if(pn.useDeprecatedSynchronousErrorHandling){let e=!Ui;if(e&&(Ui={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ui;if(Ui=null,t)throw r}}else n()}function mT(n){pn.useDeprecatedSynchronousErrorHandling&&Ui&&(Ui.errorThrown=!0,Ui.error=n)}var Bi=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gl(e)&&e.add(this)):this.destination=Kx}static create(e,t,r){return new Xo(e,t,r)}next(e){this.isStopped?Ag(gT(e),this):this._next(e)}error(e){this.isStopped?Ag(pT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ag(fT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Gx=Function.prototype.bind;function Sg(n,e){return Gx.call(n,e)}var Rg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yl(r)}else yl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yl(t)}}},Xo=class extends Bi{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&pn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sg(e.next,o),error:e.error&&Sg(e.error,o),complete:e.complete&&Sg(e.complete,o)}):i=e}this.destination=new Rg(i)}};function yl(n){pn.useDeprecatedSynchronousErrorHandling?mT(n):ml(n)}function Wx(n){throw n}function Ag(n,e){let{onStoppedNotification:t}=pn;t&&Jo.setTimeout(()=>t(n,e))}var Kx={closed:!0,next:qa,error:Wx,complete:qa};var es=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(n){return n}function Ng(...n){return Mg(n)}function Mg(n){return n.length===0?wt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Yx(t)?t:new Xo(t,r,i);return Zo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=yT(r),new r((i,o)=>{let s=new Xo({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[es](){return this}pipe(...t){return Mg(t)(this)}toPromise(t){return t=yT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function yT(n){var e;return(e=n??pn.Promise)!==null&&e!==void 0?e:Promise}function Qx(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function Yx(n){return n&&n instanceof Bi||Qx(n)&&gl(n)}var vT=Yo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new vT}next(t){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Dg:(this.currentObservers=null,o.push(t),new De(()=>{this.currentObservers=null,ji(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new vl(e,t),n})(),vl=class extends xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Dg}};function Pg(n){return ee(n?.lift)}function ue(n){return e=>{if(Pg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new Og(n,e,t,r,i)}var Og=class extends Bi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ht(n,e){return ue((t,r)=>{let i=0;t.subscribe(oe(r,o=>n.call(e,o,i++)&&r.next(o)))})}var _l=class extends De{constructor(e,t){super()}schedule(e,t=0){return this}};var Ga={setInterval(n,e,...t){let{delegate:r}=Ga;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ga;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var El=class extends _l{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ga.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ga.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ji(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var xg={now(){return(xg.delegate||Date).now()},delegate:void 0};var ts=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ts.now=xg.now;var Il=class extends ts{constructor(e,t=ts.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var _T=new Il(El);function Jx(n,e=_T){return ue((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(oe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Zx(n,e=wt){return n=n??Xx,ue((t,r)=>{let i,o=!0;t.subscribe(oe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Xx(n,e){return n===e}function ns(){return ue((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var rs=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Pg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new De;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=De.EMPTY)}return e}refCount(){return ns()(this)}};var Ie=class extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xt=new ce(n=>n.complete());function ET(n){return n&&ee(n.schedule)}function IT(n){return n[n.length-1]}function wl(n){return ee(IT(n))?n.pop():void 0}function Kr(n){return ET(IT(n))?n.pop():void 0}function kg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function bT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function wT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $i(n){return this instanceof $i?(this.v=n,this):new $i(n)}function TT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,k){o.push([y,N,R,k])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof $i?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function DT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof wT=="function"?wT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var bl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Tl(n){return ee(n?.then)}function Dl(n){return ee(n[es])}function Cl(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function Sl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ek(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Al=ek();function Rl(n){return ee(n?.[Al])}function Nl(n){return TT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield $i(t.read());if(i)return yield $i(void 0);yield yield $i(r)}}finally{t.releaseLock()}})}function Ml(n){return ee(n?.getReader)}function Ve(n){if(n instanceof ce)return n;if(n!=null){if(Dl(n))return tk(n);if(bl(n))return nk(n);if(Tl(n))return rk(n);if(Cl(n))return CT(n);if(Rl(n))return ik(n);if(Ml(n))return ok(n)}throw Sl(n)}function tk(n){return new ce(e=>{let t=n[es]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nk(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function rk(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ml)})}function ik(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function CT(n){return new ce(e=>{sk(n,e).catch(t=>e.error(t))})}function ok(n){return CT(Nl(n))}function sk(n,e){var t,r,i,o;return bT(this,void 0,void 0,function*(){try{for(t=DT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function kt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Pl(n,e=0){return ue((t,r)=>{t.subscribe(oe(r,i=>kt(r,n,()=>r.next(i),e),()=>kt(r,n,()=>r.complete(),e),i=>kt(r,n,()=>r.error(i),e)))})}function Ol(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ST(n,e){return Ve(n).pipe(Ol(e),Pl(e))}function AT(n,e){return Ve(n).pipe(Ol(e),Pl(e))}function RT(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function NT(n,e){return new ce(t=>{let r;return kt(t,e,()=>{r=n[Al](),kt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function xl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{kt(t,e,()=>{let r=n[Symbol.asyncIterator]();kt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function MT(n,e){return xl(Nl(n),e)}function PT(n,e){if(n!=null){if(Dl(n))return ST(n,e);if(bl(n))return RT(n,e);if(Tl(n))return AT(n,e);if(Cl(n))return xl(n,e);if(Rl(n))return NT(n,e);if(Ml(n))return MT(n,e)}throw Sl(n)}function be(n,e){return e?PT(n,e):Ve(n)}function H(...n){let e=Kr(n);return be(n,e)}function is(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function Fg(n){return!!n&&(n instanceof ce||ee(n.lift)&&ee(n.subscribe))}var ur=Yo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return ue((t,r)=>{let i=0;t.subscribe(oe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:ak}=Array;function ck(n,e){return ak(e)?n(...e):n(e)}function kl(n){return J(e=>ck(n,e))}var{isArray:uk}=Array,{getPrototypeOf:lk,prototype:dk,keys:hk}=Object;function Fl(n){if(n.length===1){let e=n[0];if(uk(e))return{args:e,keys:null};if(fk(e)){let t=hk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function fk(n){return n&&typeof n=="object"&&lk(n)===dk}function Ll(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Wa(...n){let e=Kr(n),t=wl(n),{args:r,keys:i}=Fl(n);if(r.length===0)return be([],e);let o=new ce(pk(r,e,i?s=>Ll(i,s):wt));return t?o.pipe(kl(t)):o}function pk(n,e,t=wt){return r=>{OT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)OT(e,()=>{let l=be(n[u],e),h=!1;l.subscribe(oe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function OT(n,e,t){n?kt(t,n,e):e()}function xT(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;Ve(t(N,h++)).subscribe(oe(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?kt(e,s,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return n.subscribe(oe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function ke(n,e,t=1/0){return ee(e)?ke((r,i)=>J((o,s)=>e(r,o,i,s))(Ve(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>xT(r,i,n,t)))}function Qr(n=1/0){return ke(wt,n)}function kT(){return Qr(1)}function os(...n){return kT()(be(n,Kr(n)))}function Ka(n){return new ce(e=>{Ve(n()).subscribe(e)})}function Lg(...n){let e=wl(n),{args:t,keys:r}=Fl(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ve(t[h]).subscribe(oe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Ll(r,a):a),o.complete())}))}});return e?i.pipe(kl(e)):i}function bt(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(oe(t,void 0,void 0,s=>{o=Ve(n(s,bt(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function FT(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(oe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Pn(n,e){return ee(e)?ke(n,e,1):ke(n,1)}function Yr(n){return ue((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function lr(n){return n<=0?()=>xt:ue((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Vl(n=gk){return ue((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gk(){return new ur}function Hi(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function dr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ht((i,o)=>n(i,o,r)):wt,lr(1),t?Yr(e):Vl(()=>new ur))}function ss(n){return n<=0?()=>xt:ue((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ht((i,o)=>n(i,o,r)):wt,ss(1),t?Yr(e):Vl(()=>new ur))}function jg(n,e){return ue(FT(n,e,arguments.length>=2,!0))}function Ug(...n){let e=Kr(n);return ue((t,r)=>{(e?os(n,t,e):os(n,t)).subscribe(r)})}function Tt(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,h=o++;Ve(n(u,h)).subscribe(i=oe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jl(n){return ue((e,t)=>{Ve(n).subscribe(oe(t,()=>t.complete(),qa)),!t.closed&&e.subscribe(t)})}function Ke(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var Bg;function $g(){return Bg}function hr(n){let e=Bg;return Bg=n,e}var mk=Symbol("NotFound"),Ul=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function as(n){return n===mk||n?.name==="\u0275NotFound"}function ql(n,e){return Object.is(n,e)}var ze=null,Bl=!1,Hg=1,yk=null,ft=Symbol("SIGNAL");function ie(n){let e=ze;return ze=n,e}function Gl(){return ze}var zi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cs(n){if(Bl)throw new Error("");if(ze===null)return;ze.consumerOnSignalRead(n);let e=ze.nextProducerIndex++;if(Yl(ze),e<ze.producerNode.length&&ze.producerNode[e]!==n&&Ya(ze)){let t=ze.producerNode[e];Ql(t,ze.producerIndexOfThis[e])}ze.producerNode[e]!==n&&(ze.producerNode[e]=n,ze.producerIndexOfThis[e]=Ya(ze)?VT(n,ze,e):0),ze.producerLastReadVersion[e]=n.version}function LT(){Hg++}function Wl(n){if(!(Ya(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Hg)){if(!n.producerMustRecompute(n)&&!Ja(n)){zl(n);return}n.producerRecomputeValue(n),zl(n)}}function zg(n){if(n.liveConsumerNode===void 0)return;let e=Bl;Bl=!0;try{for(let t of n.liveConsumerNode)t.dirty||vk(t)}finally{Bl=e}}function qg(){return ze?.consumerAllowSignalWrites!==!1}function vk(n){n.dirty=!0,zg(n),n.consumerMarkedDirty?.(n)}function zl(n){n.dirty=!1,n.lastCleanEpoch=Hg}function qi(n){return n&&(n.nextProducerIndex=0),ie(n)}function us(n,e){if(ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ya(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ql(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ja(n){Yl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Wl(t),r!==t.version))return!0}return!1}function Kl(n){if(Yl(n),Ya(n))for(let e=0;e<n.producerNode.length;e++)Ql(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function VT(n,e,t){if(jT(n),n.liveConsumerNode.length===0&&UT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=VT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ql(n,e){if(jT(n),n.liveConsumerNode.length===1&&UT(n))for(let r=0;r<n.producerNode.length;r++)Ql(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Yl(i),i.producerIndexOfThis[r]=e}}function Ya(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function jT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function UT(n){return n.producerNode!==void 0}function Jl(n){yk?.(n)}function Zl(n,e){let t=Object.create(_k);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Wl(t),cs(t),t.value===Qa)throw t.error;return t.value};return r[ft]=t,Jl(t),r}var $l=Symbol("UNSET"),Hl=Symbol("COMPUTING"),Qa=Symbol("ERRORED"),_k=Y(P({},zi),{value:$l,dirty:!0,error:null,equal:ql,kind:"computed",producerMustRecompute(n){return n.value===$l||n.value===Hl},producerRecomputeValue(n){if(n.value===Hl)throw new Error("");let e=n.value;n.value=Hl;let t=qi(n),r,i=!1;try{r=n.computation(),ie(null),i=e!==$l&&e!==Qa&&r!==Qa&&n.equal(e,r)}catch(o){r=Qa,n.error=o}finally{us(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Ek(){throw new Error}var BT=Ek;function $T(n){BT(n)}function Gg(n){BT=n}var Ik=null;function Wg(n,e){let t=Object.create(Xl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>HT(t);return r[ft]=t,Jl(t),[r,s=>ls(t,s),s=>Kg(t,s)]}function HT(n){return cs(n),n.value}function ls(n,e){qg()||$T(n),n.equal(n.value,e)||(n.value=e,wk(n))}function Kg(n,e){qg()||$T(n),ls(n,e(n.value))}var Xl=Y(P({},zi),{equal:ql,value:void 0,kind:"signal"});function wk(n){n.version++,LT(),zg(n),Ik?.(n)}function zT(n){let e=ie(null);try{return n()}finally{ie(e)}}var id="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,t){super(hs(e,t)),this.code=e}};function bk(n){return`NG0${Math.abs(n)}`}function hs(n,e){return`${bk(n)}${e?": "+e:""}`}var tc=globalThis;function Ce(n){for(let e in n)if(n[e]===Ce)return e;throw Error("")}function KT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ft(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ft).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function od(n,e){return n?e?`${n} ${e}`:n:e||""}var Tk=Ce({__forward_ref__:Ce});function Ye(n){return n.__forward_ref__=Ye,n.toString=function(){return Ft(this())},n}function it(n){return am(n)?n():n}function am(n){return typeof n=="function"&&n.hasOwnProperty(Tk)&&n.__forward_ref__===Ye}function QT(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function L(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function nc(n){return Dk(n,sd)}function cm(n){return nc(n)!==null}function Dk(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Ck(n){let e=n?.[sd]??null;return e||null}function Yg(n){return n&&n.hasOwnProperty(td)?n[td]:null}var sd=Ce({\u0275prov:Ce}),td=Ce({\u0275inj:Ce}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=L({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function um(n){return n&&!!n.\u0275providers}var lm=Ce({\u0275cmp:Ce}),dm=Ce({\u0275dir:Ce}),hm=Ce({\u0275pipe:Ce}),fm=Ce({\u0275mod:Ce}),Xa=Ce({\u0275fac:Ce}),Yi=Ce({__NG_ELEMENT_ID__:Ce}),qT=Ce({__NG_ENV_ID__:Ce});function Ji(n){return typeof n=="string"?n:n==null?"":String(n)}function YT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ji(n)}function pm(n,e){throw new V(-200,n)}function ad(n,e){throw new V(-201,!1)}var Jg;function JT(){return Jg}function Dt(n){let e=Jg;return Jg=n,e}function gm(n,e,t){let r=nc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;ad(n,"Injector")}var Sk={},Gi=Sk,Zg="__NG_DI_FLAG__",Xg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Wi(t)||0;try{return this.injector.get(e,r&8?null:Gi,r)}catch(i){if(as(i))return i;throw i}}},nd="ngTempTokenPath",Ak="ngTokenPath",Rk=/\n/gm,Nk="\u0275",GT="__source";function Mk(n,e=0){let t=$g();if(t===void 0)throw new V(-203,!1);if(t===null)return gm(n,void 0,e);{let r=Pk(e),i=t.retrieve(n,r);if(as(i)){if(r.optional)return null;throw i}return i}}function B(n,e=0){return(JT()||Mk)(it(n),e)}function M(n,e){return B(n,Wi(e))}function Wi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Pk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function em(n){let e=[];for(let t=0;t<n.length;t++){let r=it(n[t]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Ok(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(B(i,o))}else e.push(B(r))}return e}function mm(n,e){return n[Zg]=e,n.prototype[Zg]=e,n}function Ok(n){return n[Zg]}function xk(n,e,t,r){let i=n[nd];throw e[GT]&&i.unshift(e[GT]),n.message=kk(`
`+n.message,i,t,r),n[Ak]=i,n[nd]=null,n}function kk(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Nk?n.slice(2):n;let i=Ft(e);if(Array.isArray(e))i=e.map(Ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ft(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Rk,`
  `)}`}function Jr(n,e){let t=n.hasOwnProperty(Xa);return t?n[Xa]:null}function ZT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function XT(n){return n.flat(Number.POSITIVE_INFINITY)}function cd(n,e){n.forEach(t=>Array.isArray(t)?cd(t,e):e(t))}function ym(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function eD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function ud(n,e,t){let r=fs(n,e);return r>=0?n[r|1]=t:(r=~r,eD(n,r,e,t)),r}function ld(n,e){let t=fs(n,e);if(t>=0)return n[t|1]}function fs(n,e){return Fk(n,e,1)}function Fk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Xr={},Ct=[],gr=new U(""),vm=new U("",-1),_m=new U(""),ec=class{get(e,t=Gi){if(t===Gi)throw new Ul(`NullInjectorError: No provider for ${Ft(e)}!`);return t}};function Em(n){return n[fm]||null}function mr(n){return n[lm]||null}function Im(n){return n[dm]||null}function tD(n){return n[hm]||null}function On(n){return{\u0275providers:n}}function nD(n){return On([{provide:gr,multi:!0,useValue:n}])}function rD(...n){return{\u0275providers:wm(!0,n),\u0275fromNgModule:!0}}function wm(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return cd(e,s=>{let a=s;rd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iD(i,o),t}function iD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];bm(i,o=>{e(o,r)})}}function rd(n,e,t,r){if(n=it(n),!n)return!1;let i=null,o=Yg(n),s=!o&&mr(n);if(!o&&!s){let u=n.ngModule;if(o=Yg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)rd(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{cd(o.imports,h=>{rd(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&iD(l,e)}if(!a){let l=Jr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ct},i),e({provide:_m,useValue:i,multi:!0},i),e({provide:gr,useValue:()=>B(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;bm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function bm(n,e){for(let t of n)um(t)&&(t=t.\u0275providers),Array.isArray(t)?bm(t,e):e(t)}var Lk=Ce({provide:String,useValue:Ce});function oD(n){return n!==null&&typeof n=="object"&&Lk in n}function Vk(n){return!!(n&&n.useExisting)}function jk(n){return!!(n&&n.useFactory)}function Ki(n){return typeof n=="function"}function sD(n){return!!n.useClass}var ic=new U(""),ed={},WT={},Qg;function oc(){return Qg===void 0&&(Qg=new ec),Qg}var Fe=class{},Qi=class extends Fe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,nm(e,s=>this.processProvider(s)),this.records.set(vm,ds(void 0,this)),i.has("environment")&&this.records.set(Fe,ds(void 0,this));let o=this.records.get(ic);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_m,Ct,{self:!0}))}retrieve(e,t){let r=Wi(t)||0;try{return this.get(e,Gi,r)}catch(i){if(as(i))return i;throw i}}destroy(){Za(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return Za(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Za(this);let t=hr(this),r=Dt(void 0),i;try{return e()}finally{hr(t),Dt(r)}}get(e,t=Gi,r){if(Za(this),e.hasOwnProperty(qT))return e[qT](this);let i=Wi(r),o,s=hr(this),a=Dt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=zk(e)&&nc(e);h&&this.injectableDefInScope(h)?l=ds(tm(e),ed):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let u=i&2?oc():this.parent;return t=i&8&&t===Gi?null:t,u.get(e,t)}catch(u){if(as(u)){if((u[nd]=u[nd]||[]).unshift(Ft(e)),s)throw u;return xk(u,e,"R3InjectorError",this.source)}else throw u}finally{Dt(a),hr(s)}}resolveInjectorInitializers(){let e=ie(null),t=hr(this),r=Dt(void 0),i;try{let o=this.get(gr,Ct,{self:!0});for(let s of o)s()}finally{hr(t),Dt(r),ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ft(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=it(e);let t=Ki(e)?e:it(e&&e.provide),r=Bk(e);if(!Ki(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ds(void 0,ed,!0),i.factory=()=>em(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ie(null);try{return t.value===WT?pm(Ft(e)):t.value===ed&&(t.value=WT,t.value=t.factory()),typeof t.value=="object"&&t.value&&Hk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=it(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function tm(n){let e=nc(n),t=e!==null?e.factory:Jr(n);if(t!==null)return t;if(n instanceof U)throw new V(204,!1);if(n instanceof Function)return Uk(n);throw new V(204,!1)}function Uk(n){if(n.length>0)throw new V(204,!1);let t=Ck(n);return t!==null?()=>t.factory(n):()=>new n}function Bk(n){if(oD(n))return ds(void 0,n.useValue);{let e=Tm(n);return ds(e,ed)}}function Tm(n,e,t){let r;if(Ki(n)){let i=it(n);return Jr(i)||tm(i)}else if(oD(n))r=()=>it(n.useValue);else if(jk(n))r=()=>n.useFactory(...em(n.deps||[]));else if(Vk(n))r=()=>B(it(n.useExisting));else{let i=it(n&&(n.useClass||n.provide));if($k(n))r=()=>new i(...em(n.deps));else return Jr(i)||tm(i)}return r}function Za(n){if(n.destroyed)throw new V(205,!1)}function ds(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function $k(n){return!!n.deps}function Hk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function zk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function nm(n,e){for(let t of n)Array.isArray(t)?nm(t,e):t&&um(t)?nm(t.\u0275providers,e):e(t)}function pt(n,e){let t;n instanceof Qi?(Za(n),t=n):t=new Xg(n);let r,i=hr(t),o=Dt(void 0);try{return e()}finally{hr(i),Dt(o)}}function aD(){return JT()!==void 0||$g()!=null}var mn=0,ne=1,Z=2,Qe=3,en=4,tn=5,sc=6,ps=7,gt=8,Zi=9,xn=10,Pe=11,gs=12,Dm=13,Xi=14,nn=15,ei=16,eo=17,kn=18,ac=19,Cm=20,fr=21,dd=22,cc=23,Gt=24,to=25,Vt=26,cD=1;var ti=7,uc=8,no=9,St=10;function Fn(n){return Array.isArray(n)&&typeof n[cD]=="object"}function yn(n){return Array.isArray(n)&&n[cD]===!0}function Sm(n){return(n.flags&4)!==0}function ni(n){return n.componentOffset>-1}function hd(n){return(n.flags&1)===1}function Ln(n){return!!n.template}function ms(n){return(n[Z]&512)!==0}function ro(n){return(n[Z]&256)===256}var uD="svg",lD="math";function rn(n){for(;Array.isArray(n);)n=n[mn];return n}function Am(n,e){return rn(e[n])}function vn(n,e){return rn(e[n.index])}function fd(n,e){return n.data[e]}function Rm(n,e){return n[e]}function Nm(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function on(n,e){let t=e[n];return Fn(t)?t:t[mn]}function dD(n){return(n[Z]&4)===4}function pd(n){return(n[Z]&128)===128}function hD(n){return yn(n[Qe])}function lc(n,e){return e==null?null:n[e]}function Mm(n){n[eo]=0}function Pm(n){n[Z]&1024||(n[Z]|=1024,pd(n)&&ys(n))}function fD(n,e){for(;n>0;)e=e[Xi],n--;return e}function dc(n){return!!(n[Z]&9216||n[Gt]?.dirty)}function gd(n){n[xn].changeDetectionScheduler?.notify(8),n[Z]&64&&(n[Z]|=1024),dc(n)&&ys(n)}function ys(n){n[xn].changeDetectionScheduler?.notify(0);let e=Zr(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!pd(e)));)e=Zr(e)}function Om(n,e){if(ro(n))throw new V(911,!1);n[fr]===null&&(n[fr]=[]),n[fr].push(e)}function pD(n,e){if(n[fr]===null)return;let t=n[fr].indexOf(e);t!==-1&&n[fr].splice(t,1)}function Zr(n){let e=n[Qe];return yn(e)?e[Qe]:e}function xm(n){return n[ps]??=[]}function km(n){return n.cleanup??=[]}function gD(n,e,t,r){let i=xm(e);i.push(t),n.firstCreatePass&&km(n).push(r,i.length-1)}var se={lFrame:PD(null),bindingsEnabled:!0,skipHydrationRootTNode:null},hc=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(hc||{}),qk=0,rm=!1;function mD(){return se.lFrame.elementDepthCount}function yD(){se.lFrame.elementDepthCount++}function vD(){se.lFrame.elementDepthCount--}function Fm(){return se.bindingsEnabled}function _D(){return se.skipHydrationRootTNode!==null}function ED(n){return se.skipHydrationRootTNode===n}function ID(){se.skipHydrationRootTNode=null}function he(){return se.lFrame.lView}function Je(){return se.lFrame.tView}function md(n){return se.lFrame.contextLView=n,n[gt]}function yd(n){return se.lFrame.contextLView=null,n}function ot(){let n=Lm();for(;n!==null&&n.type===64;)n=n.parent;return n}function Lm(){return se.lFrame.currentTNode}function wD(){let n=se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function vs(n,e){let t=se.lFrame;t.currentTNode=n,t.isParent=e}function Vm(){return se.lFrame.isParent}function bD(){se.lFrame.isParent=!1}function TD(){return se.lFrame.contextLView}function jm(n){QT("Must never be called in production mode"),qk=n}function Um(){return rm}function Bm(n){let e=rm;return rm=n,e}function vd(){let n=se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function DD(){return se.lFrame.bindingIndex}function CD(n){return se.lFrame.bindingIndex=n}function fc(){return se.lFrame.bindingIndex++}function _d(n){let e=se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function SD(){return se.lFrame.inI18n}function AD(n,e){let t=se.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ed(e)}function RD(){return se.lFrame.currentDirectiveIndex}function Ed(n){se.lFrame.currentDirectiveIndex=n}function ND(n){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function $m(){return se.lFrame.currentQueryIndex}function Id(n){se.lFrame.currentQueryIndex=n}function Gk(n){let e=n[ne];return e.type===2?e.declTNode:e.type===1?n[tn]:null}function Hm(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Gk(o),i===null||(o=o[Xi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=se.lFrame=MD();return r.currentTNode=e,r.lView=n,!0}function wd(n){let e=MD(),t=n[ne];se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function MD(){let n=se.lFrame,e=n===null?null:n.child;return e===null?PD(n):e}function PD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function OD(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var zm=OD;function bd(){let n=OD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function xD(n){return(se.lFrame.contextLView=fD(n,se.lFrame.contextLView))[gt]}function yr(){return se.lFrame.selectedIndex}function ri(n){se.lFrame.selectedIndex=n}function Td(){let n=se.lFrame;return fd(n.tView,n.selectedIndex)}function kD(){return se.lFrame.currentNamespace}var FD=!0;function Dd(){return FD}function Cd(n){FD=n}function im(n,e=null,t=null,r){let i=qm(n,e,t,r);return i.resolveInjectorInitializers(),i}function qm(n,e=null,t=null,r,i=new Set){let o=[t||Ct,rD(n)];return r=r||(typeof n=="object"?void 0:Ft(n)),new Qi(o,e||oc(),r||null,i)}var Lt=class n{static THROW_IF_NOT_FOUND=Gi;static NULL=new ec;static create(e,t){if(Array.isArray(e))return im({name:""},t,e,"");{let r=e.name??"";return im({name:r},e.parent,e.providers,r)}}static \u0275prov=L({token:n,providedIn:"any",factory:()=>B(vm)});static __NG_ELEMENT_ID__=-1},Ae=new U(""),Vn=(()=>{class n{static __NG_ELEMENT_ID__=Wk;static __NG_ENV_ID__=t=>t}return n})(),om=class extends Vn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ro(this._lView)}onDestroy(e){let t=this._lView;return Om(t,e),()=>pD(t,e)}};function Wk(){return new om(he())}var gn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},mt=new U("",{providedIn:"root",factory:()=>{let n=M(Fe),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(gn),e.handleError(t))}}}),LD={provide:gr,useValue:()=>void M(gn),multi:!0},Kk=new U("",{providedIn:"root",factory:()=>{let n=M(Ae).defaultView;if(!n)return;let e=M(mt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(Vn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Qk(){return On([nD(()=>void M(Kk))])}function Gm(n){return typeof n=="function"&&n[ft]!==void 0}function jn(n,e){let[t,r,i]=Wg(n,e?.equal),o=t,s=o[ft];return o.set=r,o.update=i,o.asReadonly=VD.bind(o),o}function VD(){let n=this[ft];if(n.readonlyFn===void 0){let e=()=>this();e[ft]=n,n.readonlyFn=e}return n.readonlyFn}function Wm(n){return Gm(n)&&typeof n.set=="function"}var pr=class{},pc=new U("",{providedIn:"root",factory:()=>!1});var Km=new U(""),Qm=new U("");var Sd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Yk}return n})();function Yk(){return new Sd(he(),ot())}var vr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ie(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ad=(()=>{class n{internalPendingTasks=M(vr);scheduler=M(pr);errorHandler=M(mt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})();function gc(...n){}var Ym=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new sm})}return n})(),sm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ws(n){return{toString:n}.toString()}var Rd="__parameters__";function i1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function pC(n,e,t){return ws(()=>{let r=i1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Rd)?u[Rd]:Object.defineProperty(u,Rd,{value:[]})[Rd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var gC=mm(pC("Optional"),8);var mC=mm(pC("SkipSelf"),4);function o1(n){return typeof n=="function"}var Fd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function yC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var sn=(()=>{let n=()=>vC;return n.ngInherit=!0,n})();function vC(n){return n.type.prototype.ngOnChanges&&(n.setInput=a1),s1}function s1(){let n=EC(this),e=n?.current;if(e){let t=n.previous;if(t===Xr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function a1(n,e,t,r,i){let o=this.declaredInputs[r],s=EC(n)||c1(n,{previous:Xr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Fd(l&&l.currentValue,t,u===Xr),yC(n,e,i,t)}var _C="__ngSimpleChanges__";function EC(n){return n[_C]||null}function c1(n,e){return n[_C]=e}var jD=[];var Ee=function(n,e=null,t){for(let r=0;r<jD.length;r++){let i=jD[r];i(n,e,t)}};function u1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=vC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function IC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Pd(n,e,t){wC(n,e,3,t)}function Od(n,e,t,r){(n[Z]&3)===t&&wC(n,e,t,r)}function Jm(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function wC(n,e,t,r){let i=r!==void 0?n[eo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[eo]+=65536),(a<o||o==-1)&&(l1(n,t,e,u),n[eo]=(n[eo]&4294901760)+u+2),u++}function UD(n,e){Ee(4,n,e);let t=ie(null);try{e.call(n)}finally{ie(t),Ee(5,n,e)}}function l1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Z]>>14<n[eo]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,UD(a,o)):UD(a,o)}var Es=-1,oo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function d1(n){return(n.flags&8)!==0}function h1(n){return(n.flags&16)!==0}function f1(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];p1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function bC(n){return n===3||n===4||n===6}function p1(n){return n.charCodeAt(0)===64}function vc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?BD(n,t,i,null,e[++r]):BD(n,t,i,null,null))}}return n}function BD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function TC(n){return n!==Es}function Ld(n){return n&32767}function g1(n){return n>>16}function Vd(n,e){let t=g1(n),r=e;for(;t>0;)r=r[Xi],t--;return r}var ay=!0;function jd(n){let e=ay;return ay=n,e}var m1=256,DC=m1-1,CC=5,y1=0,Un={};function v1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Yi)&&(r=t[Yi]),r==null&&(r=t[Yi]=y1++);let i=r&DC,o=1<<i;e.data[n+(i>>CC)]|=o}function Ud(n,e){let t=SC(n,e);if(t!==-1)return t;let r=e[ne];r.firstCreatePass&&(n.injectorIndex=e.length,Zm(r.data,n),Zm(e,null),Zm(r.blueprint,null));let i=Oy(n,e),o=n.injectorIndex;if(TC(i)){let s=Ld(i),a=Vd(i,e),u=a[ne].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Zm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function SC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Oy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=PC(i),r===null)return Es;if(t++,i=i[Xi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Es}function cy(n,e,t){v1(n,e,t)}function _1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(bC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function AC(n,e,t){if(t&8||n!==void 0)return n;ad(e,"NodeInjector")}function RC(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Zi],o=Dt(void 0);try{return i?i.get(e,r,t&8):gm(e,r,t&8)}finally{Dt(o)}}return AC(r,e,t)}function NC(n,e,t,r=0,i){if(n!==null){if(e[Z]&2048&&!(r&2)){let s=b1(n,e,t,r,Un);if(s!==Un)return s}let o=MC(n,e,t,r,Un);if(o!==Un)return o}return RC(e,t,r,i)}function MC(n,e,t,r,i){let o=I1(t);if(typeof o=="function"){if(!Hm(e,n,r))return r&1?AC(i,t,r):RC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ad(t);else return s}finally{zm()}}else if(typeof o=="number"){let s=null,a=SC(n,e),u=Es,l=r&1?e[nn][tn]:null;for((a===-1||r&4)&&(u=a===-1?Oy(n,e):e[a+8],u===Es||!HD(r,!1)?a=-1:(s=e[ne],a=Ld(u),e=Vd(u,e)));a!==-1;){let h=e[ne];if($D(o,a,h.data)){let p=E1(a,e,t,s,r,l);if(p!==Un)return p}u=e[a+8],u!==Es&&HD(r,e[ne].data[a+8]===l)&&$D(o,a,e)?(s=h,a=Ld(u),e=Vd(u,e)):a=-1}}return i}function E1(n,e,t,r,i,o){let s=e[ne],a=s.data[n+8],u=r==null?ni(a)&&ay:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=xd(a,s,t,u,l);return h!==null?_c(e,s,h,a):Un}function xd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&t===C||y>=u&&C.type===t)return y}if(i){let y=s[u];if(y&&Ln(y)&&y.type===t)return u}return null}function _c(n,e,t,r){let i=n[t],o=e.data;if(i instanceof oo){let s=i;s.resolving&&pm(YT(o[t]));let a=jd(s.canSeeViewProviders);s.resolving=!0;let u=o[t].type||o[t],l,h=s.injectImpl?Dt(s.injectImpl):null,p=Hm(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&u1(t,o[t],e)}finally{h!==null&&Dt(h),jd(a),s.resolving=!1,zm()}}return i}function I1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Yi)?n[Yi]:void 0;return typeof e=="number"?e>=0?e&DC:w1:e}function $D(n,e,t){let r=1<<n;return!!(t[e+(n>>CC)]&r)}function HD(n,e){return!(n&2)&&!(n&1&&e)}var io=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return NC(this._tNode,this._lView,e,Wi(r),t)}};function w1(){return new io(ot(),he())}function jt(n){return ws(()=>{let e=n.prototype.constructor,t=e[Xa]||uy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Xa]||uy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function uy(n){return am(n)?()=>{let e=uy(it(n));return e&&e()}:Jr(n)}function b1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!ms(s);){let a=MC(o,s,t,r|2,Un);if(a!==Un)return a;let u=o.parent;if(!u){let l=s[Cm];if(l){let h=l.get(t,Un,r);if(h!==Un)return h}u=PC(s),s=s[Xi]}o=u}return i}function PC(n){let e=n[ne],t=e.type;return t===2?e.declTNode:t===1?n[tn]:null}function bc(n){return _1(ot(),n)}function T1(){return bs(ot(),he())}function bs(n,e){return new At(vn(n,e))}var At=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=T1}return n})();function D1(n){return n instanceof At?n.nativeElement:n}function C1(){return this._results[Symbol.iterator]()}var Bd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new xe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=XT(e);(this._changesDetected=!ZT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=C1};function OC(n){return(n.flags&128)===128}var xy=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(xy||{}),xC=new Map,S1=0;function A1(){return S1++}function R1(n){xC.set(n[ac],n)}function ly(n){xC.delete(n[ac])}var zD="__ngContext__";function Tc(n,e){Fn(e)?(n[zD]=e[ac],R1(e)):n[zD]=e}function kC(n){return LC(n[gs])}function FC(n){return LC(n[en])}function LC(n){for(;n!==null&&!yn(n);)n=n[en];return n}var dy;function ky(n){dy=n}function VC(){if(dy!==void 0)return dy;if(typeof document<"u")return document;throw new V(210,!1)}var Xd=new U("",{providedIn:"root",factory:()=>N1}),N1="ng",eh=new U(""),Ts=new U("",{providedIn:"platform",factory:()=>"unknown"});var th=new U("",{providedIn:"root",factory:()=>VC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var M1="h",P1="b";var jC=!1,UC=new U("",{providedIn:"root",factory:()=>jC});var O1=(n,e,t,r)=>{};function x1(n,e,t,r){O1(n,e,t,r)}var k1=()=>null;function BC(n,e,t=!1){return k1(n,e,t)}function $C(n,e){let t=n.contentQueries;if(t!==null){let r=ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Id(o),a.contentQueries(2,e[s],s)}}}finally{ie(r)}}}function hy(n,e,t){Id(0);let r=ie(null);try{e(n,t)}finally{ie(r)}}function HC(n,e,t){if(Sm(e)){let r=ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ie(r)}}}var _r=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(_r||{});var Nd;function F1(){if(Nd===void 0&&(Nd=null,tc.trustedTypes))try{Nd=tc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nd}function qD(n){return F1()?.createScriptURL(n)||n}var $d=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${id})`}};function Ds(n){return n instanceof $d?n.changingThisBreaksApplicationSecurity:n}function Fy(n,e){let t=zC(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${id})`)}return t===e}function zC(n){return n instanceof $d&&n.getTypeName()||null}var L1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qC(n){return n=String(n),n.match(L1)?n:"unsafe:"+n}var nh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(nh||{});function GC(n){let e=KC();return e?e.sanitize(nh.URL,n)||"":Fy(n,"URL")?Ds(n):qC(Ji(n))}function WC(n){let e=KC();if(e)return qD(e.sanitize(nh.RESOURCE_URL,n)||"");if(Fy(n,"ResourceURL"))return qD(Ds(n));throw new V(904,!1)}function V1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?WC:GC}function Ly(n,e,t){return V1(e,t)(n)}function KC(){let n=he();return n&&n[xn].sanitizer}function j1(n){return n.ownerDocument.defaultView}function QC(n){return n instanceof Function?n():n}function U1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var YC="ng-template";function B1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&U1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Vy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Vy(n){return n.type===4&&n.value!==YC}function $1(n,e,t){let r=n.type===4&&!t?YC:n.value;return e===r}function H1(n,e,t){let r=4,i=n.attrs,o=i!==null?G1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!_n(r)&&!_n(u))return!1;if(s&&_n(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!$1(n,u,t)||u===""&&e.length===1){if(_n(r))return!1;s=!0}}else if(r&8){if(i===null||!B1(n,i,u,t)){if(_n(r))return!1;s=!0}}else{let l=e[++a],h=z1(u,i,Vy(n),t);if(h===-1){if(_n(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(_n(r))return!1;s=!0}}}}return _n(r)||s}function _n(n){return(n&1)===0}function z1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return W1(e,n)}function q1(n,e,t=!1){for(let r=0;r<e.length;r++)if(H1(n,e[r],t))return!0;return!1}function G1(n){for(let e=0;e<n.length;e++){let t=n[e];if(bC(t))return e}return n.length}function W1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function GD(n,e){return n?":not("+e.trim()+")":e}function K1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!_n(s)&&(e+=GD(o,i),i=""),r=s,o=o||!_n(r);t++}return i!==""&&(e+=GD(o,i)),e}function Q1(n){return n.map(K1).join(",")}function Y1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!_n(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ut={};function J1(n,e){return n.createText(e)}function Z1(n,e,t){n.setValue(e,t)}function JC(n,e,t){return n.createElement(e,t)}function Hd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ZC(n,e,t){n.appendChild(e,t)}function WD(n,e,t,r,i){r!==null?Hd(n,e,t,r,i):ZC(n,e,t)}function X1(n,e,t){n.removeChild(null,e,t)}function eF(n,e,t){n.setAttribute(e,"style",t)}function tF(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&f1(n,e,r),i!==null&&tF(n,e,i),o!==null&&eF(n,e,o)}function jy(n,e,t,r,i,o,s,a,u,l,h){let p=Vt+r,m=p+i,y=nF(p,m),C=typeof l=="function"?l():l;return y[ne]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function nF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ut);return t}function rF(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Uy(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[mn]=i,p[Z]=r|4|128|8|64|1024,(l!==null||n&&n[Z]&2048)&&(p[Z]|=2048),Mm(p),p[Qe]=p[Xi]=n,p[gt]=t,p[xn]=s||n&&n[xn],p[Pe]=a||n&&n[Pe],p[Zi]=u||n&&n[Zi]||null,p[tn]=o,p[ac]=A1(),p[sc]=h,p[Cm]=l,p[nn]=e.type==2?n[nn]:p,p}function iF(n,e,t){let r=vn(e,n),i=rF(t),o=n[xn].rendererFactory,s=By(n,Uy(n,i,null,eS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function eS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function tS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function By(n,e){return n[gs]?n[Dm][en]=e:n[gs]=e,n[Dm]=e,e}function an(n=1){nS(Je(),he(),yr()+n,!1)}function nS(n,e,t,r){if(!r)if((e[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Pd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Od(e,o,0,t)}ri(t)}var rh=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(rh||{});function fy(n,e,t,r){let i=ie(null);try{let[o,s,a]=n.inputs[t],u=null;(s&rh.SignalBased)!==0&&(u=e[o][ft]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):yC(e,u,o,r)}finally{ie(i)}}function rS(n,e,t,r,i){let o=yr(),s=r&2;try{ri(-1),s&&e.length>Vt&&nS(n,e,Vt,!1),Ee(s?2:0,i,t),t(r,i)}finally{ri(o),Ee(s?3:1,i,t)}}function $y(n,e,t){dF(n,e,t),(t.flags&64)===64&&hF(n,e,t)}function iS(n,e,t=vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function oF(n,e,t,r){let o=r.get(UC,jC)||t===_r.ShadowDom,s=n.selectRootElement(e,o);return sF(s),s}function sF(n){aF(n)}var aF=()=>null;function cF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oS(n,e,t,r,i,o){let s=e[ne];if(Hy(n,s,e,t,r)){ni(n)&&lF(e,n.index);return}uF(n,e,t,r,i,o)}function uF(n,e,t,r,i,o){if(n.type&3){let s=vn(n,e);t=cF(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function lF(n,e){let t=on(e,n);t[Z]&16||(t[Z]|=64)}function dF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ni(t)&&iF(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ud(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=_c(e,n,s,t);if(Tc(u,e),o!==null&&mF(e,s-r,u,a,t,o),Ln(a)){let l=on(t.index,e);l[gt]=_c(e,n,s,t)}}}function hF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=RD();try{ri(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Ed(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&fF(u,l)}}finally{ri(-1),Ed(s)}}function fF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function sS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];q1(e,o.selectors,!1)&&(r??=[],Ln(o)?r.unshift(o):r.push(o))}return r}function pF(n,e,t,r,i,o){let s=vn(n,e);gF(e[Pe],s,o,n.value,t,r,i)}function gF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Ji(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function mF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];fy(r,t,u,l)}}function yF(n,e){let t=n[Zi];if(!t)return;t.get(mt,null)?.(e)}function Hy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];fy(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];fy(h,l,r,i),a=!0}return a}function vF(n,e){let t=on(e,n),r=t[ne];_F(r,t);let i=t[mn];i!==null&&t[sc]===null&&(t[sc]=BC(i,t[Zi])),Ee(18),zy(r,t,t[gt]),Ee(19,t[gt])}function _F(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function zy(n,e,t){wd(e);try{let r=n.viewQuery;r!==null&&hy(1,r,t);let i=n.template;i!==null&&rS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[kn]?.finishViewCreation(n),n.staticContentQueries&&$C(n,e),n.staticViewQueries&&hy(2,n.viewQuery,t);let o=n.components;o!==null&&EF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Z]&=-5,bd()}}function EF(n,e){for(let t=0;t<e.length;t++)vF(n,e[t])}function IF(n,e,t,r){let i=ie(null);try{let o=e.tView,a=n[Z]&4096?4096:16,u=Uy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[ei]=l;let h=n[kn];return h!==null&&(u[kn]=h.createEmbeddedView(o)),zy(o,u,t),u}finally{ie(i)}}function KD(n,e){return!e||e.firstChild===null||OC(n)}var QD=!1,wF=new U(""),bF;function qy(n,e){return bF(n,e)}var Bn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Bn||{});function Gy(n){return(n.flags&32)===32}function _s(n,e,t,r,i){if(r!=null){let o,s=!1;yn(r)?o=r:Fn(r)&&(s=!0,r=r[mn]);let a=rn(r);n===0&&t!==null?i==null?ZC(e,t,a):Hd(e,t,a,i||null,!0):n===1&&t!==null?Hd(e,t,a,i||null,!0):n===2?X1(e,a,s):n===3&&e.destroyNode(a),o!=null&&kF(e,n,o,t,i)}}function TF(n,e){aS(n,e),e[mn]=null,e[tn]=null}function DF(n,e,t,r,i,o){r[mn]=i,r[tn]=e,ih(n,r,t,1,i,o)}function aS(n,e){e[xn].changeDetectionScheduler?.notify(9),ih(n,e,e[Pe],2,null,null)}function CF(n){let e=n[gs];if(!e)return Xm(n[ne],n);for(;e;){let t=null;if(Fn(e))t=e[gs];else{let r=e[St];r&&(t=r)}if(!t){for(;e&&!e[en]&&e!==n;)Fn(e)&&Xm(e[ne],e),e=e[Qe];e===null&&(e=n),Fn(e)&&Xm(e[ne],e),t=e&&e[en]}e=t}}function Wy(n,e){let t=n[no],r=t.indexOf(e);t.splice(r,1)}function cS(n,e){if(ro(e))return;let t=e[Pe];t.destroyNode&&ih(n,e,t,3,null,null),CF(e)}function Xm(n,e){if(ro(e))return;let t=ie(null);try{e[Z]&=-129,e[Z]|=256,e[Gt]&&Kl(e[Gt]),AF(n,e),SF(n,e),e[ne].type===1&&e[Pe].destroy();let r=e[ei];if(r!==null&&yn(e[Qe])){r!==e[Qe]&&Wy(r,e);let i=e[kn];i!==null&&i.detachView(n)}ly(e)}finally{ie(t)}}function SF(n,e){let t=n.cleanup,r=e[ps];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ps]=null);let i=e[fr];if(i!==null){e[fr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[cc];if(o!==null){e[cc]=null;for(let s of o)s.destroy()}}function AF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof oo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ee(4,a,u);try{u.call(a)}finally{Ee(5,a,u)}}else{Ee(4,i,o);try{o.call(i)}finally{Ee(5,i,o)}}}}}function RF(n,e,t){return NF(n,e.parent,t)}function NF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[mn];if(ni(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===_r.None||i===_r.Emulated)return null}return vn(r,t)}function MF(n,e,t){return OF(n,e,t)}function PF(n,e,t){return n.type&40?vn(n,t):null}var OF=PF,YD;function Ky(n,e,t,r){let i=RF(n,r,e),o=e[Pe],s=r.parent||e[tn],a=MF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)WD(o,i,t[u],a,!1);else WD(o,i,t,a,!1);YD!==void 0&&YD(o,r,e,t,i)}function mc(n,e){if(e!==null){let t=e.type;if(t&3)return vn(e,n);if(t&4)return py(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return mc(n,r);{let i=n[e.index];return yn(i)?py(-1,i):rn(i)}}else{if(t&128)return mc(n,e.next);if(t&32)return qy(e,n)()||rn(n[e.index]);{let r=uS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zr(n[nn]);return mc(i,r)}else return mc(n,e.next)}}}return null}function uS(n,e){if(e!==null){let r=n[nn][tn],i=e.projection;return r.projection[i]}return null}function py(n,e){let t=St+n+1;if(t<e.length){let r=e[t],i=r[ne].firstChild;if(i!==null)return mc(r,i)}return e[ti]}function Qy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Tc(rn(a),r),t.flags|=2),!Gy(t))if(u&8)Qy(n,e,t.child,r,i,o,!1),_s(e,n,i,a,o);else if(u&32){let l=qy(t,r),h;for(;h=l();)_s(e,n,i,h,o);_s(e,n,i,a,o)}else u&16?xF(n,e,r,t,i,o):_s(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ih(n,e,t,r,i,o){Qy(t,r,n.firstChild,e,i,o,!1)}function xF(n,e,t,r,i,o){let s=t[nn],u=s[tn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];_s(e,n,i,h,o)}else{let l=u,h=s[Qe];OC(r)&&(l.flags|=128),Qy(n,e,l,h,i,o,!0)}}function kF(n,e,t,r,i){let o=t[ti],s=rn(t);o!==s&&_s(e,n,r,o,i);for(let a=St;a<t.length;a++){let u=t[a];ih(u[ne],u,n,e,r,o)}}function FF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Bn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Bn.Important),n.setStyle(t,r,i,o))}}function Ec(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(rn(o)),yn(o)&&lS(o,r);let s=t.type;if(s&8)Ec(n,e,t.child,r);else if(s&32){let a=qy(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=uS(e,t);if(Array.isArray(a))r.push(...a);else{let u=Zr(e[nn]);Ec(u[ne],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function lS(n,e){for(let t=St;t<n.length;t++){let r=n[t],i=r[ne].firstChild;i!==null&&Ec(r[ne],r,i,e)}n[ti]!==n[mn]&&e.push(n[ti])}function dS(n){if(n[to]!==null){for(let e of n[to])e.impl.addSequence(e);n[to].length=0}}var hS=[];function LF(n){return n[Gt]??VF(n)}function VF(n){let e=hS.pop()??Object.create(UF);return e.lView=n,e}function jF(n){n.lView[Gt]!==n&&(n.lView=null,hS.push(n))}var UF=Y(P({},zi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ys(n.lView)},consumerOnSignalRead(){this.lView[Gt]=this}});function BF(n){let e=n[Gt]??Object.create($F);return e.lView=n,e}var $F=Y(P({},zi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Zr(n.lView);for(;e&&!fS(e[ne]);)e=Zr(e);e&&Pm(e)},consumerOnSignalRead(){this.lView[Gt]=this}});function fS(n){return n.type!==2}function pS(n){if(n[cc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[cc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Z]&8192)}}var HF=100;function Yy(n,e=0){let r=n[xn].rendererFactory,i=!1;i||r.begin?.();try{zF(n,e)}finally{i||r.end?.()}}function zF(n,e){let t=Um();try{Bm(!0),gy(n,e);let r=0;for(;dc(n);){if(r===HF)throw new V(103,!1);r++,gy(n,1)}}finally{Bm(t)}}function gS(n,e){jm(e?hc.Exhaustive:hc.OnlyDirtyViews);try{Yy(n)}finally{jm(hc.Off)}}function qF(n,e,t,r){if(ro(e))return;let i=e[Z],o=!1,s=!1;wd(e);let a=!0,u=null,l=null;o||(fS(n)?(l=LF(e),u=qi(l)):Gl()===null?(a=!1,l=BF(e),u=qi(l)):e[Gt]&&(Kl(e[Gt]),e[Gt]=null));try{Mm(e),CD(n.bindingStartIndex),t!==null&&rS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Pd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Od(e,y,0,null),Jm(e,0)}if(s||GF(e),pS(e),mS(e,0),n.contentQueries!==null&&$C(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Pd(e,y)}else{let y=n.contentHooks;y!==null&&Od(e,y,1),Jm(e,1)}KF(n,e);let p=n.components;p!==null&&vS(e,p,0);let m=n.viewQuery;if(m!==null&&hy(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Pd(e,y)}else{let y=n.viewHooks;y!==null&&Od(e,y,2),Jm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[dd]){for(let y of e[dd])y();e[dd]=null}o||(dS(e),e[Z]&=-73)}catch(h){throw o||ys(e),h}finally{l!==null&&(us(l,u),a&&jF(l)),bd()}}function mS(n,e){for(let t=kC(n);t!==null;t=FC(t))for(let r=St;r<t.length;r++){let i=t[r];yS(i,e)}}function GF(n){for(let e=kC(n);e!==null;e=FC(e)){if(!(e[Z]&2))continue;let t=e[no];for(let r=0;r<t.length;r++){let i=t[r];Pm(i)}}}function WF(n,e,t){Ee(18);let r=on(e,n);yS(r,t),Ee(19,r[gt])}function yS(n,e){pd(n)&&gy(n,e)}function gy(n,e){let r=n[ne],i=n[Z],o=n[Gt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ja(o)),s||=!1,o&&(o.dirty=!1),n[Z]&=-9217,s)qF(r,n,r.template,n[gt]);else if(i&8192){let a=ie(null);try{pS(n),mS(n,1);let u=r.components;u!==null&&vS(n,u,1),dS(n)}finally{ie(a)}}}function vS(n,e,t){for(let r=0;r<e.length;r++)WF(n,e[r],t)}function KF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ri(~i);else{let o=i,s=t[++r],a=t[++r];AD(s,o);let u=e[o];Ee(24,u),a(2,u),Ee(25,u)}}}finally{ri(-1)}}function Jy(n,e){let t=Um()?64:1088;for(n[xn].changeDetectionScheduler?.notify(e);n;){n[Z]|=t;let r=Zr(n);if(ms(n)&&!r)return n;n=r}return null}function _S(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function QF(n,e,t,r=!0){let i=e[ne];if(YF(i,e,n,t),r){let s=py(t,n),a=e[Pe],u=a.parentNode(n[ti]);u!==null&&DF(i,n[tn],a,e,u,s)}let o=e[sc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function my(n,e){if(n.length<=St)return;let t=St+e,r=n[t];if(r){let i=r[ei];i!==null&&i!==n&&Wy(i,r),e>0&&(n[t-1][en]=r[en]);let o=rc(n,St+e);TF(r[ne],r);let s=o[kn];s!==null&&s.detachView(o[ne]),r[Qe]=null,r[en]=null,r[Z]&=-129}return r}function YF(n,e,t,r){let i=St+r,o=t.length;r>0&&(t[i-1][en]=e),r<o-St?(e[en]=t[i],ym(t,St+r,e)):(t.push(e),e[en]=null),e[Qe]=t;let s=e[ei];s!==null&&t!==s&&ES(s,e);let a=e[kn];a!==null&&a.insertView(n),gd(e),e[Z]|=128}function ES(n,e){let t=n[no],r=e[Qe];if(Fn(r))n[Z]|=2;else{let i=r[Qe][nn];e[nn]!==i&&(n[Z]|=2)}t===null?n[no]=[e]:t.push(e)}var ii=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ne];return Ec(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[gt]}set context(e){this._lView[gt]=e}get destroyed(){return ro(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qe];if(yn(e)){let t=e[uc],r=t?t.indexOf(this):-1;r>-1&&(my(e,r),rc(t,r))}this._attachedToViewContainer=!1}cS(this._lView[ne],this._lView)}onDestroy(e){Om(this._lView,e)}markForCheck(){Jy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){gd(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,Yy(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Zi].get(wF,QD)}catch{this.exhaustive=QD}}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ms(this._lView),t=this._lView[ei];t!==null&&!e&&Wy(t,this._lView),aS(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let t=ms(this._lView),r=this._lView[ei];r!==null&&!t&&ES(r,this._lView),gd(this._lView)}};var oi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=JF;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=IF(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ii(o)}}return n})();function JF(){return oh(ot(),he())}function oh(n,e){return n.type&4?new oi(e,n,bs(n,e)):null}function Zy(n,e,t,r,i){let o=n.data[e];if(o===null)o=ZF(n,e,t,r,i),SD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=wD();o.injectorIndex=s===null?-1:s.injectorIndex}return vs(o,!0),o}function ZF(n,e,t,r,i){let o=Lm(),s=Vm(),a=s?o:o&&o.parent,u=n.data[e]=eL(n,a,t,e,r,i);return XF(n,u,o,s),u}function XF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function eL(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return _D()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var SQ=new RegExp(`^(\\d+)*(${P1}|${M1})*(.*)`);var tL=()=>null;function JD(n,e){return tL(n,e)}var IS=class{},sh=class{},yy=class{resolveComponentFactory(e){throw new V(917,!1)}},Dc=class{static NULL=new yy},so=class{},In=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>nL()}return n})();function nL(){let n=he(),e=ot(),t=on(e.index,n);return(Fn(t)?t:n)[Pe]}var wS=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>null})}return n})();var kd={},vy=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,kd,r);return i!==kd||t===kd?i:this.parentInjector.get(e,t,r)}};function ZD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=od(i,a);else if(o==2){let u=a,l=e[++s];r=od(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function q(n,e=0){let t=he();if(t===null)return B(n,e);let r=ot();return NC(r,t,it(n),e)}function Xy(){let n="invalid";throw new Error(n)}function bS(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}oL(n,e,t,a,o,u,l)}o!==null&&r!==null&&rL(t,r,o)}function rL(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function iL(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function oL(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Ln(y)&&(u=!0,iL(n,t,m)),cy(Ud(t,e),n,y.type)}dL(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=tS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=vc(t.mergedAttrs,y.hostAttrs),aL(n,t,e,p,y),lL(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);t.directiveToIndex.set(y.type,[p,N+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}sL(n,t,o)}function sL(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))XD(0,e,i,r),XD(1,e,i,r),tC(e,r,!1);else{let o=t.get(i);eC(0,e,o,r),eC(1,e,o,r),tC(e,r,!0)}}}function XD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),TS(e,o)}}function eC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),TS(e,s)}}function TS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function tC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Vy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function aL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Jr(i.type,!0)),s=new oo(o,Ln(i),q);n.blueprint[r]=s,t[r]=s,cL(n,e,r,tS(n,t,i.hostVars,Ut),i)}function cL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;uL(s)!=a&&s.push(a),s.push(t,r,o)}}function uL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function lL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ln(e)&&(t[""]=n)}}function dL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function DS(n,e,t,r,i,o,s,a){let u=e.consts,l=lc(u,s),h=Zy(e,n,2,r,l);return o&&bS(e,t,h,lc(u,a),i),h.mergedAttrs=vc(h.mergedAttrs,h.attrs),h.attrs!==null&&ZD(h,h.attrs,!1),h.mergedAttrs!==null&&ZD(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function CS(n,e){IC(n,e),Sm(e)&&n.queries.elementEnd(e)}function ev(n){return AS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function SS(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function AS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function RS(n,e,t){return n[e]=t}function hL(n,e){return n[e]}function Er(n,e,t){if(t===Ut)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function fL(n,e,t,r){let i=Er(n,e,t);return Er(n,e+1,r)||i}function ey(n,e,t){return function r(i){let o=ni(n)?on(n.index,e):e;Jy(o,5);let s=e[gt],a=nC(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=nC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function nC(n,e,t,r){let i=ie(null);try{return Ee(6,e,t),t(r)!==!1}catch(o){return yF(n,o),!1}finally{Ee(7,e,t),ie(i)}}function pL(n,e,t,r,i,o,s,a){let u=hd(n),l=!1,h=null;if(!r&&u&&(h=gL(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=vn(n,t),m=r?r(p):p;x1(t,m,o,a);let y=i.listen(m,o,a),C=r?N=>r(rn(N[n.index])):n.index;NS(C,e,t,o,a,y,!1)}return l}function gL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ps],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function NS(n,e,t,r,i,o,s){let a=e.firstCreatePass?km(e):null,u=xm(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function rC(n,e,t,r,i,o){let s=e[t],a=e[ne],l=a.data[t].outputs[r],p=s[l].subscribe(o);NS(n.index,a,e,i,o,p,!0)}var _y=Symbol("BINDING");var zd=class extends Dc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=mr(e);return new ao(t,this.ngModule)}};function mL(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&rh.SignalBased)!==0};return i&&(o.transform=i),o})}function yL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function vL(n,e,t){let r=e instanceof Fe?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new vy(t,r):t}function _L(n){let e=n.get(so,null);if(e===null)throw new V(407,!1);let t=n.get(wS,null),r=n.get(pr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function EL(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return JC(e,t,t==="svg"?uD:t==="math"?lD:null)}var ao=class extends sh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=mL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Q1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ee(22);let a=ie(null);try{let u=this.componentDef,l=IL(r,u,s,o),h=vL(u,i||this.ngModule,e),p=_L(h),m=p.rendererFactory.createRenderer(null,u),y=r?oF(m,r,u.encapsulation,h):EL(u,m),C=s?.some(iC)||o?.some(k=>typeof k!="function"&&k.bindings.some(iC)),N=Uy(null,l,null,512|eS(u),null,null,p,m,h,null,BC(y,h,!0));N[Vt]=y,wd(N);let R=null;try{let k=DS(Vt,l,N,"#host",()=>l.directiveRegistry,!0,0);y&&(XC(m,y,k),Tc(y,N)),$y(l,N,k),HC(l,k,N),CS(l,k),t!==void 0&&bL(k,this.ngContentSelectors,t),R=on(k.index,N),N[gt]=R[gt],zy(l,N,null)}catch(k){throw R!==null&&ly(R),ly(N),k}finally{Ee(23),bd()}return new qd(this.componentType,N,!!C)}finally{ie(a)}}};function IL(n,e,t,r){let i=n?["ng-version","20.0.5"]:Y1(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[_y].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[_y].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Im(p);u.push(m)}return jy(0,null,wL(o,s),1,a,u,null,null,null,[i],null)}function wL(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function iC(n){let e=n[_y].kind;return e==="input"||e==="twoWay"}var qd=class extends IS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=fd(t[ne],Vt),this.location=bs(this._tNode,t),this.instance=on(this._tNode.index,t)[gt],this.hostView=this.changeDetectorRef=new ii(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Hy(r,i[ne],i,e,t);this.previousInputValues.set(e,t);let s=on(r.index,i);Jy(s,1)}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ir=(()=>{class n{static __NG_ELEMENT_ID__=TL}return n})();function TL(){let n=ot();return PS(n,he())}var DL=Ir,MS=class extends DL{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return bs(this._hostTNode,this._hostLView)}get injector(){return new io(this._hostTNode,this._hostLView)}get parentInjector(){let e=Oy(this._hostTNode,this._hostLView);if(TC(e)){let t=Vd(e,this._hostLView),r=Ld(e),i=t[ne].data[r+8];return new io(i,t)}else return new io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-St}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=JD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,KD(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!o1(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new ao(mr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(Fe,null);k&&(o=k)}let m=mr(h.componentType??{}),y=JD(this._lContainer,m?.id??null),C=y?.firstChild??null,N=h.create(p,i,C,o,s,a);return this.insertImpl(N.hostView,l,KD(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(hD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Qe],l=new MS(u,u[tn],u[Qe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return QF(s,i,o,r),e.attachToViewContainerRef(),ym(ty(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=my(this._lContainer,t);r&&(rc(ty(this._lContainer),t),cS(r[ne],r))}detach(e){let t=this._adjustIndex(e,-1),r=my(this._lContainer,t);return r&&rc(ty(this._lContainer),t)!=null?new ii(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function oC(n){return n[uc]}function ty(n){return n[uc]||(n[uc]=[])}function PS(n,e){let t,r=e[n.index];return yn(r)?t=r:(t=_S(r,e,null,n),e[n.index]=t,By(e,t)),SL(t,e,n,r),new MS(t,n,e)}function CL(n,e){let t=n[Pe],r=t.createComment(""),i=vn(e,n),o=t.parentNode(i);return Hd(t,o,r,t.nextSibling(i),!1),r}var SL=NL,AL=()=>!1;function RL(n,e,t){return AL(n,e,t)}function NL(n,e,t,r){if(n[ti])return;let i;t.type&8?i=rn(r):i=CL(e,t),n[ti]=i}var Ey=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Iy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)tv(e,t).matches!==null&&this.queries[t].setDirty()}},wy=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=VL(e):this.predicate=e}},by=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ty=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,ML(t,o)),this.matchTNodeWithReadOption(e,t,xd(t,e,o,!1,!1))}else r===oi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,xd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===At||i===Ir||i===oi&&t.type&4)this.addMatch(t.index,-2);else{let o=xd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function ML(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function PL(n,e){return n.type&11?bs(n,e):n.type&4?oh(n,e):null}function OL(n,e,t,r){return t===-1?PL(e,n):t===-2?xL(n,e,r):_c(n,n[ne],t,e)}function xL(n,e,t){if(t===At)return bs(e,n);if(t===oi)return oh(e,n);if(t===Ir)return PS(e,n)}function OS(n,e,t,r){let i=e[kn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(OL(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Dy(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=OS(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=St;p<h.length;p++){let m=h[p];m[ei]===m[Qe]&&Dy(m[ne],m,l,r)}if(h[no]!==null){let p=h[no];for(let m=0;m<p.length;m++){let y=p[m];Dy(y[ne],y,l,r)}}}}}return r}function kL(n,e){return n[kn].queries[e].queryList}function FL(n,e,t){let r=new Bd((t&4)===4);return gD(n,e,r,r.destroy),(e[kn]??=new Iy).queries.push(new Ey(r))-1}function LL(n,e,t,r){let i=Je();if(i.firstCreatePass){let o=ot();jL(i,new wy(e,t,r),o.index),UL(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return FL(i,he(),t)}function VL(n){return n.split(",").map(e=>e.trim())}function jL(n,e,t){n.queries===null&&(n.queries=new by),n.queries.track(new Ty(e,t))}function UL(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function tv(n,e){return n.queries.getByIndex(e)}function BL(n,e){let t=n[ne],r=tv(t,e);return r.crossesNgTemplate?Dy(t,n,e,[]):OS(t,n,r,e)}var sC=new Set;function lo(n){sC.has(n)||(sC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var co=class{},ah=class{};var Gd=class extends co{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new zd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Em(e);this._bootstrapComponents=QC(o.bootstrap),this._r3Injector=qm(e,t,[{provide:co,useValue:this},{provide:Dc,useValue:this.componentFactoryResolver},...r],Ft(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wd=class extends ah{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Gd(this.moduleType,e,[])}};var Ic=class extends co{injector;componentFactoryResolver=new zd(this);instance=null;constructor(e){super();let t=new Qi([...e.providers,{provide:co,useValue:this},{provide:Dc,useValue:this.componentFactoryResolver}],e.parent||oc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cs(n,e,t=null){return new Ic({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var $L=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=wm(!1,t.type),i=r.length>0?Cs([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=L({token:n,providedIn:"environment",factory:()=>new n(B(Fe))})}return n})();function Cc(n){return ws(()=>{let e=xS(n),t=Y(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get($L).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||_r.Emulated,styles:n.styles||Ct,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&lo("NgStandalone"),kS(t);let r=n.dependencies;return t.directiveDefs=aC(r,!1),t.pipeDefs=aC(r,!0),t.id=WL(t),t})}function HL(n){return mr(n)||Im(n)}function zL(n){return n!==null}function cn(n){return ws(()=>({type:n.type,bootstrap:n.bootstrap||Ct,declarations:n.declarations||Ct,imports:n.imports||Ct,exports:n.exports||Ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function qL(n,e){if(n==null)return Xr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=rh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function GL(n){if(n==null)return Xr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ye(n){return ws(()=>{let e=xS(n);return kS(e),e})}function nv(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function xS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Xr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ct,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:qL(n.inputs,e),outputs:GL(n.outputs),debugInfo:null}}function kS(n){n.features?.forEach(e=>e(n))}function aC(n,e){if(!n)return null;let t=e?tD:HL;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(zL)}function WL(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function KL(n){return Object.getPrototypeOf(n.prototype).constructor}function qe(n){let e=KL(n.type),t=!0,r=[n];for(;e;){let i;if(Ln(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ny(n.inputs),s.declaredInputs=ny(n.declaredInputs),s.outputs=ny(n.outputs);let a=i.hostBindings;a&&XL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&JL(n,u),l&&ZL(n,l),QL(n,i),KT(n.outputs,i.outputs),Ln(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===qe&&(t=!1)}}e=Object.getPrototypeOf(e)}YL(r)}function QL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function YL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vc(i.hostAttrs,t=vc(t,i.hostAttrs))}}function ny(n){return n===Xr?{}:n===Ct?[]:n}function JL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function ZL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function XL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function eV(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Zy(e,n,4,s||null,a||null);Fm()&&bS(e,t,h,lc(l,u),sS),h.mergedAttrs=vc(h.mergedAttrs,h.attrs),IC(e,h);let p=h.tView=jy(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function tV(n,e,t,r,i,o,s,a,u,l,h){let p=t+Vt,m=e.firstCreatePass?eV(p,e,n,r,i,o,s,a,l):e.data[p];u&&(m.flags|=u),vs(m,!1);let y=nV(e,n,m,t);Dd()&&Ky(e,n,y,m),Tc(y,n);let C=_S(y,n,y,m);return n[p]=C,By(n,C),RL(C,m,n),hd(m)&&$y(e,n,m),l!=null&&iS(n,m,h),m}function Ss(n,e,t,r,i,o,s,a){let u=he(),l=Je(),h=lc(l.consts,o);return tV(u,l,n,e,t,r,i,h,void 0,s,a),Ss}var nV=rV;function rV(n,e,t,r){return Cd(!0),e[Pe].createComment("")}var ch=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ch||{}),ho=new U(""),FS=!1,Cy=class extends xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,aD()&&(this.destroyRef=M(Vn,{optional:!0})??void 0,this.pendingTasks=M(vr,{optional:!0})??void 0)}emit(e){let t=ie(null);try{super.next(e)}finally{ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof De&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Re=Cy;function LS(n){let e,t;function r(){n=gc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function cC(n){return queueMicrotask(()=>n()),()=>{n=gc}}var rv="isAngularZone",Kd=rv+"_ID",iV=0,Ne=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Re(!1);onMicrotaskEmpty=new Re(!1);onStable=new Re(!1);onError=new Re(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=FS}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,aV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new V(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,oV,gc,gc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},oV={};function iv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){LS(()=>{n.callbackScheduled=!1,Sy(n),n.isCheckStableRunning=!0,iv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Sy(n)}function aV(n){let e=()=>{sV(n)},t=iV++;n._inner=n._inner.fork({name:"angular",properties:{[rv]:!0,[Kd]:t,[Kd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(cV(u))return r.invokeTask(o,s,a,u);try{return uC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),lC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return uC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uV(u)&&e(),lC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Sy(n),iv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Sy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function uC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lC(n){n._nesting--,iv(n)}var Qd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Re;onMicrotaskEmpty=new Re;onStable=new Re;onError=new Re;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function cV(n){return VS(n,"__ignore_ng_zone__")}function uV(n){return VS(n,"__scheduler_tick__")}function VS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ov=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),jS=[0,1,2,3],US=(()=>{class n{ngZone=M(Ne);scheduler=M(pr);errorHandler=M(gn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(ho,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ee(16),this.executing=!0;for(let r of jS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ee(17)}register(t){let{view:r}=t;r!==void 0?((r[to]??=[]).push(t),ys(r),r[Z]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(ch.AFTER_NEXT_RENDER,t):t()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),Yd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[to];e&&(this.view[to]=e.filter(t=>t!==this))}};function sv(n,e){let t=e?.injector??M(Lt);return lo("NgAfterNextRender"),dV(n,t,e,!0)}function lV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function dV(n,e,t,r){let i=e.get(ov);i.impl??=e.get(US);let o=e.get(ho,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Vn):null,a=e.get(Sd,null,{optional:!0}),u=new Yd(i.impl,lV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var av=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var cv=new U("");function wr(n){return!!n&&typeof n.then=="function"}function uh(n){return!!n&&typeof n.subscribe=="function"}var uv=new U("");function lh(n){return On([{provide:uv,multi:!0,useValue:n}])}var lv=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(uv,{optional:!0})??[];injector=M(Lt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=pt(this.injector,i);if(wr(o))t.push(o);else if(uh(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sc=new U("");function BS(){Gg(()=>{let n="";throw new V(600,n)})}function $S(n){return n.isBoundToModule}var hV=10;var fo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(mt);afterRenderManager=M(ov);zonelessEnabled=M(pc);rootEffectScheduler=M(Ym);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(vr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(J(t=>!t))}constructor(){M(ho,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(Fe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Lt.NULL){return this._injector.get(Ne).run(()=>{Ee(10);let s=t instanceof sh;if(!this._injector.get(lv).done){let C="";throw new V(405,C)}let u;s?u=t:u=this._injector.get(Dc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=$S(u)?void 0:this._injector.get(co),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(cv,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),yc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Ee(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ch.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new V(101,!1);let t=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(t),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(so,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<hV;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!dc(i))continue;let o=r&&!this.zonelessEnabled?0:1;Yy(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>dc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Sc,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new V(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function br(n,e,t,r){let i=he(),o=fc();if(Er(i,o,e)){let s=Je(),a=Td();pF(a,i,n,e,t,r)}return br}function As(n,e,t){let r=he(),i=fc();if(Er(r,i,e)){let o=Je(),s=Td();oS(s,r,n,e,r[Pe],t)}return As}function Ay(n,e,t,r,i){Hy(e,n,t,i?"class":"style",r)}function un(n,e,t,r){let i=he(),o=Je(),s=Vt+n,a=i[Pe],u=o.firstCreatePass?DS(s,o,i,e,sS,Fm(),t,r):o.data[s],l=fV(o,i,u,a,e,n);i[s]=l;let h=hd(u);return vs(u,!0),XC(a,l,u),!Gy(u)&&Dd()&&Ky(o,i,l,u),(mD()===0||h)&&Tc(l,i),yD(),h&&($y(o,i,u),HC(o,u,i)),r!==null&&iS(i,u),un}function Wt(){let n=ot();Vm()?bD():(n=n.parent,vs(n,!1));let e=n;ED(e)&&ID(),vD();let t=Je();return t.firstCreatePass&&CS(t,e),e.classesWithoutHost!=null&&d1(e)&&Ay(t,e,he(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&h1(e)&&Ay(t,e,he(),e.stylesWithoutHost,!1),Wt}function si(n,e,t,r){return un(n,e,t,r),Wt(),si}var fV=(n,e,t,r,i,o)=>(Cd(!0),JC(r,i,kD()));function dv(){return he()}var Ac="en-US";var pV=Ac;function HS(n){typeof n=="string"&&(pV=n.toLowerCase().replace(/_/g,"-"))}function Rt(n,e,t){let r=he(),i=Je(),o=ot();return zS(i,r,r[Pe],o,n,e,t),Rt}function zS(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=ey(r,e,o),pL(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=ey(r,e,o),rC(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=ey(r,e,o),rC(r,e,p,i,i,u)}}function Rc(n=1){return xD(n)}function hv(n,e,t,r){LL(n,e,t,r)}function fv(n){let e=he(),t=Je(),r=$m();Id(r+1);let i=tv(t,r);if(n.dirty&&dD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=BL(e,r);n.reset(o,D1),n.notifyOnChanges()}return!0}return!1}function pv(){return kL(he(),$m())}function gV(n){let e=TD();return Rm(e,Vt+n)}function Md(n,e){return n<<17|e<<2}function uo(n){return n>>17&32767}function mV(n){return(n&2)==2}function yV(n,e){return n&131071|e<<17}function Ry(n){return n|2}function Is(n){return(n&131068)>>2}function ry(n,e){return n&-131069|e<<2}function vV(n){return(n&1)===1}function Ny(n){return n|1}function _V(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=uo(s),u=Is(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||fs(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=uo(n[a+1]);n[r+1]=Md(m,a),m!==0&&(n[m+1]=ry(n[m+1],r)),n[a+1]=yV(n[a+1],r)}else n[r+1]=Md(a,0),a!==0&&(n[a+1]=ry(n[a+1],r)),a=r;else n[r+1]=Md(u,0),a===0?a=r:n[u+1]=ry(n[u+1],r),u=r;l&&(n[r+1]=Ry(n[r+1])),dC(n,h,r,!0),dC(n,h,r,!1),EV(e,h,n,r,o),s=Md(a,u),o?e.classBindings=s:e.styleBindings=s}function EV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&fs(o,e)>=0&&(t[r+1]=Ny(t[r+1]))}function dC(n,e,t,r){let i=n[t+1],o=e===null,s=r?uo(i):Is(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];IV(u,e)&&(a=!0,n[s+1]=r?Ny(l):Ry(l)),s=r?uo(l):Is(l)}a&&(n[t+1]=r?Ry(i):Ny(i))}function IV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?fs(n,e)>=0:!1}var En={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wV(n){return n.substring(En.key,En.keyEnd)}function bV(n){return TV(n),qS(n,GS(n,0,En.textEnd))}function qS(n,e){let t=En.textEnd;return t===e?-1:(e=En.keyEnd=DV(n,En.key=e,t),GS(n,e,t))}function TV(n){En.key=0,En.keyEnd=0,En.value=0,En.valueEnd=0,En.textEnd=n.length}function GS(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function DV(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function WS(n,e,t){return KS(n,e,t,!1),WS}function Tr(n,e){return KS(n,e,null,!0),Tr}function CV(n){AV(xV,SV,n,!0)}function SV(n,e){for(let t=bV(e);t>=0;t=qS(e,t))ud(n,wV(e),!0)}function KS(n,e,t,r){let i=he(),o=Je(),s=_d(2);if(o.firstUpdatePass&&YS(o,n,s,r),e!==Ut&&Er(i,s,e)){let a=o.data[yr()];JS(o,a,i,i[Pe],n,i[s+1]=FV(e,t),r,s)}}function AV(n,e,t,r){let i=Je(),o=_d(2);i.firstUpdatePass&&YS(i,null,o,r);let s=he();if(t!==Ut&&Er(s,o,t)){let a=i.data[yr()];if(ZS(a,r)&&!QS(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=od(u,t||"")),Ay(i,a,s,t,r)}else kV(i,a,s,s[Pe],s[o+1],s[o+1]=OV(n,e,t),r,o)}}function QS(n,e){return e>=n.expandoStartIndex}function YS(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[yr()],s=QS(n,t);ZS(o,r)&&e===null&&!s&&(e=!1),e=RV(i,o,e,r),_V(i,o,e,t,s,r)}}function RV(n,e,t,r){let i=ND(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=iy(null,n,e,t,r),t=wc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=iy(i,n,e,t,r),o===null){let u=NV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=iy(null,n,e,u[1],r),u=wc(u,e.attrs,r),MV(n,e,r,u))}else o=PV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function NV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Is(r)!==0)return n[uo(r)]}function MV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[uo(i)]=r}function PV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=wc(r,s,t)}return wc(r,e.attrs,t)}function iy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=wc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ud(n,s,t?!0:e[++o]))}return n===void 0?null:n}function OV(n,e,t){if(t==null||t==="")return Ct;let r=[],i=Ds(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function xV(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&ud(n,r,t)}function kV(n,e,t,r,i,o,s,a){i===Ut&&(i=Ct);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,C=null,N;h===p?(u+=2,l+=2,m!==y&&(C=p,N=y)):p===null||h!==null&&h<p?(u+=2,C=h):(l+=2,C=p,N=y),C!==null&&JS(n,e,t,r,C,N,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function JS(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=vV(l)?hC(u,e,t,i,Is(l),s):void 0;if(!Jd(h)){Jd(o)||mV(l)&&(o=hC(u,null,t,i,a,s));let p=Am(yr(),t);FF(r,s,p,i,o)}}function hC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Ut&&(m=p?Ct:void 0);let y=p?ld(m,r):h===r?m:void 0;if(l&&!Jd(y)&&(y=ld(u,r)),Jd(y)&&(a=y,s))return a;let C=n[i+1];i=s?uo(C):Is(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ld(u,r))}return a}function Jd(n){return n!==void 0}function FV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ft(Ds(n)))),n}function ZS(n,e){return(n.flags&(e?8:16))!==0}function po(n,e=""){let t=he(),r=Je(),i=n+Vt,o=r.firstCreatePass?Zy(r,i,1,e,null):r.data[i],s=LV(r,t,o,e,n);t[i]=s,Dd()&&Ky(r,t,s,o),vs(o,!1)}var LV=(n,e,t,r,i)=>(Cd(!0),J1(e[Pe],r));function VV(n,e,t,r=""){return Er(n,fc(),t)?e+Ji(t)+r:Ut}function jV(n,e,t,r,i,o=""){let s=DD(),a=fL(n,s,t,i);return _d(2),a?e+Ji(t)+r+Ji(i)+o:Ut}function ai(n){return gv("",n),ai}function gv(n,e,t){let r=he(),i=VV(r,n,e,t);return i!==Ut&&e0(r,yr(),i),gv}function XS(n,e,t,r,i){let o=he(),s=jV(o,n,e,t,r,i);return s!==Ut&&e0(o,yr(),s),XS}function e0(n,e,t){let r=Am(e,n);Z1(n[Pe],r,t)}function t0(n,e,t){Wm(e)&&(e=e());let r=he(),i=fc();if(Er(r,i,e)){let o=Je(),s=Td();oS(s,r,n,e,r[Pe],t)}return t0}function UV(n,e){let t=Wm(n);return t&&n.set(e),t}function n0(n,e){let t=he(),r=Je(),i=ot();return zS(r,t,t[Pe],i,n,e),n0}function BV(n,e,t){let r=Je();if(r.firstCreatePass){let i=Ln(n);My(t,r.data,r.blueprint,i,!0),My(e,r.data,r.blueprint,i,!1)}}function My(n,e,t,r,i){if(n=it(n),Array.isArray(n))for(let o=0;o<n.length;o++)My(n[o],e,t,r,i);else{let o=Je(),s=he(),a=ot(),u=Ki(n)?n:it(n.provide),l=Tm(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ki(n)||!n.multi){let y=new oo(l,i,q),C=sy(u,e,i?h:h+m,p);C===-1?(cy(Ud(a,s),o,u),oy(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=sy(u,e,h+m,p),C=sy(u,e,h,h+m),N=y>=0&&t[y],R=C>=0&&t[C];if(i&&!R||!i&&!N){cy(Ud(a,s),o,u);let k=zV(i?HV:$V,t.length,i,r,l);!i&&R&&(t[C].providerFactory=k),oy(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=r0(t[i?C:y],l,!i&&r);oy(o,n,y>-1?y:C,k)}!i&&r&&R&&t[C].componentProviders++}}}function oy(n,e,t,r){let i=Ki(e),o=sD(e);if(i||o){let u=(o?it(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function r0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function sy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $V(n,e,t,r){return Py(this.multi,[])}function HV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=_c(t,t[ne],this.providerFactory.index,r);o=a.slice(0,s),Py(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Py(i,o);return o}function Py(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function zV(n,e,t,r,i){let o=new oo(n,t,q);return o.multi=[],o.index=e,o.componentProviders=0,r0(o,i,r&&!t),o}function Nt(n,e=[]){return t=>{t.providersResolver=(r,i)=>BV(r,i?i(n):n,e)}}function qV(n,e,t){let r=vd()+n,i=he();return i[r]===Ut?RS(i,r,t?e.call(t):e()):hL(i,r)}function GV(n,e,t,r){return i0(he(),vd(),n,e,t,r)}function WV(n,e){let t=n[e];return t===Ut?void 0:t}function i0(n,e,t,r,i,o){let s=e+t;return Er(n,s,i)?RS(n,s+1,o?r.call(o,i):r(i)):WV(n,s+1)}function KV(n,e){let t=Je(),r,i=n+Vt;t.firstCreatePass?(r=QV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Jr(r.type,!0)),s,a=Dt(q);try{let u=jd(!1),l=o();return jd(u),Nm(t,he(),i,l),l}finally{Dt(a)}}function QV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function YV(n,e,t){let r=n+Vt,i=he(),o=Rm(i,r);return JV(i,r)?i0(i,vd(),e,o.transform,t,o):o.transform(t)}function JV(n,e){return n[ne].data[e].pure}function ZV(n,e){return oh(n,e)}var Zd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},mv=(()=>{class n{compileModuleSync(t){return new Wd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Em(t),o=QC(i.declarations).reduce((s,a)=>{let u=mr(a);return u&&s.push(new ao(u)),s},[]);return new Zd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XV=(()=>{class n{zone=M(Ne);changeDetectionScheduler=M(pr);applicationRef=M(fo);applicationErrorHandler=M(mt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),o0=new U("",{factory:()=>!1});function yv({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ne(Y(P({},vv()),{scheduleInRootZone:t})),[{provide:Ne,useFactory:n},{provide:gr,multi:!0,useFactory:()=>{let r=M(XV,{optional:!0});return()=>r.initialize()}},{provide:gr,multi:!0,useFactory:()=>{let r=M(tj);return()=>{r.initialize()}}},e===!0?{provide:Km,useValue:!0}:[],{provide:Qm,useValue:t??FS},{provide:mt,useFactory:()=>{let r=M(Ne),i=M(Fe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(gn),o.handleError(s))})}}}]}function ej(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=yv({ngZoneFactory:()=>{let i=vv(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&lo("NgZone_CoalesceEvent"),new Ne(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return On([{provide:o0,useValue:!0},{provide:pc,useValue:!1},r])}function vv(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tj=(()=>{class n{subscription=new De;initialized=!1;zone=M(Ne);pendingTasks=M(vr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var s0=(()=>{class n{applicationErrorHandler=M(mt);appRef=M(fo);taskService=M(vr);ngZone=M(Ne);zonelessEnabled=M(pc);tracing=M(ho,{optional:!0});disableScheduling=M(Km,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new De;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Kd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Qm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Qd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?cC:LS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Kd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nj(){return typeof $localize<"u"&&$localize.locale||Ac}var dh=new U("",{providedIn:"root",factory:()=>M(dh,{optional:!0,skipSelf:!0})||nj()});function Mt(n){return zT(n)}function go(n,e){return Zl(n,e?.equal)}var a0=class{[ft];constructor(e){this[ft]=e}destroy(){this[ft].destroy()}};var h0=Symbol("InputSignalNode#UNSET"),yj=Y(P({},Xl),{transformFn:void 0,applyValueToInputSignal(n,e){ls(n,e)}});function f0(n,e){let t=Object.create(yj);t.value=n,t.transformFn=e?.transform;function r(){if(cs(t),t.value===h0){let i=null;throw new V(-950,i)}return t.value}return r[ft]=t,r}var fh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>bc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},vj=new U("");vj.__NG_ELEMENT_ID__=n=>{let e=ot();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new V(204,!1)};function c0(n,e){return f0(n,e)}function _j(n){return f0(h0,n)}var p0=(c0.required=_j,c0);var _v=new U(""),Ej=new U("");function Nc(n){return!n.moduleRef}function Ij(n){let e=Nc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ne);return t.run(()=>{Nc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(mt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Nc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(_v);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(_v);s.add(o),n.moduleRef.onDestroy(()=>{yc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return bj(r,t,()=>{let o=e.get(lv);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(dh,Ac);if(HS(s||Ac),!e.get(Ej,!0))return Nc(n)?e.get(fo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Nc(n)){let u=e.get(fo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return wj?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var wj;function bj(n,e,t){try{let r=t();return wr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var hh=null;function Tj(n=[],e){return Lt.create({name:e,providers:[{provide:ic,useValue:"platform"},{provide:_v,useValue:new Set([()=>hh=null])},...n]})}function Dj(n=[]){if(hh)return hh;let e=Tj(n);return hh=e,BS(),Cj(e),e}function Cj(n){let e=n.get(eh,null);pt(n,()=>{e?.forEach(t=>t())})}var Dr=(()=>{class n{static __NG_ELEMENT_ID__=Sj}return n})();function Sj(n){return Aj(ot(),he(),(n&16)===16)}function Aj(n,e,t){if(ni(n)&&!t){let r=on(n.index,e);return new ii(r,r)}else if(n.type&175){let r=e[nn];return new ii(r,e)}return null}var Ev=class{constructor(){}supports(e){return ev(e)}create(e){return new Iv(e)}},Rj=(n,e)=>e,Iv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Rj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<u0(r,i,o)?t:r,a=u0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,C=y+m;h<=C&&C<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ev(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,SS(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new wv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ph),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ph),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},wv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},bv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ph=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new bv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function u0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function l0(){return new Tv([new Ev])}var Tv=(()=>{class n{factories;static \u0275prov=L({token:n,providedIn:"root",factory:l0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||l0()),deps:[[n,new mC,new gC]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new V(901,!1)}}return n})();function g0(n){Ee(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Dj(r),o=[yv({}),{provide:pr,useExisting:s0},LD,...t||[]],s=new Ic({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Ij({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ee(9)}}function ci(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function m0(n){let e=mr(n);if(!e)return null;let t=new ao(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var _0=null;function ln(){return _0}function Dv(n){_0??=n}var Mc=class{},Pc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(E0),providedIn:"platform"})}return n})(),Cv=new U(""),E0=(()=>{class n extends Pc{_location;_history;_doc=M(Ae);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ln().getBaseHref(this._doc)}onPopState(t){let r=ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function gh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function y0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function wn(n){return n&&n[0]!=="?"?`?${n}`:n}var bn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(yh),providedIn:"root"})}return n})(),mh=new U(""),yh=(()=>{class n extends bn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+wn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(B(Pc),B(mh,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ui=(()=>{class n{_subject=new xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Pj(y0(v0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+wn(r))}normalize(t){return n.stripTrailingSlash(Mj(this._basePath,v0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=wn;static joinWithSlash=gh;static stripTrailingSlash=y0;static \u0275fac=function(r){return new(r||n)(B(bn))};static \u0275prov=L({token:n,factory:()=>Nj(),providedIn:"root"})}return n})();function Nj(){return new ui(B(bn))}function Mj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function v0(n){return n.replace(/\/index.html$/,"")}function Pj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Rv=(()=>{class n extends bn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=gh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(B(Pc),B(mh,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();var vh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Eh=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new vh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),I0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);I0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(q(Ir),q(oi),q(Tv))};static \u0275dir=ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function I0(n,e){n.context.$implicit=e.item}var Nv=(()=>{class n{_viewContainer;_context=new _h;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){w0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){w0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(q(Ir),q(oi))};static \u0275dir=ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),_h=class{$implicit=null;ngIf=null};function w0(n,e){if(n&&!n.createEmbeddedView)throw new V(2020,!1)}function Oj(n,e){return new V(2100,!1)}var Sv=class{createSubscription(e,t,r){return Mt(()=>e.subscribe({next:t,error:r}))}dispose(e){Mt(()=>e.unsubscribe())}},Av=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},xj=new Av,kj=new Sv,Fj=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(mt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(wr(t))return xj;if(uh(t))return kj;throw Oj(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(q(Dr,16))};static \u0275pipe=nv({name:"async",type:n,pure:!1})}return n})();var Ih=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=cn({type:n});static \u0275inj=qt({})}return n})();function Oc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var mo=class{};var Pv="browser",Vj="server";function lre(n){return n===Pv}function b0(n){return n===Vj}var T0=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new Mv(M(Ae),window)})}return n})(),Mv=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Y(P({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=jj(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(hs(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Y(P({},t),{left:i-s[0],top:o-s[1]}))}};function jj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Th=new U(""),Fv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(B(Th),B(Ne))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),xc=class{_doc;constructor(e){this._doc=e}manager},wh="ng-app-id";function C0(n){for(let e of n)e.remove()}function S0(n,e){let t=e.createElement("style");return t.textContent=n,t}function Uj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${wh}="${e}"],link[${wh}="${e}"]`);if(i)for(let o of i)o.removeAttribute(wh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function xv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Lv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=b0(o),Uj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,S0);r?.forEach(i=>this.addUsage(i,this.external,xv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(C0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])C0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,S0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,xv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(wh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(B(Ae),B(Xd),B(th,8),B(Ts))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Ov={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vv=/%COMP%/g;var R0="%COMP%",Bj=`_nghost-${R0}`,$j=`_ngcontent-${R0}`,Hj=!0,zj=new U("",{providedIn:"root",factory:()=>Hj});function qj(n){return $j.replace(Vv,n)}function Gj(n){return Bj.replace(Vv,n)}function N0(n,e){return e.map(t=>t.replace(Vv,n))}var jv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new kc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof bh?i.applyToHost(t):i instanceof Fc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case _r.Emulated:o=new bh(u,l,r,this.appId,h,s,a,p,m);break;case _r.ShadowDom:return new kv(u,l,t,r,s,a,this.nonce,p,m);default:o=new Fc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(B(Fv),B(Lv),B(Xd),B(zj),B(Ae),B(Ts),B(Ne),B(th),B(ho,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),kc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ov[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(A0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(A0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ov[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ov[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Bn.DashCase|Bn.Important)?e.style.setProperty(t,r,i&Bn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Bn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ln().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function A0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var kv=class extends kc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=N0(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=xv(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fc=class extends kc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?N0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},bh=class extends Fc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=qj(h),this.hostAttr=Gj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Dh=class n extends Mc{supportsDOMEvents=!0;static makeCurrent(){Dv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Wj();return t==null?null:Kj(t)}resetBaseElement(){Lc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Oc(document.cookie,e)}},Lc=null;function Wj(){return Lc=Lc||document.head.querySelector("base"),Lc?Lc.getAttribute("href"):null}function Kj(n){return new URL(n,document.baseURI).pathname}var Qj=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),P0=(()=>{class n extends xc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(B(Ae))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),M0=["alt","control","meta","shift"],Yj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},O0=(()=>{class n extends xc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ln().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),M0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Yj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),M0.forEach(s=>{if(s!==i){let a=Jj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(B(Ae))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function Zj(n,e){return g0(P({rootComponent:n},Xj(e)))}function Xj(n){return{appProviders:[...i2,...n?.providers??[]],platformProviders:r2}}function e2(){Dh.makeCurrent()}function t2(){return new gn}function n2(){return ky(document),document}var r2=[{provide:Ts,useValue:Pv},{provide:eh,useValue:e2,multi:!0},{provide:Ae,useFactory:n2}];var i2=[{provide:ic,useValue:"root"},{provide:gn,useFactory:t2},{provide:Th,useClass:P0,multi:!0,deps:[Ae]},{provide:Th,useClass:O0,multi:!0,deps:[Ae]},jv,Lv,Fv,{provide:so,useExisting:jv},{provide:mo,useClass:Qj},[]];var Ns=class{},Ms=class{},$n=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Ah=class{encodeKey(e){return x0(e)}encodeValue(e){return x0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function o2(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var s2=/%(\d[a-f0-9])/gi,a2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function x0(n){return encodeURIComponent(n).replace(s2,(e,t)=>a2[t]??e)}function Ch(n){return`${n}`}var Tn=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Ah,e.fromString){if(e.fromObject)throw new V(2805,!1);this.map=o2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Ch):[Ch(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ch(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ch(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Rh=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function c2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function k0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function F0(n){return typeof Blob<"u"&&n instanceof Blob}function L0(n){return typeof FormData<"u"&&n instanceof FormData}function u2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Vc="Content-Type",Nh="Accept",zv="X-Request-URL",j0="text/plain",U0="application/json",B0=`${U0}, ${j0}, */*`,Rs=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(c2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new $n,this.context??=new Rh,!this.params)this.params=new Tn,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||k0(this.body)||F0(this.body)||L0(this.body)||u2(this.body)?this.body:this.body instanceof Tn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||L0(this.body)?null:F0(this.body)?this.body.type||null:k0(this.body)?null:typeof this.body=="string"?j0:this.body instanceof Tn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?U0:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,u=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,p=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((y,C)=>y.set(C,e.setHeaders[C]),h)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,C)=>y.set(C,e.setParams[C]),p)),new n(t,r,a,{params:p,headers:h,context:m,reportProgress:l,responseType:i,withCredentials:u,transferCache:s,keepalive:o})}},Sr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Sr||{}),Ps=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new $n,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},jc=class n extends Ps{constructor(e={}){super(e)}type=Sr.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Os=class n extends Ps{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Sr.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cr=class extends Ps{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},$0=200,l2=204;function Uv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var Ph=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Rs)o=t;else{let u;i.headers instanceof $n?u=i.headers:u=new $n(i.headers);let l;i.params&&(i.params instanceof Tn?l=i.params:l=new Tn({fromObject:i.params})),o=new Rs(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=H(o).pipe(Pn(u=>this.handler.handle(u)));if(t instanceof Rs||i.observe==="events")return s;let a=s.pipe(ht(u=>u instanceof Os));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new V(2806,!1);return u.body}));case"blob":return a.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new V(2807,!1);return u.body}));case"text":return a.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new V(2808,!1);return u.body}));case"json":default:return a.pipe(J(u=>u.body))}case"response":return a;default:throw new V(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Tn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Uv(i,r))}post(t,r,i={}){return this.request("POST",t,Uv(i,r))}put(t,r,i={}){return this.request("PUT",t,Uv(i,r))}static \u0275fac=function(r){return new(r||n)(B(Ns))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),d2=/^\)\]\}',?\n/;function V0(n){if(n.url)return n.url;let e=zv.toLocaleLowerCase();return n.headers.get(e)}var H0=new U(""),Sh=(()=>{class n{fetchImpl=M(Bv,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t));ngZone=M(Ne);destroyRef=M(Vn);destroyed=!1;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0})}handle(t){return new ce(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then($v,o=>r.error(new Cr({error:o}))),()=>i.abort()})}doRequest(t,r,i){return v(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,P({signal:r},o)));h2(y),i.next({type:Sr.Sent}),s=yield y}catch(y){i.error(new Cr({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new $n(s.headers),u=s.statusText,l=V0(s)??t.urlWithParams,h=s.status,p=null;if(t.reportProgress&&i.next(new jc({headers:a,status:h,statusText:u,url:l})),s.body){let y=s.headers.get("content-length"),C=[],N=s.body.getReader(),R=0,k,G,$=typeof Zone<"u"&&Zone.current,pe=!1;if(yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){if(this.destroyed){yield N.cancel(),pe=!0;break}let{done:le,value:b}=yield N.read();if(le)break;if(C.push(b),R+=b.length,t.reportProgress){G=t.responseType==="text"?(G??"")+(k??=new TextDecoder).decode(b,{stream:!0}):void 0;let _=()=>i.next({type:Sr.DownloadProgress,total:y?+y:void 0,loaded:R,partialText:G});$?$.run(_):_()}}})),pe){i.complete();return}let He=this.concatChunks(C,R);try{let le=s.headers.get(Vc)??"";p=this.parseBody(t,He,le)}catch(le){i.error(new Cr({error:le,headers:new $n(s.headers),status:s.status,statusText:s.statusText,url:V0(s)??t.urlWithParams}));return}}h===0&&(h=p?$0:0),h>=200&&h<300?(i.next(new Os({body:p,headers:a,status:h,statusText:u,url:l})),i.complete()):i.error(new Cr({error:p,headers:a,status:h,statusText:u,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(d2,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has(Nh)||(r[Nh]=B0),!t.headers.has(Vc)){let o=t.detectContentTypeHeader();o!==null&&(r[Vc]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i,keepalive:t.keepalive}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Bv=class{};function $v(){}function h2(n){n.then($v,$v)}function f2(n,e){return e(n)}function p2(n,e,t){return(r,i)=>pt(t,()=>e(r,o=>n(o,i)))}var z0=new U(""),q0=new U(""),G0=new U("",{providedIn:"root",factory:()=>!0});var Mh=(()=>{class n extends Ns{backend;injector;chain=null;pendingTasks=M(Ad);contributeToStability=M(G0);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(z0),...this.injector.get(q0,[])]));this.chain=r.reduceRight((i,o)=>p2(i,o,this.injector),f2)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Hi(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(B(Ms),B(Fe))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();var g2=/^\)\]\}',?\n/,m2=RegExp(`^${zv}:`,"m");function y2(n){return"responseURL"in n&&n.responseURL?n.responseURL:m2.test(n.getAllResponseHeaders())?n.getResponseHeader(zv):null}var Hv=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new V(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?be(r.\u0275loadImpl()):H(null)).pipe(Tt(()=>new ce(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,R)=>s.setRequestHeader(N,R.join(","))),t.headers.has(Nh)||s.setRequestHeader(Nh,B0),!t.headers.has(Vc)){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader(Vc,N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=s.statusText||"OK",R=new $n(s.getAllResponseHeaders()),k=y2(s)||t.url;return u=new jc({headers:R,status:s.status,statusText:N,url:k}),u},h=()=>{let{headers:N,status:R,statusText:k,url:G}=l(),$=null;R!==l2&&($=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=$?$0:0);let pe=R>=200&&R<300;if(t.responseType==="json"&&typeof $=="string"){let He=$;$=$.replace(g2,"");try{$=$!==""?JSON.parse($):null}catch(le){$=He,pe&&(pe=!1,$={error:le,text:$})}}pe?(o.next(new Os({body:$,headers:N,status:R,statusText:k,url:G||void 0})),o.complete()):o.error(new Cr({error:$,headers:N,status:R,statusText:k,url:G||void 0}))},p=N=>{let{url:R}=l(),k=new Cr({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(k)},m=!1,y=N=>{m||(o.next(l()),m=!0);let R={type:Sr.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},C=N=>{let R={type:Sr.UploadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:Sr.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(B(mo))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),W0=new U(""),v2="XSRF-TOKEN",_2=new U("",{providedIn:"root",factory:()=>v2}),E2="X-XSRF-TOKEN",I2=new U("",{providedIn:"root",factory:()=>E2}),Uc=class{},w2=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Oc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(B(Ae),B(_2))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function b2(n,e){let t=n.url.toLowerCase();if(!M(W0)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=M(Uc).getToken(),i=M(I2);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var qv=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(qv||{});function T2(n,e){return{\u0275kind:n,\u0275providers:e}}function D2(...n){let e=[Ph,Hv,Mh,{provide:Ns,useExisting:Mh},{provide:Ms,useFactory:()=>M(H0,{optional:!0})??M(Hv)},{provide:z0,useValue:b2,multi:!0},{provide:W0,useValue:!0},{provide:Uc,useClass:w2}];for(let t of n)e.push(...t.\u0275providers);return On(e)}function C2(){return T2(qv.Fetch,[Sh,{provide:H0,useExisting:Sh},{provide:Ms,useExisting:Sh}])}var K0=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(B(Ae))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Xc=Symbol("RouteTitle"),Yv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function _o(n){return new Yv(n)}function nA(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function R2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hn(n[t],e[t]))return!1;return!0}function Hn(n,e){let t=n?Jv(n):void 0,r=e?Jv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!rA(n[i],e[i]))return!1;return!0}function Jv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function rA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function iA(n){return n.length>0?n[n.length-1]:null}function Ar(n){return Fg(n)?n:wr(n)?be(Promise.resolve(n)):H(n)}var N2={exact:sA,subset:aA},oA={exact:M2,subset:P2,ignored:()=>!0};function Q0(n,e,t){return N2[t.paths](n.root,e.root,t.matrixParams)&&oA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function M2(n,e){return Hn(n,e)}function sA(n,e,t){if(!yo(n.segments,e.segments)||!kh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!sA(n.children[r],e.children[r],t))return!1;return!0}function P2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rA(n[t],e[t]))}function aA(n,e,t){return cA(n,e,e.segments,t)}function cA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!yo(i,t)||e.hasChildren()||!kh(i,t,r))}else if(n.segments.length===t.length){if(!yo(n.segments,t)||!kh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!aA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!yo(n.segments,i)||!kh(n.segments,i,r)||!n.children[re]?!1:cA(n.children[re],e,o,r)}}function kh(n,e,t){return e.every((r,i)=>oA[t](n[i].parameters,r.parameters))}var qn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=_o(this.queryParams),this._queryParamMap}toString(){return k2.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fh(this)}},li=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=_o(this.parameters),this._parameterMap}toString(){return lA(this)}};function O2(n,e){return yo(n,e)&&n.every((t,r)=>Hn(t.parameters,e[r].parameters))}function yo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function x2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var Eo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>new di,providedIn:"root"})}return n})(),di=class{parse(e){let t=new Xv(e);return new qn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Bc(e.root,!0)}`,r=V2(e.queryParams),i=typeof e.fragment=="string"?`#${F2(e.fragment)}`:"";return`${t}${r}${i}`}},k2=new di;function Fh(n){return n.segments.map(e=>lA(e)).join("/")}function Bc(n,e){if(!n.hasChildren())return Fh(n);if(e){let t=n.children[re]?Bc(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${Bc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=x2(n,(r,i)=>i===re?[Bc(n.children[re],!1)]:[`${i}:${Bc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Fh(n)}/${t[0]}`:`${Fh(n)}/(${t.join("//")})`}}function uA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oh(n){return uA(n).replace(/%3B/gi,";")}function F2(n){return encodeURI(n)}function Zv(n){return uA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lh(n){return decodeURIComponent(n)}function Y0(n){return Lh(n.replace(/\+/g,"%20"))}function lA(n){return`${Zv(n.path)}${L2(n.parameters)}`}function L2(n){return Object.entries(n).map(([e,t])=>`;${Zv(e)}=${Zv(t)}`).join("")}function V2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Oh(t)}=${Oh(i)}`).join("&"):`${Oh(t)}=${Oh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var j2=/^[^\/()?;#]+/;function Gv(n){let e=n.match(j2);return e?e[0]:""}var U2=/^[^\/()?;=#]+/;function B2(n){let e=n.match(U2);return e?e[0]:""}var $2=/^[^=?&#]+/;function H2(n){let e=n.match($2);return e?e[0]:""}var z2=/^[^&#]+/;function q2(n){let e=n.match(z2);return e?e[0]:""}var Xv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new ve(e,t)),r}parseSegment(){let e=Gv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new li(Lh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=B2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Gv(this.remaining);i&&(r=i,this.capture(r))}e[Lh(t)]=Lh(r)}parseQueryParam(e){let t=H2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=q2(this.remaining);s&&(r=s,this.capture(r))}let i=Y0(t),o=Y0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Gv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[re]:new ve([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function dA(n){return n.segments.length>0?new ve([],{[re]:n}):n}function hA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=hA(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ve(n.segments,e);return G2(t)}function G2(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ve(n.segments.concat(e.segments),e.children)}return n}function hi(n){return n instanceof qn}function fA(n,e,t=null,r=null){let i=pA(n);return gA(i,e,t,r)}function pA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ve(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=dA(r);return e??i}function gA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Wv(i,i,i,t,r);let o=W2(e);if(o.toRoot())return Wv(i,i,new ve([],{}),t,r);let s=K2(o,i,n),a=s.processChildren?Hc(s.segmentGroup,s.index,o.commands):yA(s.segmentGroup,s.index,o.commands);return Wv(i,s.segmentGroup,a,t,r)}function Vh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qc(n){return typeof n=="object"&&n!=null&&n.outlets}function Wv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=mA(n,e,t);let a=dA(hA(s));return new qn(a,o,i)}function mA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=mA(o,e,t)}),new ve(n.segments,r)}var jh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vh(r[0]))throw new V(4003,!1);let i=r.find(qc);if(i&&i!==iA(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function W2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new jh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new jh(t,e,r)}var Fs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function K2(n,e,t){if(n.isAbsolute)return new Fs(e,!0,0);if(!t)return new Fs(e,!1,NaN);if(t.parent===null)return new Fs(t,!0,0);let r=Vh(n.commands[0])?0:1,i=t.segments.length-1+r;return Q2(t,i,n.numberOfDoubleDots)}function Q2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new Fs(r,!1,i-o)}function Y2(n){return qc(n[0])?n[0].outlets:{[re]:n}}function yA(n,e,t){if(n??=new ve([],{}),n.segments.length===0&&n.hasChildren())return Hc(n,e,t);let r=J2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ve(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new ve(n.segments.slice(r.pathIndex),n.children),Hc(o,0,i)}else return r.match&&i.length===0?new ve(n.segments,{}):r.match&&!n.hasChildren()?e_(n,e,t):r.match?Hc(n,0,i):e_(n,e,t)}function Hc(n,e,t){if(t.length===0)return new ve(n.segments,{});{let r=Y2(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=Hc(n.children[re],e,t);return new ve(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=yA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(n.segments,i)}}function J2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(qc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Z0(u,l,s))return o;r+=2}else{if(!Z0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function e_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(qc(o)){let u=Z2(o.outlets);return new ve(r,u)}if(i===0&&Vh(t[0])){let u=n.segments[e];r.push(new li(u.path,J0(t[0]))),i++;continue}let s=qc(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Vh(a)?(r.push(new li(s,J0(a))),i+=2):(r.push(new li(s,{})),i++)}return new ve(r,{})}function Z2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=e_(new ve([],{}),0,r))}),e}function J0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Z0(n,e,t){return n==t.path&&Hn(e,t.parameters)}var Ls="imperative",Ge=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ge||{}),Qt=class{id;url;constructor(e,t){this.id=e,this.url=t}},fi=class extends Qt{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Yt=class extends Qt{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Pt||{}),js=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(js||{}),zn=class extends Qt{reason;code;type=Ge.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Gn=class extends Qt{reason;code;type=Ge.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Us=class extends Qt{error;target;type=Ge.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gc=class extends Qt{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uh=class extends Qt{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bh=class extends Qt{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$h=class extends Qt{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hh=class extends Qt{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zh=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qh=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gh=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wh=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kh=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qh=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bs=class{routerEvent;position;anchor;type=Ge.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Wc=class{},$s=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function X2(n){return!(n instanceof Wc)&&!(n instanceof $s)}function eU(n,e){return n.providers&&!n._injector&&(n._injector=Cs(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dn(n){return n.outlet||re}function tU(n,e){let t=n.filter(r=>Dn(r)===e);return t.push(...n.filter(r=>Dn(r)!==e)),t}function eu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Yh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return eu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Io(this.rootInjector)}},Io=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Yh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(B(Fe))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=t_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=t_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=n_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return n_(e,this._root).map(t=>t.value)}};function t_(n,e){if(n===e.value)return e;for(let t of e.children){let r=t_(n,t);if(r)return r}return null}function n_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=n_(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ks(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Kc=class extends Jh{snapshot;constructor(e,t){super(e),this.snapshot=t,l_(this,e)}toString(){return this.snapshot.toString()}};function vA(n){let e=nU(n),t=new Ie([new li("",{})]),r=new Ie({}),i=new Ie({}),o=new Ie({}),s=new Ie(""),a=new Wn(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new Kc(new Kt(a,[]),e)}function nU(n){let e={},t={},r={},i="",o=new vo([],e,r,i,t,re,n,null,{});return new Qc("",new Kt(o,[]))}var Wn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(l=>l[Xc]))??H(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>_o(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>_o(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&EA(i)&&(r.resolve[Xc]=i.title),r}var vo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_o(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_o(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Qc=class extends Jh{url;constructor(e,t){super(t),this.url=e,l_(this,t)}toString(){return _A(this._root)}};function l_(n,e){e.value._routerState=n,e.children.forEach(t=>l_(n,t))}function _A(n){let e=n.children.length>0?` { ${n.children.map(_A).join(", ")} } `:"";return`${n.value}${e}`}function Kv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Hn(e.params,t.params)||n.paramsSubject.next(t.params),R2(e.url,t.url)||n.urlSubject.next(t.url),Hn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function r_(n,e){let t=Hn(n.params,e.params)&&O2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||r_(n.parent,e.parent))}function EA(n){return typeof n.title=="string"||n.title===null}var IA=new U(""),d_=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Re;deactivateEvents=new Re;attachEvents=new Re;detachEvents=new Re;routerOutletData=p0(void 0);parentContexts=M(Io);location=M(Ir);changeDetector=M(Dr);inputBinder=M(tu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new i_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[sn]})}return n})(),i_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Wn?this.route:e===Io?this.childContexts:e===IA?this.outletData:this.parent.get(e,t)}},tu=new U(""),h_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Wa([r.queryParams,r.params,r.data]).pipe(Tt(([o,s,a],u)=>(a=P(P(P({},o),s),a),u===0?H(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=m0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),f_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Cc({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&si(0,"router-outlet")},dependencies:[d_],encapsulation:2})}return n})();function p_(n){let e=n.children&&n.children.map(p_),t=e?Y(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=f_),t}function rU(n,e,t){let r=Yc(n,e._root,t?t._root:void 0);return new Kc(r,e)}function Yc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=iU(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Yc(n,a)),s}}let r=oU(e.value),i=e.children.map(o=>Yc(n,o));return new Kt(r,i)}}function iU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yc(n,r,i);return Yc(n,r)})}function oU(n){return new Wn(new Ie(n.url),new Ie(n.params),new Ie(n.queryParams),new Ie(n.fragment),new Ie(n.data),n.outlet,n.component,n)}var Hs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},wA="ngNavigationCancelingError";function Xh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=hi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bA(!1,Pt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function bA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[wA]=!0,t.cancellationCode=e,t}function sU(n){return TA(n)&&hi(n.url)}function TA(n){return!!n&&n[wA]}var aU=(n,e,t,r)=>J(i=>(new o_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),o_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Kv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ks(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ks(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ks(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ks(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Qh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Wh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Kv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Kv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ef=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vs=class{component;route;constructor(e,t){this.component=e,this.route=t}};function cU(n,e,t){let r=n._root,i=e?e._root:null;return $c(r,i,t,[r.value])}function uU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function qs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cm(n)?n:e.get(n):r}function $c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ks(e);return n.children.forEach(s=>{lU(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zc(a,t.getContext(s),i)),i}function lU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=dU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ef(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?$c(n,e,a?a.children:null,r,i):$c(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Vs(a.outlet.component,s))}else s&&zc(e,a,i),i.canActivateChecks.push(new ef(r)),o.component?$c(n,null,a?a.children:null,r,i):$c(n,null,t,r,i);return i}function dU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!yo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yo(n.url,e.url)||!Hn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!r_(n,e)||!Hn(n.queryParams,e.queryParams);case"paramsChange":default:return!r_(n,e)}}function zc(n,e,t){let r=ks(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zc(s,e.children.getContext(o),t):zc(s,null,t):zc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Vs(e.outlet.component,i)):t.canDeactivateChecks.push(new Vs(null,i)):t.canDeactivateChecks.push(new Vs(null,i))}function nu(n){return typeof n=="function"}function hU(n){return typeof n=="boolean"}function fU(n){return n&&nu(n.canLoad)}function pU(n){return n&&nu(n.canActivate)}function gU(n){return n&&nu(n.canActivateChild)}function mU(n){return n&&nu(n.canDeactivate)}function yU(n){return n&&nu(n.canMatch)}function DA(n){return n instanceof ur||n?.name==="EmptyError"}var xh=Symbol("INITIAL_VALUE");function zs(){return Tt(n=>Wa(n.map(e=>e.pipe(lr(1),Ug(xh)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===xh)return xh;if(t===!1||vU(t))return t}return!0}),ht(e=>e!==xh),lr(1)))}function vU(n){return hi(n)||n instanceof Hs}function _U(n,e){return ke(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?H(Y(P({},t),{guardsResult:!0})):EU(s,r,i,n).pipe(ke(a=>a&&hU(a)?IU(r,o,n,e):H(a)),J(a=>Y(P({},t),{guardsResult:a})))})}function EU(n,e,t,r){return be(n).pipe(ke(i=>CU(i.component,i.route,t,e,r)),dr(i=>i!==!0,!0))}function IU(n,e,t,r){return be(e).pipe(Pn(i=>os(bU(i.route.parent,r),wU(i.route,r),DU(n,i.path,t),TU(n,i.route,t))),dr(i=>i!==!0,!0))}function wU(n,e){return n!==null&&e&&e(new Kh(n)),H(!0)}function bU(n,e){return n!==null&&e&&e(new Gh(n)),H(!0)}function TU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return H(!0);let i=r.map(o=>Ka(()=>{let s=eu(e)??t,a=qs(o,s),u=pU(a)?a.canActivate(e,n):pt(s,()=>a(e,n));return Ar(u).pipe(dr())}));return H(i).pipe(zs())}function DU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>uU(s)).filter(s=>s!==null).map(s=>Ka(()=>{let a=s.guards.map(u=>{let l=eu(s.node)??t,h=qs(u,l),p=gU(h)?h.canActivateChild(r,n):pt(l,()=>h(r,n));return Ar(p).pipe(dr())});return H(a).pipe(zs())}));return H(o).pipe(zs())}function CU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return H(!0);let s=o.map(a=>{let u=eu(e)??i,l=qs(a,u),h=mU(l)?l.canDeactivate(n,e,t,r):pt(u,()=>l(n,e,t,r));return Ar(h).pipe(dr())});return H(s).pipe(zs())}function SU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return H(!0);let o=i.map(s=>{let a=qs(s,n),u=fU(a)?a.canLoad(e,t):pt(n,()=>a(e,t));return Ar(u)});return H(o).pipe(zs(),CA(r))}function CA(n){return Ng(Ke(e=>{if(typeof e!="boolean")throw Xh(n,e)}),J(e=>e===!0))}function AU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return H(!0);let o=i.map(s=>{let a=qs(s,n),u=yU(a)?a.canMatch(e,t):pt(n,()=>a(e,t));return Ar(u)});return H(o).pipe(zs(),CA(r))}var Jc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Zc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function xs(n){return is(new Jc(n))}function RU(n){return is(new V(4e3,!1))}function NU(n){return is(bA(!1,Pt.GuardRejected))}var s_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return H(r);if(i.numberOfChildren>1||!i.children[re])return RU(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return MU(t,i,o).pipe(J(s=>{if(s instanceof qn)throw new Zc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Zc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new qn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function MU(n,e,t){if(typeof n=="string")return H(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Ar(pt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var a_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PU(n,e,t,r,i){let o=SA(n,e,t);return o.matched?(r=eU(e,r),AU(r,e,t,i).pipe(J(s=>s===!0?o:P({},a_)))):H(o)}function SA(n,e,t){if(e.path==="**")return OU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},a_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||nA)(t,n,e);if(!i)return P({},a_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function OU(n){return{matched:!0,parameters:n.length>0?iA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function X0(n,e,t,r){return t.length>0&&FU(n,t,r)?{segmentGroup:new ve(e,kU(r,new ve(t,n.children))),slicedSegments:[]}:t.length===0&&LU(n,t,r)?{segmentGroup:new ve(n.segments,xU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ve(n.segments,n.children),slicedSegments:t}}function xU(n,e,t,r){let i={};for(let o of t)if(nf(n,e,o)&&!r[Dn(o)]){let s=new ve([],{});i[Dn(o)]=s}return P(P({},r),i)}function kU(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&Dn(r)!==re){let i=new ve([],{});t[Dn(r)]=i}return t}function FU(n,e,t){return t.some(r=>nf(n,e,r)&&Dn(r)!==re)}function LU(n,e,t){return t.some(r=>nf(n,e,r))}function nf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function VU(n,e,t){return e.length===0&&!n.children[t]}var c_=class{};function jU(n,e,t,r,i,o,s="emptyOnly"){return new u_(n,e,t,r,i,s,o).recognize()}var UU=31,u_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new s_(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=X0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),o=new Qc("",i),s=fA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new vo([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(J(r=>({children:r,rootSnapshot:t})),bt(r=>{if(r instanceof Zc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Jc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof Kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return be(o).pipe(Pn(s=>{let a=r.children[s],u=tU(t,s);return this.processSegmentGroup(e,u,a,s,i)}),jg((s,a)=>(s.push(...a),s)),Yr(null),Vg(),ke(s=>{if(s===null)return xs(r);let a=AA(s);return BU(a),H(a)}))}processSegment(e,t,r,i,o,s,a){return be(t).pipe(Pn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(bt(l=>{if(l instanceof Jc)return H(null);throw l}))),dr(u=>!!u),bt(u=>{if(DA(u))return VU(r,i,o)?H(new c_):xs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Dn(r)!==s&&(s===re||!nf(i,o,r))?xs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):xs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=SA(t,i,o);if(!u)return xs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>UU&&(this.allowRedirects=!1));let y=new vo(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,eA(i),Dn(i),i.component??i._loadedComponent??null,i,tA(i)),C=Zh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Tt(R=>this.applyRedirects.lineralizeSegments(i,R)),ke(R=>this.processSegment(e,r,t,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=PU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Tt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Tt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new vo(m,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,eA(r),Dn(r),r.component??r._loadedComponent??null,r,tA(r)),N=Zh(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=X0(t,m,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(J($=>new Kt(C,$)));if(l.length===0&&k.length===0)return H(new Kt(C,[]));let G=Dn(r)===o;return this.processSegment(h,l,R,k,G?re:o,!0,C).pipe(J($=>new Kt(C,$ instanceof Kt?[$]:[])))}))):xs(t)))}getChildConfig(e,t,r){return t.children?H({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?H({routes:t._loadedRoutes,injector:t._loadedInjector}):SU(e,t,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,t).pipe(Ke(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):NU(t))):H({routes:[],injector:e})}};function BU(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function $U(n){let e=n.value.routeConfig;return e&&e.path===""}function AA(n){let e=[],t=new Set;for(let r of n){if(!$U(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=AA(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function eA(n){return n.data||{}}function tA(n){return n.resolve||{}}function HU(n,e,t,r,i,o){return ke(s=>jU(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:u})=>Y(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function zU(n,e){return ke(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return H(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of RA(u))s.add(l);let a=0;return be(s).pipe(Pn(u=>o.has(u)?qU(u,r,n,e):(u.data=Zh(u,u.parent,n).resolve,H(void 0))),Ke(()=>a++),ss(1),ke(u=>a===s.size?H(t):xt))})}function RA(n){let e=n.children.map(t=>RA(t)).flat();return[n,...e]}function qU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!EA(i)&&(o[Xc]=i.title),Ka(()=>(n.data=Zh(n,n.parent,t).resolve,GU(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=P(P({},n.data),s),null)))))}function GU(n,e,t,r){let i=Jv(n);if(i.length===0)return H({});let o={};return be(i).pipe(ke(s=>WU(n[s],e,t,r).pipe(dr(),Ke(a=>{if(a instanceof Hs)throw Xh(new di,a);o[s]=a}))),ss(1),J(()=>o),bt(s=>DA(s)?xt:is(s)))}function WU(n,e,t,r){let i=eu(e)??r,o=qs(n,i),s=o.resolve?o.resolve(e,t):pt(i,()=>o(e,t));return Ar(s)}function Qv(n){return Tt(e=>{let t=n(e);return t?be(t).pipe(J(()=>e)):H(e)})}var g_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Xc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(NA),providedIn:"root"})}return n})(),NA=(()=>{class n extends g_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(B(K0))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pi=new U("",{providedIn:"root",factory:()=>({})}),wo=new U(""),rf=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(mv);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return H(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ar(t.loadComponent()).pipe(J(PA),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Hi(()=>{this.componentLoaders.delete(t)})),i=new rs(r,()=>new xe).pipe(ns());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=MA(r,this.compiler,t,this.onLoadEndListener).pipe(Hi(()=>{this.childrenLoaders.delete(r)})),s=new rs(o,()=>new xe).pipe(ns());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MA(n,e,t,r){return Ar(n.loadChildren()).pipe(J(PA),ke(i=>i instanceof ah||Array.isArray(i)?H(i):be(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(wo,[],{optional:!0,self:!0}).flat()),{routes:s.map(p_),injector:o}}))}function KU(n){return n&&typeof n=="object"&&"default"in n}function PA(n){return KU(n)?n.default:n}var of=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(QU),providedIn:"root"})}return n})(),QU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),m_=new U(""),y_=new U("");function OA(n,e,t){let r=n.get(y_),i=n.get(Ae);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),YU(n))),{onViewTransitionCreated:u}=r;return u&&pt(n,()=>u({transition:a,from:e,to:t})),s}function YU(n){return new Promise(e=>{sv({read:()=>setTimeout(e)},{injector:n})})}var v_=new U(""),sf=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new xe;transitionAbortWithErrorSubject=new xe;configLoader=M(rf);environmentInjector=M(Fe);destroyRef=M(Vn);urlSerializer=M(Eo);rootContexts=M(Io);location=M(ui);inputBindingEnabled=M(tu,{optional:!0})!==null;titleStrategy=M(g_);options=M(pi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(of);createViewTransition=M(m_,{optional:!0});navigationErrorHandler=M(v_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>H(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new zh(i)),r=i=>this.events.next(new qh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Y(P({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Ie(null),this.transitions.pipe(ht(r=>r!==null),Tt(r=>{let i=!1;return H(r).pipe(Tt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Pt.SupersededByNewNavigation),xt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Y(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.rawUrl),u,js.IgnoredSameUrlNavigation)),o.resolve(!1),xt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return H(o).pipe(Tt(u=>(this.events.next(new fi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?xt:Promise.resolve(u))),HU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Y(P({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new Gc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new fi(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=vA(this.rootComponentType).snapshot;return this.currentTransition=r=Y(P({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:Y(P({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,H(r)}else{let u="";return this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),u,js.IgnoredByUrlHandlingStrategy)),o.resolve(!1),xt}}),Ke(o=>{let s=new Uh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),J(o=>(this.currentTransition=r=Y(P({},o),{guards:cU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),_U(this.environmentInjector,o=>this.events.next(o)),Ke(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Xh(this.urlSerializer,o.guardsResult);let s=new Bh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ht(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Pt.GuardRejected),!1)),Qv(o=>{if(o.guards.canActivateChecks.length!==0)return H(o).pipe(Ke(s=>{let a=new $h(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Tt(s=>{let a=!1;return H(s).pipe(zU(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Pt.NoDataFromResolver)}}))}),Ke(s=>{let a=new Hh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Qv(o=>{let s=a=>{let u=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(a.routeConfig).pipe(Ke(l=>{a.component=l}),J(()=>{})));for(let l of a.children)u.push(...s(l));return u};return Wa(s(o.targetSnapshot.root)).pipe(Yr(null),lr(1))}),Qv(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?be(a).pipe(J(()=>r)):H(r)}),J(o=>{let s=rU(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Y(P({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Ke(()=>{this.events.next(new Wc)}),aU(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),lr(1),jl(new ce(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ht(()=>!i&&!r.targetRouterState),Ke(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Pt.Aborted)}))),Ke({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),jl(this.transitionAbortWithErrorSubject.pipe(Ke(o=>{throw o}))),Hi(()=>{i||this.cancelNavigationTransition(r,"",Pt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),bt(o=>{if(this.destroyed)return r.resolve(!1),xt;if(i=!0,TA(o))this.events.next(new zn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),sU(o)?this.events.next(new $s(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Us(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=pt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Hs){let{message:u,cancellationCode:l}=Xh(this.urlSerializer,a);this.events.next(new zn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new $s(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return xt}))}))}cancelNavigationTransition(t,r,i){let o=new zn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JU(n){return n!==Ls}var xA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(ZU),providedIn:"root"})}return n})(),tf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},ZU=(()=>{class n extends tf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kA=(()=>{class n{urlSerializer=M(Eo);options=M(pi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(ui);urlHandlingStrategy=M(of);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new qn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof qn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=vA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(XU),providedIn:"root"})}return n})(),XU=(()=>{class n extends kA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof fi?this.updateStateMemento():t instanceof Gn?this.commitTransition(r):t instanceof Gc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Wc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof zn&&t.code!==Pt.SupersededByNewNavigation&&t.code!==Pt.Redirect?this.restoreHistory(r):t instanceof Us?this.restoreHistory(r,!0):t instanceof Yt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=P(P({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=P(P({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function af(n,e){n.events.pipe(ht(t=>t instanceof Yt||t instanceof zn||t instanceof Us||t instanceof Gn),J(t=>t instanceof Yt||t instanceof Gn?0:(t instanceof zn?t.code===Pt.Redirect||t.code===Pt.SupersededByNewNavigation:!1)?2:1),ht(t=>t!==2),lr(1)).subscribe(()=>{e()})}var eB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(av);stateManager=M(kA);options=M(pi,{optional:!0})||{};pendingTasks=M(vr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(sf);urlSerializer=M(Eo);location=M(ui);urlHandlingStrategy=M(of);injector=M(Fe);_events=new xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(xA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(wo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(tu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new De;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof zn&&r.code!==Pt.Redirect&&r.code!==Pt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Yt)this.navigated=!0;else if(r instanceof $s){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||JU(i.source)},s);this.scheduleNavigation(a,Ls,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}X2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ls,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.injector.get(mt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(p_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=pA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return gA(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=hi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ls,null,r)}navigate(t,r={skipLocationChange:!1}){return nB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},eB):r===!1?i=P({},tB):i=r,hi(t))return Q0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Q0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return af(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new V(4008,!1)}var cf=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=jn(null);get href(){return Mt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new xe;applicationErrorHandler=M(mt);options=M(pi,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new fh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Yt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(hi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:hi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(q(Cn),q(Wn),bc("tabindex"),q(In),q(At),q(bn))};static \u0275dir=ye({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Rt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&br("href",i.reactiveHref(),Ly)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ci],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ci],replaceUrl:[2,"replaceUrl","replaceUrl",ci],routerLink:"routerLink"},features:[sn]})}return n})(),rB=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Re;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Yt&&this.update()})}ngAfterContentInit(){H(this.links.changes,H(null)).pipe(Qr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=be(t).pipe(Qr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=iB(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(q(Cn),q(At),q(In),q(Dr),q(cf,8))};static \u0275dir=ye({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&hv(o,cf,5),r&2){let s;fv(s=pv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[sn]})}return n})();function iB(n){return!!n.paths}var ru=class{};var FA=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ht(t=>t instanceof Yt),Pn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Cs(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return be(i).pipe(Qr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=H(null);let o=i.pipe(ke(s=>s===null?H(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return be([o,s]).pipe(Qr())}else return o})}static \u0275fac=function(r){return new(r||n)(B(Cn),B(Fe),B(ru),B(rf))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LA=new U(""),oB=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ls;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Gn&&t.code===js.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bs&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>v(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Bs(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Xy()};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function sB(n,...e){return On([{provide:wo,multi:!0,useValue:n},[],{provide:Wn,useFactory:VA,deps:[Cn]},{provide:Sc,multi:!0,useFactory:jA},e.map(t=>t.\u0275providers)])}function VA(n){return n.routerState.root}function iu(n,e){return{\u0275kind:n,\u0275providers:e}}function jA(){let n=M(Lt);return e=>{let t=n.get(fo);if(e!==t.components[0])return;let r=n.get(Cn),i=n.get(UA);n.get(E_)===1&&r.initialNavigation(),n.get(HA,null,{optional:!0})?.setUpPreloading(),n.get(LA,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var UA=new U("",{factory:()=>new xe}),E_=new U("",{providedIn:"root",factory:()=>1});function BA(){let n=[{provide:E_,useValue:0},lh(()=>{let e=M(Lt);return e.get(Cv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Cn),o=e.get(UA);af(i,()=>{r(!0)}),e.get(sf).afterPreactivation=()=>(r(!0),o.closed?H(void 0):o),i.initialNavigation()}))})];return iu(2,n)}function $A(){let n=[lh(()=>{M(Cn).setUpLocationChangeListener()}),{provide:E_,useValue:2}];return iu(3,n)}var HA=new U("");function zA(n){return iu(0,[{provide:HA,useExisting:FA},{provide:ru,useExisting:n}])}function qA(){return iu(8,[h_,{provide:tu,useExisting:h_}])}function GA(n){lo("NgRouterViewTransitions");let e=[{provide:m_,useValue:OA},{provide:y_,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return iu(9,e)}var WA=[ui,{provide:Eo,useClass:di},Cn,Io,{provide:Wn,useFactory:VA,deps:[Cn]},rf,[]],aB=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[WA,[],{provide:wo,multi:!0,useValue:t},[],r?.errorHandler?{provide:v_,useValue:r.errorHandler}:[],{provide:pi,useValue:r||{}},r?.useHash?uB():lB(),cB(),r?.preloadingStrategy?zA(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?dB(r):[],r?.bindToComponentInputs?qA().\u0275providers:[],r?.enableViewTransitions?GA().\u0275providers:[],hB()]}}static forChild(t){return{ngModule:n,providers:[{provide:wo,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=cn({type:n});static \u0275inj=qt({})}return n})();function cB(){return{provide:LA,useFactory:()=>{let n=M(T0),e=M(Ne),t=M(pi),r=M(sf),i=M(Eo);return t.scrollOffset&&n.setOffset(t.scrollOffset),new oB(i,r,n,e,t)}}}function uB(){return{provide:bn,useClass:Rv}}function lB(){return{provide:bn,useClass:yh}}function dB(n){return[n.initialNavigation==="disabled"?$A().\u0275providers:[],n.initialNavigation==="enabledBlocking"?BA().\u0275providers:[]]}var __=new U("");function hB(){return[{provide:__,useFactory:jA},{provide:Sc,multi:!0,useExisting:__}]}var gi=class n{currentCurrency=new Ie({code:"USD",symbol:"$",name:"US Dollar",rate:1});currency$=this.currentCurrency.asObservable();currencies=[{code:"USD",symbol:"$",name:"US Dollar",rate:1},{code:"EUR",symbol:"\u20AC",name:"Euro",rate:.85},{code:"GBP",symbol:"\xA3",name:"British Pound",rate:.75},{code:"JPY",symbol:"\xA5",name:"Japanese Yen",rate:110},{code:"TRY",symbol:"\u20BA",name:"Turkish Lira",rate:27}];pricingConfig={basePrices:{fiction:12.99,programming:45.99,science:35.99,history:18.99,biography:22.99,business:28.99,philosophy:16.99,psychology:24.99,art:29.99,health:19.99,education:39.99,religion:15.99,general:14.99},modifiers:{bestseller:1.3,featured:1.15,newBook:1.1,pageCount:{under200:.8,between200And400:1,between400And600:1.2,over600:1.4},publishedYear:{current:1.2,recent:1.1,older:.9},authorPopularity:{famous:1.5,known:1.2,unknown:1}}};constructor(){let e=localStorage.getItem("selectedCurrency");if(e){let t=this.currencies.find(r=>r.code===e);t&&this.currentCurrency.next(t)}}calculateBookPrice(e){let t=e.category?.toLowerCase()||"general",r=this.pricingConfig.basePrices[t]||this.pricingConfig.basePrices.general;if(e.isBestseller&&(r*=this.pricingConfig.modifiers.bestseller),e.isFeatured&&(r*=this.pricingConfig.modifiers.featured),e.isNew&&(r*=this.pricingConfig.modifiers.newBook),e.pageCount&&(e.pageCount<200?r*=this.pricingConfig.modifiers.pageCount.under200:e.pageCount<=400?r*=this.pricingConfig.modifiers.pageCount.between200And400:e.pageCount<=600?r*=this.pricingConfig.modifiers.pageCount.between400And600:r*=this.pricingConfig.modifiers.pageCount.over600),e.publishedDate){let i=new Date(e.publishedDate).getFullYear(),s=new Date().getFullYear()-i;s===0?r*=this.pricingConfig.modifiers.publishedYear.current:s<=3?r*=this.pricingConfig.modifiers.publishedYear.recent:r*=this.pricingConfig.modifiers.publishedYear.older}if(e.author){let i=["Stephen King","J.K. Rowling","Dan Brown","John Grisham","Agatha Christie"],o=["Malcolm Gladwell","Yuval Noah Harari","Jordan Peterson"];i.some(s=>e.author.includes(s))?r*=this.pricingConfig.modifiers.authorPopularity.famous:o.some(s=>e.author.includes(s))&&(r*=this.pricingConfig.modifiers.authorPopularity.known)}return Math.round(r*100)/100}convertPrice(e){let t=this.currentCurrency.value,r=e*t.rate;return t.code==="JPY"?Math.round(r):Math.round(r*100)/100}formatPrice(e){let t=this.currentCurrency.value,r=this.convertPrice(e);switch(t.code){case"EUR":return`${r.toFixed(2)}${t.symbol}`;case"TRY":return`${r.toFixed(2)} ${t.symbol}`;case"JPY":return`${t.symbol}${Math.round(r).toLocaleString()}`;case"GBP":case"USD":default:return`${t.symbol}${r.toFixed(2)}`}}getCurrencies(){return this.currencies}getCurrentCurrency(){return this.currentCurrency.value}setCurrency(e){let t=this.currencies.find(r=>r.code===e);t&&(this.currentCurrency.next(t),localStorage.setItem("selectedCurrency",e))}updateExchangeRates(e){this.currencies.forEach(r=>{e[r.code]&&(r.rate=e[r.code])});let t=this.getCurrentCurrency();e[t.code]&&this.currentCurrency.next(Y(P({},t),{rate:e[t.code]}))}getPricingConfig(){return P({},this.pricingConfig)}updatePricingConfig(e){this.pricingConfig=P(P({},this.pricingConfig),e),localStorage.setItem("pricingConfig",JSON.stringify(this.pricingConfig))}resetToDefaults(){this.pricingConfig={basePrices:{fiction:12.99,programming:45.99,science:35.99,history:18.99,biography:22.99,business:28.99,philosophy:16.99,psychology:24.99,art:29.99,health:19.99,education:39.99,religion:15.99,general:14.99},modifiers:{bestseller:1.3,featured:1.15,newBook:1.1,pageCount:{under200:.8,between200And400:1,between400And600:1.2,over600:1.4},publishedYear:{current:1.2,recent:1.1,older:.9},authorPopularity:{famous:1.5,known:1.2,unknown:1}}},localStorage.removeItem("pricingConfig")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var uf=class n{constructor(e,t){this.http=e;this.pricingService=t;console.log("OpenLibraryService initialized")}baseUrl="https://openlibrary.org";searchUrl=`${this.baseUrl}/search.json`;coversUrl="https://covers.openlibrary.org";searchBooks(e,t=40,r=0,i){let o=new Tn().set("q",e).set("limit",t.toString()).set("offset",r.toString()).set("fields","key,title,author_name,author_key,first_publish_year,publisher,isbn,cover_i,cover_edition_key,edition_count,subject,language,has_fulltext,public_scan_b,ia,ebook_access,ebook_count_i,publish_date,publish_year,ratings_average,ratings_count,want_to_read_count,currently_reading_count,already_read_count");return i&&(o=o.set("sort",i)),this.http.get(this.searchUrl,{params:o}).pipe(bt(s=>(console.error("Error searching books:",s),H({start:0,num_found:0,numFound:0,numFoundExact:!0,docs:[]}))))}searchBySubject(e,t=40,r=0,i){return this.searchBooks(`subject:${e}`,t,r,i)}searchByAuthor(e,t=40,r=0){return this.searchBooks(`author:${e}`,t,r)}getRandomBooksBySubject(e,t=10){return this.searchBySubject(e,t,0,"random")}getPopularBooks(e=40){return this.searchBooks("*",e,0,"rating desc")}getNewReleases(e=40){return this.searchBooks("*",e,0,"new")}convertToBook(e){let t=e.key?.replace("/works/","")||e.key||Math.random().toString(36).substr(2,9),r=e.first_publish_year||parseInt(e.publish_date?.[0]||"2000"),i=this.extractCategory(e.subject),o=(e.ratings_count||0)>100,s=r>2020,a=e.author_name?.join(", ")||"Unknown Author",u=this.pricingService.calculateBookPrice({category:i,isBestseller:o,isFeatured:!1,isNew:s,pageCount:300,publishedDate:r.toString(),author:a});return{id:t,title:e.title||"Unknown Title",author:a,isbn:e.isbn?.[0]||"",publishedDate:r.toString(),publisher:e.publisher?.[0]||"",pageCount:300,category:i,description:"",coverImage:this.getCoverImageUrl(e.cover_i,e.cover_edition_key),price:u,originalPrice:o?u*1.2:void 0,rating:e.ratings_average||0,reviewCount:e.ratings_count||0,language:e.language?.[0]||"en",format:e.has_fulltext?"Digital":"Physical",availability:e.ebook_access==="public"?"Available":"Limited",tags:e.subject?.slice(0,5)||[],isFeatured:!1,isBestseller:o,isNew:s,createdAt:new Date,updatedAt:new Date}}extractCategory(e){if(!e||e.length===0)return"General";let t={fiction:"Fiction",fantasy:"Fiction","science fiction":"Fiction",mystery:"Mystery",romance:"Romance",biography:"Biography",history:"History",science:"Science","self-help":"Self-Help",business:"Business",psychology:"Psychology",philosophy:"Philosophy",religion:"Religion",politics:"Politics",travel:"Travel",cooking:"Cooking",art:"Arts",music:"Arts",sports:"Sports",health:"Health",medicine:"Science",technology:"Technology",computer:"Technology",education:"Education",children:"Children",juvenile:"Children","young adult":"Young Adult",poetry:"Poetry",drama:"Drama",humor:"Humor",thriller:"Mystery",crime:"Mystery",horror:"Horror"};for(let r of e){let i=r.toLowerCase();for(let[o,s]of Object.entries(t))if(i.includes(o))return s}return"General"}getCoverImageUrl(e,t,r="M"){return e?`${this.coversUrl}/b/id/${e}-${r}.jpg`:t?`${this.coversUrl}/b/olid/${t}-${r}.jpg`:"assets/images/no-book-cover.jpg"}getAuthorImageUrl(e,t="M"){return`${this.coversUrl}/a/olid/${e}-${t}.jpg`}convertSearchResponseToBooks(e){return e.docs.map(t=>this.convertToBook(t))}static \u0275fac=function(t){return new(t||n)(B(Ph),B(gi))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var KA=class n{constructor(e,t){this.openLibraryService=e;this.pricingService=t}booksSubject=new Ie([]);books$=this.booksSubject.asObservable();currentBooks=[];getReliableCoverUrl(e){return e.includes("assets/images/no-book-cover.jpg")?e:e.includes("covers.openlibrary.org")?e.replace("http://","https://"):e}getAlternativeCoverUrls(){return{"The Great Gatsby":["https://covers.openlibrary.org/b/isbn/9780743273565-M.jpg","https://covers.openlibrary.org/b/olid/OL82563W-M.jpg","assets/images/no-book-cover.jpg"],"To Kill a Mockingbird":["https://covers.openlibrary.org/b/isbn/9780061120084-M.jpg","https://covers.openlibrary.org/b/olid/OL5735363W-M.jpg","assets/images/no-book-cover.jpg"],1984:["https://covers.openlibrary.org/b/isbn/9780451524935-M.jpg","https://covers.openlibrary.org/b/olid/OL14934393M-M.jpg","assets/images/no-book-cover.jpg"]}}loadBooks(){return v(this,null,function*(){try{console.log("Starting to load books from Open Library API..."),this.loadFallbackBooks();let e=this.openLibraryService.getPopularBooks(20),t=this.openLibraryService.searchBooks("*",20,0,"random"),[r,i]=yield Promise.all([e.toPromise(),t.toPromise()]),o=[];if(r){let s=this.openLibraryService.convertSearchResponseToBooks(r);o.push(...s)}if(i){let s=this.openLibraryService.convertSearchResponseToBooks(i);o.push(...s)}if(o.length>0){let s=o.filter((a,u,l)=>u===l.findIndex(h=>h.openLibraryId===a.openLibraryId));console.log(`Total unique books loaded from API: ${s.length}`),this.currentBooks=s,this.booksSubject.next(this.currentBooks)}else console.log("No books loaded from API, keeping fallback books")}catch(e){console.error("Error loading books from Open Library:",e)}})}searchBooks(e){return this.openLibraryService.searchBooks(e,40).pipe(J(t=>t&&t.docs?this.openLibraryService.convertSearchResponseToBooks(t):[]),bt(t=>(console.error("Error searching books:",t),H([]))))}getBooksByCategory(e){return this.openLibraryService.searchBySubject(e.toLowerCase(),40).pipe(J(t=>t&&t.docs?this.openLibraryService.convertSearchResponseToBooks(t):[]),bt(t=>(console.error("Error getting books by category:",t),H([]))))}getRandomFeaturedBooks(e=6){return v(this,null,function*(){try{let t=["fiction","mystery","science","history","biography","romance"],r=t[Math.floor(Math.random()*t.length)],i=yield this.openLibraryService.getRandomBooksBySubject(r,e*2).toPromise();if(i&&i.docs){let o=this.openLibraryService.convertSearchResponseToBooks(i);return this.shuffleArray(o).slice(0,e).map(s=>Y(P({},s),{isFeatured:!0}))}}catch(t){console.error("Error getting random featured books:",t)}return this.getFallbackBooks().slice(0,e)})}getBookById(e){let t=this.currentBooks.find(r=>r.id===e);return H(t||null)}getAllBooks(){return this.books$}addBook(e){return console.log("Add book functionality - would integrate with backend"),H(e)}updateBook(e){return console.log("Update book functionality - would integrate with backend"),H(e)}deleteBook(e){return console.log("Delete book functionality - would integrate with backend"),H(!0)}importBookFromOpenLibrary(e){let t=this.openLibraryService.convertToBook(e);return console.log("Importing book from Open Library:",t),H(t)}calculateAutomatedPrice(e){return this.pricingService.calculateBookPrice({category:e.category,isBestseller:e.isBestseller,isFeatured:e.isFeatured,isNew:e.isNew,pageCount:e.pageCount,publishedDate:e.publishedDate,author:e.author})}formatPrice(e){return this.pricingService.formatPrice(e)}shuffleArray(e){let t=[...e];for(let r=t.length-1;r>0;r--){let i=Math.floor(Math.random()*(r+1));[t[r],t[i]]=[t[i],t[r]]}return t}loadFallbackBooks(){let e=this.getFallbackBooks();this.currentBooks=e,this.booksSubject.next(this.currentBooks),console.log(`Loaded ${e.length} fallback books`)}getFallbackBooks(){return[{id:"fallback-1",openLibraryId:"OL82563W",title:"The Great Gatsby",author:"F. Scott Fitzgerald",description:"A classic American novel set in the Jazz Age.",category:"Fiction",price:12.99,originalPrice:15.99,coverImage:"https://covers.openlibrary.org/b/id/8225261-M.jpg",rating:4.2,reviewCount:1500,stock:25,isActive:!0,isFeatured:!0,isBestseller:!0,isNew:!1,publishedDate:"1925-04-10",pageCount:180,createdAt:new Date,updatedAt:new Date,tags:["classic","american-literature","jazz-age"]},{id:"fallback-2",openLibraryId:"OL5735363W",title:"To Kill a Mockingbird",author:"Harper Lee",description:"A gripping tale of racial injustice and childhood innocence.",category:"Fiction",price:14.99,originalPrice:18.99,coverImage:"https://covers.openlibrary.org/b/id/8227691-M.jpg",rating:4.5,reviewCount:2100,stock:18,isActive:!0,isFeatured:!1,isBestseller:!0,isNew:!1,publishedDate:"1960-07-11",pageCount:376,createdAt:new Date,updatedAt:new Date,tags:["classic","social-justice","coming-of-age"]},{id:"fallback-3",openLibraryId:"OL14934393M",title:"1984",author:"George Orwell",description:"A dystopian social science fiction novel and cautionary tale.",category:"Fiction",price:13.99,originalPrice:16.99,coverImage:"https://covers.openlibrary.org/b/id/7222246-M.jpg",rating:4.3,reviewCount:2800,stock:30,isActive:!0,isFeatured:!0,isBestseller:!1,isNew:!1,publishedDate:"1949-06-08",pageCount:328,createdAt:new Date,updatedAt:new Date,tags:["dystopian","political","classic"]},{id:"fallback-4",openLibraryId:"OL8509161M",title:"Clean Code",author:"Robert C. Martin",description:"A handbook of agile software craftsmanship.",category:"Programming",price:39.99,originalPrice:49.99,coverImage:"https://covers.openlibrary.org/b/id/8509161-M.jpg",rating:4.6,reviewCount:890,stock:15,isActive:!0,isFeatured:!0,isBestseller:!1,isNew:!1,publishedDate:"2008-08-01",pageCount:464,createdAt:new Date,updatedAt:new Date,tags:["programming","software-engineering","best-practices"]},{id:"fallback-5",openLibraryId:"OL8494321M",title:"Sapiens",author:"Yuval Noah Harari",description:"A brief history of humankind.",category:"History",price:18.99,originalPrice:24.99,coverImage:"https://covers.openlibrary.org/b/id/8494321-M.jpg",rating:4.4,reviewCount:1200,stock:22,isActive:!0,isFeatured:!1,isBestseller:!0,isNew:!1,publishedDate:"2014-09-04",pageCount:512,createdAt:new Date,updatedAt:new Date,tags:["history","anthropology","evolution"]},{id:"fallback-6",openLibraryId:"OL8225261M",title:"JavaScript: The Good Parts",author:"Douglas Crockford",description:"Essential JavaScript techniques and best practices.",category:"Programming",price:29.99,originalPrice:35.99,coverImage:"https://covers.openlibrary.org/b/id/8225261-M.jpg",rating:4.1,reviewCount:650,stock:12,isActive:!0,isFeatured:!1,isBestseller:!1,isNew:!0,publishedDate:"2023-01-15",pageCount:176,createdAt:new Date,updatedAt:new Date,tags:["programming","javascript","web-development"]}].map(t=>Y(P({},t),{price:this.calculateAutomatedPrice(t),originalPrice:void 0}))}getBestsellerBooks(e=5){return v(this,null,function*(){try{let t=yield this.openLibraryService.searchBooks("*",e*2,0,"rating desc").toPromise();if(t&&t.docs)return this.openLibraryService.convertSearchResponseToBooks(t).slice(0,e).map(i=>Y(P({},i),{isBestseller:!0}))}catch(t){console.error("Error getting bestseller books:",t)}return this.getFallbackBooks().filter(t=>t.isBestseller).slice(0,e)})}getNewArrivalBooks(e=4){return v(this,null,function*(){try{let t=yield this.openLibraryService.getNewReleases(e*2).toPromise();if(t&&t.docs)return this.openLibraryService.convertSearchResponseToBooks(t).slice(0,e).map(i=>Y(P({},i),{isNew:!0}))}catch(t){console.error("Error getting new arrival books:",t)}return this.getFallbackBooks().slice(0,e)})}static \u0275fac=function(t){return new(t||n)(B(uf),B(gi))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var QA=()=>{};var ZA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},XA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new b_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},b_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gB=function(n){let e=ZA(n);return XA.encodeByteArray(e,!0)},su=function(n){return gB(n).replace(/\./g,"")},df=function(n){try{return XA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function eR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mB=()=>eR().__FIREBASE_DEFAULTS__,yB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&df(n[1]);return e&&JSON.parse(e)},hf=()=>{try{return QA()||mB()||yB()||vB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},D_=n=>{var e,t;return(t=(e=hf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tR=n=>{let e=D_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},C_=()=>{var n;return(n=hf())===null||n===void 0?void 0:n.config},S_=n=>{var e;return(e=hf())===null||e===void 0?void 0:e[`_${n}`]};var lf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function mi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function ff(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function nR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[su(JSON.stringify(t)),su(JSON.stringify(s)),""].join(".")}var ou={};function _B(){let n={prod:[],emulator:[]};for(let e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function EB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var YA=!1;function pf(n,e){if(typeof window>"u"||typeof document>"u"||!mi(window.location.host)||ou[n]===e||ou[n]||YA)return;ou[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=_B().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{YA=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=EB(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),k=t("preprendIcon"),G=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let $=m.element;a($),h(R,N);let pe=l();u(G,k),$.append(G,C,R,pe),document.body.appendChild($)}o?(C.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function IB(){var n;let e=(n=hf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gf(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sR(){let n=Ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function aR(){return!IB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function au(){try{return typeof indexedDB=="object"}catch{return!1}}function mf(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function cR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var wB="FirebaseError",st=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jt.prototype.create)}},Jt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?bB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new st(i,a,r)}};function bB(n,e){return n.replace(TB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var TB=/\{\$([^}]+)}/g;function uR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function dn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(JA(o)&&JA(s)){if(!dn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function JA(n){return n!==null&&typeof n=="object"}function cu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gs(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ws(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function lR(n,e){let t=new T_(n,e);return t.subscribe.bind(t)}var T_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=w_),i.error===void 0&&(i.error=w_),i.complete===void 0&&(i.complete=w_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function DB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function w_(){}var CB=1e3,SB=2,AB=4*60*60*1e3,RB=.5;function A_(n,e=CB,t=SB){let r=e*Math.pow(t,n),i=Math.round(RB*r*(Math.random()-.5)*2);return Math.min(AB,r+i)}function Xe(n){return n&&n._delegate?n._delegate:n}var et=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var bo="[DEFAULT]";var R_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new lf;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MB(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function NB(n){return n===bo?void 0:n}function MB(n){return n.instantiationMode==="EAGER"}var yf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new R_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var PB=[],de=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(de||{}),OB={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},xB=de.INFO,kB={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},FB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=kB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Kn=class{constructor(e){this.name=e,this._logLevel=xB,this._logHandler=FB,this._userLogHandler=null,PB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var LB=(n,e)=>e.some(t=>n instanceof t),dR,hR;function VB(){return dR||(dR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jB(){return hR||(hR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var fR=new WeakMap,M_=new WeakMap,pR=new WeakMap,N_=new WeakMap,O_=new WeakMap;function UB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Qn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&fR.set(t,n)}).catch(()=>{}),O_.set(e,n),e}function BB(n){if(M_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});M_.set(n,e)}var P_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return M_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gR(n){P_=n(P_)}function $B(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(vf(this),e,...t);return pR.set(r,e.sort?e.sort():[e]),Qn(r)}:jB().includes(n)?function(...e){return n.apply(vf(this),e),Qn(fR.get(this))}:function(...e){return Qn(n.apply(vf(this),e))}}function HB(n){return typeof n=="function"?$B(n):(n instanceof IDBTransaction&&BB(n),LB(n,VB())?new Proxy(n,P_):n)}function Qn(n){if(n instanceof IDBRequest)return UB(n);if(N_.has(n))return N_.get(n);let e=HB(n);return e!==n&&(N_.set(n,e),O_.set(e,n)),e}var vf=n=>O_.get(n);function _f(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Qn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Qn(s.result),u.oldVersion,u.newVersion,Qn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var zB=["get","getKey","getAll","getAllKeys","count"],qB=["put","add","delete","clear"],x_=new Map;function mR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(x_.get(e))return x_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=qB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zB.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return x_.set(e,o),o}gR(n=>Y(P({},n),{get:(e,t,r)=>mR(e,t)||n.get(e,t,r),has:(e,t)=>!!mR(e,t)||n.has(e,t)}));var F_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function GB(n){let e=n.getComponent();return e?.type==="VERSION"}var L_="@firebase/app",yR="0.13.2";var Rr=new Kn("@firebase/app"),WB="@firebase/app-compat",KB="@firebase/analytics-compat",QB="@firebase/analytics",YB="@firebase/app-check-compat",JB="@firebase/app-check",ZB="@firebase/auth",XB="@firebase/auth-compat",e$="@firebase/database",t$="@firebase/data-connect",n$="@firebase/database-compat",r$="@firebase/functions",i$="@firebase/functions-compat",o$="@firebase/installations",s$="@firebase/installations-compat",a$="@firebase/messaging",c$="@firebase/messaging-compat",u$="@firebase/performance",l$="@firebase/performance-compat",d$="@firebase/remote-config",h$="@firebase/remote-config-compat",f$="@firebase/storage",p$="@firebase/storage-compat",g$="@firebase/firestore",m$="@firebase/ai",y$="@firebase/firestore-compat",v$="firebase",_$="11.10.0";var V_="[DEFAULT]",E$={[L_]:"fire-core",[WB]:"fire-core-compat",[QB]:"fire-analytics",[KB]:"fire-analytics-compat",[JB]:"fire-app-check",[YB]:"fire-app-check-compat",[ZB]:"fire-auth",[XB]:"fire-auth-compat",[e$]:"fire-rtdb",[t$]:"fire-data-connect",[n$]:"fire-rtdb-compat",[r$]:"fire-fn",[i$]:"fire-fn-compat",[o$]:"fire-iid",[s$]:"fire-iid-compat",[a$]:"fire-fcm",[c$]:"fire-fcm-compat",[u$]:"fire-perf",[l$]:"fire-perf-compat",[d$]:"fire-rc",[h$]:"fire-rc-compat",[f$]:"fire-gcs",[p$]:"fire-gcs-compat",[g$]:"fire-fst",[y$]:"fire-fst-compat",[m$]:"fire-vertex","fire-js":"fire-js",[v$]:"fire-js-all"};var Ef=new Map,I$=new Map,j_=new Map;function vR(n,e){try{n.container.addComponent(e)}catch(t){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bt(n){let e=n.name;if(j_.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;j_.set(e,n);for(let t of Ef.values())vR(t,n);for(let t of I$.values())vR(t,n);return!0}function Sn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $t(n){return n==null?!1:n.settings!==void 0}var w$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new Jt("app","Firebase",w$);var U_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}};var vi=_$;function H_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:V_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw yi.create("bad-app-name",{appName:String(i)});if(t||(t=C_()),!t)throw yi.create("no-options");let o=Ef.get(i);if(o){if(dn(t,o.options)&&dn(r,o.config))return o;throw yi.create("duplicate-app",{appName:i})}let s=new yf(i);for(let u of j_.values())s.addComponent(u);let a=new U_(t,r,s);return Ef.set(i,a),a}function To(n=V_){let e=Ef.get(n);if(!e&&n===V_&&C_())return H_();if(!e)throw yi.create("no-app",{appName:n});return e}function at(n,e,t){var r;let i=(r=E$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(a.join(" "));return}Bt(new et(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var b$="firebase-heartbeat-database",T$=1,uu="firebase-heartbeat-store",k_=null;function wR(){return k_||(k_=_f(b$,T$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uu)}catch(t){console.warn(t)}}}}).catch(n=>{throw yi.create("idb-open",{originalErrorMessage:n.message})})),k_}function D$(n){return v(this,null,function*(){try{let t=(yield wR()).transaction(uu),r=yield t.objectStore(uu).get(bR(n));return yield t.done,r}catch(e){if(e instanceof st)Rr.warn(e.message);else{let t=yi.create("idb-get",{originalErrorMessage:e?.message});Rr.warn(t.message)}}})}function _R(n,e){return v(this,null,function*(){try{let r=(yield wR()).transaction(uu,"readwrite");yield r.objectStore(uu).put(e,bR(n)),yield r.done}catch(t){if(t instanceof st)Rr.warn(t.message);else{let r=yi.create("idb-set",{originalErrorMessage:t?.message});Rr.warn(r.message)}}})}function bR(n){return`${n.name}!${n.options.appId}`}var C$=1024,S$=30,B_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new $_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ER();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>S$){let s=R$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=ER(),{heartbeatsToSend:r,unsentEntries:i}=A$(this._heartbeatsCache.heartbeats),o=su(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Rr.warn(t),""}})}};function ER(){return new Date().toISOString().substring(0,10)}function A$(n,e=C$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),IR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),IR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var $_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return au()?mf().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield D$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return _R(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return _R(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function IR(n){return su(JSON.stringify({version:2,heartbeats:n})).length}function R$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function N$(n){Bt(new et("platform-logger",e=>new F_(e),"PRIVATE")),Bt(new et("heartbeat",e=>new B_(e),"PRIVATE")),at(L_,yR,n),at(L_,yR,"esm2017"),at("fire-js","")}N$("");var TR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DR={};var Nr,z_;(function(){var n;function e(b,_){function I(){}I.prototype=_.prototype,b.D=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(w,T,S){for(var E=Array(arguments.length-2),sr=2;sr<arguments.length;sr++)E[sr-2]=arguments[sr];return _.prototype[T].apply(w,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);var w=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)w[T]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(T=0;16>T;++T)w[T]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],T=b.g[2];var S=b.g[3],E=_+(S^I&(T^S))+w[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=S+(T^_&(I^T))+w[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(I^S&(_^I))+w[2]+606105819&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(_^T&(S^_))+w[3]+3250441966&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(S^I&(T^S))+w[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(T^_&(I^T))+w[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(I^S&(_^I))+w[6]+2821735955&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(_^T&(S^_))+w[7]+4249261313&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(S^I&(T^S))+w[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(T^_&(I^T))+w[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(I^S&(_^I))+w[10]+4294925233&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(_^T&(S^_))+w[11]+2304563134&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(S^I&(T^S))+w[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(T^_&(I^T))+w[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(I^S&(_^I))+w[14]+2792965006&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(_^T&(S^_))+w[15]+1236535329&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(T^S&(I^T))+w[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(_^I))+w[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(S^_))+w[11]+643717713&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(T^S))+w[0]+3921069994&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(I^T))+w[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(_^I))+w[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(S^_))+w[15]+3634488961&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(T^S))+w[4]+3889429448&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(I^T))+w[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(_^I))+w[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(S^_))+w[3]+4107603335&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(T^S))+w[8]+1163531501&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(I^T))+w[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(_^I))+w[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(S^_))+w[7]+1735328473&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(T^S))+w[12]+2368359562&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(I^T^S)+w[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^T)+w[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^I)+w[11]+1839030562&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^_)+w[14]+4259657740&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^S)+w[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^T)+w[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^I)+w[7]+4139469664&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^_)+w[10]+3200236656&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^S)+w[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^T)+w[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^I)+w[3]+3572445317&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^_)+w[6]+76029189&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^S)+w[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^T)+w[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^I)+w[15]+530742520&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^_)+w[2]+3299628645&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(T^(I|~S))+w[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~T))+w[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~I))+w[14]+2878612391&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~_))+w[5]+4237533241&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~S))+w[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~T))+w[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~I))+w[10]+4293915773&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~_))+w[1]+2240044497&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~S))+w[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~T))+w[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~I))+w[6]+2734768916&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~_))+w[13]+1309151649&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~S))+w[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~T))+w[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~I))+w[2]+718787259&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~_))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var I=_-this.blockSize,w=this.B,T=this.h,S=0;S<_;){if(T==0)for(;S<=I;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<_;)if(w[T++]=b.charCodeAt(S++),T==this.blockSize){i(this,w),T=0;break}}else for(;S<_;)if(w[T++]=b[S++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var I=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=I&255,I/=256;for(this.u(b),b=Array(16),_=I=0;4>_;++_)for(var w=0;32>w;w+=8)b[I++]=this.g[_]>>>w&255;return b};function o(b,_){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function s(b,_){this.h=_;for(var I=[],w=!0,T=b.length-1;0<=T;T--){var S=b[T]|0;w&&S==_||(I[T]=S,w=!1)}this.g=I}var a={};function u(b){return-128<=b&&128>b?o(b,function(_){return new s([_|0],0>_?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return R(l(-b));for(var _=[],I=1,w=0;b>=I;w++)_[w]=b/I|0,I*=4294967296;return new s(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return R(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),w=p,T=0;T<b.length;T+=8){var S=Math.min(8,b.length-T),E=parseInt(b.substring(T,T+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-R(this).m();for(var b=0,_=1,I=0;I<this.g.length;I++){var w=this.i(I);b+=(0<=w?w:4294967296+w)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(N(this))return"-"+R(this).toString(b);for(var _=l(Math.pow(b,6)),I=this,w="";;){var T=pe(I,_).g;I=k(I,T.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=T,C(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function N(b){return b.h==-1}n.l=function(b){return b=k(this,b),N(b)?-1:C(b)?0:1};function R(b){for(var _=b.g.length,I=[],w=0;w<_;w++)I[w]=~b.g[w];return new s(I,~b.h).add(m)}n.abs=function(){return N(this)?R(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],w=0,T=0;T<=_;T++){var S=w+(this.i(T)&65535)+(b.i(T)&65535),E=(S>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);w=E>>>16,S&=65535,E&=65535,I[T]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(b,_){return b.add(R(_))}n.j=function(b){if(C(this)||C(b))return p;if(N(this))return N(b)?R(this).j(R(b)):R(R(this).j(b));if(N(b))return R(this.j(R(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var _=this.g.length+b.g.length,I=[],w=0;w<2*_;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<b.g.length;T++){var S=this.i(w)>>>16,E=this.i(w)&65535,sr=b.i(T)>>>16,Ca=b.i(T)&65535;I[2*w+2*T]+=E*Ca,G(I,2*w+2*T),I[2*w+2*T+1]+=S*Ca,G(I,2*w+2*T+1),I[2*w+2*T+1]+=E*sr,G(I,2*w+2*T+1),I[2*w+2*T+2]+=S*sr,G(I,2*w+2*T+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new s(I,0)};function G(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function $(b,_){this.g=b,this.h=_}function pe(b,_){if(C(_))throw Error("division by zero");if(C(b))return new $(p,p);if(N(b))return _=pe(R(b),_),new $(R(_.g),R(_.h));if(N(_))return _=pe(b,R(_)),new $(R(_.g),_.h);if(30<b.g.length){if(N(b)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=_;0>=w.l(b);)I=He(I),w=He(w);var T=le(I,1),S=le(w,1);for(w=le(w,2),I=le(I,2);!C(w);){var E=S.add(w);0>=E.l(b)&&(T=T.add(I),S=E),w=le(w,1),I=le(I,1)}return _=k(b,T.j(_)),new $(T,_)}for(T=p;0<=b.l(_);){for(I=Math.max(1,Math.floor(b.m()/_.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(_);N(E)||0<E.l(b);)I-=w,S=l(I),E=S.j(_);C(S)&&(S=m),T=T.add(S),b=k(b,E)}return new $(T,b)}n.A=function(b){return pe(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)&b.i(w);return new s(I,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)|b.i(w);return new s(I,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)^b.i(w);return new s(I,this.h^b.h)};function He(b){for(var _=b.g.length+1,I=[],w=0;w<_;w++)I[w]=b.i(w)<<1|b.i(w-1)>>>31;return new s(I,b.h)}function le(b,_){var I=_>>5;_%=32;for(var w=b.g.length-I,T=[],S=0;S<w;S++)T[S]=0<_?b.i(S+I)>>>_|b.i(S+I+1)<<32-_:b.i(S+I);return new s(T,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,z_=DR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Nr=DR.Integer=s}).apply(typeof TR<"u"?TR:typeof self<"u"?self:typeof window<"u"?window:{});var If=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mr={};var q_,M$,Ks,G_,lu,wf,W_,K_,Q_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof If=="object"&&If];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,A){for(var F=Array(arguments.length-2),we=2;we<arguments.length;we++)F[we-2]=arguments[we];return d.prototype[D].apply(g,F)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,A=g.length||0;c.length=D+A;for(let F=0;F<A;F++)c[D+F]=g[F]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function pe(c){return pe[" "](c),c}pe[" "]=function(){};var He=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function le(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=eg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class sr{constructor(){this.h=this.g=null}add(d,f){let g=Ca.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ca=new k(()=>new ox,c=>c.reset());class ox{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Sa,Aa=!1,eg=new sr,ub=()=>{let c=a.Promise.resolve(void 0);Sa=()=>{c.then(sx)}};var sx=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ca;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Aa=!1};function Hr(){this.s=this.s,this.C=this.C}Hr.prototype.s=!1,Hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var ax=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ra(c,d){if(ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(He){e:{try{pe(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:cx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ra.aa.h.call(this)}}C(Ra,ct);var cx={2:"touch",3:"pen",4:"mouse"};Ra.prototype.h=function(){Ra.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Na="closure_listenable_"+(1e6*Math.random()|0),ux=0;function lx(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++ux,this.da=this.fa=!1}function Ju(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Zu(c){this.src=c,this.g={},this.h=0}Zu.prototype.add=function(c,d,f,g,D){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var F=ng(c,d,g,D);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new lx(d,this.src,A,!!g,D),d.fa=f,c.push(d)),d};function tg(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(Ju(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function ng(c,d,f,g){for(var D=0;D<c.length;++D){var A=c[D];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return D}return-1}var rg="closure_lm_"+(1e6*Math.random()|0),ig={};function lb(c,d,f,g,D){if(g&&g.once)return hb(c,d,f,g,D);if(Array.isArray(d)){for(var A=0;A<d.length;A++)lb(c,d[A],f,g,D);return null}return f=cg(f),c&&c[Na]?c.K(d,f,l(g)?!!g.capture:!!g,D):db(c,d,f,!1,g,D)}function db(c,d,f,g,D,A){if(!d)throw Error("Invalid event type");var F=l(D)?!!D.capture:!!D,we=sg(c);if(we||(c[rg]=we=new Zu(c)),f=we.add(d,f,g,F,A),f.proxy)return f;if(g=dx(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)ax||(D=F),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(pb(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function dx(){function c(f){return d.call(c.src,c.listener,f)}let d=hx;return c}function hb(c,d,f,g,D){if(Array.isArray(d)){for(var A=0;A<d.length;A++)hb(c,d[A],f,g,D);return null}return f=cg(f),c&&c[Na]?c.L(d,f,l(g)?!!g.capture:!!g,D):db(c,d,f,!0,g,D)}function fb(c,d,f,g,D){if(Array.isArray(d))for(var A=0;A<d.length;A++)fb(c,d[A],f,g,D);else g=l(g)?!!g.capture:!!g,f=cg(f),c&&c[Na]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=ng(A,f,g,D),-1<f&&(Ju(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=sg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ng(d,f,g,D)),(f=-1<c?d[c]:null)&&og(f))}function og(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Na])tg(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(pb(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=sg(d))?(tg(f,c),f.h==0&&(f.src=null,d[rg]=null)):Ju(c)}}}function pb(c){return c in ig?ig[c]:ig[c]="on"+c}function hx(c,d){if(c.da)c=!0;else{d=new Ra(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&og(c),c=f.call(g,d)}return c}function sg(c){return c=c[rg],c instanceof Zu?c:null}var ag="__closure_events_fn_"+(1e9*Math.random()>>>0);function cg(c){return typeof c=="function"?c:(c[ag]||(c[ag]=function(d){return c.handleEvent(d)}),c[ag])}function ut(){Hr.call(this),this.i=new Zu(this),this.M=this,this.F=null}C(ut,Hr),ut.prototype[Na]=!0,ut.prototype.removeEventListener=function(c,d,f,g){fb(this,c,d,f,g)};function Et(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ct(d,c);else if(d instanceof ct)d.target=d.target||c;else{var D=d;d=new ct(g,c),w(d,D)}if(D=!0,f)for(var A=f.length-1;0<=A;A--){var F=d.g=f[A];D=Xu(F,g,!0,d)&&D}if(F=d.g=c,D=Xu(F,g,!0,d)&&D,D=Xu(F,g,!1,d)&&D,f)for(A=0;A<f.length;A++)F=d.g=f[A],D=Xu(F,g,!1,d)&&D}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Ju(f[g]);delete c.g[d],c.h--}}this.F=null},ut.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ut.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Xu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==f){var we=F.listener,rt=F.ha||F.src;F.fa&&tg(c.i,F),D=we.call(rt,g)!==!1&&D}}return D&&!g.defaultPrevented}function gb(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function mb(c){c.g=gb(()=>{c.g=null,c.i&&(c.i=!1,mb(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class fx extends Hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:mb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(c){Hr.call(this),this.h=c,this.g={}}C(Ma,Hr);var yb=[];function vb(c){le(c.g,function(d,f){this.g.hasOwnProperty(f)&&og(d)},c),c.g={}}Ma.prototype.N=function(){Ma.aa.N.call(this),vb(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ug=a.JSON.stringify,px=a.JSON.parse,gx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function lg(){}lg.prototype.h=null;function _b(c){return c.h||(c.h=c.i())}function Eb(){}var Pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dg(){ct.call(this,"d")}C(dg,ct);function hg(){ct.call(this,"c")}C(hg,ct);var ki={},Ib=null;function el(){return Ib=Ib||new ut}ki.La="serverreachability";function wb(c){ct.call(this,ki.La,c)}C(wb,ct);function Oa(c){let d=el();Et(d,new wb(d))}ki.STAT_EVENT="statevent";function bb(c,d){ct.call(this,ki.STAT_EVENT,c),this.stat=d}C(bb,ct);function It(c){let d=el();Et(d,new bb(d,c))}ki.Ma="timingevent";function Tb(c,d){ct.call(this,ki.Ma,c),this.size=d}C(Tb,ct);function xa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ka(){this.g=!0}ka.prototype.xa=function(){this.g=!1};function mx(c,d,f,g,D,A){c.info(function(){if(c.g)if(A)for(var F="",we=A.split("&"),rt=0;rt<we.length;rt++){var me=we[rt].split("=");if(1<me.length){var lt=me[0];me=me[1];var dt=lt.split("_");F=2<=dt.length&&dt[1]=="type"?F+(lt+"="+me+"&"):F+(lt+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+F})}function yx(c,d,f,g,D,A,F){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+A+" "+F})}function Go(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+_x(c,f)+(g?" "+g:"")})}function vx(c,d){c.info(function(){return"TIMEOUT: "+d})}ka.prototype.info=function(){};function _x(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<D.length;F++)D[F]=""}}}}return ug(f)}catch{return d}}var tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Db={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fg;function nl(){}C(nl,lg),nl.prototype.g=function(){return new XMLHttpRequest},nl.prototype.i=function(){return{}},fg=new nl;function zr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cb}function Cb(){this.i=null,this.g="",this.h=!1}var Sb={},pg={};function gg(c,d,f){c.L=1,c.v=sl(ar(d)),c.m=f,c.P=!0,Ab(c,null)}function Ab(c,d){c.F=Date.now(),rl(c),c.A=ar(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),$b(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Cb,c.g=sT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new fx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(yb[0]=D.toString()),D=yb);for(var A=0;A<D.length;A++){var F=lb(f,D[A],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Oa(),mx(c.i,c.u,c.A,c.l,c.R,c.m)}zr.prototype.ca=function(c){c=c.target;let d=this.M;d&&cr(c)==3?d.j():this.Y(c)},zr.prototype.Y=function(c){try{if(c==this.g)e:{let dt=cr(this.g);var d=this.g.Ba();let Qo=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Qb(this.g)))){this.J||dt!=4||d==7||(d==8||0>=Qo?Oa(3):Oa(2)),mg(this);var f=this.g.Z();this.X=f;t:if(Rb(this)){var g=Qb(this.g);c="";var D=g.length,A=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),Fa(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,yx(this.i,this.u,this.A,this.l,this.R,dt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,rt=this.g;if((we=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(we)){var me=we;break t}}me=null}if(f=me)Go(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yg(this,f);else{this.o=!1,this.s=3,It(12),Fi(this),Fa(this);break e}}if(this.P){f=!0;let fn;for(;!this.J&&this.C<F.length;)if(fn=Ex(this,F),fn==pg){dt==4&&(this.s=4,It(14),f=!1),Go(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==Sb){this.s=4,It(15),Go(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Go(this.i,this.l,fn,null),yg(this,fn);if(Rb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||F.length!=0||this.h.h||(this.s=1,It(16),f=!1),this.o=this.o&&f,!f)Go(this.i,this.l,F,"[Invalid Chunked Response]"),Fi(this),Fa(this);else if(0<F.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),bg(lt),lt.M=!0,It(11))}}else Go(this.i,this.l,F,null),yg(this,F);dt==4&&Fi(this),this.o&&!this.J&&(dt==4?nT(this.j,this):(this.o=!1,rl(this)))}else Lx(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Fi(this),Fa(this)}}}catch{}finally{}};function Rb(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ex(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?pg:(f=Number(d.substring(f,g)),isNaN(f)?Sb:(g+=1,g+f>d.length?pg:(d=d.slice(g,g+f),c.C=g+f,d)))}zr.prototype.cancel=function(){this.J=!0,Fi(this)};function rl(c){c.S=Date.now()+c.I,Nb(c,c.I)}function Nb(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=xa(m(c.ba,c),d)}function mg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}zr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(vx(this.i,this.A),this.L!=2&&(Oa(),It(17)),Fi(this),this.s=2,Fa(this)):Nb(this,this.S-c)};function Fa(c){c.j.G==0||c.J||nT(c.j,c)}function Fi(c){mg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,vb(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function yg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||vg(f.h,c))){if(!c.K&&vg(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)dl(f),ul(f);else break e;wg(f),It(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=xa(m(f.Za,f),6e3));if(1>=Ob(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Vi(f,11)}else if((c.K||f.g==c)&&dl(f),!G(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let me=D[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let lt=me[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));let dt=me[4];dt!=null&&(f.Aa=dt,f.j.info("SVER="+f.Aa));let Qo=me[5];Qo!=null&&typeof Qo=="number"&&0<Qo&&(g=1.5*Qo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let fn=c.g;if(fn){let fl=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fl){var A=g.h;A.g||fl.indexOf("spdy")==-1&&fl.indexOf("quic")==-1&&fl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(_g(A,A.h),A.h=null))}if(g.D){let Tg=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Tg&&(g.ya=Tg,Te(g.I,g.D,Tg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=c;if(g.qa=oT(g,g.J?g.ia:null,g.W),F.K){xb(g.h,F);var we=F,rt=g.L;rt&&(we.I=rt),we.B&&(mg(we),rl(we)),g.g=F}else eT(g);0<f.i.length&&ll(f)}else me[0]!="stop"&&me[0]!="close"||Vi(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Vi(f,7):Ig(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Oa(4)}catch{}}var Ix=class{constructor(c,d){this.g=c,this.map=d}};function Mb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pb(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ob(c){return c.h?1:c.g?c.g.size:0}function vg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function _g(c,d){c.g?c.g.add(d):c.h=d}function xb(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Mb.prototype.cancel=function(){if(this.i=kb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function kb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function wx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function bx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Fb(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=bx(c),g=wx(c),D=g.length,A=0;A<D;A++)d.call(void 0,g[A],f&&f[A],c)}var Lb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var A=c[f].substring(0,g);D=c[f].substring(g+1)}else A=c[f];d(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Li){this.h=c.h,il(this,c.j),this.o=c.o,this.g=c.g,ol(this,c.s),this.l=c.l;var d=c.i,f=new ja;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Vb(this,f),this.m=c.m}else c&&(d=String(c).match(Lb))?(this.h=!1,il(this,d[1]||"",!0),this.o=La(d[2]||""),this.g=La(d[3]||"",!0),ol(this,d[4]),this.l=La(d[5]||"",!0),Vb(this,d[6]||"",!0),this.m=La(d[7]||"")):(this.h=!1,this.i=new ja(null,this.h))}Li.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Va(d,jb,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Va(d,jb,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Va(f,f.charAt(0)=="/"?Sx:Cx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Va(f,Rx)),c.join("")};function ar(c){return new Li(c)}function il(c,d,f){c.j=f?La(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ol(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Vb(c,d,f){d instanceof ja?(c.i=d,Nx(c.i,c.h)):(f||(d=Va(d,Ax)),c.i=new ja(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function sl(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function La(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Va(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Dx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Dx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jb=/[#\/\?@]/g,Cx=/[#\?:]/g,Sx=/[#\?]/g,Ax=/[#\?@]/g,Rx=/#/g;function ja(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function qr(c){c.g||(c.g=new Map,c.h=0,c.i&&Tx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ja.prototype,n.add=function(c,d){qr(this),this.i=null,c=Wo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Ub(c,d){qr(c),d=Wo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Bb(c,d){return qr(c),d=Wo(c,d),c.g.has(d)}n.forEach=function(c,d){qr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},n.na=function(){qr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let A=0;A<D.length;A++)f.push(d[g])}return f},n.V=function(c){qr(this);let d=[];if(typeof c=="string")Bb(this,c)&&(d=d.concat(this.g.get(Wo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return qr(this),this.i=null,c=Wo(this,c),Bb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function $b(c,d,f){Ub(c,d),0<f.length&&(c.i=null,c.g.set(Wo(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var D=A;F[g]!==""&&(D+="="+encodeURIComponent(String(F[g]))),c.push(D)}}return this.i=c.join("&")};function Wo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Nx(c,d){d&&!c.j&&(qr(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(Ub(this,g),$b(this,D,f))},c)),c.j=d}function Mx(c,d){let f=new ka;if(a.Image){let g=new Image;g.onload=y(Gr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Gr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Gr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Gr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Px(c,d){let f=new ka,g=new AbortController,D=setTimeout(()=>{g.abort(),Gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?Gr(f,"TestPingServer: ok",!0,d):Gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Gr(f,"TestPingServer: error",!1,d)})}function Gr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function Ox(){this.g=new gx}function xx(c,d,f){let g=f||"";try{Fb(c,function(D,A){let F=D;l(D)&&(F=ug(D)),d.push(g+A+"="+encodeURIComponent(F))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Ua(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Ua,lg),Ua.prototype.g=function(){return new al(this.l,this.j)},Ua.prototype.i=function(c){return function(){return c}}({});function al(c,d){ut.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(al,ut),n=al.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,$a(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ba(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hb(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hb(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ba(this):$a(this),this.readyState==3&&Hb(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ba(this))},n.Qa=function(c){this.g&&(this.response=c,Ba(this))},n.ga=function(){this.g&&Ba(this)};function Ba(c){c.readyState=4,c.l=null,c.j=null,c.v=null,$a(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function $a(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zb(c){let d="";return le(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Eg(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=zb(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Me(c){ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Me,ut);var kx=/^https?$/i,Fx=["POST","PUT"];n=Me.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fg.g(),this.v=this.o?_b(this.o):_b(fg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){qb(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fx,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of f)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kb(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){qb(this,A)}};function qb(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Gb(c),cl(c)}function Gb(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),cl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cl(this,!0)),Me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Wb(this):this.bb())},n.bb=function(){Wb(this)};function Wb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||cr(c)!=4||c.Z()!=2)){if(c.u&&cr(c)==4)gb(c.Ea,0,c);else if(Et(c,"readystatechange"),cr(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=F===0){var D=String(c.D).match(Lb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!kx.test(D?D.toLowerCase():"")}f=g}if(f)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var A=2<cr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Gb(c)}}finally{cl(c)}}}}function cl(c,d){if(c.g){Kb(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Et(c,"ready");try{f.onreadystatechange=g}catch{}}}function Kb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function cr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),px(d)}};function Qb(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Lx(c){let d={};c=(c.g&&2<=cr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var f=T(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[D]||[];d[D]=A,A.push(f)}b(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Yb(c){this.Aa=0,this.i=[],this.j=new ka,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ha("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ha("baseRetryDelayMs",5e3,c),this.cb=Ha("retryDelaySeedMs",1e4,c),this.Wa=Ha("forwardChannelMaxRetries",2,c),this.wa=Ha("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Mb(c&&c.concurrentRequestLimit),this.Da=new Ox,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Yb.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){It(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=oT(this,null,this.W),ll(this)};function Ig(c){if(Jb(c),c.G==3){var d=c.U++,f=ar(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),za(c,f),d=new zr(c,c.j,d),d.L=2,d.v=sl(ar(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=sT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),rl(d)}iT(c)}function ul(c){c.g&&(bg(c),c.g.cancel(),c.g=null)}function Jb(c){ul(c),c.u&&(a.clearTimeout(c.u),c.u=null),dl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ll(c){if(!Pb(c.h)&&!c.s){c.s=!0;var d=c.Ga;Sa||ub(),Aa||(Sa(),Aa=!0),eg.add(d,c),c.B=0}}function Vx(c,d){return Ob(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=xa(m(c.Ga,c,d),rT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new zr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Xb(this,D,d),f=ar(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),za(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(zb(A)))+"&"+d:this.m&&Eg(f,this.m,A)),_g(this.h,D),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),D.T=!0,gg(D,f,null)):gg(D,f,d),this.G=2}}else this.G==3&&(c?Zb(this,c):this.i.length==0||Pb(this.h)||Zb(this))};function Zb(c,d){var f;d?f=d.l:f=c.U++;let g=ar(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),za(c,g),c.m&&c.o&&Eg(g,c.m,c.o),f=new zr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Xb(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),_g(c.h,f),gg(f,g,d)}function za(c,d){c.H&&le(c.H,function(f,g){Te(d,g,f)}),c.l&&Fb({},function(f,g){Te(d,g,f)})}function Xb(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let A=-1;for(;;){let F=["count="+f];A==-1?0<f?(A=D[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let we=!0;for(let rt=0;rt<f;rt++){let me=D[rt].g,lt=D[rt].map;if(me-=A,0>me)A=Math.max(0,D[rt].g-100),we=!1;else try{xx(lt,F,"req"+me+"_")}catch{g&&g(lt)}}if(we){g=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function eT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Sa||ub(),Aa||(Sa(),Aa=!0),eg.add(d,c),c.v=0}}function wg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=xa(m(c.Fa,c),rT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,tT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=xa(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),ul(this),tT(this))};function bg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function tT(c){c.g=new zr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=ar(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),za(c,d),c.m&&c.o&&Eg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=sl(ar(d)),f.m=null,f.P=!0,Ab(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ul(this),wg(this),It(19))};function dl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function nT(c,d){var f=null;if(c.g==d){dl(c),bg(c),c.g=null;var g=2}else if(vg(c.h,d))f=d.D,xb(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=el(),Et(g,new Tb(g,f)),ll(c)}else eT(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&Vx(c,d)||g==2&&wg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:Vi(c,5);break;case 4:Vi(c,10);break;case 3:Vi(c,6);break;default:Vi(c,2)}}}function rT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Vi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new Li(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||il(g,"https"),sl(g),D?Mx(g.toString(),f):Px(g.toString(),f)}else It(2);c.G=0,c.l&&c.l.sa(d),iT(c),Jb(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function iT(c){if(c.G=0,c.ka=[],c.l){let d=kb(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function oT(c,d,f){var g=f instanceof Li?ar(f):new Li(f);if(g.g!="")d&&(g.g=d+"."+g.g),ol(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var A=new Li(null);g&&il(A,g),d&&(A.g=d),D&&ol(A,D),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),za(c,g),g}function sT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new Ua({eb:f})):new Me(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function aT(){}n=aT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hl(){}hl.prototype.g=function(c,d){return new zt(c,d)};function zt(c,d){ut.call(this),this.g=new Yb(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ko(this)}C(zt,ut),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ig(this.g)},zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=ug(c),c=f);d.i.push(new Ix(d.Ya++,c)),d.G==3&&ll(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ig(this.g),delete this.g,zt.aa.N.call(this)};function cT(c){dg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(cT,dg);function uT(){hg.call(this),this.status=1}C(uT,hg);function Ko(c){this.g=c}C(Ko,aT),Ko.prototype.ua=function(){Et(this.g,"a")},Ko.prototype.ta=function(c){Et(this.g,new cT(c))},Ko.prototype.sa=function(c){Et(this.g,new uT)},Ko.prototype.ra=function(){Et(this.g,"b")},hl.prototype.createWebChannel=hl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Q_=Mr.createWebChannelTransport=function(){return new hl},K_=Mr.getStatEventTarget=function(){return el()},W_=Mr.Event=ki,wf=Mr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tl.NO_ERROR=0,tl.TIMEOUT=8,tl.HTTP_ERROR=6,lu=Mr.ErrorCode=tl,Db.COMPLETE="complete",G_=Mr.EventType=Db,Eb.EventType=Pa,Pa.OPEN="a",Pa.CLOSE="b",Pa.ERROR="c",Pa.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Ks=Mr.WebChannel=Eb,M$=Mr.FetchXmlHttpFactory=Ua,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,q_=Mr.XhrIo=Me}).apply(typeof If<"u"?If:typeof self<"u"?self:typeof window<"u"?window:{});var CR="@firebase/firestore",SR="4.8.0";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var ma="11.10.0";var Ro=new Kn("@firebase/firestore");function Qs(){return Ro.logLevel}function j(n,...e){if(Ro.logLevel<=de.DEBUG){let t=e.map(LI);Ro.debug(`Firestore (${ma}): ${n}`,...t)}}function Pr(n,...e){if(Ro.logLevel<=de.ERROR){let t=e.map(LI);Ro.error(`Firestore (${ma}): ${n}`,...t)}}function bi(n,...e){if(Ro.logLevel<=de.WARN){let t=e.map(LI);Ro.warn(`Firestore (${ma}): ${n}`,...t)}}function LI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,pN(n,r,t)}function pN(n,e,t){let r=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Pr(r),new Error(r)}function _e(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||pN(e,i,r)}function X(n,e){return n}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends st{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Jn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Rf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},eE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},tE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},nE=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new Rf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new tt(e)}},rE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},iE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new rE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Nf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},oE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Nf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Nf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function P$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function gN(){return new TextEncoder}var yu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=P$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function sE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ae(r,i);{let o=gN(),s=O$(o.encode(AR(n,t)),o.encode(AR(e,t)));return s!==0?s:ae(r,i)}}t+=r>65535?2:1}return ae(n.length,e.length)}function AR(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function O$(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ae(n[t],e[t]);return ae(n.length,e.length)}function na(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var RR="__name__",Mf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&K(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):sE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nr.fromString(e.substring(4,e.length-2))}},Le=class n extends Mf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},x$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zt=class n extends Mf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return x$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RR}static keyField(){return new n([RR])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Le.fromString(e))}static fromName(e){return new n(Le.fromString(e).popFirst(5))}static empty(){return new n(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Le(e.slice()))}};function k$(n,e,t){if(!t)throw new z(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function F$(n,e,t,r){if(e===!0&&r===!0)throw new z(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NR(n){if(!Q.isDocumentKey(n))throw new z(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function VI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K(12329,{type:typeof n})}function ra(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=VI(n);throw new z(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Be(n,e){let t={typeString:n};return e&&(t.value=e),t}function Nu(n,e){if(!mN(n))throw new z(O.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new z(O.INVALID_ARGUMENT,t);return!0}var MR=-62135596800,PR=1e6,$e=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*PR);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<MR)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PR}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-MR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Be("string",$e._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};var te=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new $e(0,0))}static max(){return new n(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var vu=-1,aE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};aE.UNKNOWN_ID=-1;function L$(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new No(i,Q.empty(),e)}function V$(n){return new No(n.readTime,n.key,vu)}var No=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(te.min(),Q.empty(),vu)}static max(){return new n(te.max(),Q.empty(),vu)}};function j$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var U$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ya(n){return v(this,null,function*(){if(n.code!==O.FAILED_PRECONDITION||n.message!==U$)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function B$(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function va(n){return n.name==="IndexedDbTransactionError"}var jI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),UI=-1;function op(n){return n==null}function _u(n){return n===0&&1/n==-1/0}function $$(n){return typeof n=="number"&&Number.isInteger(n)&&!_u(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var yN="";function H$(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OR(e)),e=z$(n.get(t),e);return OR(e)}function z$(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case yN:t+="";break;default:t+=o}}return t}function OR(n){return n+yN+""}var q$="remoteDocuments",vN="owner";var _N="mutationQueues";var EN="mutations";var IN="documentMutations",G$="remoteDocumentsV14";var wN="remoteDocumentGlobal";var bN="targets";var TN="targetDocuments";var DN="targetGlobal",CN="collectionParents";var SN="clientMetadata";var AN="bundles";var RN="namedQueries";var W$="indexConfiguration";var K$="indexState";var Q$="indexEntries";var NN="documentOverlays";var Y$="globals";var J$=[_N,EN,IN,q$,bN,vN,DN,TN,SN,wN,CN,AN,RN],Joe=[...J$,NN],Z$=[_N,EN,IN,G$,bN,vN,DN,TN,SN,wN,CN,AN,RN,NN],X$=Z$,eH=[...X$,W$,K$,Q$];var Zoe=[...eH,Y$];function xR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ko(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Zn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xs(this.root,e,this.comparator,!0)}},Xs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}};Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var nt=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pf(this.data.getIterator())}getIteratorFrom(e){return new Pf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Pf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Yn=class n{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new n([])}unionWith(e){let t=new nt(Zt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Of=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var _t=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Of("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_t.EMPTY_BYTE_STRING=new _t("");var tH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(n){if(_e(!!n,39018),typeof n=="string"){let e=0,t=tH.exec(n);if(_e(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(n.seconds),nanos:Se(n.nanos)}}function Se(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xr(n){return typeof n=="string"?_t.fromBase64String(n):_t.fromUint8Array(n)}var PN="server_timestamp",ON="__type__",xN="__previous_value__",kN="__local_write_time__";function BI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ON])===null||t===void 0?void 0:t.stringValue)===PN}function sp(n){let e=n.mapValue.fields[xN];return BI(e)?sp(e):e}function Eu(n){let e=Or(n.mapValue.fields[kN].timestampValue);return new $e(e.seconds,e.nanos)}var uE=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},xf="(default)",kf=class n{constructor(e,t){this.projectId=e,this.database=t||xf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var $I="__type__",FN="__max__",bf={mapValue:{fields:{__type__:{stringValue:FN}}}},HI="__vector__",ia="value";function Ti(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?BI(n)?4:VN(n)?9007199254740991:LN(n)?10:11:K(28295,{value:n})}function tr(n,e){if(n===e)return!0;let t=Ti(n);if(t!==Ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Eu(n).isEqual(Eu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Or(i.timestampValue),a=Or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return xr(i.bytesValue).isEqual(xr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Se(i.geoPointValue.latitude)===Se(o.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Se(i.integerValue)===Se(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Se(i.doubleValue),a=Se(o.doubleValue);return s===a?_u(s)===_u(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return na(n.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(xR(s)!==xR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!tr(s[u],a[u])))return!1;return!0}(n,e);default:return K(52216,{left:n})}}function Iu(n,e){return(n.values||[]).find(t=>tr(t,e))!==void 0}function oa(n,e){if(n===e)return 0;let t=Ti(n),r=Ti(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Se(o.integerValue||o.doubleValue),u=Se(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return kR(n.timestampValue,e.timestampValue);case 4:return kR(Eu(n),Eu(e));case 5:return sE(n.stringValue,e.stringValue);case 6:return function(o,s){let a=xr(o),u=xr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(Se(o.latitude),Se(s.latitude));return a!==0?a:ae(Se(o.longitude),Se(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return FR(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ia])===null||a===void 0?void 0:a.arrayValue,C=(u=m[ia])===null||u===void 0?void 0:u.arrayValue,N=ae(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:FR(y,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===bf.mapValue&&s===bf.mapValue)return 0;if(o===bf.mapValue)return 1;if(s===bf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=sE(u[p],h[p]);if(m!==0)return m;let y=oa(a[u[p]],l[h[p]]);if(y!==0)return y}return ae(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K(23264,{le:t})}}function kR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=Or(n),r=Or(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function FR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=oa(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function sa(n){return lE(n)}function lE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Or(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=lE(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${lE(t.fields[s])}`;return i+"}"}(n.mapValue):K(61005,{value:n})}function Cf(n){switch(Ti(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=sp(n);return e?16+Cf(e):16;case 5:return 2*n.stringValue.length;case 6:return xr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Cf(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ko(r.fields,(o,s)=>{i+=o.length+Cf(s)}),i}(n.mapValue);default:throw K(13486,{value:n})}}function dE(n){return!!n&&"integerValue"in n}function zI(n){return!!n&&"arrayValue"in n}function LR(n){return!!n&&"nullValue"in n}function VR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sf(n){return!!n&&"mapValue"in n}function LN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$I])===null||t===void 0?void 0:t.stringValue)===HI}function hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ko(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FN}var ese={mapValue:{fields:{[$I]:{stringValue:HI},[ia]:{arrayValue:{}}}}};var An=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=Zt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=hu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ko(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(hu(this.value))}};function jN(n){let e=[];return ko(n.fields,(t,r)=>{let i=new Zt([t]);if(Sf(r)){let o=jN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Yn(e)}var Rn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,te.min(),te.min(),te.min(),An.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,te.min(),te.min(),An.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,te.min(),te.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var aa=class{constructor(e,t){this.position=e,this.inclusive=t}};function jR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),t.key):r=oa(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function UR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tr(n.position[t],e.position[t]))return!1;return!0}var ca=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function nH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ff=class{},We=class n extends Ff{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fE(e,t,r):t==="array-contains"?new mE(e,r):t==="in"?new yE(e,r):t==="not-in"?new vE(e,r):t==="array-contains-any"?new _E(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new pE(e,r):new gE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(oa(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},nr=class n extends Ff{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return UN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function UN(n){return n.op==="and"}function BN(n){return rH(n)&&UN(n)}function rH(n){for(let e of n.filters)if(e instanceof nr)return!1;return!0}function hE(n){if(n instanceof We)return n.field.canonicalString()+n.op.toString()+sa(n.value);if(BN(n))return n.filters.map(e=>hE(e)).join(",");{let e=n.filters.map(t=>hE(t)).join(",");return`${n.op}(${e})`}}function $N(n,e){return n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&tr(r.value,i.value)}(n,e):n instanceof nr?function(r,i){return i instanceof nr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$N(s,i.filters[a]),!0):!1}(n,e):void K(19439)}function HN(n){return n instanceof We?function(t){return`${t.field.canonicalString()} ${t.op} ${sa(t.value)}`}(n):n instanceof nr?function(t){return t.op.toString()+" {"+t.getFilters().map(HN).join(" ,")+"}"}(n):"Filter"}var fE=class extends We{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},pE=class extends We{constructor(e,t){super(e,"in",t),this.keys=zN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},gE=class extends We{constructor(e,t){super(e,"not-in",t),this.keys=zN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function zN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var mE=class extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return zI(t)&&Iu(t.arrayValue,this.value)}},yE=class extends We{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Iu(this.value.arrayValue,t)}},vE=class extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Iu(this.value.arrayValue,t)}},_E=class extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!zI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Iu(this.value.arrayValue,r))}};var EE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function BR(n,e=null,t=[],r=[],i=null,o=null,s=null){return new EE(n,e,t,r,i,o,s)}function qI(n){let e=X(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>hE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),op(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sa(r)).join(",")),e.Pe=t}return e.Pe}function GI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$N(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UR(n.startAt,e.startAt)&&UR(n.endAt,e.endAt)}function IE(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ua=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function iH(n,e,t,r,i,o,s,a){return new ua(n,e,t,r,i,o,s,a)}function WI(n){return new ua(n)}function $R(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oH(n){return n.collectionGroup!==null}function fu(n){let e=X(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new nt(Zt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ca(o,r))}),t.has(Zt.keyField().canonicalString())||e.Te.push(new ca(Zt.keyField(),r))}return e.Te}function Xn(n){let e=X(n);return e.Ie||(e.Ie=sH(e,fu(n))),e.Ie}function sH(n,e){if(n.limitType==="F")return BR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ca(i.field,o)});let t=n.endAt?new aa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new aa(n.startAt.position,n.startAt.inclusive):null;return BR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wE(n,e,t){return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ap(n,e){return GI(Xn(n),Xn(e))&&n.limitType===e.limitType}function qN(n){return`${qI(Xn(n))}|lt:${n.limitType}`}function Ys(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>HN(i)).join(", ")}]`),op(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>sa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>sa(i)).join(",")),`Target(${r})`}(Xn(n))}; limitType=${n.limitType})`}function cp(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of fu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=jR(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,fu(r),i)||r.endAt&&!function(s,a,u){let l=jR(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,fu(r),i))}(n,e)}function aH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GN(n){return(e,t)=>{let r=!1;for(let i of fu(n)){let o=cH(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function cH(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?oa(u,l):K(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:n.dir})}}var kr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ko(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return MN(this.inner)}size(){return this.innerSize}};var uH=new Oe(Q.comparator);function Fr(){return uH}var WN=new Oe(Q.comparator);function du(...n){let e=WN;for(let t of n)e=e.insert(t.key,t);return e}function KN(n){let e=WN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Do(){return pu()}function QN(){return pu()}function pu(){return new kr(n=>n.toString(),(n,e)=>n.isEqual(e))}var lH=new Oe(Q.comparator),dH=new nt(Q.comparator);function fe(...n){let e=dH;for(let t of n)e=e.add(t);return e}var hH=new nt(ae);function fH(){return hH}function KI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(e)?"-0":e}}function YN(n){return{integerValue:""+n}}function pH(n,e){return $$(e)?YN(e):KI(n,e)}var la=class{constructor(){this._=void 0}};function gH(n,e,t){return n instanceof da?function(i,o){let s={fields:{[ON]:{stringValue:PN},[kN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&BI(o)&&(o=sp(o)),o&&(s.fields[xN]=o),{mapValue:s}}(t,e):n instanceof Mo?ZN(n,e):n instanceof Po?XN(n,e):function(i,o){let s=JN(i,o),a=HR(s)+HR(i.Ee);return dE(s)&&dE(i.Ee)?YN(a):KI(i.serializer,a)}(n,e)}function mH(n,e,t){return n instanceof Mo?ZN(n,e):n instanceof Po?XN(n,e):t}function JN(n,e){return n instanceof ha?function(r){return dE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var da=class extends la{},Mo=class extends la{constructor(e){super(),this.elements=e}};function ZN(n,e){let t=eM(e);for(let r of n.elements)t.some(i=>tr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Po=class extends la{constructor(e){super(),this.elements=e}};function XN(n,e){let t=eM(e);for(let r of n.elements)t=t.filter(i=>!tr(i,r));return{arrayValue:{values:t}}}var ha=class extends la{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function HR(n){return Se(n.integerValue||n.doubleValue)}function eM(n){return zI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function yH(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Mo&&i instanceof Mo||r instanceof Po&&i instanceof Po?na(r.elements,i.elements,tr):r instanceof ha&&i instanceof ha?tr(r.Ee,i.Ee):r instanceof da&&i instanceof da}(n.transform,e.transform)}var bE=class{constructor(e,t){this.version=e,this.transformResults=t}},_i=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Af(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var fa=class{};function tM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wu(n.key,_i.none()):new Oo(n.key,n.data,_i.none());{let t=n.data,r=An.empty(),i=new nt(Zt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Lr(n.key,r,new Yn(i.toArray()),_i.none())}}function vH(n,e,t){n instanceof Oo?function(i,o,s){let a=i.value.clone(),u=qR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Lr?function(i,o,s){if(!Af(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=qR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(nM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function gu(n,e,t,r){return n instanceof Oo?function(o,s,a,u){if(!Af(o.precondition,s))return a;let l=o.value.clone(),h=GR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Lr?function(o,s,a,u){if(!Af(o.precondition,s))return a;let l=GR(o.fieldTransforms,u,s),h=s.data;return h.setAll(nM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Af(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function _H(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=JN(r.transform,i||null);o!=null&&(t===null&&(t=An.empty()),t.set(r.field,o))}return t||null}function zR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&na(r,i,(o,s)=>yH(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Oo=class extends fa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lr=class extends fa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function nM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function qR(n,e,t){let r=new Map;_e(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,mH(s,a,t[i]))}return r}function GR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,gH(o,s,e))}return r}var wu=class extends fa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},TE=class extends fa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var DE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&vH(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=QN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=tM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(t,r)=>zR(t,r))&&na(this.baseMutations,e.baseMutations,(t,r)=>zR(t,r))}},CE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return lH}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var SE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var AE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var je,ge;function EH(n){switch(n){case O.OK:return K(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return K(15467,{code:n})}}function rM(n){if(n===void 0)return Pr("GRPC error has no .code"),O.UNKNOWN;switch(n){case je.OK:return O.OK;case je.CANCELLED:return O.CANCELLED;case je.UNKNOWN:return O.UNKNOWN;case je.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case je.INTERNAL:return O.INTERNAL;case je.UNAVAILABLE:return O.UNAVAILABLE;case je.UNAUTHENTICATED:return O.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case je.NOT_FOUND:return O.NOT_FOUND;case je.ALREADY_EXISTS:return O.ALREADY_EXISTS;case je.PERMISSION_DENIED:return O.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case je.ABORTED:return O.ABORTED;case je.OUT_OF_RANGE:return O.OUT_OF_RANGE;case je.UNIMPLEMENTED:return O.UNIMPLEMENTED;case je.DATA_LOSS:return O.DATA_LOSS;default:return K(39323,{code:n})}}(ge=je||(je={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var WR=null;var IH=new Nr([4294967295,4294967295],0);function KR(n){let e=gN().encode(n),t=new z_;return t.update(e),new Uint8Array(t.digest())}function QR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Nr([t,r],0),new Nr([i,o],0)]}var RE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Co(`Invalid padding: ${t}`);if(r<0)throw new Co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Co(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Co(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Nr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Nr.fromNumber(r)));return i.compare(IH)===1&&(i=new Nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=KR(e),[r,i]=QR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=KR(e),[r,i]=QR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Co=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Lf=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(te.min(),i,new Oe(ae),Fr(),fe())}},bu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var ea=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Vf=class{constructor(e,t){this.targetId=e,this.De=t}},jf=class{constructor(e,t,r=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Uf=class{constructor(){this.ve=0,this.Ce=YR(),this.Fe=_t.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),t=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new bu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=YR()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},NE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Fr(),this.je=Tf(),this.Je=Tf(),this.He=new Oe(ae)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(IE(o))if(r===0){let s=new Q(o.path);this.Xe(t,s,Rn.newNoDocument(s,te.min()))}else _e(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}WR?.ct(function(h,p,m,y,C){var N,R,k,G,$,pe;let He={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},le=p.unchangedNames;return le&&(He.bloomFilter={applied:C===0,hashCount:(N=le?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(G=(k=(R=le?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&G!==void 0?G:0,padding:(pe=($=le?.bits)===null||$===void 0?void 0:$.padding)!==null&&pe!==void 0?pe:0,mightContain:b=>{var _;return(_=y?.mightContain(b))!==null&&_!==void 0&&_}}),He}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=xr(r).toUint8Array()}catch(u){if(u instanceof Of)return bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new RE(s,i,o)}catch(u){return bi(u instanceof Co?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&IE(a.target)){let u=new Q(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Rn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Lf(e,t,this.He,this.ze,r);return this.ze=Fr(),this.je=Tf(),this.Je=Tf(),this.He=new Oe(ae),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Uf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new nt(ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new nt(ae),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Uf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Tf(){return new Oe(Q.comparator)}function YR(){return new Oe(Q.comparator)}var wH={asc:"ASCENDING",desc:"DESCENDING"},bH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TH={and:"AND",or:"OR"},ME=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function PE(n,e){return n.useProto3Json||op(e)?e:{value:e}}function Bf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DH(n,e){return Bf(n,e.toTimestamp())}function er(n){return _e(!!n,49232),te.fromTimestamp(function(t){let r=Or(t);return new $e(r.seconds,r.nanos)}(n))}function QI(n,e){return OE(n,e).canonicalString()}function OE(n,e){let t=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function oM(n){let e=Le.fromString(n);return _e(lM(e),10190,{key:e.toString()}),e}function xE(n,e){return QI(n.databaseId,e.path)}function Y_(n,e){let t=oM(e);if(t.get(1)!==n.databaseId.projectId)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(aM(t))}function sM(n,e){return QI(n.databaseId,e)}function CH(n){let e=oM(n);return e.length===4?Le.emptyPath():aM(e)}function kE(n){return new Le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aM(n){return _e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JR(n,e,t){return{name:xE(n,e),fields:t.value.mapValue.fields}}function SH(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(_e(h===void 0||typeof h=="string",58123),_t.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),_t.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?O.UNKNOWN:rM(l.code);return new z(h,l.message||"")}(s);t=new jf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Y_(n,r.document.name),o=er(r.document.updateTime),s=r.document.createTime?er(r.document.createTime):te.min(),a=new An({mapValue:{fields:r.document.fields}}),u=Rn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ea(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Y_(n,r.document),o=r.readTime?er(r.readTime):te.min(),s=Rn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ea([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Y_(n,r.document),o=r.removedTargetIds||[];t=new ea([],o,i,null)}else{if(!("filter"in e))return K(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new AE(i,o),a=r.targetId;t=new Vf(a,s)}}return t}function AH(n,e){let t;if(e instanceof Oo)t={update:JR(n,e.key,e.value)};else if(e instanceof wu)t={delete:xE(n,e.key)};else if(e instanceof Lr)t={update:JR(n,e.key,e.data),updateMask:LH(e.fieldMask)};else{if(!(e instanceof TE))return K(16599,{Rt:e.type});t={verify:xE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof da)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Po)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ha)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:DH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)}(n,e.precondition)),t}function RH(n,e){return n&&n.length>0?(_e(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?er(i.updateTime):er(o);return s.isEqual(te.min())&&(s=er(o)),new bE(s,i.transformResults||[])}(t,e))):[]}function NH(n,e){return{documents:[sM(n,e.path)]}}function MH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sM(n,i);let o=function(l){if(l.length!==0)return uM(nr.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Js(m.field),direction:xH(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=PE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function PH(n){let e=CH(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){_e(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=cM(p);return m instanceof nr&&BN(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(C){return new ca(Zs(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,op(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new aa(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new aa(y,m)}(t.endAt)),iH(e,i,s,o,a,"F",u,l)}function OH(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Zs(t.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zs(t.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Zs(t.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Zs(t.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(n):n.fieldFilter!==void 0?function(t){return We.create(Zs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return nr.create(t.compositeFilter.filters.map(r=>cM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(t.compositeFilter.op))}(n):K(30097,{filter:n})}function xH(n){return wH[n]}function kH(n){return bH[n]}function FH(n){return TH[n]}function Js(n){return{fieldPath:n.canonicalString()}}function Zs(n){return Zt.fromServerFormat(n.fieldPath)}function uM(n){return n instanceof We?function(t){if(t.op==="=="){if(VR(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NAN"}};if(LR(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(VR(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NAN"}};if(LR(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(t.field),op:kH(t.op),value:t.value}}}(n):n instanceof nr?function(t){let r=t.getFilters().map(i=>uM(i));return r.length===1?r[0]:{compositeFilter:{op:FH(t.op),filters:r}}}(n):K(54877,{filter:n})}function LH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Tu=class n{constructor(e,t,r,i,o=te.min(),s=te.min(),a=_t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var FE=class{constructor(e){this.gt=e}};function VH(n){let e=PH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?wE(e,e.limit,"L"):e}var $f=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),_u(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Or(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(xr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?VN(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):LN(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):K(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ia,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Se(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Q.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};$f.Ut=new $f;var LE=class{constructor(){this.Dn=new VE}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(No.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},VE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nt(Le.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Le.comparator)).toArray()}};var tse=new Uint8Array(0);var ZR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dM=41943040,hn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(dM,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);var Du=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var XR="LruGarbageCollector",jH=1048576;function eN([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var jE=class{constructor(e){this.Tr=e,this.buffer=new nt(eN),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();eN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},UE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){j(XR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){va(t)?j(XR,"Ignoring IndexedDB error during garbage collection: ",t):yield ya(t)}yield this.Rr(3e5)}))}},BE=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(jI.ue);let r=new jE(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(ZR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZR):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Qs()<=de.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function UH(n,e){return new BE(n,e)}var $E=class{constructor(){this.changes=new kr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var HE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var zE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&gu(r.mutation,i,Yn.empty(),$e.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=Do();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=du();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Do();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Fr(),s=pu(),a=function(){return pu()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Lr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),gu(h.mutation,l,h.mutation.getFieldMask(),$e.now())):s.set(l.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new HE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=pu(),i=new Oe((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Yn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=QN();h.forEach(m=>{if(!o.has(m)){let y=tM(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oH(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Do()),a=vu,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:KN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=du();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,m){return new ua(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Rn.newInvalidDocument(h)))});let a=du();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&gu(h.mutation,l,Yn.empty(),$e.now()),cp(t,l)&&(a=a.insert(u,l))}),a})}};var qE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:er(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:VH(i.bundledQuery),readTime:er(i.readTime)}}(t)),x.resolve()}};var GE=class{constructor(){this.overlays=new Oe(Q.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Do();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Do(),o=t.length+1,s=new Q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Do(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Do(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new SE(t,r));let o=this.kr.get(t);o===void 0&&(o=fe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var WE=class{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Cu=class{constructor(){this.qr=new nt(Ue.Qr),this.$r=new nt(Ue.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ue(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ue(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Q(new Le([])),r=new Ue(t,e),i=new Ue(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Q(new Le([])),r=new Ue(t,e),i=new Ue(t,e+1),o=fe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ue(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Q.comparator(e.key,t.key)||ae(e.Hr,t.Hr)}static Ur(e,t){return ae(e.Hr,t.Hr)||Q.comparator(e.key,t.key)}};var KE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new nt(Ue.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new DE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ue(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?UI:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ue(t,0),i=new Ue(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(ae);return t.forEach(i=>{let o=new Ue(i,0),s=new Ue(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new Ue(new Q(o),0),a=new nt(ae);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_e(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new Ue(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ue(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var QE=class{constructor(e){this.ni=e,this.docs=function(){return new Oe(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let r=Fr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Rn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Fr(),s=t.path,a=new Q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||j$(V$(h),r)<=0||(i.has(h.key)||cp(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YE(this)}getSize(e){return x.resolve(this.size)}},YE=class extends $E{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var JE=class{constructor(e){this.persistence=e,this.ii=new kr(t=>qI(t),GI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new Cu,this.targetCount=0,this._i=Du.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Du(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var Hf=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new jI(0),this.ci=!1,this.ci=!0,this.li=new WE,this.referenceDelegate=e(this),this.hi=new JE(this),this.indexManager=new LE,this.remoteDocumentCache=function(i){return new QE(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new FE(t),this.Ti=new qE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new KE(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new ZE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},ZE=class extends cE{constructor(e){super(),this.currentSequenceNumber=e}},XE=class n{constructor(e){this.persistence=e,this.Ai=new Cu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=Q.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},zf=class n{constructor(e,t){this.persistence=e,this.gi=new kr(r=>H$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=UH(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cf(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var eI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fe(),i=fe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var tI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return aR()?8:B$(Ze())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new tI;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Qs()<=de.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Ys(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Qs()<=de.DEBUG&&j("QueryEngine","Query:",Ys(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Qs()<=de.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Ys(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(t))):x.resolve())}ps(e,t){if($R(t))return x.resolve(null);let r=Xn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=wE(t,null,"F"),r=Xn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,wE(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return $R(t)||i.isEqual(te.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(Qs()<=de.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ys(t)),this.vs(e,s,t,L$(i,vu)).next(a=>a))})}bs(e,t){let r=new nt(GN(e));return t.forEach((i,o)=>{cp(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Qs()<=de.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Ys(t)),this.gs.getDocumentsMatchingQuery(e,t,No.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var YI="LocalStore",BH=3e8,rI=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Oe(ae),this.Ms=new kr(o=>qI(o),GI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function $H(n,e,t,r){return new rI(n,e,t,r)}function hM(n,e){return v(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function HH(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);_e(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fM(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function zH(n,e){let t=X(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(_t.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=BH?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=Fr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(qH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(te.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function qH(n,e,t){let r=fe(),i=fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Fr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j(YI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function GH(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=UI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WH(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Tu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function iI(n,e,t){return v(this,null,function*(){let r=X(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!va(s))throw s;j(YI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function tN(n,e,t){let r=X(n),i=te.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=X(u),m=p.Ms.get(h);return m!==void 0?x.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,Xn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:te.min(),t?o:fe())).next(a=>(KH(r,aH(e),a),{documents:a,qs:o})))}function KH(n,e,t){let r=n.xs.get(e)||te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var qf=class{constructor(){this.activeTargetIds=fH()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var oI=class{constructor(){this.Fo=new qf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new qf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var sI=class{xo(e){}shutdown(){}};var nN="ConnectivityMonitor",Gf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(nN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){j(nN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Df=null;function aI(){return Df===null?Df=function(){return 268435456+Math.round(2147483648*Math.random())}():Df++,"0x"+Df.toString(16)}var J_="RestConnection",QH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},cI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===xf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=aI(),a=this.Go(e,t.toUriEncodedString());j(J_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=mi(l);return this.jo(e,a,u,r,h).then(p=>(j(J_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw bi(J_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=QH[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var uI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var vt="WebChannelConnection",lI=class extends cI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=aI();return new Promise((a,u)=>{let l=new q_;l.setWithCredentials(!0),l.listenOnce(G_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lu.NO_ERROR:let p=l.getResponseJson();j(vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case lu.TIMEOUT:j(vt,`RPC '${e}' ${s} timed out`),u(new z(O.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:let m=l.getStatus();if(j(vt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=function(k){let G=k.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(G)>=0?G:O.UNKNOWN}(C.status);u(new z(N,C.message))}else u(new z(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new z(O.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{j(vt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(vt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=aI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Q_(),a=K_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(vt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,C=new uI({Ho:R=>{y?j(vt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(j(vt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(vt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,k,G)=>{R.listen(k,$=>{try{G($)}catch(pe){setTimeout(()=>{throw pe},0)}})};return N(p,Ks.EventType.OPEN,()=>{y||(j(vt,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),N(p,Ks.EventType.CLOSE,()=>{y||(y=!0,j(vt,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),N(p,Ks.EventType.ERROR,R=>{y||(y=!0,bi(vt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new z(O.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ks.EventType.MESSAGE,R=>{var k;if(!y){let G=R.data[0];_e(!!G,16349);let $=G,pe=$?.error||((k=$[0])===null||k===void 0?void 0:k.error);if(pe){j(vt,`RPC '${e}' stream ${i} received error:`,pe);let He=pe.status,le=function(I){let w=je[I];if(w!==void 0)return rM(w)}(He),b=pe.message;le===void 0&&(le=O.INTERNAL,b="Unknown error status: "+He+" with message "+pe.message),y=!0,C.__(new z(le,b)),p.close()}else j(vt,`RPC '${e}' stream ${i} received:`,G),C.a_(G)}}),N(a,W_.STAT_EVENT,R=>{R.stat===wf.PROXY?j(vt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===wf.NOPROXY&&j(vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function Z_(){return typeof document<"u"?document:null}function up(n){return new ME(n,!0)}var Wf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var rN="PersistentStream",Kf=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Wf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new z(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return j(rN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(j(rN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dI=class extends Kf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=SH(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?er(s.readTime):te.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=kE(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=IE(u)?{documents:NH(o,u)}:{query:MH(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=iM(o,s.resumeToken);let l=PE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=Bf(o,s.snapshotVersion.toTimestamp());let l=PE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=OH(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=kE(this.serializer),t.removeTarget=e,this.k_(t)}},hI=class extends Kf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=RH(e.writeResults,e.commitTime),r=er(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=kE(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>AH(this.serializer,r))};this.k_(t)}};var fI=class{},pI=class extends fI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,OE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(O.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,OE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(O.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},gI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Pr(t),this._a=!1):j("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var xo="RemoteStore",mI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Fo(this)&&(j(xo,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=X(u);l.Ia.add(4),yield Mu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield lp(l)})}(this))}))}),this.Aa=new gI(r,i)}};function lp(n){return v(this,null,function*(){if(Fo(n))for(let e of n.da)yield e(!0)})}function Mu(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function pM(n,e){let t=X(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ew(t)?XI(t):_a(t).x_()&&ZI(t,e))}function JI(n,e){let t=X(n),r=_a(t);t.Ta.delete(e),r.x_()&&gM(t,e),t.Ta.size===0&&(r.x_()?r.B_():Fo(t)&&t.Aa.set("Unknown"))}function ZI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).H_(e)}function gM(n,e){n.Ra.$e(e),_a(n).Y_(e)}function XI(n){n.Ra=new NE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.Aa.aa()}function ew(n){return Fo(n)&&!_a(n).M_()&&n.Ta.size>0}function Fo(n){return X(n).Ia.size===0}function mM(n){n.Ra=void 0}function YH(n){return v(this,null,function*(){n.Aa.set("Online")})}function JH(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{ZI(n,e)})})}function ZH(n,e){return v(this,null,function*(){mM(n),ew(n)?(n.Aa.la(e),XI(n)):n.Aa.set("Unknown")})}function XH(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof jf&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){j(xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qf(n,r)}else if(e instanceof ea?n.Ra.Ye(e):e instanceof Vf?n.Ra.it(e):n.Ra.et(e),!t.isEqual(te.min()))try{let r=yield fM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(_t.EMPTY_BYTE_STRING,h.snapshotVersion)),gM(o,u);let p=new Tu(h.target,u,l,h.sequenceNumber);ZI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j(xo,"Failed to raise snapshot:",r),yield Qf(n,r)}})}function Qf(n,e,t){return v(this,null,function*(){if(!va(e))throw e;n.Ia.add(1),yield Mu(n),n.Aa.set("Offline"),t||(t=()=>fM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){j(xo,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield lp(n)}))})}function yM(n,e){return e().catch(t=>Qf(n,t,e))}function dp(n){return v(this,null,function*(){let e=X(n),t=Di(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:UI;for(;e4(e);)try{let i=yield GH(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,t4(e,i)}catch(i){yield Qf(e,i)}vM(e)&&_M(e)})}function e4(n){return Fo(n)&&n.Pa.length<10}function t4(n,e){n.Pa.push(e);let t=Di(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function vM(n){return Fo(n)&&!Di(n).M_()&&n.Pa.length>0}function _M(n){Di(n).start()}function n4(n){return v(this,null,function*(){Di(n).na()})}function r4(n){return v(this,null,function*(){let e=Di(n);for(let t of n.Pa)e.X_(t.mutations)})}function i4(n,e,t){return v(this,null,function*(){let r=n.Pa.shift(),i=CE.from(r,e,t);yield yM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dp(n)})}function o4(n,e){return v(this,null,function*(){e&&Di(n).Z_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return EH(s)&&s!==O.ABORTED}(i.code)){let o=r.Pa.shift();Di(r).N_(),yield yM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield dp(r)}})}(n,e)),vM(n)&&_M(n)})}function iN(n,e){return v(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),j(xo,"RemoteStore received new credentials");let r=Fo(t);t.Ia.add(3),yield Mu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield lp(t)})}function s4(n,e){return v(this,null,function*(){let t=X(n);e?(t.Ia.delete(2),yield lp(t)):e||(t.Ia.add(2),yield Mu(t),t.Aa.set("Unknown"))})}function _a(n){return n.Va||(n.Va=function(t,r,i){let o=X(t);return o.ia(),new dI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:YH.bind(null,n),e_:JH.bind(null,n),n_:ZH.bind(null,n),J_:XH.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),ew(n)?XI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),mM(n))}))),n.Va}function Di(n){return n.ma||(n.ma=function(t,r,i){let o=X(t);return o.ia(),new hI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:n4.bind(null,n),n_:o4.bind(null,n),ea:r4.bind(null,n),ta:i4.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.N_(),yield dp(n)):(yield n.ma.stop(),n.Pa.length>0&&(j(xo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var yI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function tw(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),va(n))return new z(O.UNAVAILABLE,`${e}: ${n}`);throw n}var Yf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=du(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Jf=class{constructor(){this.fa=new Oe(Q.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},pa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Yf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ap(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var vI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},_I=class{constructor(){this.queries=oN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=X(t),o=i.queries;i.queries=oN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new z(O.ABORTED,"Firestore shutting down"))}};function oN(){return new kr(n=>qN(n),ap)}function a4(n,e){return v(this,null,function*(){let t=X(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new vI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=tw(s,`Initialization of query '${Ys(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&nw(t)})}function c4(n,e){return v(this,null,function*(){let t=X(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function u4(n,e){let t=X(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&nw(t)}function l4(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function nw(n){n.Da.forEach(e=>{e.next()})}var EI,sN;(sN=EI||(EI={})).Fa="default",sN.Cache="cache";var II=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==EI.Cache}};var Zf=class{constructor(e){this.key=e}},Xf=class{constructor(e){this.key=e}},wI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=GN(e),this.eu=new Yf(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Jf,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=cp(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:R})}};return N(y)-N(C)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new pa(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Jf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Xf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Zf(r))}),t}uu(e){this.Ha=e.qs,this.Za=fe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return pa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},rw="SyncEngine",bI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},TI=class{constructor(e){this.key=e,this.lu=!1}},DI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new kr(a=>qN(a),ap),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(Q.comparator),this.Eu=new Map,this.Au=new Cu,this.Ru={},this.Vu=new Map,this.mu=Du.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function d4(n,e,t=!0){return v(this,null,function*(){let r=DM(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield EM(r,e,t,!0),i})}function h4(n,e){return v(this,null,function*(){let t=DM(n);yield EM(t,e,!0,!1)})}function EM(n,e,t,r){return v(this,null,function*(){let i=yield WH(n.localStore,Xn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield f4(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&pM(n.remoteStore,i),a})}function f4(n,e,t,r,i){return v(this,null,function*(){n.gu=(p,m,y)=>function(N,R,k,G){return v(this,null,function*(){let $=R.view.nu(k);$.Ds&&($=yield tN(N.localStore,R.query,!1).then(({documents:b})=>R.view.nu(b,$)));let pe=G&&G.targetChanges.get(R.targetId),He=G&&G.targetMismatches.get(R.targetId)!=null,le=R.view.applyChanges($,N.isPrimaryClient,pe,He);return cN(N,R.targetId,le._u),le.snapshot})}(n,p,m,y);let o=yield tN(n.localStore,e,!0),s=new wI(e,o.qs),a=s.nu(o.documents),u=bu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);cN(n,t,l._u);let h=new bI(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function p4(n,e,t){return v(this,null,function*(){let r=X(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ap(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield iI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&JI(r.remoteStore,i.targetId),CI(r,i.targetId)}).catch(ya))):(CI(r,i.targetId),yield iI(r.localStore,i.targetId,!0))})}function g4(n,e){return v(this,null,function*(){let t=X(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),JI(t.remoteStore,r.targetId))})}function m4(n,e,t){return v(this,null,function*(){let r=b4(n);try{let i=yield function(s,a){let u=X(s),l=$e.now(),h=a.reduce((y,C)=>y.add(C.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Fr(),N=fe();return u.Os.getEntries(y,h).next(R=>{C=R,C.forEach((k,G)=>{G.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let k=[];for(let G of a){let $=_H(G,p.get(G.key).overlayedDocument);$!=null&&k.push(new Lr(G.key,$,jN($.value.mapValue),_i.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:KN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Oe(ae)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Pu(r,i.changes),yield dp(r.remoteStore)}catch(i){let o=tw(i,"Failed to persist write");t.reject(o)}})}function IM(n,e){return v(this,null,function*(){let t=X(n);try{let r=yield zH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?_e(s.lu,14607):i.removedDocuments.size>0&&(_e(s.lu,42227),s.lu=!1))}),yield Pu(t,r,e)}catch(r){yield ya(r)}})}function aN(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=X(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&nw(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function y4(n,e,t){return v(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Oe(Q.comparator);s=s.insert(o,Rn.newNoDocument(o,te.min()));let a=fe().add(o),u=new Lf(te.min(),new Map,new Oe(ae),s,a);yield IM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),iw(r)}else yield iI(r.localStore,e,!1).then(()=>CI(r,e,t)).catch(ya)})}function v4(n,e){return v(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield HH(t.localStore,e);bM(t,r,null),wM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pu(t,i)}catch(i){yield ya(i)}})}function _4(n,e,t){return v(this,null,function*(){let r=X(n);try{let i=yield function(s,a){let u=X(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(_e(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);bM(r,e,t),wM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pu(r,i)}catch(i){yield ya(i)}})}function wM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function bM(n,e,t){let r=X(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function CI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||TM(n,r)})}function TM(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(JI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),iw(n))}function cN(n,e,t){for(let r of t)r instanceof Zf?(n.Au.addReference(r.key,e),E4(n,r)):r instanceof Xf?(j(rw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||TM(n,r.key)):K(19791,{yu:r})}function E4(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(j(rw,"New document in limbo: "+t),n.Iu.add(r),iw(n))}function iw(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Q(Le.fromString(e)),r=n.mu.next();n.Eu.set(r,new TI(t)),n.du=n.du.insert(t,r),pM(n.remoteStore,new Tu(Xn(WI(t.path)),r,"TargetPurposeLimboResolution",jI.ue))}}function Pu(n,e,t){return v(this,null,function*(){let r=X(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=eI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return v(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!va(p))throw p;j(YI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(m,N)}}})}(r.localStore,o))})}function I4(n,e){return v(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){j(rw,"User change. New user:",e.toKey());let r=yield hM(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new z(O.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pu(t,r.Bs)}})}function w4(n,e){let t=X(n),r=t.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function DM(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y4.bind(null,e),e.hu.J_=u4.bind(null,e.eventManager),e.hu.pu=l4.bind(null,e.eventManager),e}function b4(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_4.bind(null,e),e}var CM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=up(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return $H(this.persistence,new nI,t.initialUser,this.serializer)}Du(t){return new Hf(XE.Vi,this.serializer)}bu(t){return new oI}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),SI=class extends CM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){_e(this.persistence.referenceDelegate instanceof zf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new UE(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new Hf(r=>zf.Vi(r,t),this.serializer)}};var T4=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>aN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=I4.bind(null,this.syncEngine),yield s4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new _I}()}createDatastore(t){let r=up(t.databaseInfo.databaseId),i=function(s){return new lI(s)}(t.databaseInfo);return function(s,a,u,l){return new pI(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new mI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>aN(this.syncEngine,r,0),function(){return Gf.C()?new Gf:new sI}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new DI(o,s,a,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=X(o);j(xo,"RemoteStore shutting down."),s.Ia.add(5),yield Mu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var AI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ci="FirestoreClient",RI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=yu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){j(Ci,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j(Ci,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=tw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function X_(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j(Ci,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield hM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{bi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{bi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function uN(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield D4(n);j(Ci,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>iN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>iN(e.remoteStore,i)),n._onlineComponents=e})}function D4(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j(Ci,"Using user provided OfflineComponentProvider");try{yield X_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;bi("Error using user provided cache. Falling back to memory cache: "+t),yield X_(n,new CM)}}else j(Ci,"Using default OfflineComponentProvider"),yield X_(n,new SI(void 0));return n._offlineComponents})}function SM(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j(Ci,"Using user provided OnlineComponentProvider"),yield uN(n,n._uninitializedComponentsProvider._online)):(j(Ci,"Using default OnlineComponentProvider"),yield uN(n,new T4))),n._onlineComponents})}function C4(n){return SM(n).then(e=>e.syncEngine)}function S4(n){return v(this,null,function*(){let e=yield SM(n),t=e.eventManager;return t.onListen=d4.bind(null,e.syncEngine),t.onUnlisten=p4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=h4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=g4.bind(null,e.syncEngine),t})}function A4(n,e,t={}){let r=new Jn;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,u,l){let h=new AI({next:m=>{h.Ou(),s.enqueueAndForget(()=>c4(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new z(O.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new z(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new II(WI(a.path),h,{includeMetadataChanges:!0,ka:!0});return a4(o,p)}(yield S4(n),n.asyncQueue,e,t,r)})),r.promise}function AM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var lN=new Map;var RM="firestore.googleapis.com",dN=!0,ep=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RM,this.ssl=dN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:dN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jH)throw new z(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Su=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ep({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ep(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eE;switch(r.type){case"firstParty":return new iE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=lN.get(t);r&&(j("ComponentProvider","Removing Datastore"),lN.delete(t),r.terminate())}(this),Promise.resolve()}};function R4(n,e,t,r={}){var i;n=ra(n,Su);let o=mi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(ff(`https://${u}`),pf("Firestore",!0)),s.host!==RM&&s.host!==u&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!dn(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=tt.MOCK_USER;else{h=nR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new z(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new tt(m)}n._authCredentials=new tE(new Rf(h,p))}}var NI=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ot=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Nu(t,n._jsonSchema))return new n(e,r||null,new Q(Le.fromString(t.referencePath)))}};Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:Be("string",Ot._jsonSchemaVersion),referencePath:Be("string")};var Au=class n extends NI{constructor(e,t,r){super(e,t,WI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Nn(n,e,...t){if(n=Xe(n),arguments.length===1&&(e=yu.newId()),k$("doc","path",e),n instanceof Su){let r=Le.fromString(e,...t);return NR(r),new Ot(n,null,new Q(r))}{if(!(n instanceof Ot||n instanceof Au))throw new z(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Le.fromString(e,...t));return NR(r),new Ot(n.firestore,n instanceof Au?n.converter:null,new Q(r))}}var hN="AsyncQueue",tp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Wf(this,"async_queue_retry"),this.oc=()=>{let r=Z_();r&&j(hN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Z_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Z_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Jn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!va(e))throw e;j(hN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Pr("INTERNAL UNHANDLED ERROR: ",fN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=yI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:fN(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function fN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var ga=class extends Su{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new tp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new tp(e),this._firestoreClient=void 0,yield e}})}};function NM(n,e){let t=typeof n=="object"?n:To(),r=typeof n=="string"?n:e||xf,i=Sn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=tR("firestore");o&&R4(i,...o)}return i}function MM(n){if(n._terminated)throw new z(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||N4(n),n._firestoreClient}function N4(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new uE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,AM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new RI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Ei=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(_t.fromBase64String(e))}catch(t){throw new z(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ei._jsonSchemaVersion="firestore/bytes/1.0",Ei._jsonSchema={type:Be("string",Ei._jsonSchemaVersion),bytes:Be("string")};var Ru=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var np=class{constructor(e){this._methodName=e}};var Ii=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:Be("string",Ii._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};var wi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new z(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};wi._jsonSchemaVersion="firestore/vectorValue/1.0",wi._jsonSchema={type:Be("string",wi._jsonSchemaVersion),vectorValues:Be("object")};var M4=/^__.*__$/,MI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oo(e,this.data,t,this.fieldTransforms)}};function PM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:n})}}var PI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return rp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(PM(this.Ec)&&M4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},OI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||up(e)}Dc(e,t,r,i=!1){return new PI({Ec:e,methodName:t,bc:r,path:Zt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function P4(n){let e=n._freezeSettings(),t=up(n._databaseId);return new OI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function O4(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);FM("Data must be an object, but it was:",s,r);let a=xM(r,s),u,l;if(o.merge)u=new Yn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=x4(e,p,t);if(!s.contains(m))throw new z(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);F4(h,m)||h.push(m)}u=new Yn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new MI(new An(a),u,l)}function OM(n,e){if(kM(n=Xe(n)))return FM("Unsupported field value:",e,n),xM(n,e);if(n instanceof np)return function(r,i){if(!PM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=OM(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=$e.fromDate(r);return{timestampValue:Bf(i.serializer,o)}}if(r instanceof $e){let o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bf(i.serializer,o)}}if(r instanceof Ii)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ei)return{bytesValue:iM(i.serializer,r._byteString)};if(r instanceof Ot){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:QI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wi)return function(s,a){return{mapValue:{fields:{[$I]:{stringValue:HI},[ia]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return KI(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${VI(r)}`)}(n,e)}function xM(n,e){let t={};return MN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ko(n,(r,i)=>{let o=OM(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function kM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof Ii||n instanceof Ei||n instanceof Ot||n instanceof np||n instanceof wi)}function FM(n,e,t){if(!kM(t)||!mN(t)){let r=VI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function x4(n,e,t){if((e=Xe(e))instanceof Ru)return e._internalPath;if(typeof e=="string")return LM(n,e);throw rp("Field path arguments must be of type string or ",n,!1,void 0,t)}var k4=new RegExp("[~\\*/\\[\\]]");function LM(n,e,t){if(e.search(k4)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ru(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new z(O.INVALID_ARGUMENT,a+n+u)}function F4(n,e){return n.some(t=>t.isEqual(e))}var ip=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(VM("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xI=class extends ip{data(){return super.data()}};function VM(n,e){return typeof e=="string"?LM(n,e):e instanceof Ru?e._internalPath:e._delegate._internalPath}var kI=class{convertValue(e,t="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ko(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ia].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Se(s.doubleValue));return new wi(o)}convertGeoPoint(e){return new Ii(Se(e.latitude),Se(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=sp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Eu(e));default:return null}}convertTimestamp(e){let t=Or(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Le.fromString(e);_e(lM(r),9688,{name:e});let i=new kf(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function L4(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var So=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ao=class n extends ip{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ta(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(VM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ao._jsonSchema={type:Be("string",Ao._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};var ta=class extends Ao{data(e={}){return super.data(e)}},mu=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new So(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ta(this._firestore,this._userDataWriter,r.key,r,new So(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ta(i._firestore,i._userDataWriter,a.doc.key,a.doc,new So(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ta(i._firestore,i._userDataWriter,a.doc.key,a.doc,new So(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:V4(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function V4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:n})}}function Ou(n){n=ra(n,Ot);let e=ra(n.firestore,ga);return A4(MM(e),n._key).then(t=>j4(e,n,t))}mu._jsonSchemaVersion="firestore/querySnapshot/1.0",mu._jsonSchema={type:Be("string",mu._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};var FI=class extends kI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ei(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}};function Si(n,e,t){n=ra(n,Ot);let r=ra(n.firestore,ga),i=L4(n.converter,e,t);return UM(r,[O4(P4(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,_i.none())])}function jM(n){return UM(ra(n.firestore,ga),[new wu(n._key,_i.none())])}function UM(n,e){return function(r,i){let o=new Jn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return m4(yield C4(r),i,o)})),o.promise}(MM(n),e)}function j4(n,e,t){let r=t.docs.get(e._key),i=new FI(n);return new Ao(n,i,e._key,r,new So(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ma=i})(vi),Bt(new et("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ga(new nE(r.getProvider("auth-internal")),new oE(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),at(CR,SR,e),at(CR,SR,"esm2017")})();var U4="firebase",B4="11.10.0";at(U4,B4,"app");var HM="@firebase/installations",cw="0.6.18";var zM=1e4,qM=`w:${cw}`,GM="FIS_v2",$4="https://firebaseinstallations.googleapis.com/v1",H4=60*60*1e3,z4="installations",q4="Installations";var G4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vo=new Jt(z4,q4,G4);function WM(n){return n instanceof st&&n.code.includes("request-failed")}function KM({projectId:n}){return`${$4}/projects/${n}/installations`}function QM(n){return{token:n.token,requestStatus:2,expiresIn:K4(n.expiresIn),creationTime:Date.now()}}function YM(n,e){return v(this,null,function*(){let r=(yield e.json()).error;return Vo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function JM({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function W4(n,{refreshToken:e}){let t=JM(n);return t.append("Authorization",Q4(e)),t}function ZM(n){return v(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function K4(n){return Number(n.replace("s","000"))}function Q4(n){return`${GM} ${n}`}function Y4(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=KM(n),s=JM(n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:t,authVersion:GM,appId:n.appId,sdkVersion:qM},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield ZM(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:QM(p.authToken)}}else throw yield YM("Create Installation",h)})}function XM(n){return new Promise(e=>{setTimeout(e,n)})}function J4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var Z4=/^[cdef][\w-]{21}$/,aw="";function X4(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=ez(n);return Z4.test(t)?t:aw}catch{return aw}}function ez(n){return J4(n).substr(0,22)}function fp(n){return`${n.appName}!${n.appId}`}var eP=new Map;function tP(n,e){let t=fp(n);nP(t,e),tz(t,e)}function nP(n,e){let t=eP.get(n);if(t)for(let r of t)r(e)}function tz(n,e){let t=nz();t&&t.postMessage({key:n,fid:e}),rz()}var Lo=null;function nz(){return!Lo&&"BroadcastChannel"in self&&(Lo=new BroadcastChannel("[Firebase] FID Change"),Lo.onmessage=n=>{nP(n.data.key,n.data.fid)}),Lo}function rz(){eP.size===0&&Lo&&(Lo.close(),Lo=null)}var iz="firebase-installations-database",oz=1,jo="firebase-installations-store",ow=null;function uw(){return ow||(ow=_f(iz,oz,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(jo)}}})),ow}function hp(n,e){return v(this,null,function*(){let t=fp(n),i=(yield uw()).transaction(jo,"readwrite"),o=i.objectStore(jo),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&tP(n,e.fid),e})}function rP(n){return v(this,null,function*(){let e=fp(n),r=(yield uw()).transaction(jo,"readwrite");yield r.objectStore(jo).delete(e),yield r.done})}function pp(n,e){return v(this,null,function*(){let t=fp(n),i=(yield uw()).transaction(jo,"readwrite"),o=i.objectStore(jo),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&tP(n,a.fid),a})}function lw(n){return v(this,null,function*(){let e,t=yield pp(n.appConfig,r=>{let i=sz(r),o=az(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===aw?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function sz(n){let e=n||{fid:X4(),registrationStatus:0};return iP(e)}function az(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Vo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=cz(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uz(n)}:{installationEntry:e}}function cz(n,e){return v(this,null,function*(){try{let t=yield Y4(n,e);return hp(n.appConfig,t)}catch(t){throw WM(t)&&t.customData.serverCode===409?yield rP(n.appConfig):yield hp(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function uz(n){return v(this,null,function*(){let e=yield BM(n.appConfig);for(;e.registrationStatus===1;)yield XM(100),e=yield BM(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield lw(n);return r||t}return e})}function BM(n){return pp(n,e=>{if(!e)throw Vo.create("installation-not-found");return iP(e)})}function iP(n){return lz(n)?{fid:n.fid,registrationStatus:0}:n}function lz(n){return n.registrationStatus===1&&n.registrationTime+zM<Date.now()}function dz(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=hz(n,t),s=W4(n,t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:qM,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield ZM(()=>fetch(o,l));if(h.ok){let p=yield h.json();return QM(p)}else throw yield YM("Generate Auth Token",h)})}function hz(n,{fid:e}){return`${KM(n)}/${e}/authTokens:generate`}function dw(n,e=!1){return v(this,null,function*(){let t,r=yield pp(n.appConfig,o=>{if(!oP(o))throw Vo.create("not-registered");let s=o.authToken;if(!e&&gz(s))return o;if(s.requestStatus===1)return t=fz(n,e),o;{if(!navigator.onLine)throw Vo.create("app-offline");let a=yz(o);return t=pz(n,a),a}});return t?yield t:r.authToken})}function fz(n,e){return v(this,null,function*(){let t=yield $M(n.appConfig);for(;t.authToken.requestStatus===1;)yield XM(100),t=yield $M(n.appConfig);let r=t.authToken;return r.requestStatus===0?dw(n,e):r})}function $M(n){return pp(n,e=>{if(!oP(e))throw Vo.create("not-registered");let t=e.authToken;return vz(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function pz(n,e){return v(this,null,function*(){try{let t=yield dz(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield hp(n.appConfig,r),t}catch(t){if(WM(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield rP(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield hp(n.appConfig,r)}throw t}})}function oP(n){return n!==void 0&&n.registrationStatus===2}function gz(n){return n.requestStatus===2&&!mz(n)}function mz(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+H4}function yz(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function vz(n){return n.requestStatus===1&&n.requestTime+zM<Date.now()}function _z(n){return v(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield lw(e);return r?r.catch(console.error):dw(e).catch(console.error),t.fid})}function Ez(n,e=!1){return v(this,null,function*(){let t=n;return yield Iz(t),(yield dw(t,e)).token})}function Iz(n){return v(this,null,function*(){let{registrationPromise:e}=yield lw(n);e&&(yield e)})}function wz(n){if(!n||!n.options)throw sw("App Configuration");if(!n.name)throw sw("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw sw(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sw(n){return Vo.create("missing-app-config-values",{valueName:n})}var sP="installations",bz="installations-internal",Tz=n=>{let e=n.getProvider("app").getImmediate(),t=wz(e),r=Sn(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Dz=n=>{let e=n.getProvider("app").getImmediate(),t=Sn(e,sP).getImmediate();return{getId:()=>_z(t),getToken:i=>Ez(t,i)}};function Cz(){Bt(new et(sP,Tz,"PUBLIC")),Bt(new et(bz,Dz,"PRIVATE"))}Cz();at(HM,cw);at(HM,cw,"esm2017");var gp="analytics",Sz="firebase_id",Az="origin",Rz=60*1e3,Nz="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vw="https://www.googletagmanager.com/gtag/js";var Ht=new Kn("@firebase/analytics");var Mz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xt=new Jt("analytics","Analytics",Mz);function Pz(n){if(!n.startsWith(vw)){let e=Xt.create("invalid-gtag-resource",{gtagURL:n});return Ht.warn(e.message),""}return n}function fP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Oz(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function xz(n,e){let t=Oz("firebase-js-sdk-policy",{createScriptURL:Pz}),r=document.createElement("script"),i=`${vw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function kz(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function Fz(n,e,t,r,i,o){return v(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield fP(t)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){Ht.error(a)}n("config",i,o)})}function Lz(n,e,t,r,i){return v(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield fP(t);for(let u of s){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Ht.error(o)}})}function Vz(n,e,t,r){function i(o,...s){return v(this,null,function*(){try{if(o==="event"){let[a,u]=s;yield Lz(n,e,t,a,u)}else if(o==="config"){let[a,u]=s;yield Fz(n,e,t,r,a,u)}else if(o==="consent"){let[a,u]=s;n("consent",a,u)}else if(o==="get"){let[a,u,l]=s;n("get",a,u,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){Ht.error(a)}})}return i}function jz(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=Vz(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function Uz(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(vw)&&t.src.includes(n))return t;return null}var Bz=30,$z=1e3,fw=class{constructor(e={},t=$z){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},pP=new fw;function Hz(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function zz(n){return v(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:Hz(r)},o=Nz.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Xt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function qz(r){return v(this,arguments,function*(n,e=pP,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Xt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Xt.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new pw;return setTimeout(()=>v(null,null,function*(){u.abort()}),t!==void 0?t:Rz),gP({appId:i,apiKey:o,measurementId:s},a,u,e)})}function gP(o,s,a){return v(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=pP){var u;let{appId:l,measurementId:h}=n;try{yield Gz(r,e)}catch(p){if(h)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield zz(n);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!Wz(m)){if(i.deleteThrottleMetadata(l),h)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:h};throw p}let y=Number((u=m?.customData)===null||u===void 0?void 0:u.httpStatus)===503?A_(t,i.intervalMillis,Bz):A_(t,i.intervalMillis),C={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return i.setThrottleMetadata(l,C),Ht.debug(`Calling attemptFetch again in ${y} millis`),gP(n,C,r,i)}})}function Gz(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Wz(n){if(!(n instanceof st)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var pw=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var gw;function Kz(n,e,t,r,i){return v(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var mw;function Qz(n){mw=n}function Yz(n){gw=n}function Jz(){return v(this,null,function*(){if(au())try{yield mf()}catch(n){return Ht.warn(Xt.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Ht.warn(Xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Zz(n,e,t,r,i,o,s){return v(this,null,function*(){var a;let u=qz(n);u.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Ht.error(y)),e.push(u);let l=Jz().then(y=>{if(y)return r.getId()}),[h,p]=yield Promise.all([u,l]);Uz(o)||xz(o,h.measurementId),mw&&(i("consent","default",mw),Qz(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[Az]="firebase",m.update=!0,p!=null&&(m[Sz]=p),i("config",h.measurementId,m),gw&&(i("set",gw),Yz(void 0)),h.measurementId})}var yw=class{constructor(e){this.app=e}_delete(){return delete xu[this.app.options.appId],Promise.resolve()}},xu={},aP=[],cP={},hw="dataLayer",Xz="gtag",uP,mP,lP=!1;function eq(){let n=[];if(gf()&&n.push("This is a browser extension environment."),cR()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Xt.create("invalid-analytics-context",{errorInfo:e});Ht.warn(t.message)}}function tq(n,e,t){eq();let r=n.options.appId;if(!r)throw Xt.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xt.create("no-api-key");if(xu[r]!=null)throw Xt.create("already-exists",{id:r});if(!lP){kz(hw);let{wrappedGtag:o,gtagCore:s}=jz(xu,aP,cP,hw,Xz);mP=o,uP=s,lP=!0}return xu[r]=Zz(n,aP,cP,e,uP,hw,t),new yw(n)}function yP(n=To()){n=Xe(n);let e=Sn(n,gp);return e.isInitialized()?e.getImmediate():nq(n)}function nq(n,e={}){let t=Sn(n,gp);if(t.isInitialized()){let i=t.getImmediate();if(dn(e,t.getOptions()))return i;throw Xt.create("already-initialized")}return t.initialize({options:e})}function rq(n,e,t,r){n=Xe(n),Kz(mP,xu[n.app.options.appId],e,t,r).catch(i=>Ht.error(i))}var dP="@firebase/analytics",hP="0.10.17";function iq(){Bt(new et(gp,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return tq(r,i,t)},"PUBLIC")),Bt(new et("analytics-internal",n,"PRIVATE")),at(dP,hP),at(dP,hP,"esm2017");function n(e){try{let t=e.getProvider(gp).getImmediate();return{logEvent:(r,i,o)=>rq(t,r,i,o)}}catch(t){throw Xt.create("interop-component-reg-failed",{reason:t})}}}iq();function OP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xP=OP,kP=new Jt("auth","Firebase",OP());var Ip=new Kn("@firebase/auth");function oq(n,...e){Ip.logLevel<=de.WARN&&Ip.warn(`Auth (${vi}): ${n}`,...e)}function yp(n,...e){Ip.logLevel<=de.ERROR&&Ip.error(`Auth (${vi}): ${n}`,...e)}function ir(n,...e){throw $w(n,...e)}function Uo(n,...e){return $w(n,...e)}function FP(n,e,t){let r=Object.assign(Object.assign({},xP()),{[e]:t});return new Jt("auth","Firebase",r).create(e,{appName:n.name})}function Ur(n){return FP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $w(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return kP.create(n,...e)}function W(n,e,...t){if(!n)throw $w(e,...t)}function Vr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw yp(e),new Error(e)}function Ni(n,e){n||Vr(e)}function ww(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function sq(){return vP()==="http:"||vP()==="https:"}function vP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function aq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sq()||gf()||"connection"in navigator)?navigator.onLine:!0}function cq(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Bo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ni(t>e,"Short delay should be less than long delay!"),this.isMobile=rR()||oR()}get(){return aq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Hw(n,e){Ni(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var wp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var uq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var lq=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dq=new Bo(3e4,6e4);function Br(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function or(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return LP(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=cu(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return iR()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&mi(n.emulatorConfig.host)&&(y.credentials="include"),wp.fetch()(yield VP(n,n.config.apiHost,t,p),y)}))})}function LP(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},uq),e);try{let i=new bw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw mp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw mp(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw mp(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw mp(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw FP(n,h,l);ir(n,h)}}catch(i){if(i instanceof st)throw i;ir(n,"network-request-failed",{message:String(i)})}})}function $u(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield or(n,e,t,r,i);return"mfaPendingCredential"in l&&ir(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function VP(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Hw(n.config,i):`${n.config.apiScheme}://${i}`;return lq.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function hq(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var bw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Uo(this.auth,"network-request-failed")),dq.get())})}};function mp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Uo(n,e,r);return i.customData._tokenResponse=t,i}function _P(n){return n!==void 0&&n.enterprise!==void 0}var Tw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hq(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function fq(n,e){return v(this,null,function*(){return or(n,"GET","/v2/recaptchaConfig",Br(n,e))})}function pq(n,e){return v(this,null,function*(){return or(n,"POST","/v1/accounts:delete",e)})}function bp(n,e){return v(this,null,function*(){return or(n,"POST","/v1/accounts:lookup",e)})}function Fu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function jP(n,e=!1){return v(this,null,function*(){let t=Xe(n),r=yield t.getIdToken(e),i=zw(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Fu(_w(i.auth_time)),issuedAtTime:Fu(_w(i.iat)),expirationTime:Fu(_w(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function _w(n){return Number(n)*1e3}function zw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return yp("JWT malformed, contained fewer than 3 sections"),null;try{let i=df(t);return i?JSON.parse(i):(yp("Failed to decode base64 JWT payload"),null)}catch(i){return yp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function EP(n){let e=zw(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ea(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof st&&gq(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function gq({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Dw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Vu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fu(this.lastLoginAt),this.creationTime=Fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Tp(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ea(n,bp(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?BP(o.providerUserInfo):[],a=mq(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Vu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function UP(n){return v(this,null,function*(){let e=Xe(n);yield Tp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function mq(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BP(n){return n.map(e=>{var{providerId:t}=e,r=kg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function yq(n,e){return v(this,null,function*(){let t=yield LP(n,{},()=>v(null,null,function*(){let r=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield VP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&mi(n.emulatorConfig.host)&&(u.credentials="include"),wp.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function vq(n,e){return v(this,null,function*(){return or(n,"POST","/v2/accounts:revokeToken",Br(n,e))})}var Lu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=EP(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield yq(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Vr("not implemented")}};function Ai(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ri=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Ea(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return jP(this,e)}reload(){return UP(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Tp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if($t(this.auth.app))return Promise.reject(Ur(this.auth));let e=yield this.getIdToken();return yield Ea(this,pq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,G=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:pe,isAnonymous:He,providerData:le,stsTokenManager:b}=t;W($&&b,e,"internal-error");let _=Lu.fromJSON(this.name,b);W(typeof $=="string",e,"internal-error"),Ai(p,e.name),Ai(m,e.name),W(typeof pe=="boolean",e,"internal-error"),W(typeof He=="boolean",e,"internal-error"),Ai(y,e.name),Ai(C,e.name),Ai(N,e.name),Ai(R,e.name),Ai(k,e.name),Ai(G,e.name);let I=new n({uid:$,auth:e,email:m,emailVerified:pe,displayName:p,isAnonymous:He,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:k,lastLoginAt:G});return le&&Array.isArray(le)&&(I.providerData=le.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Lu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Tp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?BP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Lu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var IP=new Map;function jr(n){Ni(n instanceof Function,"Expected a class definition");let e=IP.get(n);return e?(Ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,IP.set(n,e),e)}var _q=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Cw=_q;function vp(n,e,t){return`firebase:${n}:${e}:${t}`}var Dp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=vp(this.userKey,i.apiKey,o),this.fullPersistenceKey=vp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield bp(this.auth,{idToken:e}).catch(()=>{});return t?Ri._fromGetAccountInfoResponse(this.auth,t,e):null}return Ri._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(jr(Cw),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||jr(Cw),s=vp(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield bp(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Ri._fromGetAccountInfoResponse(e,m,h)}else p=Ri._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function wP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($P(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WP(e))return"Blackberry";if(KP(e))return"Webos";if(HP(e))return"Safari";if((e.includes("chrome/")||zP(e))&&!e.includes("edge/"))return"Chrome";if(GP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function $P(n=Ze()){return/firefox\//i.test(n)}function HP(n=Ze()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zP(n=Ze()){return/crios\//i.test(n)}function qP(n=Ze()){return/iemobile/i.test(n)}function GP(n=Ze()){return/android/i.test(n)}function WP(n=Ze()){return/blackberry/i.test(n)}function KP(n=Ze()){return/webos/i.test(n)}function qw(n=Ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Eq(n=Ze()){var e;return qw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Iq(){return sR()&&document.documentMode===10}function QP(n=Ze()){return qw(n)||GP(n)||KP(n)||WP(n)||/windows phone/i.test(n)||qP(n)}function YP(n,e=[]){let t;switch(n){case"Browser":t=wP(Ze());break;case"Worker":t=`${wP(Ze())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vi}/${r}`}var Sw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function wq(t){return v(this,arguments,function*(n,e={}){return or(n,"GET","/v2/passwordPolicy",Br(n,e))})}var bq=6,Aw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:bq,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Rw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cp(this),this.idTokenSubscription=new Cp(this),this.beforeStateQueue=new Sw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Dp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield bp(this,{idToken:e}),r=yield Ri._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if($t(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Tp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=cq()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if($t(this.app))return Promise.reject(Ur(this));let t=e?Xe(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return $t(this.app)?Promise.reject(Ur(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return $t(this.app)?Promise.reject(Ur(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(jr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield wq(this),t=new Aw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield vq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&jr(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield Dp.create(this,[jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&oq(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Mi(n){return Xe(n)}var Cp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=lR(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xp={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tq(n){xp=n}function JP(n){return xp.loadJS(n)}function Dq(){return xp.recaptchaEnterpriseScript}function Cq(){return xp.gapiScript}function ZP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Nw=class{constructor(){this.enterprise=new Mw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Mw=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Sq="recaptcha-enterprise",XP="NO_RECAPTCHA",Pw=class{constructor(e){this.type=Sq,this.auth=Mi(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){fq(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Tw(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;_P(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(XP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Nw().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&_P(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Dq();u.length!==0&&(u+=a),JP(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function ku(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new Pw(n),s;if(i)s=XP;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Sp(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield ku(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield ku(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield ku(n,e,t);return r(n,a).catch(u=>v(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield ku(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield ku(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function eO(n,e){let t=Sn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(dn(o,e??{}))return i;ir(i,"already-initialized")}return t.initialize({options:e})}function Aq(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(jr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function tO(n,e,t){let r=Mi(n);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=nO(e),{host:s,port:a}=Rq(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(dn(l,r.config.emulator)&&dn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,mi(s)?(ff(`${o}//${s}${u}`),pf("Auth",!0)):i||Nq()}function nO(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Rq(n){let e=nO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:bP(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:bP(s)}}}function bP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Nq(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ju=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}};function Mq(n,e){return v(this,null,function*(){return or(n,"POST","/v1/accounts:signUp",e)})}function Pq(n,e){return v(this,null,function*(){return $u(n,"POST","/v1/accounts:signInWithPassword",Br(n,e))})}function Oq(n,e){return v(this,null,function*(){return or(n,"POST","/v1/accounts:sendOobCode",Br(n,e))})}function xq(n,e){return v(this,null,function*(){return Oq(n,e)})}function kq(n,e){return v(this,null,function*(){return $u(n,"POST","/v1/accounts:signInWithEmailLink",Br(n,e))})}function Fq(n,e){return v(this,null,function*(){return $u(n,"POST","/v1/accounts:signInWithEmailLink",Br(n,e))})}var Uu=class n extends ju{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sp(e,t,"signInWithPassword",Pq,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return kq(e,{email:this._email,oobCode:this._password});default:ir(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sp(e,r,"signUpPassword",Mq,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Fq(e,{idToken:t,email:this._email,oobCode:this._password});default:ir(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Ew(n,e){return v(this,null,function*(){return $u(n,"POST","/v1/accounts:signInWithIdp",Br(n,e))})}function Lq(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Vq(n){let e=Gs(Ws(n)).link,t=e?Gs(Ws(e)).deep_link_id:null,r=Gs(Ws(n)).deep_link_id;return(r?Gs(Ws(r)).link:null)||r||t||e||n}var Ap=class n{constructor(e){var t,r,i,o,s,a;let u=Gs(Ws(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Lq((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Vq(e);try{return new n(t)}catch{return null}}};var rO=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Uu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Ap.parseLink(r);return W(i,"argument-error"),Uu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Rp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ow=class extends Rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function jq(n,e){return v(this,null,function*(){return $u(n,"POST","/v1/accounts:signUp",Br(n,e))})}var Ia=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Ri._fromIdTokenResponse(e,r,i),s=TP(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=TP(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function TP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var xw=class n extends st{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function iO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xw._fromErrorAndOperation(n,o,e,r):o})}function Uq(n,e,t=!1){return v(this,null,function*(){let r=yield Ea(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ia._forOperation(n,"link",r)})}function Bq(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if($t(r.app))return Promise.reject(Ur(r));let i="reauthenticate";try{let o=yield Ea(n,iO(r,i,e,n),t);W(o.idToken,r,"internal-error");let s=zw(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(n.uid===a,r,"user-mismatch"),Ia._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ir(r,"user-mismatch"),o}})}function oO(n,e,t=!1){return v(this,null,function*(){if($t(n.app))return Promise.reject(Ur(n));let r="signIn",i=yield iO(n,r,e),o=yield Ia._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function sO(n,e){return v(this,null,function*(){return oO(Mi(n),e)})}function $q(n,e,t){var r;W(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),W(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),W(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(W(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(W(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function aO(n){return v(this,null,function*(){let e=Mi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function kp(n,e,t){return v(this,null,function*(){let r=Mi(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&$q(r,i,t),yield Sp(r,i,"getOobCode",xq,"EMAIL_PASSWORD_PROVIDER")})}function Gw(n,e,t){return v(this,null,function*(){if($t(n.app))return Promise.reject(Ur(n));let r=Mi(n),s=yield Sp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jq,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&aO(n),u}),a=yield Ia._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Ww(n,e,t){return $t(n.app)?Promise.reject(Ur(n)):sO(Xe(n),rO.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&aO(n),r}))}function Hq(n,e){return v(this,null,function*(){return or(n,"POST","/v1/accounts:update",e)})}function Kw(r,i){return v(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=Xe(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Ea(o,Hq(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function cO(n,e,t,r){return Xe(n).onIdTokenChanged(e,t,r)}function uO(n,e,t){return Xe(n).beforeAuthStateChanged(e,t)}function Qw(n){return Xe(n).signOut()}var Np="__sak";var Mp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Np,"1"),this.storage.removeItem(Np),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var zq=1e3,qq=10,Gq=(()=>{class n extends Mp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Iq()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,qq):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},zq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Wr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Wr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Wr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),lO=Gq;var Wq=(()=>{class n extends Mp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Yw=Wq;function Kq(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Qq=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield Kq(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function dO(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var kw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=dO("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function rr(){return window}function Yq(n){rr().location.href=n}function hO(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}function Jq(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Zq(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Xq(){return hO()?self:null}var fO="firebaseLocalStorageDb",e3=1,Pp="firebaseLocalStorage",pO="fbase_key",$o=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Fp(n,e){return n.transaction([Pp],e?"readwrite":"readonly").objectStore(Pp)}function t3(){let n=indexedDB.deleteDatabase(fO);return new $o(n).toPromise()}function Fw(){let n=indexedDB.open(fO,e3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Pp,{keyPath:pO})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Pp)?e(r):(r.close(),yield t3(),e(yield Fw()))}))})}function DP(n,e,t){return v(this,null,function*(){let r=Fp(n,!0).put({[pO]:e,value:t});return new $o(r).toPromise()})}function n3(n,e){return v(this,null,function*(){let t=Fp(n,!1).get(e),r=yield new $o(t).toPromise();return r===void 0?null:r.value})}function CP(n,e){let t=Fp(n,!0).delete(e);return new $o(t).toPromise()}var r3=800,i3=3,o3=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Fw(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>i3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return hO()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=Qq._getInstance(Xq()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Jq(),!this.activeServiceWorker)return;this.sender=new kw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Zq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Fw();return yield DP(t,Np,"1"),yield CP(t,Np),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>DP(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>n3(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>CP(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Fp(o,!1).getAll();return new $o(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),r3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),gO=o3;var Rse=ZP("rcb"),Nse=new Bo(3e4,6e4);function s3(n,e){return e?jr(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Bu=class extends ju{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ew(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ew(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ew(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function a3(n){return oO(n.auth,new Bu(n),n.bypassAuthState)}function c3(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),Bq(t,new Bu(n),n.bypassAuthState)}function u3(n){return v(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),Uq(t,new Bu(n),n.bypassAuthState)})}var Lw=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a3;case"linkViaPopup":case"linkViaRedirect":return u3;case"reauthViaPopup":case"reauthViaRedirect":return c3;default:ir(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Mse=new Bo(2e3,1e4);var l3="pendingRedirect",_p=new Map,Vw=class n extends Lw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=_p.get(this.auth._key());if(!e){try{let r=(yield d3(this.resolver,this.auth))?yield Wr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_p.set(this.auth._key(),e)}return this.bypassAuthState||_p.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Wr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Wr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function d3(n,e){return v(this,null,function*(){let t=p3(e),r=f3(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function h3(n,e){_p.set(n._key(),e)}function f3(n){return jr(n._redirectPersistence)}function p3(n){return vp(l3,n.config.apiKey,n.name)}function g3(n,e,t=!1){return v(this,null,function*(){if($t(n.app))return Promise.reject(Ur(n));let r=Mi(n),i=s3(r,e),s=yield new Vw(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var m3=10*60*1e3,jw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!y3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!mO(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Uo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m3&&this.cachedEventUids.clear(),this.cachedEventUids.has(SP(e))}saveEventToCache(e){this.cachedEventUids.add(SP(e)),this.lastProcessedEventTime=Date.now()}};function SP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function y3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mO(n);default:return!1}}function v3(t){return v(this,arguments,function*(n,e={}){return or(n,"GET","/v1/projects",e)})}var _3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E3=/^https?/;function I3(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield v3(n);for(let t of e)try{if(w3(t))return}catch{}ir(n,"unauthorized-domain")})}function w3(n){let e=ww(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!E3.test(t))return!1;if(_3.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var b3=new Bo(3e4,6e4);function AP(){let n=rr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function T3(n){return new Promise((e,t)=>{var r,i,o;function s(){AP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AP(),t(Uo(n,"network-request-failed"))},timeout:b3.get()})}if(!((i=(r=rr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=rr().gapi)===null||o===void 0)&&o.load)s();else{let a=ZP("iframefcb");return rr()[a]=()=>{gapi.load?s():t(Uo(n,"network-request-failed"))},JP(`${Cq()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Ep=null,e})}var Ep=null;function D3(n){return Ep=Ep||T3(n),Ep}var C3=new Bo(5e3,15e3),S3="__/auth/iframe",A3="emulator/auth/iframe",R3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M3(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Hw(e,A3):`https://${n.config.authDomain}/${S3}`,r={apiKey:e.apiKey,appName:n.name,v:vi},i=N3.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${cu(r).slice(1)}`}function P3(n){return v(this,null,function*(){let e=yield D3(n),t=rr().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:M3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R3,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Uo(n,"network-request-failed"),a=rr().setTimeout(()=>{o(s)},C3.get());function u(){rr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var O3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x3=500,k3=600,F3="_blank",L3="http://localhost",Op=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function V3(n,e,t,r=x3,i=k3){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},O3),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ze().toLowerCase();t&&(a=zP(l)?F3:t),$P(l)&&(e=e||L3,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(Eq(l)&&a!=="_self")return j3(e||"",a),new Op(null);let p=window.open(e||"",a,h);W(p,n,"popup-blocked");try{p.focus()}catch{}return new Op(p)}function j3(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var U3="__/auth/handler",B3="emulator/auth/handler",$3=encodeURIComponent("fac");function RP(n,e,t,r,i,o){return v(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vi,eventId:i};if(e instanceof Rp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",uR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Ow){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${$3}=${encodeURIComponent(u)}`:"";return`${H3(n)}?${cu(a).slice(1)}${l}`})}function H3({config:n}){return n.emulator?Hw(n,B3):`https://${n.authDomain}/${U3}`}var Iw="webStorageSupport",Uw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yw,this._completeRedirectFn=g3,this._overrideRedirectResult=h3}_openPopup(e,t,r,i){return v(this,null,function*(){var o;Ni((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield RP(e,t,r,ww(),i);return V3(e,s,dO())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield RP(e,t,r,ww(),i);return Yq(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ni(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield P3(e),r=new jw(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Iw,{type:Iw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Iw];s!==void 0&&t(!!s),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=I3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return QP()||HP()||qw()}},yO=Uw;var NP="@firebase/auth",MP="1.10.8";var Bw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function z3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q3(n){Bt(new et("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YP(n)},l=new Rw(r,i,o,u);return Aq(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Bt(new et("auth-internal",e=>{let t=Mi(e.getProvider("auth").getImmediate());return(r=>new Bw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),at(NP,MP,z3(n)),at(NP,MP,"esm2017")}var G3=5*60,W3=S_("authIdTokenMaxAge")||G3,PP=null,K3=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>W3)return;let i=t?.token;PP!==i&&(PP=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Jw(n=To()){let e=Sn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=eO(n,{popupRedirectResolver:yO,persistence:[gO,lO,Yw]}),r=S_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=K3(o.toString());uO(t,s,()=>s(t.currentUser)),cO(t,a=>s(a))}}let i=D_("auth");return i&&tO(t,`http://${i}`),t}function Q3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Tq({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Uo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Q3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q3("Browser");var Pi={production:!1,firebase:{apiKey:"AIzaSyBO2LgH44L2i_SgV9iEwBr9sznXatAbDLY",authDomain:"database-9f5ec.firebaseapp.com",projectId:"database-9f5ec",storageBucket:"database-9f5ec.firebasestorage.app",messagingSenderId:"225913763350",appId:"1:225913763350:web:ae6008a4ecf405f0d62737",measurementId:"G-5EYMTM0X1L"}};var Y3={apiKey:Pi.firebase.apiKey,authDomain:Pi.firebase.authDomain,projectId:Pi.firebase.projectId,storageBucket:Pi.firebase.storageBucket,messagingSenderId:Pi.firebase.messagingSenderId,appId:Pi.firebase.appId,measurementId:Pi.firebase.measurementId},Zw=H_(Y3),Ho=Jw(Zw),Mn=NM(Zw),nce=yP(Zw);var Lp=class n{currentUserSubject=new Ie(null);currentUser$=this.currentUserSubject.asObservable();currentUserProfileSubject=new Ie(null);currentUserProfile$=this.currentUserProfileSubject.asObservable();constructor(){Ho.onAuthStateChanged(e=>v(this,null,function*(){if(this.currentUserSubject.next(e),e){this.updateLastLogin(e.uid);let t=yield this.getUserProfile(e.uid);this.currentUserProfileSubject.next(t)}else this.currentUserProfileSubject.next(null)}))}register(e,t,r,i){return v(this,null,function*(){try{let s=(yield Gw(Ho,e,t)).user;if(r||i){let a=`${r||""} ${i||""}`.trim();yield Kw(s,{displayName:a})}return yield this.saveUserProfile(s,r,i),s}catch(o){throw new Error(this.getErrorMessage(o.code))}})}signIn(e,t){return v(this,null,function*(){try{return(yield Ww(Ho,e,t)).user}catch(r){throw new Error(this.getErrorMessage(r.code))}})}signOut(){return v(this,null,function*(){try{yield Qw(Ho)}catch{throw new Error("Sign out failed")}})}saveUserProfile(e,t,r){return v(this,null,function*(){let i={uid:e.uid,email:e.email,displayName:e.displayName||void 0,firstName:t,lastName:r,role:"user",createdAt:new Date,lastLoginAt:new Date,preferences:{favoriteGenres:[],newsletter:!1}};yield Si(Nn(Mn,"users",e.uid),i)})}updateLastLogin(e){return v(this,null,function*(){try{let t=Nn(Mn,"users",e);(yield Ou(t)).exists()&&(yield Si(t,{lastLoginAt:new Date},{merge:!0}))}catch(t){console.error("Error updating last login:",t)}})}getUserProfile(e){return v(this,null,function*(){try{let t=Nn(Mn,"users",e),r=yield Ou(t);return r.exists()?r.data():null}catch(t){return console.error("Error getting user profile:",t),null}})}updateUserProfile(e,t){return v(this,null,function*(){try{let r=Nn(Mn,"users",e);yield Si(r,t,{merge:!0})}catch(r){throw console.error("Error updating user profile:",r),new Error("Failed to update profile")}})}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return!!this.currentUserSubject.value}isAdmin(){return this.currentUserProfileSubject.value?.role==="admin"}getCurrentUserProfile(){return this.currentUserProfileSubject.value}promoteToAdmin(e){return v(this,null,function*(){try{let t=Nn(Mn,"users",e);if(yield Si(t,{role:"admin"},{merge:!0}),e===this.getCurrentUser()?.uid){let r=yield this.getUserProfile(e);this.currentUserProfileSubject.next(r)}}catch(t){throw console.error("Error promoting user to admin:",t),new Error("Failed to promote user to admin")}})}demoteFromAdmin(e){return v(this,null,function*(){try{let t=Nn(Mn,"users",e);if(yield Si(t,{role:"user"},{merge:!0}),e===this.getCurrentUser()?.uid){let r=yield this.getUserProfile(e);this.currentUserProfileSubject.next(r)}}catch(t){throw console.error("Error demoting user from admin:",t),new Error("Failed to demote user from admin")}})}sendPasswordReset(e){return v(this,null,function*(){try{yield kp(Ho,e)}catch(t){throw new Error(this.getErrorMessage(t.code))}})}getErrorMessage(e){switch(e){case"auth/user-not-found":return"No user found with this email address.";case"auth/wrong-password":return"Incorrect password.";case"auth/email-already-in-use":return"This email address is already registered.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Invalid email address format.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"An error occurred. Please try again."}}sendPasswordResetEmail(e){return v(this,null,function*(){try{yield kp(Ho,e)}catch(t){throw t}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vp=class n{notifications=[];notificationsSubject=new Ie([]);notifications$=this.notificationsSubject.asObservable();show(e){let t=this.generateId(),r=P({id:t,duration:5e3},e);return this.notifications.push(r),this.notificationsSubject.next([...this.notifications]),!r.persistent&&r.duration&&setTimeout(()=>{this.hide(t)},r.duration),t}hide(e){this.notifications=this.notifications.filter(t=>t.id!==e),this.notificationsSubject.next([...this.notifications])}clearAll(){this.notifications=[],this.notificationsSubject.next([])}success(e,t,r){return this.show({type:"success",title:e,message:t,duration:r})}info(e,t,r){return this.show({type:"info",title:e,message:t,duration:r})}warning(e,t,r){return this.show({type:"warning",title:e,message:t,duration:r})}error(e,t,r){return this.show({type:"error",title:e,message:t,persistent:r})}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var vO=class n{constructor(e,t){this.authService=e;this.notificationService=t;this.initializeCart(),this.setupAuthListener()}cartItems=[];cartSubject=new Ie([]);CART_STORAGE_KEY="readify_cart";cart$=this.cartSubject.asObservable();initializeCart(){return v(this,null,function*(){this.loadCartFromLocalStorage();let e=this.authService.getCurrentUser();e&&(yield this.syncCartWithFirebase(e.uid))})}setupAuthListener(){this.authService.currentUser$.subscribe(e=>v(this,null,function*(){e?(this.cartItems.length>0&&this.notificationService.info("Cart Sync","Syncing your cart with your account...",2e3),yield this.syncCartWithFirebase(e.uid)):(this.cartItems.length>0&&this.notificationService.info("Signed Out","Cart saved locally. Sign in to sync across devices.",4e3),yield this.handleUserLogout())}))}syncCartWithFirebase(e){return v(this,null,function*(){try{let t=yield this.loadCartFromFirebase(e),r=this.cartItems,i=r.length>0,o=t.length>0,s=[...t],a=0;r.forEach(u=>{t.some(h=>h.book.id===u.book.id)||(s.push(u),a++)}),this.cartItems=s,this.cartSubject.next([...this.cartItems]),s.length>0&&(yield this.saveCartToFirebase(e)),localStorage.removeItem(this.CART_STORAGE_KEY),o&&i&&a>0?this.notificationService.success("Cart Merged",`Added ${a} local items to your account cart.`,3e3):o&&!i&&this.notificationService.success("Cart Restored",`Restored ${t.length} items from your account.`,3e3)}catch(t){console.error("Error syncing cart with Firebase:",t),this.loadCartFromLocalStorage()}})}handleUserLogout(){return v(this,null,function*(){this.saveCartToLocalStorage()})}addToCart(e,t=1){return v(this,null,function*(){let r=this.cartItems.find(i=>i.book.id===e.id);if(r)r.quantity+=t;else{let i={book:e,quantity:t,addedAt:new Date};this.cartItems.push(i)}yield this.updateCart()})}removeFromCart(e){return v(this,null,function*(){this.cartItems=this.cartItems.filter(t=>t.book.id!==e),yield this.updateCart()})}updateQuantity(e,t){return v(this,null,function*(){let r=this.cartItems.find(i=>i.book.id===e);r&&(t<=0?yield this.removeFromCart(e):(r.quantity=t,yield this.updateCart()))})}clearCart(){return v(this,null,function*(){this.cartItems=[],yield this.updateCart()})}getTotalItems(){return this.cartItems.reduce((e,t)=>e+t.quantity,0)}getTotalPrice(){return this.cartItems.reduce((e,t)=>e+t.book.price*t.quantity,0)}isInCart(e){return this.cartItems.some(t=>t.book.id===e)}getBookQuantity(e){let t=this.cartItems.find(r=>r.book.id===e);return t?t.quantity:0}updateCart(){return v(this,null,function*(){this.cartSubject.next([...this.cartItems]);let e=this.authService.getCurrentUser();e?yield this.saveCartToFirebase(e.uid):this.saveCartToLocalStorage()})}saveCartToFirebase(e){return v(this,null,function*(){try{let t=Nn(Mn,"carts",e),r={items:this.cartItems,updatedAt:new Date,totalItems:this.getTotalItems(),totalPrice:this.getTotalPrice()};yield Si(t,r)}catch(t){console.error("Error saving cart to Firebase:",t),this.saveCartToLocalStorage()}})}loadCartFromFirebase(e){return v(this,null,function*(){try{let t=Nn(Mn,"carts",e),r=yield Ou(t);return r.exists()?r.data().items||[]:[]}catch(t){return console.error("Error loading cart from Firebase:",t),[]}})}deleteCartFromFirebase(e){return v(this,null,function*(){try{let t=Nn(Mn,"carts",e);yield jM(t)}catch(t){console.error("Error deleting cart from Firebase:",t)}})}saveCartToLocalStorage(){try{localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(this.cartItems))}catch(e){console.error("Error saving cart to localStorage:",e)}}loadCartFromLocalStorage(){try{let e=localStorage.getItem(this.CART_STORAGE_KEY);e&&(this.cartItems=JSON.parse(e),this.cartSubject.next([...this.cartItems]))}catch(e){console.error("Error loading cart from localStorage:",e),this.cartItems=[]}}static \u0275fac=function(t){return new(t||n)(B(Lp),B(Vp))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var RO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(q(In),q(At))};static \u0275dir=ye({type:n})}return n})(),Qu=(()=>{class n extends RO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,features:[qe]})}return n})(),qo=new U(""),X3={provide:qo,useExisting:Ye(()=>eG),multi:!0},eG=(()=>{class n extends Qu{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Rt("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Nt([X3]),qe]})}return n})(),tG={provide:qo,useExisting:Ye(()=>NO),multi:!0};function nG(){let n=ln()?ln().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var rG=new U(""),NO=(()=>{class n extends RO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!nG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(q(In),q(At),q(rG,8))};static \u0275dir=ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Rt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Nt([tG]),qe]})}return n})();function nb(n){return n==null||rb(n)===0}function rb(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var xi=new U(""),Yp=new U(""),iG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_O=class{static min(e){return MO(e)}static max(e){return PO(e)}static required(e){return OO(e)}static requiredTrue(e){return oG(e)}static email(e){return sG(e)}static minLength(e){return xO(e)}static maxLength(e){return aG(e)}static pattern(e){return cG(e)}static nullValidator(e){return Up()}static compose(e){return UO(e)}static composeAsync(e){return BO(e)}};function MO(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function PO(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function OO(n){return nb(n.value)?{required:!0}:null}function oG(n){return n.value===!0?null:{required:!0}}function sG(n){return nb(n.value)||iG.test(n.value)?null:{email:!0}}function xO(n){return e=>{let t=e.value?.length??rb(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function aG(n){return e=>{let t=e.value?.length??rb(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function cG(n){if(!n)return Up;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(nb(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Up(n){return null}function kO(n){return n!=null}function FO(n){return wr(n)?be(n):n}function LO(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function VO(n,e){return e.map(t=>t(n))}function uG(n){return!n.validate}function jO(n){return n.map(e=>uG(e)?e:t=>e.validate(t))}function UO(n){if(!n)return null;let e=n.filter(kO);return e.length==0?null:function(t){return LO(VO(t,e))}}function ib(n){return n!=null?UO(jO(n)):null}function BO(n){if(!n)return null;let e=n.filter(kO);return e.length==0?null:function(t){let r=VO(t,e).map(FO);return Lg(r).pipe(J(LO))}}function ob(n){return n!=null?BO(jO(n)):null}function EO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $O(n){return n._rawValidators}function HO(n){return n._rawAsyncValidators}function Xw(n){return n?Array.isArray(n)?n:[n]:[]}function Bp(n,e){return Array.isArray(n)?n.includes(e):n===e}function IO(n,e){let t=Xw(e);return Xw(n).forEach(i=>{Bp(t,i)||t.push(i)}),t}function wO(n,e){return Xw(e).filter(t=>!Bp(n,t))}var $p=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ib(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ob(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},$r=class extends $p{name;get formDirective(){return null}get path(){return null}},zo=class extends $p{_parent=null;name=null;valueAccessor=null},Hp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Lce=Y(P({},lG),{"[class.ng-submitted]":"isSubmitted"}),Vce=(()=>{class n extends Hp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(zo,2))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Tr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[qe]})}return n})(),jce=(()=>{class n extends Hp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q($r,10))};static \u0275dir=ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Tr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[qe]})}return n})();var Hu="VALID",jp="INVALID",wa="PENDING",zu="DISABLED",Oi=class{},zp=class extends Oi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Gu=class extends Oi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Wu=class extends Oi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ba=class extends Oi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},qp=class extends Oi{source;constructor(e){super(),this.source=e}},Gp=class extends Oi{source;constructor(e){super(),this.source=e}};function sb(n){return(Jp(n)?n.validators:n)||null}function dG(n){return Array.isArray(n)?ib(n):n||null}function ab(n,e){return(Jp(e)?e.asyncValidators:n)||null}function hG(n){return Array.isArray(n)?ob(n):n||null}function Jp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function zO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[t])throw new V(1001,"")}function qO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new V(1002,"")})}var Ta=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Mt(this.statusReactive)}set status(e){Mt(()=>this.statusReactive.set(e))}_status=go(()=>this.statusReactive());statusReactive=jn(void 0);get valid(){return this.status===Hu}get invalid(){return this.status===jp}get pending(){return this.status==wa}get disabled(){return this.status===zu}get enabled(){return this.status!==zu}errors;get pristine(){return Mt(this.pristineReactive)}set pristine(e){Mt(()=>this.pristineReactive.set(e))}_pristine=go(()=>this.pristineReactive());pristineReactive=jn(!0);get dirty(){return!this.pristine}get touched(){return Mt(this.touchedReactive)}set touched(e){Mt(()=>this.touchedReactive.set(e))}_touched=go(()=>this.touchedReactive());touchedReactive=jn(!1);get untouched(){return!this.touched}_events=new xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(IO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(IO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wO(e,this._rawAsyncValidators))}hasValidator(e){return Bp(this._rawValidators,e)}hasAsyncValidator(e){return Bp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Y(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Wu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Wu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Y(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Gu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Gu(!0,r))}markAsPending(e={}){this.status=wa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ba(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Y(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=zu,this.errors=null,this._forEachChild(i=>{i.disable(Y(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zp(this.value,r)),this._events.next(new ba(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hu,this._forEachChild(r=>{r.enable(Y(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Y(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hu||this.status===wa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zp(this.value,t)),this._events.next(new ba(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Y(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zu:Hu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=wa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=FO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ba(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Re,this.statusChanges=new Re}_calculateStatus(){return this._allControlsDisabled()?zu:this.errors?jp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wa)?wa:this._anyControlsHaveStatus(jp)?jp:Hu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Gu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Wu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=dG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=hG(this._rawAsyncValidators)}},Da=class extends Ta{constructor(e,t,r){super(sb(t),ab(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){qO(this,!0,e),Object.keys(e).forEach(r=>{zO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var eb=class extends Da{};var Yu=new U("",{providedIn:"root",factory:()=>Zp}),Zp="always";function GO(n,e){return[...e.path,n]}function Wp(n,e,t=Zp){cb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),pG(n,e),mG(n,e),gG(n,e),fG(n,e)}function bO(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Qp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Kp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function cb(n,e){let t=$O(n);e.validator!==null?n.setValidators(EO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=HO(n);e.asyncValidator!==null?n.setAsyncValidators(EO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Kp(e._rawValidators,i),Kp(e._rawAsyncValidators,i)}function Qp(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=$O(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=HO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Kp(e._rawValidators,r),Kp(e._rawAsyncValidators,r),t}function pG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&WO(n,e)})}function gG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&WO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function WO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function KO(n,e){n==null,cb(n,e)}function yG(n,e){return Qp(n,e)}function QO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function vG(n){return Object.getPrototypeOf(n.constructor)===Qu}function YO(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function JO(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===NO?t=o:vG(o)?r=o:i=o}),i||r||t||null}function _G(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var EG={provide:$r,useExisting:Ye(()=>IG)},qu=Promise.resolve(),IG=(()=>{class n extends $r{callSetDisabledState;get submitted(){return Mt(this.submittedReactive)}_submitted=go(()=>this.submittedReactive());submittedReactive=jn(!1);_directives=new Set;form;ngSubmit=new Re;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Da({},ib(t),ob(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){qu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Wp(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){qu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){qu.then(()=>{let r=this._findContainer(t.path),i=new Da({});KO(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){qu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){qu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),YO(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new qp(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Gp(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(q(xi,10),q(Yp,10),q(Yu,8))};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Rt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Nt([EG]),qe]})}return n})();function TO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function DO(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ku=class extends Ta{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(sb(t),ab(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(DO(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){TO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){TO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){DO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wG=n=>n instanceof Ku;var bG={provide:zo,useExisting:Ye(()=>TG)},CO=Promise.resolve(),TG=(()=>{class n extends zo{_changeDetectorRef;callSetDisabledState;control=new Ku;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Re;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=JO(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),QO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Wp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){CO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ci(r);CO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?GO(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(q($r,9),q(xi,10),q(Yp,10),q(qo,10),q(Dr,8),q(Yu,8))};static \u0275dir=ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Nt([bG]),qe,sn]})}return n})();var Bce=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),DG={provide:qo,useExisting:Ye(()=>CG),multi:!0},CG=(()=>{class n extends Qu{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Rt("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Nt([DG]),qe]})}return n})();var ZO=new U("");var SG={provide:$r,useExisting:Ye(()=>AG)},AG=(()=>{class n extends $r{callSetDisabledState;get submitted(){return Mt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=go(()=>this._submittedReactive());_submittedReactive=jn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Re;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Wp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){bO(t.control||null,t,!1),_G(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),YO(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new qp(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new Gp(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(bO(r||null,t),wG(i)&&(Wp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);KO(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&yG(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){cb(this.form,this),this._oldForm&&Qp(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(q(xi,10),q(Yp,10),q(Yu,8))};static \u0275dir=ye({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Rt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Nt([SG]),qe,sn]})}return n})();var RG={provide:zo,useExisting:Ye(()=>NG)},NG=(()=>{class n extends zo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Re;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=JO(this,o)}ngOnChanges(t){this._added||this._setUpControl(),QO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return GO(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(q($r,13),q(xi,10),q(Yp,10),q(qo,10),q(ZO,8))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Nt([RG]),qe,sn]})}return n})();var MG={provide:qo,useExisting:Ye(()=>ex),multi:!0};function XO(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function PG(n){return n.split(":")[0]}var ex=(()=>{class n extends Qu{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=XO(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=PG(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Rt("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Nt([MG]),qe]})}return n})(),$ce=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(XO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(q(At),q(In),q(ex,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),OG={provide:qo,useExisting:Ye(()=>tx),multi:!0};function SO(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function xG(n){return n.split(":")[0]}var tx=(()=>{class n extends Qu{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=xG(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Rt("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Nt([OG]),qe]})}return n})(),Hce=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(SO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(SO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(q(At),q(In),q(tx,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function kG(n){return typeof n=="number"?n:parseInt(n,10)}function nx(n){return typeof n=="number"?n:parseFloat(n)}var Xp=(()=>{class n{_validator=Up;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Up,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,features:[sn]})}return n})(),FG={provide:xi,useExisting:Ye(()=>LG),multi:!0},LG=(()=>{class n extends Xp{max;inputName="max";normalizeInput=t=>nx(t);createValidator=t=>PO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&br("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Nt([FG]),qe]})}return n})(),VG={provide:xi,useExisting:Ye(()=>jG),multi:!0},jG=(()=>{class n extends Xp{min;inputName="min";normalizeInput=t=>nx(t);createValidator=t=>MO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&br("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Nt([VG]),qe]})}return n})(),UG={provide:xi,useExisting:Ye(()=>BG),multi:!0};var BG=(()=>{class n extends Xp{required;inputName="required";normalizeInput=ci;createValidator=t=>OO;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&br("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Nt([UG]),qe]})}return n})();var $G={provide:xi,useExisting:Ye(()=>HG),multi:!0},HG=(()=>{class n extends Xp{minlength;inputName="minlength";normalizeInput=t=>kG(t);createValidator=t=>xO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=jt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&br("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Nt([$G]),qe]})}return n})();var rx=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=cn({type:n});static \u0275inj=qt({})}return n})(),tb=class extends Ta{constructor(e,t,r){super(sb(t),ab(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){qO(this,!1,e),e.forEach((r,i)=>{zO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function AO(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var zce=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return AO(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Da(i,o)}record(t,r=null){let i=this._reduceControls(t);return new eb(i,r)}control(t,r,i){let o={};return this.useNonNullable?(AO(r)?o=r:(o.validators=r,o.asyncValidators=i),new Ku(t,Y(P({},o),{nonNullable:!0}))):new Ku(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new tb(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Ku)return t;if(t instanceof Ta)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Yu,useValue:t.callSetDisabledState??Zp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=cn({type:n});static \u0275inj=qt({imports:[rx]})}return n})(),Gce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ZO,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Yu,useValue:t.callSetDisabledState??Zp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=cn({type:n});static \u0275inj=qt({imports:[rx]})}return n})();function zG(n,e){n&1&&si(0,"i",14)}function qG(n,e){if(n&1){let t=dv();un(0,"button",10),Rt("click",function(){let i=md(t).$implicit,o=Rc(2);return yd(o.selectCurrency(i.code))}),un(1,"span",4),po(2),Wt(),un(3,"span",11)(4,"span",5),po(5),Wt(),un(6,"span",12),po(7),Wt()(),Ss(8,zG,1,0,"i",13),Wt()}if(n&2){let t=e.$implicit,r=Rc(2);Tr("active",t.code===r.currentCurrency.code),an(2),ai(t.symbol),an(3),ai(t.code),an(2),ai(t.name),an(),As("ngIf",t.code===r.currentCurrency.code)}}function GG(n,e){if(n&1&&(un(0,"div",8),Ss(1,qG,9,6,"button",9),Wt()),n&2){let t=Rc();an(),As("ngForOf",t.currencies)}}var ix=class n{constructor(e){this.pricingService=e}currencies=[];currentCurrency={code:"USD",symbol:"$",name:"US Dollar",rate:1};isOpen=!1;subscription=new De;ngOnInit(){this.currencies=this.pricingService.getCurrencies(),this.subscription.add(this.pricingService.currency$.subscribe(e=>{this.currentCurrency=e})),document.addEventListener("click",this.closeDropdown.bind(this))}ngOnDestroy(){this.subscription.unsubscribe(),document.removeEventListener("click",this.closeDropdown.bind(this))}toggleDropdown(){this.isOpen=!this.isOpen}selectCurrency(e){this.pricingService.setCurrency(e),this.isOpen=!1}closeDropdown(e){e.target.closest(".currency-selector")||(this.isOpen=!1)}static \u0275fac=function(t){return new(t||n)(q(gi))};static \u0275cmp=Cc({type:n,selectors:[["app-currency-selector"]],decls:10,vars:7,consts:[[1,"currency-selector"],[1,"currency-dropdown"],[1,"currency-toggle",3,"click"],[1,"fas","fa-coins",2,"color","#ffd700","margin-right","4px"],[1,"currency-symbol"],[1,"currency-code"],[1,"fas","fa-chevron-down"],["class","currency-options",4,"ngIf"],[1,"currency-options"],["class","currency-option",3,"active","click",4,"ngFor","ngForOf"],[1,"currency-option",3,"click"],[1,"currency-info"],[1,"currency-name"],["class","fas fa-check",4,"ngIf"],[1,"fas","fa-check"]],template:function(t,r){t&1&&(un(0,"div",0)(1,"div",1)(2,"button",2),Rt("click",function(){return r.toggleDropdown()}),si(3,"i",3),un(4,"span",4),po(5),Wt(),un(6,"span",5),po(7),Wt(),si(8,"i",6),Wt(),Ss(9,GG,2,1,"div",7),Wt()()),t&2&&(an(),Tr("open",r.isOpen),an(4),ai(r.currentCurrency.symbol),an(2),ai(r.currentCurrency.code),an(),Tr("rotated",r.isOpen),an(),As("ngIf",r.isOpen))},dependencies:[Ih,Eh,Nv],styles:[".currency-selector[_ngcontent-%COMP%]{position:relative;z-index:1000}.currency-dropdown[_ngcontent-%COMP%]{position:relative}.currency-toggle[_ngcontent-%COMP%]{background:#667eea;border:1px solid #5a67d8;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:.9rem;transition:all .3s ease;box-shadow:0 2px 4px #0000001a}.currency-toggle[_ngcontent-%COMP%]:hover{background:#5a67d8;border-color:#4c51bf;transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.currency-toggle[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #0000001a}.currency-toggle[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:gold}.currency-toggle[_ngcontent-%COMP%]   .currency-code[_ngcontent-%COMP%]{font-size:.8rem;opacity:.95}.currency-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.7rem;transition:transform .3s ease}.currency-toggle[_ngcontent-%COMP%]   i.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.currency-options[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #e2e8f0;border-radius:12px;box-shadow:0 10px 25px #00000026;min-width:200px;overflow:hidden;margin-top:8px;animation:_ngcontent-%COMP%_slideDown .2s ease;z-index:1001}.currency-option[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:none;background:#fff;cursor:pointer;display:flex;align-items:center;gap:12px;transition:background-color .2s ease;color:#333}.currency-option[_ngcontent-%COMP%]:hover{background:#f7fafc;color:#667eea}.currency-option.active[_ngcontent-%COMP%]{background:#667eea;color:#fff}.currency-option.active[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{color:gold}.currency-option.active[_ngcontent-%COMP%]   .currency-code[_ngcontent-%COMP%], .currency-option.active[_ngcontent-%COMP%]   .currency-name[_ngcontent-%COMP%]{color:#fff}.currency-option[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;width:20px;text-align:center}.currency-option[_ngcontent-%COMP%]   .currency-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:flex-start;gap:2px}.currency-option[_ngcontent-%COMP%]   .currency-code[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem}.currency-option[_ngcontent-%COMP%]   .currency-name[_ngcontent-%COMP%]{font-size:.8rem;color:#666}.currency-option[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4caf50;font-size:.9rem}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.header[_nghost-%COMP%]   .currency-toggle[_ngcontent-%COMP%], .header   [_nghost-%COMP%]   .currency-toggle[_ngcontent-%COMP%]{background:#0000001a;border-color:#0003;color:#333}.header[_nghost-%COMP%]   .currency-toggle[_ngcontent-%COMP%]:hover, .header   [_nghost-%COMP%]   .currency-toggle[_ngcontent-%COMP%]:hover{background:#00000026}"]})};export{P as a,Y as b,v as c,xe as d,J as e,ht as f,Jx as g,lr as h,Zx as i,L as j,qt as k,B as l,M as m,md as n,yd as o,Qk as p,Ts as q,GC as r,j1 as s,an as t,q as u,Cc as v,cn as w,nv as x,Ss as y,br as z,As as A,un as B,Wt as C,si as D,dv as E,Rt as F,Rc as G,gV as H,WS as I,Tr as J,CV as K,po as L,ai as M,gv as N,XS as O,t0 as P,UV as Q,n0 as R,qV as S,GV as T,KV as U,YV as V,ZV as W,ej as X,Eh as Y,Nv as Z,Fj as _,Ih as $,lre as aa,Zj as ba,D2 as ca,C2 as da,Yt as ea,Wn as fa,d_ as ga,Cn as ha,cf as ia,rB as ja,sB as ka,aB as la,gi as ma,uf as na,KA as oa,Lp as pa,Vp as qa,vO as ra,eG as sa,NO as ta,_O as ua,Vce as va,jce as wa,IG as xa,TG as ya,Bce as za,CG as Aa,AG as Ba,NG as Ca,ex as Da,$ce as Ea,Hce as Fa,LG as Ga,jG as Ha,BG as Ia,HG as Ja,zce as Ka,qce as La,Gce as Ma,ix as Na};
