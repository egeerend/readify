var Px=Object.defineProperty,Ox=Object.defineProperties;var xx=Object.getOwnPropertyDescriptors;var WT=Object.getOwnPropertySymbols,kx=Object.getPrototypeOf,Fx=Object.prototype.hasOwnProperty,Lx=Object.prototype.propertyIsEnumerable,Vx=Reflect.get;var KT=(n,e,t)=>e in n?Px(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,x=(n,e)=>{for(var t in e||={})Fx.call(e,t)&&KT(n,t,e[t]);if(WT)for(var t of WT(e))Lx.call(e,t)&&KT(n,t,e[t]);return n},J=(n,e)=>Ox(n,xx(e));var qr=(n,e,t)=>Vx(kx(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function X(n){return typeof n=="function"}function zo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var nl=zo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function xi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Me=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof nl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{QT(o)}catch(s){e=e??[],s instanceof nl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new nl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)QT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xi(t,e)}remove(e){let{_finalizers:t}=this;t&&xi(t,e),e instanceof n&&e._removeParent(this)}};Me.EMPTY=(()=>{let n=new Me;return n.closed=!0,n})();var lg=Me.EMPTY;function rl(n){return n instanceof Me||n&&"closed"in n&&X(n.remove)&&X(n.add)&&X(n.unsubscribe)}function QT(n){X(n)?n():n.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Go={setTimeout(n,e,...t){let{delegate:r}=Go;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Go;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function il(n){Go.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(n);else throw n})}function Va(){}var YT=dg("C",void 0,void 0);function JT(n){return dg("E",void 0,n)}function ZT(n){return dg("N",n,void 0)}function dg(n,e,t){return{kind:n,value:e,error:t}}var ki=null;function Wo(n){if(un.useDeprecatedSynchronousErrorHandling){let e=!ki;if(e&&(ki={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ki;if(ki=null,t)throw r}}else n()}function XT(n){un.useDeprecatedSynchronousErrorHandling&&ki&&(ki.errorThrown=!0,ki.error=n)}var Fi=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,rl(e)&&e.add(this)):this.destination=Bx}static create(e,t,r){return new Ko(e,t,r)}next(e){this.isStopped?fg(ZT(e),this):this._next(e)}error(e){this.isStopped?fg(JT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fg(YT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jx=Function.prototype.bind;function hg(n,e){return jx.call(n,e)}var pg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ol(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ol(r)}else ol(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ol(t)}}},Ko=class extends Fi{constructor(e,t,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hg(e.next,o),error:e.error&&hg(e.error,o),complete:e.complete&&hg(e.complete,o)}):i=e}this.destination=new pg(i)}};function ol(n){un.useDeprecatedSynchronousErrorHandling?XT(n):il(n)}function Ux(n){throw n}function fg(n,e){let{onStoppedNotification:t}=un;t&&Go.setTimeout(()=>t(n,e))}var Bx={closed:!0,next:Va,error:Ux,complete:Va};var Qo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(n){return n}function gg(...n){return mg(n)}function mg(n){return n.length===0?wt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Hx(t)?t:new Ko(t,r,i);return Wo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=eD(r),new r((i,o)=>{let s=new Ko({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qo](){return this}pipe(...t){return mg(t)(this)}toPromise(t){return t=eD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function eD(n){var e;return(e=n??un.Promise)!==null&&e!==void 0?e:Promise}function $x(n){return n&&X(n.next)&&X(n.error)&&X(n.complete)}function Hx(n){return n&&n instanceof Fi||$x(n)&&rl(n)}var tD=zo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new sl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new tD}next(t){Wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?lg:(this.currentObservers=null,o.push(t),new Me(()=>{this.currentObservers=null,xi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new sl(e,t),n})(),sl=class extends xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:lg}};function yg(n){return X(n?.lift)}function ue(n){return e=>{if(yg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new vg(n,e,t,r,i)}var vg=class extends Fi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ht(n,e){return ue((t,r)=>{let i=0;t.subscribe(oe(r,o=>n.call(e,o,i++)&&r.next(o)))})}var al=class extends Me{constructor(e,t){super()}schedule(e,t=0){return this}};var ja={setInterval(n,e,...t){let{delegate:r}=ja;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ja;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var cl=class extends al{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ja.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ja.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var _g={now(){return(_g.delegate||Date).now()},delegate:void 0};var Yo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Yo.now=_g.now;var ul=class extends Yo{constructor(e,t=Yo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var nD=new ul(cl);function qx(n,e=nD){return ue((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(oe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function zx(n,e=wt){return n=n??Gx,ue((t,r)=>{let i,o=!0;t.subscribe(oe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Gx(n,e){return n===e}function Jo(){return ue((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Zo=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,yg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return Jo()(this)}};var Le=class extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mt=new ce(n=>n.complete());function rD(n){return n&&X(n.schedule)}function iD(n){return n[n.length-1]}function ll(n){return X(iD(n))?n.pop():void 0}function zr(n){return rD(iD(n))?n.pop():void 0}function Eg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function sD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function oD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Li(n){return this instanceof Li?(this.v=n,this):new Li(n)}function aD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,k){o.push([y,N,R,k])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof Li?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function cD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof oD=="function"?oD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var dl=n=>n&&typeof n.length=="number"&&typeof n!="function";function hl(n){return X(n?.then)}function fl(n){return X(n[Qo])}function pl(n){return Symbol.asyncIterator&&X(n?.[Symbol.asyncIterator])}function gl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Wx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ml=Wx();function yl(n){return X(n?.[ml])}function vl(n){return aD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Li(t.read());if(i)return yield Li(void 0);yield yield Li(r)}}finally{t.releaseLock()}})}function _l(n){return X(n?.getReader)}function Ve(n){if(n instanceof ce)return n;if(n!=null){if(fl(n))return Kx(n);if(dl(n))return Qx(n);if(hl(n))return Yx(n);if(pl(n))return uD(n);if(yl(n))return Jx(n);if(_l(n))return Zx(n)}throw gl(n)}function Kx(n){return new ce(e=>{let t=n[Qo]();if(X(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Qx(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Yx(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,il)})}function Jx(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function uD(n){return new ce(e=>{Xx(n,e).catch(t=>e.error(t))})}function Zx(n){return uD(vl(n))}function Xx(n,e){var t,r,i,o;return sD(this,void 0,void 0,function*(){try{for(t=cD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function El(n,e=0){return ue((t,r)=>{t.subscribe(oe(r,i=>Pt(r,n,()=>r.next(i),e),()=>Pt(r,n,()=>r.complete(),e),i=>Pt(r,n,()=>r.error(i),e)))})}function Il(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function lD(n,e){return Ve(n).pipe(Il(e),El(e))}function dD(n,e){return Ve(n).pipe(Il(e),El(e))}function hD(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function fD(n,e){return new ce(t=>{let r;return Pt(t,e,()=>{r=n[ml](),Pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function wl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{Pt(t,e,()=>{let r=n[Symbol.asyncIterator]();Pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function pD(n,e){return wl(vl(n),e)}function gD(n,e){if(n!=null){if(fl(n))return lD(n,e);if(dl(n))return hD(n,e);if(hl(n))return dD(n,e);if(pl(n))return wl(n,e);if(yl(n))return fD(n,e);if(_l(n))return pD(n,e)}throw gl(n)}function we(n,e){return e?gD(n,e):Ve(n)}function G(...n){let e=zr(n);return we(n,e)}function Xo(n,e){let t=X(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function Ig(n){return!!n&&(n instanceof ce||X(n.lift)&&X(n.subscribe))}var or=zo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function te(n,e){return ue((t,r)=>{let i=0;t.subscribe(oe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:ek}=Array;function tk(n,e){return ek(e)?n(...e):n(e)}function Tl(n){return te(e=>tk(n,e))}var{isArray:nk}=Array,{getPrototypeOf:rk,prototype:ik,keys:ok}=Object;function Dl(n){if(n.length===1){let e=n[0];if(nk(e))return{args:e,keys:null};if(sk(e)){let t=ok(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function sk(n){return n&&typeof n=="object"&&rk(n)===ik}function bl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ua(...n){let e=zr(n),t=ll(n),{args:r,keys:i}=Dl(n);if(r.length===0)return we([],e);let o=new ce(ak(r,e,i?s=>bl(i,s):wt));return t?o.pipe(Tl(t)):o}function ak(n,e,t=wt){return r=>{mD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)mD(e,()=>{let l=we(n[u],e),h=!1;l.subscribe(oe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function mD(n,e,t){n?Pt(t,n,e):e()}function yD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;Ve(t(N,h++)).subscribe(oe(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?Pt(e,s,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return n.subscribe(oe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function ke(n,e,t=1/0){return X(e)?ke((r,i)=>te((o,s)=>e(r,o,i,s))(Ve(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>yD(r,i,n,t)))}function Gr(n=1/0){return ke(wt,n)}function vD(){return Gr(1)}function es(...n){return vD()(we(n,zr(n)))}function Ba(n){return new ce(e=>{Ve(n()).subscribe(e)})}function wg(...n){let e=ll(n),{args:t,keys:r}=Dl(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ve(t[h]).subscribe(oe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?bl(r,a):a),o.complete())}))}});return e?i.pipe(Tl(e)):i}function Cn(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(oe(t,void 0,void 0,s=>{o=Ve(n(s,Cn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function _D(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(oe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Sn(n,e){return X(e)?ke(n,e,1):ke(n,1)}function Wr(n){return ue((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sr(n){return n<=0?()=>Mt:ue((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Cl(n=ck){return ue((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ck(){return new or}function Vi(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ar(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ht((i,o)=>n(i,o,r)):wt,sr(1),t?Wr(e):Cl(()=>new or))}function ts(n){return n<=0?()=>Mt:ue((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Tg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ht((i,o)=>n(i,o,r)):wt,ts(1),t?Wr(e):Cl(()=>new or))}function Dg(n,e){return ue(_D(n,e,arguments.length>=2,!0))}function bg(...n){let e=zr(n);return ue((t,r)=>{(e?es(n,t,e):es(n,t)).subscribe(r)})}function Tt(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,h=o++;Ve(n(u,h)).subscribe(i=oe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Sl(n){return ue((e,t)=>{Ve(n).subscribe(oe(t,()=>t.complete(),Va)),!t.closed&&e.subscribe(t)})}function Qe(n,e,t){let r=X(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var Cg;function Sg(){return Cg}function cr(n){let e=Cg;return Cg=n,e}var uk=Symbol("NotFound"),Al=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function ns(n){return n===uk||n?.name==="\u0275NotFound"}function Ol(n,e){return Object.is(n,e)}var qe=null,Rl=!1,Ag=1,lk=null,ft=Symbol("SIGNAL");function ie(n){let e=qe;return qe=n,e}function xl(){return qe}var ji={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function rs(n){if(Rl)throw new Error("");if(qe===null)return;qe.consumerOnSignalRead(n);let e=qe.nextProducerIndex++;if(Vl(qe),e<qe.producerNode.length&&qe.producerNode[e]!==n&&Ha(qe)){let t=qe.producerNode[e];Ll(t,qe.producerIndexOfThis[e])}qe.producerNode[e]!==n&&(qe.producerNode[e]=n,qe.producerIndexOfThis[e]=Ha(qe)?ID(n,qe,e):0),qe.producerLastReadVersion[e]=n.version}function ED(){Ag++}function kl(n){if(!(Ha(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ag)){if(!n.producerMustRecompute(n)&&!qa(n)){Pl(n);return}n.producerRecomputeValue(n),Pl(n)}}function Rg(n){if(n.liveConsumerNode===void 0)return;let e=Rl;Rl=!0;try{for(let t of n.liveConsumerNode)t.dirty||dk(t)}finally{Rl=e}}function Ng(){return qe?.consumerAllowSignalWrites!==!1}function dk(n){n.dirty=!0,Rg(n),n.consumerMarkedDirty?.(n)}function Pl(n){n.dirty=!1,n.lastCleanEpoch=Ag}function Ui(n){return n&&(n.nextProducerIndex=0),ie(n)}function is(n,e){if(ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ha(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ll(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qa(n){Vl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(kl(t),r!==t.version))return!0}return!1}function Fl(n){if(Vl(n),Ha(n))for(let e=0;e<n.producerNode.length;e++)Ll(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ID(n,e,t){if(wD(n),n.liveConsumerNode.length===0&&TD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=ID(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ll(n,e){if(wD(n),n.liveConsumerNode.length===1&&TD(n))for(let r=0;r<n.producerNode.length;r++)Ll(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Vl(i),i.producerIndexOfThis[r]=e}}function Ha(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Vl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function wD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function TD(n){return n.producerNode!==void 0}function jl(n){lk?.(n)}function Ul(n,e){let t=Object.create(hk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(kl(t),rs(t),t.value===$a)throw t.error;return t.value};return r[ft]=t,jl(t),r}var Nl=Symbol("UNSET"),Ml=Symbol("COMPUTING"),$a=Symbol("ERRORED"),hk=J(x({},ji),{value:Nl,dirty:!0,error:null,equal:Ol,kind:"computed",producerMustRecompute(n){return n.value===Nl||n.value===Ml},producerRecomputeValue(n){if(n.value===Ml)throw new Error("");let e=n.value;n.value=Ml;let t=Ui(n),r,i=!1;try{r=n.computation(),ie(null),i=e!==Nl&&e!==$a&&r!==$a&&n.equal(e,r)}catch(o){r=$a,n.error=o}finally{is(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function fk(){throw new Error}var DD=fk;function bD(n){DD(n)}function Mg(n){DD=n}var pk=null;function Pg(n,e){let t=Object.create(Bl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>CD(t);return r[ft]=t,jl(t),[r,s=>os(t,s),s=>Og(t,s)]}function CD(n){return rs(n),n.value}function os(n,e){Ng()||bD(n),n.equal(n.value,e)||(n.value=e,gk(n))}function Og(n,e){Ng()||bD(n),os(n,e(n.value))}var Bl=J(x({},ji),{equal:Ol,value:void 0,kind:"signal"});function gk(n){n.version++,ED(),Rg(n),pk?.(n)}function SD(n){let e=ie(null);try{return n()}finally{ie(e)}}var Gl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",L=class extends Error{code;constructor(e,t){super(as(e,t)),this.code=e}};function mk(n){return`NG0${Math.abs(n)}`}function as(n,e){return`${mk(n)}${e?": "+e:""}`}var Ka=globalThis;function De(n){for(let e in n)if(n[e]===De)return e;throw Error("")}function MD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ot(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ot).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Wl(n,e){return n?e?`${n} ${e}`:n:e||""}var yk=De({__forward_ref__:De});function Je(n){return n.__forward_ref__=Je,n.toString=function(){return Ot(this())},n}function it(n){return Gg(n)?n():n}function Gg(n){return typeof n=="function"&&n.hasOwnProperty(yk)&&n.__forward_ref__===Je}function PD(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $t(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qa(n){return vk(n,Kl)}function Wg(n){return Qa(n)!==null}function vk(n,e){return n.hasOwnProperty(e)&&n[e]||null}function _k(n){let e=n?.[Kl]??null;return e||null}function kg(n){return n&&n.hasOwnProperty(Hl)?n[Hl]:null}var Kl=De({\u0275prov:De}),Hl=De({\u0275inj:De}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Kg(n){return n&&!!n.\u0275providers}var Qg=De({\u0275cmp:De}),Yg=De({\u0275dir:De}),Jg=De({\u0275pipe:De}),Zg=De({\u0275mod:De}),Ga=De({\u0275fac:De}),zi=De({__NG_ELEMENT_ID__:De}),AD=De({__NG_ENV_ID__:De});function Gi(n){return typeof n=="string"?n:n==null?"":String(n)}function OD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Gi(n)}function Xg(n,e){throw new L(-200,n)}function Ql(n,e){throw new L(-201,!1)}var Fg;function xD(){return Fg}function Dt(n){let e=Fg;return Fg=n,e}function em(n,e,t){let r=Qa(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ql(n,"Injector")}var Ek={},Bi=Ek,Lg="__NG_DI_FLAG__",Vg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=$i(t)||0;try{return this.injector.get(e,r&8?null:Bi,r)}catch(i){if(ns(i))return i;throw i}}},ql="ngTempTokenPath",Ik="ngTokenPath",wk=/\n/gm,Tk="\u0275",RD="__source";function Dk(n,e=0){let t=Sg();if(t===void 0)throw new L(-203,!1);if(t===null)return em(n,void 0,e);{let r=bk(e),i=t.retrieve(n,r);if(ns(i)){if(r.optional)return null;throw i}return i}}function H(n,e=0){return(xD()||Dk)(it(n),e)}function M(n,e){return H(n,$i(e))}function $i(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function jg(n){let e=[];for(let t=0;t<n.length;t++){let r=it(n[t]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Ck(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(H(i,o))}else e.push(H(r))}return e}function tm(n,e){return n[Lg]=e,n.prototype[Lg]=e,n}function Ck(n){return n[Lg]}function Sk(n,e,t,r){let i=n[ql];throw e[RD]&&i.unshift(e[RD]),n.message=Ak(`
`+n.message,i,t,r),n[Ik]=i,n[ql]=null,n}function Ak(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Tk?n.slice(2):n;let i=Ot(e);if(Array.isArray(e))i=e.map(Ot).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ot(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(wk,`
  `)}`}function Kr(n,e){let t=n.hasOwnProperty(Ga);return t?n[Ga]:null}function kD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function FD(n){return n.flat(Number.POSITIVE_INFINITY)}function Yl(n,e){n.forEach(t=>Array.isArray(t)?Yl(t,e):e(t))}function nm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ya(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function LD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Jl(n,e,t){let r=cs(n,e);return r>=0?n[r|1]=t:(r=~r,LD(n,r,e,t)),r}function Zl(n,e){let t=cs(n,e);if(t>=0)return n[t|1]}function cs(n,e){return Rk(n,e,1)}function Rk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Yr={},bt=[],dr=new j(""),rm=new j("",-1),im=new j(""),Wa=class{get(e,t=Bi){if(t===Bi)throw new Al(`NullInjectorError: No provider for ${Ot(e)}!`);return t}};function om(n){return n[Zg]||null}function hr(n){return n[Qg]||null}function sm(n){return n[Yg]||null}function VD(n){return n[Jg]||null}function An(n){return{\u0275providers:n}}function jD(n){return An([{provide:dr,multi:!0,useValue:n}])}function UD(...n){return{\u0275providers:am(!0,n),\u0275fromNgModule:!0}}function am(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Yl(e,s=>{let a=s;zl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BD(i,o),t}function BD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];cm(i,o=>{e(o,r)})}}function zl(n,e,t,r){if(n=it(n),!n)return!1;let i=null,o=kg(n),s=!o&&hr(n);if(!o&&!s){let u=n.ngModule;if(o=kg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)zl(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Yl(o.imports,h=>{zl(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&BD(l,e)}if(!a){let l=Kr(i)||(()=>new i);e({provide:i,useFactory:l,deps:bt},i),e({provide:im,useValue:i,multi:!0},i),e({provide:dr,useValue:()=>H(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;cm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function cm(n,e){for(let t of n)Kg(t)&&(t=t.\u0275providers),Array.isArray(t)?cm(t,e):e(t)}var Nk=De({provide:String,useValue:De});function $D(n){return n!==null&&typeof n=="object"&&Nk in n}function Mk(n){return!!(n&&n.useExisting)}function Pk(n){return!!(n&&n.useFactory)}function Hi(n){return typeof n=="function"}function HD(n){return!!n.useClass}var Ja=new j(""),$l={},ND={},xg;function Za(){return xg===void 0&&(xg=new Wa),xg}var Fe=class{},qi=class extends Fe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Bg(e,s=>this.processProvider(s)),this.records.set(rm,ss(void 0,this)),i.has("environment")&&this.records.set(Fe,ss(void 0,this));let o=this.records.get(Ja);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(im,bt,{self:!0}))}retrieve(e,t){let r=$i(t)||0;try{return this.get(e,Bi,r)}catch(i){if(ns(i))return i;throw i}}destroy(){za(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return za(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){za(this);let t=cr(this),r=Dt(void 0),i;try{return e()}finally{cr(t),Dt(r)}}get(e,t=Bi,r){if(za(this),e.hasOwnProperty(AD))return e[AD](this);let i=$i(r),o,s=cr(this),a=Dt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Lk(e)&&Qa(e);h&&this.injectableDefInScope(h)?l=ss(Ug(e),$l):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let u=i&2?Za():this.parent;return t=i&8&&t===Bi?null:t,u.get(e,t)}catch(u){if(ns(u)){if((u[ql]=u[ql]||[]).unshift(Ot(e)),s)throw u;return Sk(u,e,"R3InjectorError",this.source)}else throw u}finally{Dt(a),cr(s)}}resolveInjectorInitializers(){let e=ie(null),t=cr(this),r=Dt(void 0),i;try{let o=this.get(dr,bt,{self:!0});for(let s of o)s()}finally{cr(t),Dt(r),ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ot(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=it(e);let t=Hi(e)?e:it(e&&e.provide),r=xk(e);if(!Hi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ss(void 0,$l,!0),i.factory=()=>jg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ie(null);try{return t.value===ND?Xg(Ot(e)):t.value===$l&&(t.value=ND,t.value=t.factory()),typeof t.value=="object"&&t.value&&Fk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=it(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ug(n){let e=Qa(n),t=e!==null?e.factory:Kr(n);if(t!==null)return t;if(n instanceof j)throw new L(204,!1);if(n instanceof Function)return Ok(n);throw new L(204,!1)}function Ok(n){if(n.length>0)throw new L(204,!1);let t=_k(n);return t!==null?()=>t.factory(n):()=>new n}function xk(n){if($D(n))return ss(void 0,n.useValue);{let e=um(n);return ss(e,$l)}}function um(n,e,t){let r;if(Hi(n)){let i=it(n);return Kr(i)||Ug(i)}else if($D(n))r=()=>it(n.useValue);else if(Pk(n))r=()=>n.useFactory(...jg(n.deps||[]));else if(Mk(n))r=()=>H(it(n.useExisting));else{let i=it(n&&(n.useClass||n.provide));if(kk(n))r=()=>new i(...jg(n.deps));else return Kr(i)||Ug(i)}return r}function za(n){if(n.destroyed)throw new L(205,!1)}function ss(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kk(n){return!!n.deps}function Fk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Lk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Bg(n,e){for(let t of n)Array.isArray(t)?Bg(t,e):t&&Kg(t)?Bg(t.\u0275providers,e):e(t)}function pt(n,e){let t;n instanceof qi?(za(n),t=n):t=new Vg(n);let r,i=cr(t),o=Dt(void 0);try{return e()}finally{cr(i),Dt(o)}}function qD(){return xD()!==void 0||Sg()!=null}var dn=0,ne=1,Y=2,Ye=3,Yt=4,Jt=5,Xa=6,us=7,gt=8,Wi=9,Rn=10,Pe=11,ls=12,lm=13,Ki=14,Zt=15,Jr=16,Qi=17,Nn=18,ec=19,dm=20,ur=21,Xl=22,tc=23,Ht=24,Yi=25,kt=26,zD=1;var Zr=7,nc=8,Ji=9,Ct=10;function Mn(n){return Array.isArray(n)&&typeof n[zD]=="object"}function hn(n){return Array.isArray(n)&&n[zD]===!0}function hm(n){return(n.flags&4)!==0}function Xr(n){return n.componentOffset>-1}function ed(n){return(n.flags&1)===1}function Pn(n){return!!n.template}function ds(n){return(n[Y]&512)!==0}function Zi(n){return(n[Y]&256)===256}var GD="svg",WD="math";function Xt(n){for(;Array.isArray(n);)n=n[dn];return n}function fm(n,e){return Xt(e[n])}function fn(n,e){return Xt(e[n.index])}function td(n,e){return n.data[e]}function pm(n,e){return n[e]}function gm(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function en(n,e){let t=e[n];return Mn(t)?t:t[dn]}function KD(n){return(n[Y]&4)===4}function nd(n){return(n[Y]&128)===128}function QD(n){return hn(n[Ye])}function rc(n,e){return e==null?null:n[e]}function mm(n){n[Qi]=0}function ym(n){n[Y]&1024||(n[Y]|=1024,nd(n)&&hs(n))}function YD(n,e){for(;n>0;)e=e[Ki],n--;return e}function ic(n){return!!(n[Y]&9216||n[Ht]?.dirty)}function rd(n){n[Rn].changeDetectionScheduler?.notify(8),n[Y]&64&&(n[Y]|=1024),ic(n)&&hs(n)}function hs(n){n[Rn].changeDetectionScheduler?.notify(0);let e=Qr(n);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!nd(e)));)e=Qr(e)}function vm(n,e){if(Zi(n))throw new L(911,!1);n[ur]===null&&(n[ur]=[]),n[ur].push(e)}function JD(n,e){if(n[ur]===null)return;let t=n[ur].indexOf(e);t!==-1&&n[ur].splice(t,1)}function Qr(n){let e=n[Ye];return hn(e)?e[Ye]:e}function _m(n){return n[us]??=[]}function Em(n){return n.cleanup??=[]}function ZD(n,e,t,r){let i=_m(e);i.push(t),n.firstCreatePass&&Em(n).push(r,i.length-1)}var se={lFrame:yb(null),bindingsEnabled:!0,skipHydrationRootTNode:null},oc=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(oc||{}),Vk=0,$g=!1;function XD(){return se.lFrame.elementDepthCount}function eb(){se.lFrame.elementDepthCount++}function tb(){se.lFrame.elementDepthCount--}function Im(){return se.bindingsEnabled}function nb(){return se.skipHydrationRootTNode!==null}function rb(n){return se.skipHydrationRootTNode===n}function ib(){se.skipHydrationRootTNode=null}function he(){return se.lFrame.lView}function Ze(){return se.lFrame.tView}function ob(n){return se.lFrame.contextLView=n,n[gt]}function sb(n){return se.lFrame.contextLView=null,n}function ot(){let n=wm();for(;n!==null&&n.type===64;)n=n.parent;return n}function wm(){return se.lFrame.currentTNode}function ab(){let n=se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function fs(n,e){let t=se.lFrame;t.currentTNode=n,t.isParent=e}function Tm(){return se.lFrame.isParent}function cb(){se.lFrame.isParent=!1}function ub(){return se.lFrame.contextLView}function Dm(n){PD("Must never be called in production mode"),Vk=n}function bm(){return $g}function Cm(n){let e=$g;return $g=n,e}function id(){let n=se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function lb(){return se.lFrame.bindingIndex}function db(n){return se.lFrame.bindingIndex=n}function sc(){return se.lFrame.bindingIndex++}function od(n){let e=se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function hb(){return se.lFrame.inI18n}function fb(n,e){let t=se.lFrame;t.bindingIndex=t.bindingRootIndex=n,sd(e)}function pb(){return se.lFrame.currentDirectiveIndex}function sd(n){se.lFrame.currentDirectiveIndex=n}function gb(n){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Sm(){return se.lFrame.currentQueryIndex}function ad(n){se.lFrame.currentQueryIndex=n}function jk(n){let e=n[ne];return e.type===2?e.declTNode:e.type===1?n[Jt]:null}function Am(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=jk(o),i===null||(o=o[Ki],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=se.lFrame=mb();return r.currentTNode=e,r.lView=n,!0}function cd(n){let e=mb(),t=n[ne];se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mb(){let n=se.lFrame,e=n===null?null:n.child;return e===null?yb(n):e}function yb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vb(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Rm=vb;function ud(){let n=vb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _b(n){return(se.lFrame.contextLView=YD(n,se.lFrame.contextLView))[gt]}function fr(){return se.lFrame.selectedIndex}function ei(n){se.lFrame.selectedIndex=n}function ld(){let n=se.lFrame;return td(n.tView,n.selectedIndex)}function Eb(){return se.lFrame.currentNamespace}var Ib=!0;function dd(){return Ib}function hd(n){Ib=n}function Hg(n,e=null,t=null,r){let i=Nm(n,e,t,r);return i.resolveInjectorInitializers(),i}function Nm(n,e=null,t=null,r,i=new Set){let o=[t||bt,UD(n)];return r=r||(typeof n=="object"?void 0:Ot(n)),new qi(o,e||Za(),r||null,i)}var xt=class n{static THROW_IF_NOT_FOUND=Bi;static NULL=new Wa;static create(e,t){if(Array.isArray(e))return Hg({name:""},t,e,"");{let r=e.name??"";return Hg({name:r},e.parent,e.providers,r)}}static \u0275prov=U({token:n,providedIn:"any",factory:()=>H(rm)});static __NG_ELEMENT_ID__=-1},Ce=new j(""),On=(()=>{class n{static __NG_ELEMENT_ID__=Uk;static __NG_ENV_ID__=t=>t}return n})(),qg=class extends On{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Zi(this._lView)}onDestroy(e){let t=this._lView;return vm(t,e),()=>JD(t,e)}};function Uk(){return new qg(he())}var ln=class{_console=console;handleError(e){this._console.error("ERROR",e)}},mt=new j("",{providedIn:"root",factory:()=>{let n=M(Fe),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(ln),e.handleError(t))}}}),wb={provide:dr,useValue:()=>void M(ln),multi:!0},Bk=new j("",{providedIn:"root",factory:()=>{let n=M(Ce).defaultView;if(!n)return;let e=M(mt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(On).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function $k(){return An([jD(()=>void M(Bk))])}function Mm(n){return typeof n=="function"&&n[ft]!==void 0}function xn(n,e){let[t,r,i]=Pg(n,e?.equal),o=t,s=o[ft];return o.set=r,o.update=i,o.asReadonly=Tb.bind(o),o}function Tb(){let n=this[ft];if(n.readonlyFn===void 0){let e=()=>this();e[ft]=n,n.readonlyFn=e}return n.readonlyFn}function Pm(n){return Mm(n)&&typeof n.set=="function"}var lr=class{},ac=new j("",{providedIn:"root",factory:()=>!1});var Om=new j(""),xm=new j("");var fd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Hk}return n})();function Hk(){return new fd(he(),ot())}var pr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Le(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),pd=(()=>{class n{internalPendingTasks=M(pr);scheduler=M(lr);errorHandler=M(mt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})();function cc(...n){}var km=(()=>{class n{static \u0275prov=U({token:n,providedIn:"root",factory:()=>new zg})}return n})(),zg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ys(n){return{toString:n}.toString()}var gd="__parameters__";function Jk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Xb(n,e,t){return ys(()=>{let r=Jk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(gd)?u[gd]:Object.defineProperty(u,gd,{value:[]})[gd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var eC=tm(Xb("Optional"),8);var tC=tm(Xb("SkipSelf"),4);function Zk(n){return typeof n=="function"}var wd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function nC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var tn=(()=>{let n=()=>rC;return n.ngInherit=!0,n})();function rC(n){return n.type.prototype.ngOnChanges&&(n.setInput=e1),Xk}function Xk(){let n=oC(this),e=n?.current;if(e){let t=n.previous;if(t===Yr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function e1(n,e,t,r,i){let o=this.declaredInputs[r],s=oC(n)||t1(n,{previous:Yr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new wd(l&&l.currentValue,t,u===Yr),nC(n,e,i,t)}var iC="__ngSimpleChanges__";function oC(n){return n[iC]||null}function t1(n,e){return n[iC]=e}var Db=[];var Ee=function(n,e=null,t){for(let r=0;r<Db.length;r++){let i=Db[r];i(n,e,t)}};function n1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=rC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function sC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function vd(n,e,t){aC(n,e,3,t)}function _d(n,e,t,r){(n[Y]&3)===t&&aC(n,e,t,r)}function Fm(n,e){let t=n[Y];(t&3)===e&&(t&=16383,t+=1,n[Y]=t)}function aC(n,e,t,r){let i=r!==void 0?n[Qi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Qi]+=65536),(a<o||o==-1)&&(r1(n,t,e,u),n[Qi]=(n[Qi]&4294901760)+u+2),u++}function bb(n,e){Ee(4,n,e);let t=ie(null);try{e.call(n)}finally{ie(t),Ee(5,n,e)}}function r1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Y]>>14<n[Qi]>>16&&(n[Y]&3)===e&&(n[Y]+=16384,bb(a,o)):bb(a,o)}var gs=-1,eo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function i1(n){return(n.flags&8)!==0}function o1(n){return(n.flags&16)!==0}function s1(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];a1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function cC(n){return n===3||n===4||n===6}function a1(n){return n.charCodeAt(0)===64}function dc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Cb(n,t,i,null,e[++r]):Cb(n,t,i,null,null))}}return n}function Cb(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function uC(n){return n!==gs}function Td(n){return n&32767}function c1(n){return n>>16}function Dd(n,e){let t=c1(n),r=e;for(;t>0;)r=r[Ki],t--;return r}var Gm=!0;function bd(n){let e=Gm;return Gm=n,e}var u1=256,lC=u1-1,dC=5,l1=0,kn={};function d1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(zi)&&(r=t[zi]),r==null&&(r=t[zi]=l1++);let i=r&lC,o=1<<i;e.data[n+(i>>dC)]|=o}function Cd(n,e){let t=hC(n,e);if(t!==-1)return t;let r=e[ne];r.firstCreatePass&&(n.injectorIndex=e.length,Lm(r.data,n),Lm(e,null),Lm(r.blueprint,null));let i=vy(n,e),o=n.injectorIndex;if(uC(i)){let s=Td(i),a=Dd(i,e),u=a[ne].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Lm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function vy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=yC(i),r===null)return gs;if(t++,i=i[Ki],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return gs}function Wm(n,e,t){d1(n,e,t)}function h1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(cC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function fC(n,e,t){if(t&8||n!==void 0)return n;Ql(e,"NodeInjector")}function pC(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Wi],o=Dt(void 0);try{return i?i.get(e,r,t&8):em(e,r,t&8)}finally{Dt(o)}}return fC(r,e,t)}function gC(n,e,t,r=0,i){if(n!==null){if(e[Y]&2048&&!(r&2)){let s=m1(n,e,t,r,kn);if(s!==kn)return s}let o=mC(n,e,t,r,kn);if(o!==kn)return o}return pC(e,t,r,i)}function mC(n,e,t,r,i){let o=p1(t);if(typeof o=="function"){if(!Am(e,n,r))return r&1?fC(i,t,r):pC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ql(t);else return s}finally{Rm()}}else if(typeof o=="number"){let s=null,a=hC(n,e),u=gs,l=r&1?e[Zt][Jt]:null;for((a===-1||r&4)&&(u=a===-1?vy(n,e):e[a+8],u===gs||!Ab(r,!1)?a=-1:(s=e[ne],a=Td(u),e=Dd(u,e)));a!==-1;){let h=e[ne];if(Sb(o,a,h.data)){let p=f1(a,e,t,s,r,l);if(p!==kn)return p}u=e[a+8],u!==gs&&Ab(r,e[ne].data[a+8]===l)&&Sb(o,a,e)?(s=h,a=Td(u),e=Dd(u,e)):a=-1}}return i}function f1(n,e,t,r,i,o){let s=e[ne],a=s.data[n+8],u=r==null?Xr(a)&&Gm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Ed(a,s,t,u,l);return h!==null?hc(e,s,h,a):kn}function Ed(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&t===C||y>=u&&C.type===t)return y}if(i){let y=s[u];if(y&&Pn(y)&&y.type===t)return u}return null}function hc(n,e,t,r){let i=n[t],o=e.data;if(i instanceof eo){let s=i;s.resolving&&Xg(OD(o[t]));let a=bd(s.canSeeViewProviders);s.resolving=!0;let u=o[t].type||o[t],l,h=s.injectImpl?Dt(s.injectImpl):null,p=Am(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&n1(t,o[t],e)}finally{h!==null&&Dt(h),bd(a),s.resolving=!1,Rm()}}return i}function p1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(zi)?n[zi]:void 0;return typeof e=="number"?e>=0?e&lC:g1:e}function Sb(n,e,t){let r=1<<n;return!!(t[e+(n>>dC)]&r)}function Ab(n,e){return!(n&2)&&!(n&1&&e)}var Xi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return gC(this._tNode,this._lView,e,$i(r),t)}};function g1(){return new Xi(ot(),he())}function Ft(n){return ys(()=>{let e=n.prototype.constructor,t=e[Ga]||Km(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ga]||Km(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Km(n){return Gg(n)?()=>{let e=Km(it(n));return e&&e()}:Kr(n)}function m1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Y]&2048&&!ds(s);){let a=mC(o,s,t,r|2,kn);if(a!==kn)return a;let u=o.parent;if(!u){let l=s[dm];if(l){let h=l.get(t,kn,r);if(h!==kn)return h}u=yC(s),s=s[Ki]}o=u}return i}function yC(n){let e=n[ne],t=e.type;return t===2?e.declTNode:t===1?n[Jt]:null}function mc(n){return h1(ot(),n)}function y1(){return vs(ot(),he())}function vs(n,e){return new St(fn(n,e))}var St=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=y1}return n})();function v1(n){return n instanceof St?n.nativeElement:n}function _1(){return this._results[Symbol.iterator]()}var Sd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new xe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=FD(e);(this._changesDetected=!kD(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=_1};function vC(n){return(n.flags&128)===128}var _y=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_y||{}),_C=new Map,E1=0;function I1(){return E1++}function w1(n){_C.set(n[ec],n)}function Qm(n){_C.delete(n[ec])}var Rb="__ngContext__";function yc(n,e){Mn(e)?(n[Rb]=e[ec],w1(e)):n[Rb]=e}function EC(n){return wC(n[ls])}function IC(n){return wC(n[Yt])}function wC(n){for(;n!==null&&!hn(n);)n=n[Yt];return n}var Ym;function Ey(n){Ym=n}function TC(){if(Ym!==void 0)return Ym;if(typeof document<"u")return document;throw new L(210,!1)}var jd=new j("",{providedIn:"root",factory:()=>T1}),T1="ng",Ud=new j(""),_s=new j("",{providedIn:"platform",factory:()=>"unknown"});var Bd=new j("",{providedIn:"root",factory:()=>TC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var D1="h",b1="b";var DC=!1,bC=new j("",{providedIn:"root",factory:()=>DC});var C1=(n,e,t,r)=>{};function S1(n,e,t,r){C1(n,e,t,r)}var A1=()=>null;function CC(n,e,t=!1){return A1(n,e,t)}function SC(n,e){let t=n.contentQueries;if(t!==null){let r=ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ad(o),a.contentQueries(2,e[s],s)}}}finally{ie(r)}}}function Jm(n,e,t){ad(0);let r=ie(null);try{e(n,t)}finally{ie(r)}}function AC(n,e,t){if(hm(e)){let r=ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ie(r)}}}var gr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(gr||{});var md;function R1(){if(md===void 0&&(md=null,Ka.trustedTypes))try{md=Ka.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return md}function Nb(n){return R1()?.createScriptURL(n)||n}var Ad=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gl})`}};function Es(n){return n instanceof Ad?n.changingThisBreaksApplicationSecurity:n}function Iy(n,e){let t=RC(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Gl})`)}return t===e}function RC(n){return n instanceof Ad&&n.getTypeName()||null}var N1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function NC(n){return n=String(n),n.match(N1)?n:"unsafe:"+n}var $d=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}($d||{});function MC(n){let e=OC();return e?e.sanitize($d.URL,n)||"":Iy(n,"URL")?Es(n):NC(Gi(n))}function PC(n){let e=OC();if(e)return Nb(e.sanitize($d.RESOURCE_URL,n)||"");if(Iy(n,"ResourceURL"))return Nb(Es(n));throw new L(904,!1)}function M1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?PC:MC}function wy(n,e,t){return M1(e,t)(n)}function OC(){let n=he();return n&&n[Rn].sanitizer}function P1(n){return n.ownerDocument.defaultView}function xC(n){return n instanceof Function?n():n}function O1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var kC="ng-template";function x1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&O1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ty(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ty(n){return n.type===4&&n.value!==kC}function k1(n,e,t){let r=n.type===4&&!t?kC:n.value;return e===r}function F1(n,e,t){let r=4,i=n.attrs,o=i!==null?j1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!pn(r)&&!pn(u))return!1;if(s&&pn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!k1(n,u,t)||u===""&&e.length===1){if(pn(r))return!1;s=!0}}else if(r&8){if(i===null||!x1(n,i,u,t)){if(pn(r))return!1;s=!0}}else{let l=e[++a],h=L1(u,i,Ty(n),t);if(h===-1){if(pn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(pn(r))return!1;s=!0}}}}return pn(r)||s}function pn(n){return(n&1)===0}function L1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return U1(e,n)}function V1(n,e,t=!1){for(let r=0;r<e.length;r++)if(F1(n,e[r],t))return!0;return!1}function j1(n){for(let e=0;e<n.length;e++){let t=n[e];if(cC(t))return e}return n.length}function U1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Mb(n,e){return n?":not("+e.trim()+")":e}function B1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pn(s)&&(e+=Mb(o,i),i=""),r=s,o=o||!pn(r);t++}return i!==""&&(e+=Mb(o,i)),e}function $1(n){return n.map(B1).join(",")}function H1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!pn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Lt={};function q1(n,e){return n.createText(e)}function z1(n,e,t){n.setValue(e,t)}function FC(n,e,t){return n.createElement(e,t)}function Rd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function LC(n,e,t){n.appendChild(e,t)}function Pb(n,e,t,r,i){r!==null?Rd(n,e,t,r,i):LC(n,e,t)}function G1(n,e,t){n.removeChild(null,e,t)}function W1(n,e,t){n.setAttribute(e,"style",t)}function K1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function VC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&s1(n,e,r),i!==null&&K1(n,e,i),o!==null&&W1(n,e,o)}function Dy(n,e,t,r,i,o,s,a,u,l,h){let p=kt+r,m=p+i,y=Q1(p,m),C=typeof l=="function"?l():l;return y[ne]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function Q1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Lt);return t}function Y1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Dy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function by(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[dn]=i,p[Y]=r|4|128|8|64|1024,(l!==null||n&&n[Y]&2048)&&(p[Y]|=2048),mm(p),p[Ye]=p[Ki]=n,p[gt]=t,p[Rn]=s||n&&n[Rn],p[Pe]=a||n&&n[Pe],p[Wi]=u||n&&n[Wi]||null,p[Jt]=o,p[ec]=I1(),p[Xa]=h,p[dm]=l,p[Zt]=e.type==2?n[Zt]:p,p}function J1(n,e,t){let r=fn(e,n),i=Y1(t),o=n[Rn].rendererFactory,s=Cy(n,by(n,i,null,jC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function jC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function UC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Cy(n,e){return n[ls]?n[lm][Yt]=e:n[ls]=e,n[lm]=e,e}function Z1(n=1){BC(Ze(),he(),fr()+n,!1)}function BC(n,e,t,r){if(!r)if((e[Y]&3)===3){let o=n.preOrderCheckHooks;o!==null&&vd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&_d(e,o,0,t)}ei(t)}var Hd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Hd||{});function Zm(n,e,t,r){let i=ie(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Hd.SignalBased)!==0&&(u=e[o][ft]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):nC(e,u,o,r)}finally{ie(i)}}function $C(n,e,t,r,i){let o=fr(),s=r&2;try{ei(-1),s&&e.length>kt&&BC(n,e,kt,!1),Ee(s?2:0,i,t),t(r,i)}finally{ei(o),Ee(s?3:1,i,t)}}function Sy(n,e,t){oF(n,e,t),(t.flags&64)===64&&sF(n,e,t)}function HC(n,e,t=fn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function X1(n,e,t,r){let o=r.get(bC,DC)||t===gr.ShadowDom,s=n.selectRootElement(e,o);return eF(s),s}function eF(n){tF(n)}var tF=()=>null;function nF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qC(n,e,t,r,i,o){let s=e[ne];if(Ay(n,s,e,t,r)){Xr(n)&&iF(e,n.index);return}rF(n,e,t,r,i,o)}function rF(n,e,t,r,i,o){if(n.type&3){let s=fn(n,e);t=nF(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function iF(n,e){let t=en(e,n);t[Y]&16||(t[Y]|=64)}function oF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Xr(t)&&J1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Cd(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=hc(e,n,s,t);if(yc(u,e),o!==null&&lF(e,s-r,u,a,t,o),Pn(a)){let l=en(t.index,e);l[gt]=hc(e,n,s,t)}}}function sF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=pb();try{ei(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];sd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&aF(u,l)}}finally{ei(-1),sd(s)}}function aF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zC(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];V1(e,o.selectors,!1)&&(r??=[],Pn(o)?r.unshift(o):r.push(o))}return r}function cF(n,e,t,r,i,o){let s=fn(n,e);uF(e[Pe],s,o,n.value,t,r,i)}function uF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Gi(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function lF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Zm(r,t,u,l)}}function dF(n,e){let t=n[Wi];if(!t)return;t.get(mt,null)?.(e)}function Ay(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Zm(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Zm(h,l,r,i),a=!0}return a}function hF(n,e){let t=en(e,n),r=t[ne];fF(r,t);let i=t[dn];i!==null&&t[Xa]===null&&(t[Xa]=CC(i,t[Wi])),Ee(18),Ry(r,t,t[gt]),Ee(19,t[gt])}function fF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ry(n,e,t){cd(e);try{let r=n.viewQuery;r!==null&&Jm(1,r,t);let i=n.template;i!==null&&$C(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Nn]?.finishViewCreation(n),n.staticContentQueries&&SC(n,e),n.staticViewQueries&&Jm(2,n.viewQuery,t);let o=n.components;o!==null&&pF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Y]&=-5,ud()}}function pF(n,e){for(let t=0;t<e.length;t++)hF(n,e[t])}function gF(n,e,t,r){let i=ie(null);try{let o=e.tView,a=n[Y]&4096?4096:16,u=by(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Jr]=l;let h=n[Nn];return h!==null&&(u[Nn]=h.createEmbeddedView(o)),Ry(o,u,t),u}finally{ie(i)}}function Ob(n,e){return!e||e.firstChild===null||vC(n)}var xb=!1,mF=new j(""),yF;function Ny(n,e){return yF(n,e)}var Fn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Fn||{});function My(n){return(n.flags&32)===32}function ps(n,e,t,r,i){if(r!=null){let o,s=!1;hn(r)?o=r:Mn(r)&&(s=!0,r=r[dn]);let a=Xt(r);n===0&&t!==null?i==null?LC(e,t,a):Rd(e,t,a,i||null,!0):n===1&&t!==null?Rd(e,t,a,i||null,!0):n===2?G1(e,a,s):n===3&&e.destroyNode(a),o!=null&&RF(e,n,o,t,i)}}function vF(n,e){GC(n,e),e[dn]=null,e[Jt]=null}function _F(n,e,t,r,i,o){r[dn]=i,r[Jt]=e,qd(n,r,t,1,i,o)}function GC(n,e){e[Rn].changeDetectionScheduler?.notify(9),qd(n,e,e[Pe],2,null,null)}function EF(n){let e=n[ls];if(!e)return Vm(n[ne],n);for(;e;){let t=null;if(Mn(e))t=e[ls];else{let r=e[Ct];r&&(t=r)}if(!t){for(;e&&!e[Yt]&&e!==n;)Mn(e)&&Vm(e[ne],e),e=e[Ye];e===null&&(e=n),Mn(e)&&Vm(e[ne],e),t=e&&e[Yt]}e=t}}function Py(n,e){let t=n[Ji],r=t.indexOf(e);t.splice(r,1)}function WC(n,e){if(Zi(e))return;let t=e[Pe];t.destroyNode&&qd(n,e,t,3,null,null),EF(e)}function Vm(n,e){if(Zi(e))return;let t=ie(null);try{e[Y]&=-129,e[Y]|=256,e[Ht]&&Fl(e[Ht]),wF(n,e),IF(n,e),e[ne].type===1&&e[Pe].destroy();let r=e[Jr];if(r!==null&&hn(e[Ye])){r!==e[Ye]&&Py(r,e);let i=e[Nn];i!==null&&i.detachView(n)}Qm(e)}finally{ie(t)}}function IF(n,e){let t=n.cleanup,r=e[us];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[us]=null);let i=e[ur];if(i!==null){e[ur]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[tc];if(o!==null){e[tc]=null;for(let s of o)s.destroy()}}function wF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof eo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ee(4,a,u);try{u.call(a)}finally{Ee(5,a,u)}}else{Ee(4,i,o);try{o.call(i)}finally{Ee(5,i,o)}}}}}function TF(n,e,t){return DF(n,e.parent,t)}function DF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[dn];if(Xr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===gr.None||i===gr.Emulated)return null}return fn(r,t)}function bF(n,e,t){return SF(n,e,t)}function CF(n,e,t){return n.type&40?fn(n,t):null}var SF=CF,kb;function Oy(n,e,t,r){let i=TF(n,r,e),o=e[Pe],s=r.parent||e[Jt],a=bF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Pb(o,i,t[u],a,!1);else Pb(o,i,t,a,!1);kb!==void 0&&kb(o,r,e,t,i)}function uc(n,e){if(e!==null){let t=e.type;if(t&3)return fn(e,n);if(t&4)return Xm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return uc(n,r);{let i=n[e.index];return hn(i)?Xm(-1,i):Xt(i)}}else{if(t&128)return uc(n,e.next);if(t&32)return Ny(e,n)()||Xt(n[e.index]);{let r=KC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Qr(n[Zt]);return uc(i,r)}else return uc(n,e.next)}}}return null}function KC(n,e){if(e!==null){let r=n[Zt][Jt],i=e.projection;return r.projection[i]}return null}function Xm(n,e){let t=Ct+n+1;if(t<e.length){let r=e[t],i=r[ne].firstChild;if(i!==null)return uc(r,i)}return e[Zr]}function xy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&yc(Xt(a),r),t.flags|=2),!My(t))if(u&8)xy(n,e,t.child,r,i,o,!1),ps(e,n,i,a,o);else if(u&32){let l=Ny(t,r),h;for(;h=l();)ps(e,n,i,h,o);ps(e,n,i,a,o)}else u&16?AF(n,e,r,t,i,o):ps(e,n,i,a,o);t=s?t.projectionNext:t.next}}function qd(n,e,t,r,i,o){xy(t,r,n.firstChild,e,i,o,!1)}function AF(n,e,t,r,i,o){let s=t[Zt],u=s[Jt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ps(e,n,i,h,o)}else{let l=u,h=s[Ye];vC(r)&&(l.flags|=128),xy(n,e,l,h,i,o,!0)}}function RF(n,e,t,r,i){let o=t[Zr],s=Xt(t);o!==s&&ps(e,n,r,o,i);for(let a=Ct;a<t.length;a++){let u=t[a];qd(u[ne],u,n,e,r,o)}}function NF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Fn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Fn.Important),n.setStyle(t,r,i,o))}}function fc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Xt(o)),hn(o)&&QC(o,r);let s=t.type;if(s&8)fc(n,e,t.child,r);else if(s&32){let a=Ny(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=KC(e,t);if(Array.isArray(a))r.push(...a);else{let u=Qr(e[Zt]);fc(u[ne],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function QC(n,e){for(let t=Ct;t<n.length;t++){let r=n[t],i=r[ne].firstChild;i!==null&&fc(r[ne],r,i,e)}n[Zr]!==n[dn]&&e.push(n[Zr])}function YC(n){if(n[Yi]!==null){for(let e of n[Yi])e.impl.addSequence(e);n[Yi].length=0}}var JC=[];function MF(n){return n[Ht]??PF(n)}function PF(n){let e=JC.pop()??Object.create(xF);return e.lView=n,e}function OF(n){n.lView[Ht]!==n&&(n.lView=null,JC.push(n))}var xF=J(x({},ji),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hs(n.lView)},consumerOnSignalRead(){this.lView[Ht]=this}});function kF(n){let e=n[Ht]??Object.create(FF);return e.lView=n,e}var FF=J(x({},ji),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Qr(n.lView);for(;e&&!ZC(e[ne]);)e=Qr(e);e&&ym(e)},consumerOnSignalRead(){this.lView[Ht]=this}});function ZC(n){return n.type!==2}function XC(n){if(n[tc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[tc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Y]&8192)}}var LF=100;function ky(n,e=0){let r=n[Rn].rendererFactory,i=!1;i||r.begin?.();try{VF(n,e)}finally{i||r.end?.()}}function VF(n,e){let t=bm();try{Cm(!0),ey(n,e);let r=0;for(;ic(n);){if(r===LF)throw new L(103,!1);r++,ey(n,1)}}finally{Cm(t)}}function eS(n,e){Dm(e?oc.Exhaustive:oc.OnlyDirtyViews);try{ky(n)}finally{Dm(oc.Off)}}function jF(n,e,t,r){if(Zi(e))return;let i=e[Y],o=!1,s=!1;cd(e);let a=!0,u=null,l=null;o||(ZC(n)?(l=MF(e),u=Ui(l)):xl()===null?(a=!1,l=kF(e),u=Ui(l)):e[Ht]&&(Fl(e[Ht]),e[Ht]=null));try{mm(e),db(n.bindingStartIndex),t!==null&&$C(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&vd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&_d(e,y,0,null),Fm(e,0)}if(s||UF(e),XC(e),tS(e,0),n.contentQueries!==null&&SC(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&vd(e,y)}else{let y=n.contentHooks;y!==null&&_d(e,y,1),Fm(e,1)}$F(n,e);let p=n.components;p!==null&&rS(e,p,0);let m=n.viewQuery;if(m!==null&&Jm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&vd(e,y)}else{let y=n.viewHooks;y!==null&&_d(e,y,2),Fm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Xl]){for(let y of e[Xl])y();e[Xl]=null}o||(YC(e),e[Y]&=-73)}catch(h){throw o||hs(e),h}finally{l!==null&&(is(l,u),a&&OF(l)),ud()}}function tS(n,e){for(let t=EC(n);t!==null;t=IC(t))for(let r=Ct;r<t.length;r++){let i=t[r];nS(i,e)}}function UF(n){for(let e=EC(n);e!==null;e=IC(e)){if(!(e[Y]&2))continue;let t=e[Ji];for(let r=0;r<t.length;r++){let i=t[r];ym(i)}}}function BF(n,e,t){Ee(18);let r=en(e,n);nS(r,t),Ee(19,r[gt])}function nS(n,e){nd(n)&&ey(n,e)}function ey(n,e){let r=n[ne],i=n[Y],o=n[Ht],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qa(o)),s||=!1,o&&(o.dirty=!1),n[Y]&=-9217,s)jF(r,n,r.template,n[gt]);else if(i&8192){let a=ie(null);try{XC(n),tS(n,1);let u=r.components;u!==null&&rS(n,u,1),YC(n)}finally{ie(a)}}}function rS(n,e,t){for(let r=0;r<e.length;r++)BF(n,e[r],t)}function $F(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ei(~i);else{let o=i,s=t[++r],a=t[++r];fb(s,o);let u=e[o];Ee(24,u),a(2,u),Ee(25,u)}}}finally{ei(-1)}}function Fy(n,e){let t=bm()?64:1088;for(n[Rn].changeDetectionScheduler?.notify(e);n;){n[Y]|=t;let r=Qr(n);if(ds(n)&&!r)return n;n=r}return null}function iS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function HF(n,e,t,r=!0){let i=e[ne];if(qF(i,e,n,t),r){let s=Xm(t,n),a=e[Pe],u=a.parentNode(n[Zr]);u!==null&&_F(i,n[Jt],a,e,u,s)}let o=e[Xa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ty(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t];if(r){let i=r[Jr];i!==null&&i!==n&&Py(i,r),e>0&&(n[t-1][Yt]=r[Yt]);let o=Ya(n,Ct+e);vF(r[ne],r);let s=o[Nn];s!==null&&s.detachView(o[ne]),r[Ye]=null,r[Yt]=null,r[Y]&=-129}return r}function qF(n,e,t,r){let i=Ct+r,o=t.length;r>0&&(t[i-1][Yt]=e),r<o-Ct?(e[Yt]=t[i],nm(t,Ct+r,e)):(t.push(e),e[Yt]=null),e[Ye]=t;let s=e[Jr];s!==null&&t!==s&&oS(s,e);let a=e[Nn];a!==null&&a.insertView(n),rd(e),e[Y]|=128}function oS(n,e){let t=n[Ji],r=e[Ye];if(Mn(r))n[Y]|=2;else{let i=r[Ye][Zt];e[Zt]!==i&&(n[Y]|=2)}t===null?n[Ji]=[e]:t.push(e)}var ti=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ne];return fc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[gt]}set context(e){this._lView[gt]=e}get destroyed(){return Zi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ye];if(hn(e)){let t=e[nc],r=t?t.indexOf(this):-1;r>-1&&(ty(e,r),Ya(t,r))}this._attachedToViewContainer=!1}WC(this._lView[ne],this._lView)}onDestroy(e){vm(this._lView,e)}markForCheck(){Fy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){rd(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,ky(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Wi].get(mF,xb)}catch{this.exhaustive=xb}}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ds(this._lView),t=this._lView[Jr];t!==null&&!e&&Py(t,this._lView),GC(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e;let t=ds(this._lView),r=this._lView[Jr];r!==null&&!t&&oS(r,this._lView),rd(this._lView)}};var ni=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=zF;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=gF(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ti(o)}}return n})();function zF(){return zd(ot(),he())}function zd(n,e){return n.type&4?new ni(e,n,vs(n,e)):null}function Ly(n,e,t,r,i){let o=n.data[e];if(o===null)o=GF(n,e,t,r,i),hb()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=ab();o.injectorIndex=s===null?-1:s.injectorIndex}return fs(o,!0),o}function GF(n,e,t,r,i){let o=wm(),s=Tm(),a=s?o:o&&o.parent,u=n.data[e]=KF(n,a,t,e,r,i);return WF(n,u,o,s),u}function WF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function KF(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return nb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var mQ=new RegExp(`^(\\d+)*(${b1}|${D1})*(.*)`);var QF=()=>null;function Fb(n,e){return QF(n,e)}var sS=class{},Gd=class{},ny=class{resolveComponentFactory(e){throw new L(917,!1)}},vc=class{static NULL=new ny},to=class{},mn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>YF()}return n})();function YF(){let n=he(),e=ot(),t=en(e.index,n);return(Mn(t)?t:n)[Pe]}var aS=(()=>{class n{static \u0275prov=U({token:n,providedIn:"root",factory:()=>null})}return n})();var Id={},ry=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Id,r);return i!==Id||t===Id?i:this.parentInjector.get(e,t,r)}};function Lb(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Wl(i,a);else if(o==2){let u=a,l=e[++s];r=Wl(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function q(n,e=0){let t=he();if(t===null)return H(n,e);let r=ot();return gC(r,t,it(n),e)}function Vy(){let n="invalid";throw new Error(n)}function cS(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}XF(n,e,t,a,o,u,l)}o!==null&&r!==null&&JF(t,r,o)}function JF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new L(-301,!1);r.push(e[i],o)}}function ZF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function XF(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Pn(y)&&(u=!0,ZF(n,t,m)),Wm(Cd(t,e),n,y.type)}oL(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=UC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=dc(t.mergedAttrs,y.hostAttrs),tL(n,t,e,p,y),iL(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);t.directiveToIndex.set(y.type,[p,N+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}eL(n,t,o)}function eL(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Vb(0,e,i,r),Vb(1,e,i,r),Ub(e,r,!1);else{let o=t.get(i);jb(0,e,o,r),jb(1,e,o,r),Ub(e,r,!0)}}}function Vb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),uS(e,o)}}function jb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),uS(e,s)}}function uS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Ub(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Ty(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function tL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Kr(i.type,!0)),s=new eo(o,Pn(i),q);n.blueprint[r]=s,t[r]=s,nL(n,e,r,UC(n,t,i.hostVars,Lt),i)}function nL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;rL(s)!=a&&s.push(a),s.push(t,r,o)}}function rL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function iL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pn(e)&&(t[""]=n)}}function oL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function lS(n,e,t,r,i,o,s,a){let u=e.consts,l=rc(u,s),h=Ly(e,n,2,r,l);return o&&cS(e,t,h,rc(u,a),i),h.mergedAttrs=dc(h.mergedAttrs,h.attrs),h.attrs!==null&&Lb(h,h.attrs,!1),h.mergedAttrs!==null&&Lb(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function dS(n,e){sC(n,e),hm(e)&&n.queries.elementEnd(e)}function jy(n){return fS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function hS(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function fS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function pS(n,e,t){return n[e]=t}function sL(n,e){return n[e]}function mr(n,e,t){if(t===Lt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function aL(n,e,t,r){let i=mr(n,e,t);return mr(n,e+1,r)||i}function jm(n,e,t){return function r(i){let o=Xr(n)?en(n.index,e):e;Fy(o,5);let s=e[gt],a=Bb(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=Bb(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function Bb(n,e,t,r){let i=ie(null);try{return Ee(6,e,t),t(r)!==!1}catch(o){return dF(n,o),!1}finally{Ee(7,e,t),ie(i)}}function cL(n,e,t,r,i,o,s,a){let u=ed(n),l=!1,h=null;if(!r&&u&&(h=uL(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=fn(n,t),m=r?r(p):p;S1(t,m,o,a);let y=i.listen(m,o,a),C=r?N=>r(Xt(N[n.index])):n.index;gS(C,e,t,o,a,y,!1)}return l}function uL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[us],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function gS(n,e,t,r,i,o,s){let a=e.firstCreatePass?Em(e):null,u=_m(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function $b(n,e,t,r,i,o){let s=e[t],a=e[ne],l=a.data[t].outputs[r],p=s[l].subscribe(o);gS(n.index,a,e,i,o,p,!0)}var iy=Symbol("BINDING");var Nd=class extends vc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=hr(e);return new no(t,this.ngModule)}};function lL(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Hd.SignalBased)!==0};return i&&(o.transform=i),o})}function dL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function hL(n,e,t){let r=e instanceof Fe?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ry(t,r):t}function fL(n){let e=n.get(to,null);if(e===null)throw new L(407,!1);let t=n.get(aS,null),r=n.get(lr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function pL(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return FC(e,t,t==="svg"?GD:t==="math"?WD:null)}var no=class extends Gd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=lL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=dL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ee(22);let a=ie(null);try{let u=this.componentDef,l=gL(r,u,s,o),h=hL(u,i||this.ngModule,e),p=fL(h),m=p.rendererFactory.createRenderer(null,u),y=r?X1(m,r,u.encapsulation,h):pL(u,m),C=s?.some(Hb)||o?.some(k=>typeof k!="function"&&k.bindings.some(Hb)),N=by(null,l,null,512|jC(u),null,null,p,m,h,null,CC(y,h,!0));N[kt]=y,cd(N);let R=null;try{let k=lS(kt,l,N,"#host",()=>l.directiveRegistry,!0,0);y&&(VC(m,y,k),yc(y,N)),Sy(l,N,k),AC(l,k,N),dS(l,k),t!==void 0&&yL(k,this.ngContentSelectors,t),R=en(k.index,N),N[gt]=R[gt],Ry(l,N,null)}catch(k){throw R!==null&&Qm(R),Qm(N),k}finally{Ee(23),ud()}return new Md(this.componentType,N,!!C)}finally{ie(a)}}};function gL(n,e,t,r){let i=n?["ng-version","20.0.5"]:H1(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[iy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[iy].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=sm(p);u.push(m)}return Dy(0,null,mL(o,s),1,a,u,null,null,null,[i],null)}function mL(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Hb(n){let e=n[iy].kind;return e==="input"||e==="twoWay"}var Md=class extends sS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=td(t[ne],kt),this.location=vs(this._tNode,t),this.instance=en(this._tNode.index,t)[gt],this.hostView=this.changeDetectorRef=new ti(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Ay(r,i[ne],i,e,t);this.previousInputValues.set(e,t);let s=en(r.index,i);Fy(s,1)}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var yr=(()=>{class n{static __NG_ELEMENT_ID__=vL}return n})();function vL(){let n=ot();return yS(n,he())}var _L=yr,mS=class extends _L{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return vs(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){let e=vy(this._hostTNode,this._hostLView);if(uC(e)){let t=Dd(e,this._hostLView),r=Td(e),i=t[ne].data[r+8];return new Xi(i,t)}else return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=qb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Fb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Ob(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!Zk(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new no(hr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(Fe,null);k&&(o=k)}let m=hr(h.componentType??{}),y=Fb(this._lContainer,m?.id??null),C=y?.firstChild??null,N=h.create(p,i,C,o,s,a);return this.insertImpl(N.hostView,l,Ob(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(QD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ye],l=new mS(u,u[Jt],u[Ye]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return HF(s,i,o,r),e.attachToViewContainerRef(),nm(Um(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=qb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ty(this._lContainer,t);r&&(Ya(Um(this._lContainer),t),WC(r[ne],r))}detach(e){let t=this._adjustIndex(e,-1),r=ty(this._lContainer,t);return r&&Ya(Um(this._lContainer),t)!=null?new ti(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qb(n){return n[nc]}function Um(n){return n[nc]||(n[nc]=[])}function yS(n,e){let t,r=e[n.index];return hn(r)?t=r:(t=iS(r,e,null,n),e[n.index]=t,Cy(e,t)),IL(t,e,n,r),new mS(t,n,e)}function EL(n,e){let t=n[Pe],r=t.createComment(""),i=fn(e,n),o=t.parentNode(i);return Rd(t,o,r,t.nextSibling(i),!1),r}var IL=DL,wL=()=>!1;function TL(n,e,t){return wL(n,e,t)}function DL(n,e,t,r){if(n[Zr])return;let i;t.type&8?i=Xt(r):i=EL(e,t),n[Zr]=i}var oy=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},sy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Uy(e,t).matches!==null&&this.queries[t].setDirty()}},ay=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=PL(e):this.predicate=e}},cy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},uy=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,bL(t,o)),this.matchTNodeWithReadOption(e,t,Ed(t,e,o,!1,!1))}else r===ni?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ed(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===St||i===yr||i===ni&&t.type&4)this.addMatch(t.index,-2);else{let o=Ed(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function bL(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function CL(n,e){return n.type&11?vs(n,e):n.type&4?zd(n,e):null}function SL(n,e,t,r){return t===-1?CL(e,n):t===-2?AL(n,e,r):hc(n,n[ne],t,e)}function AL(n,e,t){if(t===St)return vs(e,n);if(t===ni)return zd(e,n);if(t===yr)return yS(e,n)}function vS(n,e,t,r){let i=e[Nn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(SL(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function ly(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=vS(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Ct;p<h.length;p++){let m=h[p];m[Jr]===m[Ye]&&ly(m[ne],m,l,r)}if(h[Ji]!==null){let p=h[Ji];for(let m=0;m<p.length;m++){let y=p[m];ly(y[ne],y,l,r)}}}}}return r}function RL(n,e){return n[Nn].queries[e].queryList}function NL(n,e,t){let r=new Sd((t&4)===4);return ZD(n,e,r,r.destroy),(e[Nn]??=new sy).queries.push(new oy(r))-1}function ML(n,e,t,r){let i=Ze();if(i.firstCreatePass){let o=ot();OL(i,new ay(e,t,r),o.index),xL(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return NL(i,he(),t)}function PL(n){return n.split(",").map(e=>e.trim())}function OL(n,e,t){n.queries===null&&(n.queries=new cy),n.queries.track(new uy(e,t))}function xL(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Uy(n,e){return n.queries.getByIndex(e)}function kL(n,e){let t=n[ne],r=Uy(t,e);return r.crossesNgTemplate?ly(t,n,e,[]):vS(t,n,r,e)}var zb=new Set;function oo(n){zb.has(n)||(zb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ro=class{},Wd=class{};var Pd=class extends ro{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Nd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=om(e);this._bootstrapComponents=xC(o.bootstrap),this._r3Injector=Nm(e,t,[{provide:ro,useValue:this},{provide:vc,useValue:this.componentFactoryResolver},...r],Ot(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Od=class extends Wd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Pd(this.moduleType,e,[])}};var pc=class extends ro{injector;componentFactoryResolver=new Nd(this);instance=null;constructor(e){super();let t=new qi([...e.providers,{provide:ro,useValue:this},{provide:vc,useValue:this.componentFactoryResolver}],e.parent||Za(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Is(n,e,t=null){return new pc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var FL=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=am(!1,t.type),i=r.length>0?Is([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:n,providedIn:"environment",factory:()=>new n(H(Fe))})}return n})();function By(n){return ys(()=>{let e=_S(n),t=J(x({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_y.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(FL).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||gr.Emulated,styles:n.styles||bt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&oo("NgStandalone"),ES(t);let r=n.dependencies;return t.directiveDefs=Gb(r,!1),t.pipeDefs=Gb(r,!0),t.id=BL(t),t})}function LL(n){return hr(n)||sm(n)}function VL(n){return n!==null}function nn(n){return ys(()=>({type:n.type,bootstrap:n.bootstrap||bt,declarations:n.declarations||bt,imports:n.imports||bt,exports:n.exports||bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jL(n,e){if(n==null)return Yr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Hd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function UL(n){if(n==null)return Yr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ye(n){return ys(()=>{let e=_S(n);return ES(e),e})}function $y(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function _S(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Yr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:jL(n.inputs,e),outputs:UL(n.outputs),debugInfo:null}}function ES(n){n.features?.forEach(e=>e(n))}function Gb(n,e){if(!n)return null;let t=e?VD:LL;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(VL)}function BL(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $L(n){return Object.getPrototypeOf(n.prototype).constructor}function ze(n){let e=$L(n.type),t=!0,r=[n];for(;e;){let i;if(Pn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Bm(n.inputs),s.declaredInputs=Bm(n.declaredInputs),s.outputs=Bm(n.outputs);let a=i.hostBindings;a&&WL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&zL(n,u),l&&GL(n,l),HL(n,i),MD(n.outputs,i.outputs),Pn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ze&&(t=!1)}}e=Object.getPrototypeOf(e)}qL(r)}function HL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function qL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=dc(i.hostAttrs,t=dc(t,i.hostAttrs))}}function Bm(n){return n===Yr?{}:n===bt?[]:n}function zL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function GL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function WL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function KL(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Ly(e,n,4,s||null,a||null);Im()&&cS(e,t,h,rc(l,u),zC),h.mergedAttrs=dc(h.mergedAttrs,h.attrs),sC(e,h);let p=h.tView=Dy(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function QL(n,e,t,r,i,o,s,a,u,l,h){let p=t+kt,m=e.firstCreatePass?KL(p,e,n,r,i,o,s,a,l):e.data[p];u&&(m.flags|=u),fs(m,!1);let y=YL(e,n,m,t);dd()&&Oy(e,n,y,m),yc(y,n);let C=iS(y,n,y,m);return n[p]=C,Cy(n,C),TL(C,m,n),ed(m)&&Sy(e,n,m),l!=null&&HC(n,m,h),m}function IS(n,e,t,r,i,o,s,a){let u=he(),l=Ze(),h=rc(l.consts,o);return QL(u,l,n,e,t,r,i,h,void 0,s,a),IS}var YL=JL;function JL(n,e,t,r){return hd(!0),e[Pe].createComment("")}var Kd=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Kd||{}),so=new j(""),wS=!1,dy=class extends xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qD()&&(this.destroyRef=M(On,{optional:!0})??void 0,this.pendingTasks=M(pr,{optional:!0})??void 0)}emit(e){let t=ie(null);try{super.next(e)}finally{ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Me&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Se=dy;function TS(n){let e,t;function r(){n=cc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Wb(n){return queueMicrotask(()=>n()),()=>{n=cc}}var Hy="isAngularZone",xd=Hy+"_ID",ZL=0,Ae=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Se(!1);onMicrotaskEmpty=new Se(!1);onStable=new Se(!1);onError=new Se(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=wS}=e;if(typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Hy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new L(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,XL,cc,cc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},XL={};function qy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){TS(()=>{n.callbackScheduled=!1,hy(n),n.isCheckStableRunning=!0,qy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),hy(n)}function tV(n){let e=()=>{eV(n)},t=ZL++;n._inner=n._inner.fork({name:"angular",properties:{[Hy]:!0,[xd]:t,[xd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(nV(u))return r.invokeTask(o,s,a,u);try{return Kb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Qb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Kb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rV(u)&&e(),Qb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,hy(n),qy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function hy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Kb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Qb(n){n._nesting--,qy(n)}var kd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Se;onMicrotaskEmpty=new Se;onStable=new Se;onError=new Se;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function nV(n){return DS(n,"__ignore_ng_zone__")}function rV(n){return DS(n,"__scheduler_tick__")}function DS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),bS=[0,1,2,3],CS=(()=>{class n{ngZone=M(Ae);scheduler=M(lr);errorHandler=M(ln,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(so,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ee(16),this.executing=!0;for(let r of bS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ee(17)}register(t){let{view:r}=t;r!==void 0?((r[Yi]??=[]).push(t),hs(r),r[Y]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Kd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Yi];e&&(this.view[Yi]=e.filter(t=>t!==this))}};function Gy(n,e){let t=e?.injector??M(xt);return oo("NgAfterNextRender"),oV(n,t,e,!0)}function iV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function oV(n,e,t,r){let i=e.get(zy);i.impl??=e.get(CS);let o=e.get(so,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(On):null,a=e.get(fd,null,{optional:!0}),u=new Fd(i.impl,iV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Wy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Ky=new j("");function vr(n){return!!n&&typeof n.then=="function"}function Qd(n){return!!n&&typeof n.subscribe=="function"}var Qy=new j("");function Yd(n){return An([{provide:Qy,multi:!0,useValue:n}])}var Yy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(Qy,{optional:!0})??[];injector=M(xt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=pt(this.injector,i);if(vr(o))t.push(o);else if(Qd(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_c=new j("");function SS(){Mg(()=>{let n="";throw new L(600,n)})}function AS(n){return n.isBoundToModule}var sV=10;var ao=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(mt);afterRenderManager=M(zy);zonelessEnabled=M(ac);rootEffectScheduler=M(km);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(pr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(te(t=>!t))}constructor(){M(so,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(Fe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=xt.NULL){return this._injector.get(Ae).run(()=>{Ee(10);let s=t instanceof Gd;if(!this._injector.get(Yy).done){let C="";throw new L(405,C)}let u;s?u=t:u=this._injector.get(vc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=AS(u)?void 0:this._injector.get(ro),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Ky,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),lc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Ee(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Kd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new L(101,!1);let t=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(t),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(to,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<sV;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ic(i))continue;let o=r&&!this.zonelessEnabled?0:1;ky(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ic(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;lc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(_c,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>lc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new L(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _r(n,e,t,r){let i=he(),o=sc();if(mr(i,o,e)){let s=Ze(),a=ld();cF(a,i,n,e,t,r)}return _r}function RS(n,e,t){let r=he(),i=sc();if(mr(r,i,e)){let o=Ze(),s=ld();qC(s,r,n,e,r[Pe],t)}return RS}function fy(n,e,t,r,i){Ay(e,n,t,i?"class":"style",r)}function Jy(n,e,t,r){let i=he(),o=Ze(),s=kt+n,a=i[Pe],u=o.firstCreatePass?lS(s,o,i,e,zC,Im(),t,r):o.data[s],l=aV(o,i,u,a,e,n);i[s]=l;let h=ed(u);return fs(u,!0),VC(a,l,u),!My(u)&&dd()&&Oy(o,i,l,u),(XD()===0||h)&&yc(l,i),eb(),h&&(Sy(o,i,u),AC(o,u,i)),r!==null&&HC(i,u),Jy}function Zy(){let n=ot();Tm()?cb():(n=n.parent,fs(n,!1));let e=n;rb(e)&&ib(),tb();let t=Ze();return t.firstCreatePass&&dS(t,e),e.classesWithoutHost!=null&&i1(e)&&fy(t,e,he(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&o1(e)&&fy(t,e,he(),e.stylesWithoutHost,!1),Zy}function Jd(n,e,t,r){return Jy(n,e,t,r),Zy(),Jd}var aV=(n,e,t,r,i,o)=>(hd(!0),FC(r,i,Eb()));function cV(){return he()}var Ec="en-US";var uV=Ec;function NS(n){typeof n=="string"&&(uV=n.toLowerCase().replace(/_/g,"-"))}function rn(n,e,t){let r=he(),i=Ze(),o=ot();return MS(i,r,r[Pe],o,n,e,t),rn}function MS(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=jm(r,e,o),cL(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=jm(r,e,o),$b(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=jm(r,e,o),$b(r,e,p,i,i,u)}}function lV(n=1){return _b(n)}function Xy(n,e,t,r){ML(n,e,t,r)}function ev(n){let e=he(),t=Ze(),r=Sm();ad(r+1);let i=Uy(t,r);if(n.dirty&&KD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=kL(e,r);n.reset(o,v1),n.notifyOnChanges()}return!0}return!1}function tv(){return RL(he(),Sm())}function dV(n){let e=ub();return pm(e,kt+n)}function yd(n,e){return n<<17|e<<2}function io(n){return n>>17&32767}function hV(n){return(n&2)==2}function fV(n,e){return n&131071|e<<17}function py(n){return n|2}function ms(n){return(n&131068)>>2}function $m(n,e){return n&-131069|e<<2}function pV(n){return(n&1)===1}function gy(n){return n|1}function gV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=io(s),u=ms(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||cs(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=io(n[a+1]);n[r+1]=yd(m,a),m!==0&&(n[m+1]=$m(n[m+1],r)),n[a+1]=fV(n[a+1],r)}else n[r+1]=yd(a,0),a!==0&&(n[a+1]=$m(n[a+1],r)),a=r;else n[r+1]=yd(u,0),a===0?a=r:n[u+1]=$m(n[u+1],r),u=r;l&&(n[r+1]=py(n[r+1])),Yb(n,h,r,!0),Yb(n,h,r,!1),mV(e,h,n,r,o),s=yd(a,u),o?e.classBindings=s:e.styleBindings=s}function mV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&cs(o,e)>=0&&(t[r+1]=gy(t[r+1]))}function Yb(n,e,t,r){let i=n[t+1],o=e===null,s=r?io(i):ms(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];yV(u,e)&&(a=!0,n[s+1]=r?gy(l):py(l)),s=r?io(l):ms(l)}a&&(n[t+1]=r?py(i):gy(i))}function yV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?cs(n,e)>=0:!1}var gn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vV(n){return n.substring(gn.key,gn.keyEnd)}function _V(n){return EV(n),PS(n,OS(n,0,gn.textEnd))}function PS(n,e){let t=gn.textEnd;return t===e?-1:(e=gn.keyEnd=IV(n,gn.key=e,t),OS(n,e,t))}function EV(n){gn.key=0,gn.keyEnd=0,gn.value=0,gn.valueEnd=0,gn.textEnd=n.length}function OS(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function IV(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function xS(n,e,t){return kS(n,e,t,!1),xS}function Ic(n,e){return kS(n,e,null,!0),Ic}function wV(n){DV(NV,TV,n,!0)}function TV(n,e){for(let t=_V(e);t>=0;t=PS(e,t))Jl(n,vV(e),!0)}function kS(n,e,t,r){let i=he(),o=Ze(),s=od(2);if(o.firstUpdatePass&&LS(o,n,s,r),e!==Lt&&mr(i,s,e)){let a=o.data[fr()];VS(o,a,i,i[Pe],n,i[s+1]=PV(e,t),r,s)}}function DV(n,e,t,r){let i=Ze(),o=od(2);i.firstUpdatePass&&LS(i,null,o,r);let s=he();if(t!==Lt&&mr(s,o,t)){let a=i.data[fr()];if(jS(a,r)&&!FS(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Wl(u,t||"")),fy(i,a,s,t,r)}else MV(i,a,s,s[Pe],s[o+1],s[o+1]=RV(n,e,t),r,o)}}function FS(n,e){return e>=n.expandoStartIndex}function LS(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[fr()],s=FS(n,t);jS(o,r)&&e===null&&!s&&(e=!1),e=bV(i,o,e,r),gV(i,o,e,t,s,r)}}function bV(n,e,t,r){let i=gb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Hm(null,n,e,t,r),t=gc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Hm(i,n,e,t,r),o===null){let u=CV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Hm(null,n,e,u[1],r),u=gc(u,e.attrs,r),SV(n,e,r,u))}else o=AV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function CV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ms(r)!==0)return n[io(r)]}function SV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[io(i)]=r}function AV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=gc(r,s,t)}return gc(r,e.attrs,t)}function Hm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=gc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function gc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Jl(n,s,t?!0:e[++o]))}return n===void 0?null:n}function RV(n,e,t){if(t==null||t==="")return bt;let r=[],i=Es(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function NV(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Jl(n,r,t)}function MV(n,e,t,r,i,o,s,a){i===Lt&&(i=bt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,C=null,N;h===p?(u+=2,l+=2,m!==y&&(C=p,N=y)):p===null||h!==null&&h<p?(u+=2,C=h):(l+=2,C=p,N=y),C!==null&&VS(n,e,t,r,C,N,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function VS(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=pV(l)?Jb(u,e,t,i,ms(l),s):void 0;if(!Ld(h)){Ld(o)||hV(l)&&(o=Jb(u,null,t,i,a,s));let p=fm(fr(),t);NF(r,s,p,i,o)}}function Jb(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Lt&&(m=p?bt:void 0);let y=p?Zl(m,r):h===r?m:void 0;if(l&&!Ld(y)&&(y=Zl(u,r)),Ld(y)&&(a=y,s))return a;let C=n[i+1];i=s?io(C):ms(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Zl(u,r))}return a}function Ld(n){return n!==void 0}function PV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ot(Es(n)))),n}function jS(n,e){return(n.flags&(e?8:16))!==0}function OV(n,e=""){let t=he(),r=Ze(),i=n+kt,o=r.firstCreatePass?Ly(r,i,1,e,null):r.data[i],s=xV(r,t,o,e,n);t[i]=s,dd()&&Oy(r,t,s,o),fs(o,!1)}var xV=(n,e,t,r,i)=>(hd(!0),q1(e[Pe],r));function kV(n,e,t,r=""){return mr(n,sc(),t)?e+Gi(t)+r:Lt}function FV(n,e,t,r,i,o=""){let s=lb(),a=aL(n,s,t,i);return od(2),a?e+Gi(t)+r+Gi(i)+o:Lt}function US(n){return nv("",n),US}function nv(n,e,t){let r=he(),i=kV(r,n,e,t);return i!==Lt&&$S(r,fr(),i),nv}function BS(n,e,t,r,i){let o=he(),s=FV(o,n,e,t,r,i);return s!==Lt&&$S(o,fr(),s),BS}function $S(n,e,t){let r=fm(e,n);z1(n[Pe],r,t)}function HS(n,e,t){Pm(e)&&(e=e());let r=he(),i=sc();if(mr(r,i,e)){let o=Ze(),s=ld();qC(s,r,n,e,r[Pe],t)}return HS}function LV(n,e){let t=Pm(n);return t&&n.set(e),t}function qS(n,e){let t=he(),r=Ze(),i=ot();return MS(r,t,t[Pe],i,n,e),qS}function VV(n,e,t){let r=Ze();if(r.firstCreatePass){let i=Pn(n);my(t,r.data,r.blueprint,i,!0),my(e,r.data,r.blueprint,i,!1)}}function my(n,e,t,r,i){if(n=it(n),Array.isArray(n))for(let o=0;o<n.length;o++)my(n[o],e,t,r,i);else{let o=Ze(),s=he(),a=ot(),u=Hi(n)?n:it(n.provide),l=um(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Hi(n)||!n.multi){let y=new eo(l,i,q),C=zm(u,e,i?h:h+m,p);C===-1?(Wm(Cd(a,s),o,u),qm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=zm(u,e,h+m,p),C=zm(u,e,h,h+m),N=y>=0&&t[y],R=C>=0&&t[C];if(i&&!R||!i&&!N){Wm(Cd(a,s),o,u);let k=BV(i?UV:jV,t.length,i,r,l);!i&&R&&(t[C].providerFactory=k),qm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=zS(t[i?C:y],l,!i&&r);qm(o,n,y>-1?y:C,k)}!i&&r&&R&&t[C].componentProviders++}}}function qm(n,e,t,r){let i=Hi(e),o=HD(e);if(i||o){let u=(o?it(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function zS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function zm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function jV(n,e,t,r){return yy(this.multi,[])}function UV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=hc(t,t[ne],this.providerFactory.index,r);o=a.slice(0,s),yy(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],yy(i,o);return o}function yy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function BV(n,e,t,r,i){let o=new eo(n,t,q);return o.multi=[],o.index=e,o.componentProviders=0,zS(o,i,r&&!t),o}function At(n,e=[]){return t=>{t.providersResolver=(r,i)=>VV(r,i?i(n):n,e)}}function $V(n,e,t){let r=id()+n,i=he();return i[r]===Lt?pS(i,r,t?e.call(t):e()):sL(i,r)}function HV(n,e,t,r){return GS(he(),id(),n,e,t,r)}function qV(n,e){let t=n[e];return t===Lt?void 0:t}function GS(n,e,t,r,i,o){let s=e+t;return mr(n,s,i)?pS(n,s+1,o?r.call(o,i):r(i)):qV(n,s+1)}function zV(n,e){let t=Ze(),r,i=n+kt;t.firstCreatePass?(r=GV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Kr(r.type,!0)),s,a=Dt(q);try{let u=bd(!1),l=o();return bd(u),gm(t,he(),i,l),l}finally{Dt(a)}}function GV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function WV(n,e,t){let r=n+kt,i=he(),o=pm(i,r);return KV(i,r)?GS(i,id(),e,o.transform,t,o):o.transform(t)}function KV(n,e){return n[ne].data[e].pure}function QV(n,e){return zd(n,e)}var Vd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},rv=(()=>{class n{compileModuleSync(t){return new Od(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=om(t),o=xC(i.declarations).reduce((s,a)=>{let u=hr(a);return u&&s.push(new no(u)),s},[]);return new Vd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YV=(()=>{class n{zone=M(Ae);changeDetectionScheduler=M(lr);applicationRef=M(ao);applicationErrorHandler=M(mt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WS=new j("",{factory:()=>!1});function iv({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ae(J(x({},ov()),{scheduleInRootZone:t})),[{provide:Ae,useFactory:n},{provide:dr,multi:!0,useFactory:()=>{let r=M(YV,{optional:!0});return()=>r.initialize()}},{provide:dr,multi:!0,useFactory:()=>{let r=M(ZV);return()=>{r.initialize()}}},e===!0?{provide:Om,useValue:!0}:[],{provide:xm,useValue:t??wS},{provide:mt,useFactory:()=>{let r=M(Ae),i=M(Fe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(ln),o.handleError(s))})}}}]}function JV(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=iv({ngZoneFactory:()=>{let i=ov(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&oo("NgZone_CoalesceEvent"),new Ae(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return An([{provide:WS,useValue:!0},{provide:ac,useValue:!1},r])}function ov(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var ZV=(()=>{class n{subscription=new Me;initialized=!1;zone=M(Ae);pendingTasks=M(pr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ae.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ae.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var KS=(()=>{class n{applicationErrorHandler=M(mt);appRef=M(ao);taskService=M(pr);ngZone=M(Ae);zonelessEnabled=M(ac);tracing=M(so,{optional:!0});disableScheduling=M(Om,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(xd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(xm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof kd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Wb:TS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(xd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Wb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XV(){return typeof $localize<"u"&&$localize.locale||Ec}var Zd=new j("",{providedIn:"root",factory:()=>M(Zd,{optional:!0,skipSelf:!0})||XV()});function Rt(n){return SD(n)}function co(n,e){return Ul(n,e?.equal)}var QS=class{[ft];constructor(e){this[ft]=e}destroy(){this[ft].destroy()}};var eA=Symbol("InputSignalNode#UNSET"),fj=J(x({},Bl),{transformFn:void 0,applyValueToInputSignal(n,e){os(n,e)}});function tA(n,e){let t=Object.create(fj);t.value=n,t.transformFn=e?.transform;function r(){if(rs(t),t.value===eA){let i=null;throw new L(-950,i)}return t.value}return r[ft]=t,r}var eh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>mc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},pj=new j("");pj.__NG_ELEMENT_ID__=n=>{let e=ot();if(e===null)throw new L(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new L(204,!1)};function YS(n,e){return tA(n,e)}function gj(n){return tA(eA,n)}var nA=(YS.required=gj,YS);var sv=new j(""),mj=new j("");function wc(n){return!n.moduleRef}function yj(n){let e=wc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ae);return t.run(()=>{wc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(mt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),wc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(sv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(sv);s.add(o),n.moduleRef.onDestroy(()=>{lc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return _j(r,t,()=>{let o=e.get(Yy);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Zd,Ec);if(NS(s||Ec),!e.get(mj,!0))return wc(n)?e.get(ao):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(wc(n)){let u=e.get(ao);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return vj?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var vj;function _j(n,e,t){try{let r=t();return vr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Xd=null;function Ej(n=[],e){return xt.create({name:e,providers:[{provide:Ja,useValue:"platform"},{provide:sv,useValue:new Set([()=>Xd=null])},...n]})}function Ij(n=[]){if(Xd)return Xd;let e=Ej(n);return Xd=e,SS(),wj(e),e}function wj(n){let e=n.get(Ud,null);pt(n,()=>{e?.forEach(t=>t())})}var Er=(()=>{class n{static __NG_ELEMENT_ID__=Tj}return n})();function Tj(n){return Dj(ot(),he(),(n&16)===16)}function Dj(n,e,t){if(Xr(n)&&!t){let r=en(n.index,e);return new ti(r,r)}else if(n.type&175){let r=e[Zt];return new ti(r,e)}return null}var av=class{constructor(){}supports(e){return jy(e)}create(e){return new cv(e)}},bj=(n,e)=>e,cv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||bj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<JS(r,i,o)?t:r,a=JS(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,C=y+m;h<=C&&C<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!jy(e))throw new L(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,hS(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new uv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new th),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new th),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},uv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},lv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},th=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new lv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function JS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function ZS(){return new dv([new av])}var dv=(()=>{class n{factories;static \u0275prov=U({token:n,providedIn:"root",factory:ZS});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||ZS()),deps:[[n,new tC,new eC]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new L(901,!1)}}return n})();function rA(n){Ee(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Ij(r),o=[iv({}),{provide:lr,useExisting:KS},wb,...t||[]],s=new pc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return yj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ee(9)}}function ri(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function iA(n){let e=hr(n);if(!e)return null;let t=new no(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var aA=null;function on(){return aA}function hv(n){aA??=n}var Tc=class{},Dc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>M(cA),providedIn:"platform"})}return n})(),fv=new j(""),cA=(()=>{class n extends Dc{_location;_history;_doc=M(Ce);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return on().getBaseHref(this._doc)}onPopState(t){let r=on().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=on().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function nh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function oA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function yn(n){return n&&n[0]!=="?"?`?${n}`:n}var vn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>M(ih),providedIn:"root"})}return n})(),rh=new j(""),ih=(()=>{class n extends vn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return nh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+yn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+yn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+yn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(H(Dc),H(rh,8))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ii=(()=>{class n{_subject=new xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Aj(oA(sA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+yn(r))}normalize(t){return n.stripTrailingSlash(Sj(this._basePath,sA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=yn;static joinWithSlash=nh;static stripTrailingSlash=oA;static \u0275fac=function(r){return new(r||n)(H(vn))};static \u0275prov=U({token:n,factory:()=>Cj(),providedIn:"root"})}return n})();function Cj(){return new ii(H(vn))}function Sj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function sA(n){return n.replace(/\/index.html$/,"")}function Aj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var mv=(()=>{class n extends vn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=nh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+yn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+yn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(H(Dc),H(rh,8))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();var oh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},dA=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new oh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),uA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);uA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(q(yr),q(ni),q(dv))};static \u0275dir=ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function uA(n,e){n.context.$implicit=e.item}var Rj=(()=>{class n{_viewContainer;_context=new sh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(q(yr),q(ni))};static \u0275dir=ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),sh=class{$implicit=null;ngIf=null};function lA(n,e){if(n&&!n.createEmbeddedView)throw new L(2020,!1)}function Nj(n,e){return new L(2100,!1)}var pv=class{createSubscription(e,t,r){return Rt(()=>e.subscribe({next:t,error:r}))}dispose(e){Rt(()=>e.unsubscribe())}},gv=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},Mj=new gv,Pj=new pv,Oj=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(mt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(vr(t))return Mj;if(Qd(t))return Pj;throw Nj(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(q(Er,16))};static \u0275pipe=$y({name:"async",type:n,pure:!1})}return n})();var hA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=nn({type:n});static \u0275inj=$t({})}return n})();function bc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var uo=class{};var vv="browser",kj="server";function ere(n){return n===vv}function fA(n){return n===kj}var pA=(()=>{class n{static \u0275prov=U({token:n,providedIn:"root",factory:()=>new yv(M(Ce),window)})}return n})(),yv=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(J(x({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=Fj(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(as(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(J(x({},t),{left:i-s[0],top:o-s[1]}))}};function Fj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var uh=new j(""),wv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(H(uh),H(Ae))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Cc=class{_doc;constructor(e){this._doc=e}manager},ah="ng-app-id";function gA(n){for(let e of n)e.remove()}function mA(n,e){let t=e.createElement("style");return t.textContent=n,t}function Vj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${ah}="${e}"],link[${ah}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ah),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Ev(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Tv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=fA(o),Vj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,mA);r?.forEach(i=>this.addUsage(i,this.external,Ev))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(gA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])gA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,mA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Ev(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(ah,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(H(Ce),H(jd),H(Bd,8),H(_s))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),_v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Dv=/%COMP%/g;var vA="%COMP%",jj=`_nghost-${vA}`,Uj=`_ngcontent-${vA}`,Bj=!0,$j=new j("",{providedIn:"root",factory:()=>Bj});function Hj(n){return Uj.replace(Dv,n)}function qj(n){return jj.replace(Dv,n)}function _A(n,e){return e.map(t=>t.replace(Dv,n))}var bv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Sc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof ch?i.applyToHost(t):i instanceof Ac&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case gr.Emulated:o=new ch(u,l,r,this.appId,h,s,a,p,m);break;case gr.ShadowDom:return new Iv(u,l,t,r,s,a,this.nonce,p,m);default:o=new Ac(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(H(wv),H(Tv),H(jd),H($j),H(Ce),H(_s),H(Ae),H(Bd),H(so,8))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Sc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(_v[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=_v[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=_v[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Fn.DashCase|Fn.Important)?e.style.setProperty(t,r,i&Fn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Fn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=on().getGlobalEventTarget(this.doc,e),!e))throw new L(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function yA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Iv=class extends Sc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=_A(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Ev(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ac=class extends Sc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?_A(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ch=class extends Ac{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=Hj(h),this.hostAttr=qj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var lh=class n extends Tc{supportsDOMEvents=!0;static makeCurrent(){hv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=zj();return t==null?null:Gj(t)}resetBaseElement(){Rc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bc(document.cookie,e)}},Rc=null;function zj(){return Rc=Rc||document.head.querySelector("base"),Rc?Rc.getAttribute("href"):null}function Gj(n){return new URL(n,document.baseURI).pathname}var Wj=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),IA=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(H(Ce))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),EA=["alt","control","meta","shift"],Kj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},wA=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>on().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),EA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Kj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),EA.forEach(s=>{if(s!==i){let a=Qj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(H(Ce))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();function Yj(n,e){return rA(x({rootComponent:n},Jj(e)))}function Jj(n){return{appProviders:[...nU,...n?.providers??[]],platformProviders:tU}}function Zj(){lh.makeCurrent()}function Xj(){return new ln}function eU(){return Ey(document),document}var tU=[{provide:_s,useValue:vv},{provide:Ud,useValue:Zj,multi:!0},{provide:Ce,useFactory:eU}];var nU=[{provide:Ja,useValue:"root"},{provide:ln,useFactory:Xj},{provide:uh,useClass:IA,multi:!0,deps:[Ce]},{provide:uh,useClass:wA,multi:!0,deps:[Ce]},bv,Tv,wv,{provide:to,useExisting:bv},{provide:uo,useClass:Wj},[]];var Ts=class{},Ds=class{},Vn=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var fh=class{encodeKey(e){return TA(e)}encodeValue(e){return TA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function rU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var iU=/%(\d[a-f0-9])/gi,oU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TA(n){return encodeURIComponent(n).replace(iU,(e,t)=>oU[t]??e)}function dh(n){return`${n}`}var wr=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new fh,e.fromString){if(e.fromObject)throw new L(2805,!1);this.map=rU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(dh):[dh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(dh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(dh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ph=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function sU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function DA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function bA(n){return typeof Blob<"u"&&n instanceof Blob}function CA(n){return typeof FormData<"u"&&n instanceof FormData}function aU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Nc="Content-Type",gh="Accept",Nv="X-Request-URL",AA="text/plain",RA="application/json",NA=`${RA}, ${AA}, */*`,ws=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(sU(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Vn,this.context??=new ph,!this.params)this.params=new wr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||DA(this.body)||bA(this.body)||CA(this.body)||aU(this.body)?this.body:this.body instanceof wr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||CA(this.body)?null:bA(this.body)?this.body.type||null:DA(this.body)?null:typeof this.body=="string"?AA:this.body instanceof wr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?RA:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,u=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,p=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((y,C)=>y.set(C,e.setHeaders[C]),h)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,C)=>y.set(C,e.setParams[C]),p)),new n(t,r,a,{params:p,headers:h,context:m,reportProgress:l,responseType:i,withCredentials:u,transferCache:s,keepalive:o})}},Tr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Tr||{}),bs=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Vn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Mc=class n extends bs{constructor(e={}){super(e)}type=Tr.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cs=class n extends bs{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Tr.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ir=class extends bs{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},MA=200,cU=204;function Cv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var PA=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof ws)o=t;else{let u;i.headers instanceof Vn?u=i.headers:u=new Vn(i.headers);let l;i.params&&(i.params instanceof wr?l=i.params:l=new wr({fromObject:i.params})),o=new ws(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=G(o).pipe(Sn(u=>this.handler.handle(u)));if(t instanceof ws||i.observe==="events")return s;let a=s.pipe(ht(u=>u instanceof Cs));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(te(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new L(2806,!1);return u.body}));case"blob":return a.pipe(te(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new L(2807,!1);return u.body}));case"text":return a.pipe(te(u=>{if(u.body!==null&&typeof u.body!="string")throw new L(2808,!1);return u.body}));case"json":default:return a.pipe(te(u=>u.body))}case"response":return a;default:throw new L(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new wr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Cv(i,r))}post(t,r,i={}){return this.request("POST",t,Cv(i,r))}put(t,r,i={}){return this.request("PUT",t,Cv(i,r))}static \u0275fac=function(r){return new(r||n)(H(Ts))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),uU=/^\)\]\}',?\n/;function SA(n){if(n.url)return n.url;let e=Nv.toLocaleLowerCase();return n.headers.get(e)}var OA=new j(""),hh=(()=>{class n{fetchImpl=M(Sv,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t));ngZone=M(Ae);destroyRef=M(On);destroyed=!1;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0})}handle(t){return new ce(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(Av,o=>r.error(new Ir({error:o}))),()=>i.abort()})}doRequest(t,r,i){return v(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,x({signal:r},o)));lU(y),i.next({type:Tr.Sent}),s=yield y}catch(y){i.error(new Ir({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new Vn(s.headers),u=s.statusText,l=SA(s)??t.urlWithParams,h=s.status,p=null;if(t.reportProgress&&i.next(new Mc({headers:a,status:h,statusText:u,url:l})),s.body){let y=s.headers.get("content-length"),C=[],N=s.body.getReader(),R=0,k,z,B=typeof Zone<"u"&&Zone.current,pe=!1;if(yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){if(this.destroyed){yield N.cancel(),pe=!0;break}let{done:le,value:T}=yield N.read();if(le)break;if(C.push(T),R+=T.length,t.reportProgress){z=t.responseType==="text"?(z??"")+(k??=new TextDecoder).decode(T,{stream:!0}):void 0;let _=()=>i.next({type:Tr.DownloadProgress,total:y?+y:void 0,loaded:R,partialText:z});B?B.run(_):_()}}})),pe){i.complete();return}let He=this.concatChunks(C,R);try{let le=s.headers.get(Nc)??"";p=this.parseBody(t,He,le)}catch(le){i.error(new Ir({error:le,headers:new Vn(s.headers),status:s.status,statusText:s.statusText,url:SA(s)??t.urlWithParams}));return}}h===0&&(h=p?MA:0),h>=200&&h<300?(i.next(new Cs({body:p,headers:a,status:h,statusText:u,url:l})),i.complete()):i.error(new Ir({error:p,headers:a,status:h,statusText:u,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(uU,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has(gh)||(r[gh]=NA),!t.headers.has(Nc)){let o=t.detectContentTypeHeader();o!==null&&(r[Nc]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i,keepalive:t.keepalive}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Sv=class{};function Av(){}function lU(n){n.then(Av,Av)}function dU(n,e){return e(n)}function hU(n,e,t){return(r,i)=>pt(t,()=>e(r,o=>n(o,i)))}var xA=new j(""),kA=new j(""),FA=new j("",{providedIn:"root",factory:()=>!0});var mh=(()=>{class n extends Ts{backend;injector;chain=null;pendingTasks=M(pd);contributeToStability=M(FA);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(xA),...this.injector.get(kA,[])]));this.chain=r.reduceRight((i,o)=>hU(i,o,this.injector),dU)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Vi(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(H(Ds),H(Fe))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();var fU=/^\)\]\}',?\n/,pU=RegExp(`^${Nv}:`,"m");function gU(n){return"responseURL"in n&&n.responseURL?n.responseURL:pU.test(n.getAllResponseHeaders())?n.getResponseHeader(Nv):null}var Rv=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new L(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?we(r.\u0275loadImpl()):G(null)).pipe(Tt(()=>new ce(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,R)=>s.setRequestHeader(N,R.join(","))),t.headers.has(gh)||s.setRequestHeader(gh,NA),!t.headers.has(Nc)){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader(Nc,N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=s.statusText||"OK",R=new Vn(s.getAllResponseHeaders()),k=gU(s)||t.url;return u=new Mc({headers:R,status:s.status,statusText:N,url:k}),u},h=()=>{let{headers:N,status:R,statusText:k,url:z}=l(),B=null;R!==cU&&(B=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=B?MA:0);let pe=R>=200&&R<300;if(t.responseType==="json"&&typeof B=="string"){let He=B;B=B.replace(fU,"");try{B=B!==""?JSON.parse(B):null}catch(le){B=He,pe&&(pe=!1,B={error:le,text:B})}}pe?(o.next(new Cs({body:B,headers:N,status:R,statusText:k,url:z||void 0})),o.complete()):o.error(new Ir({error:B,headers:N,status:R,statusText:k,url:z||void 0}))},p=N=>{let{url:R}=l(),k=new Ir({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(k)},m=!1,y=N=>{m||(o.next(l()),m=!0);let R={type:Tr.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},C=N=>{let R={type:Tr.UploadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:Tr.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(H(uo))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),LA=new j(""),mU="XSRF-TOKEN",yU=new j("",{providedIn:"root",factory:()=>mU}),vU="X-XSRF-TOKEN",_U=new j("",{providedIn:"root",factory:()=>vU}),Pc=class{},EU=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(H(Ce),H(yU))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();function IU(n,e){let t=n.url.toLowerCase();if(!M(LA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=M(Pc).getToken(),i=M(_U);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Mv=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Mv||{});function wU(n,e){return{\u0275kind:n,\u0275providers:e}}function TU(...n){let e=[PA,Rv,mh,{provide:Ts,useExisting:mh},{provide:Ds,useFactory:()=>M(OA,{optional:!0})??M(Rv)},{provide:xA,useValue:IU,multi:!0},{provide:LA,useValue:!0},{provide:Pc,useClass:EU}];for(let t of n)e.push(...t.\u0275providers);return An(e)}function DU(){return wU(Mv.Fetch,[hh,{provide:OA,useExisting:hh},{provide:Ds,useExisting:hh}])}var VA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(H(Ce))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",zc=Symbol("RouteTitle"),Fv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function fo(n){return new Fv(n)}function GA(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function CU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jn(n[t],e[t]))return!1;return!0}function jn(n,e){let t=n?Lv(n):void 0,r=e?Lv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!WA(n[i],e[i]))return!1;return!0}function Lv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function WA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function KA(n){return n.length>0?n[n.length-1]:null}function Dr(n){return Ig(n)?n:vr(n)?we(Promise.resolve(n)):G(n)}var SU={exact:YA,subset:JA},QA={exact:AU,subset:RU,ignored:()=>!0};function jA(n,e,t){return SU[t.paths](n.root,e.root,t.matrixParams)&&QA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function AU(n,e){return jn(n,e)}function YA(n,e,t){if(!lo(n.segments,e.segments)||!_h(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!YA(n.children[r],e.children[r],t))return!1;return!0}function RU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WA(n[t],e[t]))}function JA(n,e,t){return ZA(n,e,e.segments,t)}function ZA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!lo(i,t)||e.hasChildren()||!_h(i,t,r))}else if(n.segments.length===t.length){if(!lo(n.segments,t)||!_h(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!JA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!lo(n.segments,i)||!_h(n.segments,i,r)||!n.children[re]?!1:ZA(n.children[re],e,o,r)}}function _h(n,e,t){return e.every((r,i)=>QA[t](n[i].parameters,r.parameters))}var Bn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=fo(this.queryParams),this._queryParamMap}toString(){return PU.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Eh(this)}},oi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=fo(this.parameters),this._parameterMap}toString(){return e0(this)}};function NU(n,e){return lo(n,e)&&n.every((t,r)=>jn(t.parameters,e[r].parameters))}function lo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function MU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var po=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>new si,providedIn:"root"})}return n})(),si=class{parse(e){let t=new jv(e);return new Bn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Oc(e.root,!0)}`,r=kU(e.queryParams),i=typeof e.fragment=="string"?`#${OU(e.fragment)}`:"";return`${t}${r}${i}`}},PU=new si;function Eh(n){return n.segments.map(e=>e0(e)).join("/")}function Oc(n,e){if(!n.hasChildren())return Eh(n);if(e){let t=n.children[re]?Oc(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${Oc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=MU(n,(r,i)=>i===re?[Oc(n.children[re],!1)]:[`${i}:${Oc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Eh(n)}/${t[0]}`:`${Eh(n)}/(${t.join("//")})`}}function XA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yh(n){return XA(n).replace(/%3B/gi,";")}function OU(n){return encodeURI(n)}function Vv(n){return XA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ih(n){return decodeURIComponent(n)}function UA(n){return Ih(n.replace(/\+/g,"%20"))}function e0(n){return`${Vv(n.path)}${xU(n.parameters)}`}function xU(n){return Object.entries(n).map(([e,t])=>`;${Vv(e)}=${Vv(t)}`).join("")}function kU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${yh(t)}=${yh(i)}`).join("&"):`${yh(t)}=${yh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var FU=/^[^\/()?;#]+/;function Pv(n){let e=n.match(FU);return e?e[0]:""}var LU=/^[^\/()?;=#]+/;function VU(n){let e=n.match(LU);return e?e[0]:""}var jU=/^[^=?&#]+/;function UU(n){let e=n.match(jU);return e?e[0]:""}var BU=/^[^&#]+/;function $U(n){let e=n.match(BU);return e?e[0]:""}var jv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new ve(e,t)),r}parseSegment(){let e=Pv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new oi(Ih(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=VU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Pv(this.remaining);i&&(r=i,this.capture(r))}e[Ih(t)]=Ih(r)}parseQueryParam(e){let t=UU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=$U(this.remaining);s&&(r=s,this.capture(r))}let i=UA(t),o=UA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Pv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[re]:new ve([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}};function t0(n){return n.segments.length>0?new ve([],{[re]:n}):n}function n0(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=n0(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ve(n.segments,e);return HU(t)}function HU(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ve(n.segments.concat(e.segments),e.children)}return n}function ai(n){return n instanceof Bn}function r0(n,e,t=null,r=null){let i=i0(n);return o0(i,e,t,r)}function i0(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ve(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=t0(r);return e??i}function o0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ov(i,i,i,t,r);let o=qU(e);if(o.toRoot())return Ov(i,i,new ve([],{}),t,r);let s=zU(o,i,n),a=s.processChildren?kc(s.segmentGroup,s.index,o.commands):a0(s.segmentGroup,s.index,o.commands);return Ov(i,s.segmentGroup,a,t,r)}function wh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Lc(n){return typeof n=="object"&&n!=null&&n.outlets}function Ov(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=s0(n,e,t);let a=t0(n0(s));return new Bn(a,o,i)}function s0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=s0(o,e,t)}),new ve(n.segments,r)}var Th=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wh(r[0]))throw new L(4003,!1);let i=r.find(Lc);if(i&&i!==KA(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Th(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Th(t,e,r)}var Rs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function zU(n,e,t){if(n.isAbsolute)return new Rs(e,!0,0);if(!t)return new Rs(e,!1,NaN);if(t.parent===null)return new Rs(t,!0,0);let r=wh(n.commands[0])?0:1,i=t.segments.length-1+r;return GU(t,i,n.numberOfDoubleDots)}function GU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new Rs(r,!1,i-o)}function WU(n){return Lc(n[0])?n[0].outlets:{[re]:n}}function a0(n,e,t){if(n??=new ve([],{}),n.segments.length===0&&n.hasChildren())return kc(n,e,t);let r=KU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ve(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new ve(n.segments.slice(r.pathIndex),n.children),kc(o,0,i)}else return r.match&&i.length===0?new ve(n.segments,{}):r.match&&!n.hasChildren()?Uv(n,e,t):r.match?kc(n,0,i):Uv(n,e,t)}function kc(n,e,t){if(t.length===0)return new ve(n.segments,{});{let r=WU(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=kc(n.children[re],e,t);return new ve(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=a0(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(n.segments,i)}}function KU(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Lc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!$A(u,l,s))return o;r+=2}else{if(!$A(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Uv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Lc(o)){let u=QU(o.outlets);return new ve(r,u)}if(i===0&&wh(t[0])){let u=n.segments[e];r.push(new oi(u.path,BA(t[0]))),i++;continue}let s=Lc(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&wh(a)?(r.push(new oi(s,BA(a))),i+=2):(r.push(new oi(s,{})),i++)}return new ve(r,{})}function QU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Uv(new ve([],{}),0,r))}),e}function BA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function $A(n,e,t){return n==t.path&&jn(e,t.parameters)}var Ns="imperative",Ge=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ge||{}),zt=class{id;url;constructor(e,t){this.id=e,this.url=t}},ci=class extends zt{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gt=class extends zt{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Nt||{}),Ps=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ps||{}),Un=class extends zt{reason;code;type=Ge.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$n=class extends zt{reason;code;type=Ge.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Os=class extends zt{error;target;type=Ge.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vc=class extends zt{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dh=class extends zt{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bh=class extends zt{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ch=class extends zt{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sh=class extends zt{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ah=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rh=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nh=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mh=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ph=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oh=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xs=class{routerEvent;position;anchor;type=Ge.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},jc=class{},ks=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function YU(n){return!(n instanceof jc)&&!(n instanceof ks)}function JU(n,e){return n.providers&&!n._injector&&(n._injector=Is(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _n(n){return n.outlet||re}function ZU(n,e){let t=n.filter(r=>_n(r)===e);return t.push(...n.filter(r=>_n(r)!==e)),t}function Gc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var xh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Gc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new go(this.rootInjector)}},go=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(H(Fe))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Bv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Bv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=$v(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $v(e,this._root).map(t=>t.value)}};function Bv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Bv(n,t);if(r)return r}return null}function $v(n,e){if(n===e.value)return[e];for(let t of e.children){let r=$v(n,t);if(r.length)return r.unshift(e),r}return[]}var qt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function As(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Uc=class extends kh{snapshot;constructor(e,t){super(e),this.snapshot=t,Yv(this,e)}toString(){return this.snapshot.toString()}};function c0(n){let e=XU(n),t=new Le([new oi("",{})]),r=new Le({}),i=new Le({}),o=new Le({}),s=new Le(""),a=new Hn(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new Uc(new qt(a,[]),e)}function XU(n){let e={},t={},r={},i="",o=new ho([],e,r,i,t,re,n,null,{});return new Bc("",new qt(o,[]))}var Hn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(te(l=>l[zc]))??G(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>fo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>fo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),n.params),data:x(x({},e.data),n.data),resolve:x(x(x(x({},n.data),e.data),i?.data),n._resolvedData)}:r={params:x({},n.params),data:x({},n.data),resolve:x(x({},n.data),n._resolvedData??{})},i&&l0(i)&&(r.resolve[zc]=i.title),r}var ho=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[zc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Bc=class extends kh{url;constructor(e,t){super(t),this.url=e,Yv(this,t)}toString(){return u0(this._root)}};function Yv(n,e){e.value._routerState=n,e.children.forEach(t=>Yv(n,t))}function u0(n){let e=n.children.length>0?` { ${n.children.map(u0).join(", ")} } `:"";return`${n.value}${e}`}function xv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jn(e.params,t.params)||n.paramsSubject.next(t.params),CU(e.url,t.url)||n.urlSubject.next(t.url),jn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Hv(n,e){let t=jn(n.params,e.params)&&NU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Hv(n.parent,e.parent))}function l0(n){return typeof n.title=="string"||n.title===null}var d0=new j(""),Jv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Se;deactivateEvents=new Se;attachEvents=new Se;detachEvents=new Se;routerOutletData=nA(void 0);parentContexts=M(go);location=M(yr);changeDetector=M(Er);inputBinder=M(Wc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new qv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[tn]})}return n})(),qv=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Hn?this.route:e===go?this.childContexts:e===d0?this.outletData:this.parent.get(e,t)}},Wc=new j(""),Zv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ua([r.queryParams,r.params,r.data]).pipe(Tt(([o,s,a],u)=>(a=x(x(x({},o),s),a),u===0?G(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=iA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Xv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=By({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Jd(0,"router-outlet")},dependencies:[Jv],encapsulation:2})}return n})();function e_(n){let e=n.children&&n.children.map(e_),t=e?J(x({},n),{children:e}):x({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=Xv),t}function e2(n,e,t){let r=$c(n,e._root,t?t._root:void 0);return new Uc(r,e)}function $c(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=t2(n,e,t);return new qt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>$c(n,a)),s}}let r=n2(e.value),i=e.children.map(o=>$c(n,o));return new qt(r,i)}}function t2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $c(n,r,i);return $c(n,r)})}function n2(n){return new Hn(new Le(n.url),new Le(n.params),new Le(n.queryParams),new Le(n.fragment),new Le(n.data),n.outlet,n.component,n)}var Fs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},h0="ngNavigationCancelingError";function Lh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ai(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=f0(!1,Nt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function f0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[h0]=!0,t.cancellationCode=e,t}function r2(n){return p0(n)&&ai(n.url)}function p0(n){return!!n&&n[h0]}var i2=(n,e,t,r)=>te(i=>(new zv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),zv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),xv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=As(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=As(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=As(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=As(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Oh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(xv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),xv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Vh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ms=class{component;route;constructor(e,t){this.component=e,this.route=t}};function o2(n,e,t){let r=n._root,i=e?e._root:null;return xc(r,i,t,[r.value])}function s2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Vs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Wg(n)?n:e.get(n):r}function xc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=As(e);return n.children.forEach(s=>{a2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Fc(a,t.getContext(s),i)),i}function a2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=c2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?xc(n,e,a?a.children:null,r,i):xc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ms(a.outlet.component,s))}else s&&Fc(e,a,i),i.canActivateChecks.push(new Vh(r)),o.component?xc(n,null,a?a.children:null,r,i):xc(n,null,t,r,i);return i}function c2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!lo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lo(n.url,e.url)||!jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hv(n,e)||!jn(n.queryParams,e.queryParams);case"paramsChange":default:return!Hv(n,e)}}function Fc(n,e,t){let r=As(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Fc(s,e.children.getContext(o),t):Fc(s,null,t):Fc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ms(e.outlet.component,i)):t.canDeactivateChecks.push(new Ms(null,i)):t.canDeactivateChecks.push(new Ms(null,i))}function Kc(n){return typeof n=="function"}function u2(n){return typeof n=="boolean"}function l2(n){return n&&Kc(n.canLoad)}function d2(n){return n&&Kc(n.canActivate)}function h2(n){return n&&Kc(n.canActivateChild)}function f2(n){return n&&Kc(n.canDeactivate)}function p2(n){return n&&Kc(n.canMatch)}function g0(n){return n instanceof or||n?.name==="EmptyError"}var vh=Symbol("INITIAL_VALUE");function Ls(){return Tt(n=>Ua(n.map(e=>e.pipe(sr(1),bg(vh)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===vh)return vh;if(t===!1||g2(t))return t}return!0}),ht(e=>e!==vh),sr(1)))}function g2(n){return ai(n)||n instanceof Fs}function m2(n,e){return ke(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?G(J(x({},t),{guardsResult:!0})):y2(s,r,i,n).pipe(ke(a=>a&&u2(a)?v2(r,o,n,e):G(a)),te(a=>J(x({},t),{guardsResult:a})))})}function y2(n,e,t,r){return we(n).pipe(ke(i=>T2(i.component,i.route,t,e,r)),ar(i=>i!==!0,!0))}function v2(n,e,t,r){return we(e).pipe(Sn(i=>es(E2(i.route.parent,r),_2(i.route,r),w2(n,i.path,t),I2(n,i.route,t))),ar(i=>i!==!0,!0))}function _2(n,e){return n!==null&&e&&e(new Ph(n)),G(!0)}function E2(n,e){return n!==null&&e&&e(new Nh(n)),G(!0)}function I2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>Ba(()=>{let s=Gc(e)??t,a=Vs(o,s),u=d2(a)?a.canActivate(e,n):pt(s,()=>a(e,n));return Dr(u).pipe(ar())}));return G(i).pipe(Ls())}function w2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>s2(s)).filter(s=>s!==null).map(s=>Ba(()=>{let a=s.guards.map(u=>{let l=Gc(s.node)??t,h=Vs(u,l),p=h2(h)?h.canActivateChild(r,n):pt(l,()=>h(r,n));return Dr(p).pipe(ar())});return G(a).pipe(Ls())}));return G(o).pipe(Ls())}function T2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(a=>{let u=Gc(e)??i,l=Vs(a,u),h=f2(l)?l.canDeactivate(n,e,t,r):pt(u,()=>l(n,e,t,r));return Dr(h).pipe(ar())});return G(s).pipe(Ls())}function D2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let a=Vs(s,n),u=l2(a)?a.canLoad(e,t):pt(n,()=>a(e,t));return Dr(u)});return G(o).pipe(Ls(),m0(r))}function m0(n){return gg(Qe(e=>{if(typeof e!="boolean")throw Lh(n,e)}),te(e=>e===!0))}function b2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let a=Vs(s,n),u=p2(a)?a.canMatch(e,t):pt(n,()=>a(e,t));return Dr(u)});return G(o).pipe(Ls(),m0(r))}var Hc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},qc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ss(n){return Xo(new Hc(n))}function C2(n){return Xo(new L(4e3,!1))}function S2(n){return Xo(f0(!1,Nt.GuardRejected))}var Gv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[re])return C2(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return A2(t,i,o).pipe(te(s=>{if(s instanceof Bn)throw new qc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new qc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Bn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function A2(n,e,t){if(typeof n=="string")return G(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Dr(pt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var Wv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R2(n,e,t,r,i){let o=y0(n,e,t);return o.matched?(r=JU(e,r),b2(r,e,t,i).pipe(te(s=>s===!0?o:x({},Wv)))):G(o)}function y0(n,e,t){if(e.path==="**")return N2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?x({},Wv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||GA)(t,n,e);if(!i)return x({},Wv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function N2(n){return{matched:!0,parameters:n.length>0?KA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function HA(n,e,t,r){return t.length>0&&O2(n,t,r)?{segmentGroup:new ve(e,P2(r,new ve(t,n.children))),slicedSegments:[]}:t.length===0&&x2(n,t,r)?{segmentGroup:new ve(n.segments,M2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ve(n.segments,n.children),slicedSegments:t}}function M2(n,e,t,r){let i={};for(let o of t)if(Uh(n,e,o)&&!r[_n(o)]){let s=new ve([],{});i[_n(o)]=s}return x(x({},r),i)}function P2(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&_n(r)!==re){let i=new ve([],{});t[_n(r)]=i}return t}function O2(n,e,t){return t.some(r=>Uh(n,e,r)&&_n(r)!==re)}function x2(n,e,t){return t.some(r=>Uh(n,e,r))}function Uh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function k2(n,e,t){return e.length===0&&!n.children[t]}var Kv=class{};function F2(n,e,t,r,i,o,s="emptyOnly"){return new Qv(n,e,t,r,i,s,o).recognize()}var L2=31,Qv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Gv(this.urlSerializer,this.urlTree)}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}recognize(){let e=HA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:t,rootSnapshot:r})=>{let i=new qt(r,t),o=new Bc("",i),s=r0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ho([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(te(r=>({children:r,rootSnapshot:t})),Cn(r=>{if(r instanceof qc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Hc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(te(s=>s instanceof qt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(Sn(s=>{let a=r.children[s],u=ZU(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Dg((s,a)=>(s.push(...a),s)),Wr(null),Tg(),ke(s=>{if(s===null)return Ss(r);let a=v0(s);return V2(a),G(a)}))}processSegment(e,t,r,i,o,s,a){return we(t).pipe(Sn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Cn(l=>{if(l instanceof Hc)return G(null);throw l}))),ar(u=>!!u),Cn(u=>{if(g0(u))return k2(r,i,o)?G(new Kv):Ss(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return _n(r)!==s&&(s===re||!Uh(i,o,r))?Ss(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ss(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=y0(t,i,o);if(!u)return Ss(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>L2&&(this.allowRedirects=!1));let y=new ho(o,l,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,qA(i),_n(i),i.component??i._loadedComponent??null,i,zA(i)),C=Fh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Tt(R=>this.applyRedirects.lineralizeSegments(i,R)),ke(R=>this.processSegment(e,r,t,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=R2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Tt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Tt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new ho(m,p,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,qA(r),_n(r),r.component??r._loadedComponent??null,r,zA(r)),N=Fh(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=HA(t,m,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(te(B=>new qt(C,B)));if(l.length===0&&k.length===0)return G(new qt(C,[]));let z=_n(r)===o;return this.processSegment(h,l,R,k,z?re:o,!0,C).pipe(te(B=>new qt(C,B instanceof qt?[B]:[])))}))):Ss(t)))}getChildConfig(e,t,r){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):D2(e,t,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,t).pipe(Qe(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):S2(t))):G({routes:[],injector:e})}};function V2(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function j2(n){let e=n.value.routeConfig;return e&&e.path===""}function v0(n){let e=[],t=new Set;for(let r of n){if(!j2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=v0(r.children);e.push(new qt(r.value,i))}return e.filter(r=>!t.has(r))}function qA(n){return n.data||{}}function zA(n){return n.resolve||{}}function U2(n,e,t,r,i,o){return ke(s=>F2(n,e,t,r,s.extractedUrl,i,o).pipe(te(({state:a,tree:u})=>J(x({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function B2(n,e){return ke(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return G(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of _0(u))s.add(l);let a=0;return we(s).pipe(Sn(u=>o.has(u)?$2(u,r,n,e):(u.data=Fh(u,u.parent,n).resolve,G(void 0))),Qe(()=>a++),ts(1),ke(u=>a===s.size?G(t):Mt))})}function _0(n){let e=n.children.map(t=>_0(t)).flat();return[n,...e]}function $2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!l0(i)&&(o[zc]=i.title),Ba(()=>(n.data=Fh(n,n.parent,t).resolve,H2(o,n,e,r).pipe(te(s=>(n._resolvedData=s,n.data=x(x({},n.data),s),null)))))}function H2(n,e,t,r){let i=Lv(n);if(i.length===0)return G({});let o={};return we(i).pipe(ke(s=>q2(n[s],e,t,r).pipe(ar(),Qe(a=>{if(a instanceof Fs)throw Lh(new si,a);o[s]=a}))),ts(1),te(()=>o),Cn(s=>g0(s)?Mt:Xo(s)))}function q2(n,e,t,r){let i=Gc(e)??r,o=Vs(n,i),s=o.resolve?o.resolve(e,t):pt(i,()=>o(e,t));return Dr(s)}function kv(n){return Tt(e=>{let t=n(e);return t?we(t).pipe(te(()=>e)):G(e)})}var t_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[zc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>M(E0),providedIn:"root"})}return n})(),E0=(()=>{class n extends t_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(H(VA))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ui=new j("",{providedIn:"root",factory:()=>({})}),mo=new j(""),Bh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(rv);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Dr(t.loadComponent()).pipe(te(w0),Qe(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Vi(()=>{this.componentLoaders.delete(t)})),i=new Zo(r,()=>new xe).pipe(Jo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=I0(r,this.compiler,t,this.onLoadEndListener).pipe(Vi(()=>{this.childrenLoaders.delete(r)})),s=new Zo(o,()=>new xe).pipe(Jo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function I0(n,e,t,r){return Dr(n.loadChildren()).pipe(te(w0),ke(i=>i instanceof Wd||Array.isArray(i)?G(i):we(e.compileModuleAsync(i))),te(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(mo,[],{optional:!0,self:!0}).flat()),{routes:s.map(e_),injector:o}}))}function z2(n){return n&&typeof n=="object"&&"default"in n}function w0(n){return z2(n)?n.default:n}var $h=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>M(G2),providedIn:"root"})}return n})(),G2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),n_=new j(""),r_=new j("");function T0(n,e,t){let r=n.get(r_),i=n.get(Ce);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),W2(n))),{onViewTransitionCreated:u}=r;return u&&pt(n,()=>u({transition:a,from:e,to:t})),s}function W2(n){return new Promise(e=>{Gy({read:()=>setTimeout(e)},{injector:n})})}var i_=new j(""),Hh=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new xe;transitionAbortWithErrorSubject=new xe;configLoader=M(Bh);environmentInjector=M(Fe);destroyRef=M(On);urlSerializer=M(po);rootContexts=M(go);location=M(ii);inputBindingEnabled=M(Wc,{optional:!0})!==null;titleStrategy=M(t_);options=M(ui,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M($h);createViewTransition=M(n_,{optional:!0});navigationErrorHandler=M(i_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ah(i)),r=i=>this.events.next(new Rh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(J(x({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Le(null),this.transitions.pipe(ht(r=>r!==null),Tt(r=>{let i=!1;return G(r).pipe(Tt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Nt.SupersededByNewNavigation),Mt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?J(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new $n(o.id,this.urlSerializer.serialize(o.rawUrl),u,Ps.IgnoredSameUrlNavigation)),o.resolve(!1),Mt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return G(o).pipe(Tt(u=>(this.events.next(new ci(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Mt:Promise.resolve(u))),U2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Qe(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=J(x({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new Vc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new ci(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=c0(this.rootComponentType).snapshot;return this.currentTransition=r=J(x({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:J(x({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,G(r)}else{let u="";return this.events.next(new $n(o.id,this.urlSerializer.serialize(o.extractedUrl),u,Ps.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Mt}}),Qe(o=>{let s=new Dh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),te(o=>(this.currentTransition=r=J(x({},o),{guards:o2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),m2(this.environmentInjector,o=>this.events.next(o)),Qe(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Lh(this.urlSerializer,o.guardsResult);let s=new bh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ht(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Nt.GuardRejected),!1)),kv(o=>{if(o.guards.canActivateChecks.length!==0)return G(o).pipe(Qe(s=>{let a=new Ch(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Tt(s=>{let a=!1;return G(s).pipe(B2(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Nt.NoDataFromResolver)}}))}),Qe(s=>{let a=new Sh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),kv(o=>{let s=a=>{let u=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(a.routeConfig).pipe(Qe(l=>{a.component=l}),te(()=>{})));for(let l of a.children)u.push(...s(l));return u};return Ua(s(o.targetSnapshot.root)).pipe(Wr(null),sr(1))}),kv(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?we(a).pipe(te(()=>r)):G(r)}),te(o=>{let s=e2(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=J(x({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Qe(()=>{this.events.next(new jc)}),i2(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),sr(1),Sl(new ce(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ht(()=>!i&&!r.targetRouterState),Qe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Nt.Aborted)}))),Qe({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Sl(this.transitionAbortWithErrorSubject.pipe(Qe(o=>{throw o}))),Vi(()=>{i||this.cancelNavigationTransition(r,"",Nt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Cn(o=>{if(this.destroyed)return r.resolve(!1),Mt;if(i=!0,p0(o))this.events.next(new Un(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),r2(o)?this.events.next(new ks(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Os(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=pt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Fs){let{message:u,cancellationCode:l}=Lh(this.urlSerializer,a);this.events.next(new Un(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new ks(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Mt}))}))}cancelNavigationTransition(t,r,i){let o=new Un(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K2(n){return n!==Ns}var D0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>M(Q2),providedIn:"root"})}return n})(),jh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Q2=(()=>{class n extends jh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),b0=(()=>{class n{urlSerializer=M(po);options=M(ui,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(ii);urlHandlingStrategy=M($h);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Bn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Bn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=c0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>M(Y2),providedIn:"root"})}return n})(),Y2=(()=>{class n extends b0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ci?this.updateStateMemento():t instanceof $n?this.commitTransition(r):t instanceof Vc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof jc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Un&&t.code!==Nt.SupersededByNewNavigation&&t.code!==Nt.Redirect?this.restoreHistory(r):t instanceof Os?this.restoreHistory(r,!0):t instanceof Gt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=x(x({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=x(x({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qh(n,e){n.events.pipe(ht(t=>t instanceof Gt||t instanceof Un||t instanceof Os||t instanceof $n),te(t=>t instanceof Gt||t instanceof $n?0:(t instanceof Un?t.code===Nt.Redirect||t.code===Nt.SupersededByNewNavigation:!1)?2:1),ht(t=>t!==2),sr(1)).subscribe(()=>{e()})}var J2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},En=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Wy);stateManager=M(b0);options=M(ui,{optional:!0})||{};pendingTasks=M(pr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(Hh);urlSerializer=M(po);location=M(ii);urlHandlingStrategy=M($h);injector=M(Fe);_events=new xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(D0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(mo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Wc,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Un&&r.code!==Nt.Redirect&&r.code!==Nt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gt)this.navigated=!0;else if(r instanceof ks){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=x({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||K2(i.source)},s);this.scheduleNavigation(a,Ns,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=x({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.injector.get(mt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(e_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=x(x({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=i0(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return o0(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ai(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ns,null,r)}navigate(t,r={skipLocationChange:!1}){return X2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=x({},J2):r===!1?i=x({},Z2):i=r,ai(t))return jA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return jA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return qh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new L(4008,!1)}var zh=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=xn(null);get href(){return Rt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new xe;applicationErrorHandler=M(mt);options=M(ui,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new eh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Gt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ai(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ai(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(q(En),q(Hn),mc("tabindex"),q(mn),q(St),q(vn))};static \u0275dir=ye({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&rn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&_r("href",i.reactiveHref(),wy)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ri],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ri],replaceUrl:[2,"replaceUrl","replaceUrl",ri],routerLink:"routerLink"},features:[tn]})}return n})(),eB=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Se;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Gt&&this.update()})}ngAfterContentInit(){G(this.links.changes,G(null)).pipe(Gr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=we(t).pipe(Gr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=tB(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(q(En),q(St),q(mn),q(Er),q(zh,8))};static \u0275dir=ye({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Xy(o,zh,5),r&2){let s;ev(s=tv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[tn]})}return n})();function tB(n){return!!n.paths}var Qc=class{};var C0=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ht(t=>t instanceof Gt),Sn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Is(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return we(i).pipe(Gr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=G(null);let o=i.pipe(ke(s=>s===null?G(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return we([o,s]).pipe(Gr())}else return o})}static \u0275fac=function(r){return new(r||n)(H(En),H(Fe),H(Qc),H(Bh))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),S0=new j(""),nB=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ns;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ci?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof $n&&t.code===Ps.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xs&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>v(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new xs(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Vy()};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();function rB(n,...e){return An([{provide:mo,multi:!0,useValue:n},[],{provide:Hn,useFactory:A0,deps:[En]},{provide:_c,multi:!0,useFactory:R0},e.map(t=>t.\u0275providers)])}function A0(n){return n.routerState.root}function Yc(n,e){return{\u0275kind:n,\u0275providers:e}}function R0(){let n=M(xt);return e=>{let t=n.get(ao);if(e!==t.components[0])return;let r=n.get(En),i=n.get(N0);n.get(s_)===1&&r.initialNavigation(),n.get(O0,null,{optional:!0})?.setUpPreloading(),n.get(S0,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var N0=new j("",{factory:()=>new xe}),s_=new j("",{providedIn:"root",factory:()=>1});function M0(){let n=[{provide:s_,useValue:0},Yd(()=>{let e=M(xt);return e.get(fv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(En),o=e.get(N0);qh(i,()=>{r(!0)}),e.get(Hh).afterPreactivation=()=>(r(!0),o.closed?G(void 0):o),i.initialNavigation()}))})];return Yc(2,n)}function P0(){let n=[Yd(()=>{M(En).setUpLocationChangeListener()}),{provide:s_,useValue:2}];return Yc(3,n)}var O0=new j("");function x0(n){return Yc(0,[{provide:O0,useExisting:C0},{provide:Qc,useExisting:n}])}function k0(){return Yc(8,[Zv,{provide:Wc,useExisting:Zv}])}function F0(n){oo("NgRouterViewTransitions");let e=[{provide:n_,useValue:T0},{provide:r_,useValue:x({skipNextTransition:!!n?.skipInitialTransition},n)}];return Yc(9,e)}var L0=[ii,{provide:po,useClass:si},En,go,{provide:Hn,useFactory:A0,deps:[En]},Bh,[]],iB=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[L0,[],{provide:mo,multi:!0,useValue:t},[],r?.errorHandler?{provide:i_,useValue:r.errorHandler}:[],{provide:ui,useValue:r||{}},r?.useHash?sB():aB(),oB(),r?.preloadingStrategy?x0(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?cB(r):[],r?.bindToComponentInputs?k0().\u0275providers:[],r?.enableViewTransitions?F0().\u0275providers:[],uB()]}}static forChild(t){return{ngModule:n,providers:[{provide:mo,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=nn({type:n});static \u0275inj=$t({})}return n})();function oB(){return{provide:S0,useFactory:()=>{let n=M(pA),e=M(Ae),t=M(ui),r=M(Hh),i=M(po);return t.scrollOffset&&n.setOffset(t.scrollOffset),new nB(i,r,n,e,t)}}}function sB(){return{provide:vn,useClass:mv}}function aB(){return{provide:vn,useClass:ih}}function cB(n){return[n.initialNavigation==="disabled"?P0().\u0275providers:[],n.initialNavigation==="enabledBlocking"?M0().\u0275providers:[]]}var o_=new j("");function uB(){return[{provide:o_,useFactory:R0},{provide:_c,multi:!0,useExisting:o_}]}var V0=()=>{};var B0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},lB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},$0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(B0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new c_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},c_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dB=function(n){let e=B0(n);return $0.encodeByteArray(e,!0)},Zc=function(n){return dB(n).replace(/\./g,"")},Wh=function(n){try{return $0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function H0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hB=()=>H0().__FIREBASE_DEFAULTS__,fB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Wh(n[1]);return e&&JSON.parse(e)},Kh=()=>{try{return V0()||hB()||fB()||pB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},l_=n=>{var e,t;return(t=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},q0=n=>{let e=l_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},d_=()=>{var n;return(n=Kh())===null||n===void 0?void 0:n.config},h_=n=>{var e;return(e=Kh())===null||e===void 0?void 0:e[`_${n}`]};var Gh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function li(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Qh(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function z0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Zc(JSON.stringify(t)),Zc(JSON.stringify(s)),""].join(".")}var Jc={};function gB(){let n={prod:[],emulator:[]};for(let e of Object.keys(Jc))Jc[e]?n.emulator.push(e):n.prod.push(e);return n}function mB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var j0=!1;function Yh(n,e){if(typeof window>"u"||typeof document>"u"||!li(window.location.host)||Jc[n]===e||Jc[n]||j0)return;Jc[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=gB().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{j0=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=mB(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),k=t("preprendIcon"),z=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let B=m.element;a(B),h(R,N);let pe=l();u(z,k),B.append(z,C,R,pe),document.body.appendChild(B)}o?(C.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function yB(){var n;let e=(n=Kh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jh(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function K0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q0(){let n=Xe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Y0(){return!yB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xc(){try{return typeof indexedDB=="object"}catch{return!1}}function Zh(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function J0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var vB="FirebaseError",st=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}},Wt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?_B(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new st(i,a,r)}};function _B(n,e){return n.replace(EB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var EB=/\{\$([^}]+)}/g;function Z0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function sn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(U0(o)&&U0(s)){if(!sn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function U0(n){return n!==null&&typeof n=="object"}function eu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function js(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Us(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function X0(n,e){let t=new u_(n,e);return t.subscribe.bind(t)}var u_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");IB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=a_),i.error===void 0&&(i.error=a_),i.complete===void 0&&(i.complete=a_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function IB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function a_(){}var wB=1e3,TB=2,DB=4*60*60*1e3,bB=.5;function f_(n,e=wB,t=TB){let r=e*Math.pow(t,n),i=Math.round(bB*r*(Math.random()-.5)*2);return Math.min(DB,r+i)}function We(n){return n&&n._delegate?n._delegate:n}var et=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var yo="[DEFAULT]";var p_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Gh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SB(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function CB(n){return n===yo?void 0:n}function SB(n){return n.instantiationMode==="EAGER"}var Xh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new p_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var AB=[],de=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(de||{}),RB={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},NB=de.INFO,MB={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},PB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=MB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},qn=class{constructor(e){this.name=e,this._logLevel=NB,this._logHandler=PB,this._userLogHandler=null,AB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var OB=(n,e)=>e.some(t=>n instanceof t),eR,tR;function xB(){return eR||(eR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kB(){return tR||(tR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var nR=new WeakMap,m_=new WeakMap,rR=new WeakMap,g_=new WeakMap,v_=new WeakMap;function FB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(zn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&nR.set(t,n)}).catch(()=>{}),v_.set(e,n),e}function LB(n){if(m_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});m_.set(n,e)}var y_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return m_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||rR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iR(n){y_=n(y_)}function VB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(ef(this),e,...t);return rR.set(r,e.sort?e.sort():[e]),zn(r)}:kB().includes(n)?function(...e){return n.apply(ef(this),e),zn(nR.get(this))}:function(...e){return zn(n.apply(ef(this),e))}}function jB(n){return typeof n=="function"?VB(n):(n instanceof IDBTransaction&&LB(n),OB(n,xB())?new Proxy(n,y_):n)}function zn(n){if(n instanceof IDBRequest)return FB(n);if(g_.has(n))return g_.get(n);let e=jB(n);return e!==n&&(g_.set(n,e),v_.set(e,n)),e}var ef=n=>v_.get(n);function tf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=zn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(zn(s.result),u.oldVersion,u.newVersion,zn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var UB=["get","getKey","getAll","getAllKeys","count"],BB=["put","add","delete","clear"],__=new Map;function oR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(__.get(e))return __.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=BB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UB.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return __.set(e,o),o}iR(n=>J(x({},n),{get:(e,t,r)=>oR(e,t)||n.get(e,t,r),has:(e,t)=>!!oR(e,t)||n.has(e,t)}));var I_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($B(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function $B(n){let e=n.getComponent();return e?.type==="VERSION"}var w_="@firebase/app",sR="0.13.2";var br=new qn("@firebase/app"),HB="@firebase/app-compat",qB="@firebase/analytics-compat",zB="@firebase/analytics",GB="@firebase/app-check-compat",WB="@firebase/app-check",KB="@firebase/auth",QB="@firebase/auth-compat",YB="@firebase/database",JB="@firebase/data-connect",ZB="@firebase/database-compat",XB="@firebase/functions",e$="@firebase/functions-compat",t$="@firebase/installations",n$="@firebase/installations-compat",r$="@firebase/messaging",i$="@firebase/messaging-compat",o$="@firebase/performance",s$="@firebase/performance-compat",a$="@firebase/remote-config",c$="@firebase/remote-config-compat",u$="@firebase/storage",l$="@firebase/storage-compat",d$="@firebase/firestore",h$="@firebase/ai",f$="@firebase/firestore-compat",p$="firebase",g$="11.10.0";var T_="[DEFAULT]",m$={[w_]:"fire-core",[HB]:"fire-core-compat",[zB]:"fire-analytics",[qB]:"fire-analytics-compat",[WB]:"fire-app-check",[GB]:"fire-app-check-compat",[KB]:"fire-auth",[QB]:"fire-auth-compat",[YB]:"fire-rtdb",[JB]:"fire-data-connect",[ZB]:"fire-rtdb-compat",[XB]:"fire-fn",[e$]:"fire-fn-compat",[t$]:"fire-iid",[n$]:"fire-iid-compat",[r$]:"fire-fcm",[i$]:"fire-fcm-compat",[o$]:"fire-perf",[s$]:"fire-perf-compat",[a$]:"fire-rc",[c$]:"fire-rc-compat",[u$]:"fire-gcs",[l$]:"fire-gcs-compat",[d$]:"fire-fst",[f$]:"fire-fst-compat",[h$]:"fire-vertex","fire-js":"fire-js",[p$]:"fire-js-all"};var nf=new Map,y$=new Map,D_=new Map;function aR(n,e){try{n.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Vt(n){let e=n.name;if(D_.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;D_.set(e,n);for(let t of nf.values())aR(t,n);for(let t of y$.values())aR(t,n);return!0}function In(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jt(n){return n==null?!1:n.settings!==void 0}var v$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new Wt("app","Firebase",v$);var b_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}};var hi=g$;function A_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:T_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(t||(t=d_()),!t)throw di.create("no-options");let o=nf.get(i);if(o){if(sn(t,o.options)&&sn(r,o.config))return o;throw di.create("duplicate-app",{appName:i})}let s=new Xh(i);for(let u of D_.values())s.addComponent(u);let a=new b_(t,r,s);return nf.set(i,a),a}function vo(n=T_){let e=nf.get(n);if(!e&&n===T_&&d_())return A_();if(!e)throw di.create("no-app",{appName:n});return e}function at(n,e,t){var r;let i=(r=m$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(a.join(" "));return}Vt(new et(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var _$="firebase-heartbeat-database",E$=1,tu="firebase-heartbeat-store",E_=null;function dR(){return E_||(E_=tf(_$,E$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tu)}catch(t){console.warn(t)}}}}).catch(n=>{throw di.create("idb-open",{originalErrorMessage:n.message})})),E_}function I$(n){return v(this,null,function*(){try{let t=(yield dR()).transaction(tu),r=yield t.objectStore(tu).get(hR(n));return yield t.done,r}catch(e){if(e instanceof st)br.warn(e.message);else{let t=di.create("idb-get",{originalErrorMessage:e?.message});br.warn(t.message)}}})}function cR(n,e){return v(this,null,function*(){try{let r=(yield dR()).transaction(tu,"readwrite");yield r.objectStore(tu).put(e,hR(n)),yield r.done}catch(t){if(t instanceof st)br.warn(t.message);else{let r=di.create("idb-set",{originalErrorMessage:t?.message});br.warn(r.message)}}})}function hR(n){return`${n.name}!${n.options.appId}`}var w$=1024,T$=30,C_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new S_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=uR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>T$){let s=b$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){br.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=uR(),{heartbeatsToSend:r,unsentEntries:i}=D$(this._heartbeatsCache.heartbeats),o=Zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return br.warn(t),""}})}};function uR(){return new Date().toISOString().substring(0,10)}function D$(n,e=w$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),lR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),lR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var S_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Xc()?Zh().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield I$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return cR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return cR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function lR(n){return Zc(JSON.stringify({version:2,heartbeats:n})).length}function b$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function C$(n){Vt(new et("platform-logger",e=>new I_(e),"PRIVATE")),Vt(new et("heartbeat",e=>new C_(e),"PRIVATE")),at(w_,sR,n),at(w_,sR,"esm2017"),at("fire-js","")}C$("");function AR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var RR=AR,NR=new Wt("auth","Firebase",AR());var uf=new qn("@firebase/auth");function S$(n,...e){uf.logLevel<=de.WARN&&uf.warn(`Auth (${hi}): ${n}`,...e)}function of(n,...e){uf.logLevel<=de.ERROR&&uf.error(`Auth (${hi}): ${n}`,...e)}function Wn(n,...e){throw Z_(n,...e)}function _o(n,...e){return Z_(n,...e)}function MR(n,e,t){let r=Object.assign(Object.assign({},RR()),{[e]:t});return new Wt("auth","Firebase",r).create(e,{appName:n.name})}function Ar(n){return MR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return NR.create(n,...e)}function W(n,e,...t){if(!n)throw Z_(e,...t)}function Cr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw of(e),new Error(e)}function gi(n,e){n||Cr(e)}function P_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function A$(){return fR()==="http:"||fR()==="https:"}function fR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function R$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A$()||Jh()||"connection"in navigator)?navigator.onLine:!0}function N$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Eo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,gi(t>e,"Short delay should be less than long delay!"),this.isMobile=G0()||K0()}get(){return R$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function X_(n,e){gi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var lf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var M$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var P$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],O$=new Eo(3e4,6e4);function Rr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Kn(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return PR(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=eu(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return W0()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&li(n.emulatorConfig.host)&&(y.credentials="include"),lf.fetch()(yield OR(n,n.config.apiHost,t,p),y)}))})}function PR(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},M$),e);try{let i=new O_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw rf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw rf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw rf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw MR(n,h,l);Wn(n,h)}}catch(i){if(i instanceof st)throw i;Wn(n,"network-request-failed",{message:String(i)})}})}function uu(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Kn(n,e,t,r,i);return"mfaPendingCredential"in l&&Wn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function OR(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?X_(n.config,i):`${n.config.apiScheme}://${i}`;return P$.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function x$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var O_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_o(this.auth,"network-request-failed")),O$.get())})}};function rf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=_o(n,e,r);return i.customData._tokenResponse=t,i}function pR(n){return n!==void 0&&n.enterprise!==void 0}var x_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return x$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function k$(n,e){return v(this,null,function*(){return Kn(n,"GET","/v2/recaptchaConfig",Rr(n,e))})}function F$(n,e){return v(this,null,function*(){return Kn(n,"POST","/v1/accounts:delete",e)})}function df(n,e){return v(this,null,function*(){return Kn(n,"POST","/v1/accounts:lookup",e)})}function ru(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function xR(n,e=!1){return v(this,null,function*(){let t=We(n),r=yield t.getIdToken(e),i=eE(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ru(R_(i.auth_time)),issuedAtTime:ru(R_(i.iat)),expirationTime:ru(R_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function R_(n){return Number(n)*1e3}function eE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wh(t);return i?JSON.parse(i):(of("Failed to decode base64 JWT payload"),null)}catch(i){return of("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gR(n){let e=eE(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Bs(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof st&&L$(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function L$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var k_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ou=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hf(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Bs(n,df(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?FR(o.providerUserInfo):[],a=V$(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ou(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function kR(n){return v(this,null,function*(){let e=We(n);yield hf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function V$(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FR(n){return n.map(e=>{var{providerId:t}=e,r=Eg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function j$(n,e){return v(this,null,function*(){let t=yield PR(n,{},()=>v(null,null,function*(){let r=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield OR(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&li(n.emulatorConfig.host)&&(u.credentials="include"),lf.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function U$(n,e){return v(this,null,function*(){return Kn(n,"POST","/v2/accounts:revokeToken",Rr(n,e))})}var iu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=gR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield j$(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Cr("not implemented")}};function fi(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var pi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Eg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ou(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Bs(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return xR(this,e)}reload(){return kR(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield hf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(jt(this.auth.app))return Promise.reject(Ar(this.auth));let e=yield this.getIdToken();return yield Bs(this,F$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:pe,isAnonymous:He,providerData:le,stsTokenManager:T}=t;W(B&&T,e,"internal-error");let _=iu.fromJSON(this.name,T);W(typeof B=="string",e,"internal-error"),fi(p,e.name),fi(m,e.name),W(typeof pe=="boolean",e,"internal-error"),W(typeof He=="boolean",e,"internal-error"),fi(y,e.name),fi(C,e.name),fi(N,e.name),fi(R,e.name),fi(k,e.name),fi(z,e.name);let I=new n({uid:B,auth:e,email:m,emailVerified:pe,displayName:p,isAnonymous:He,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:k,lastLoginAt:z});return le&&Array.isArray(le)&&(I.providerData=le.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new iu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield hf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?FR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new iu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ou(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var mR=new Map;function Sr(n){gi(n instanceof Function,"Expected a class definition");let e=mR.get(n);return e?(gi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mR.set(n,e),e)}var B$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),F_=B$;function sf(n,e,t){return`firebase:${n}:${e}:${t}`}var ff=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=sf(this.userKey,i.apiKey,o),this.fullPersistenceKey=sf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield df(this.auth,{idToken:e}).catch(()=>{});return t?pi._fromGetAccountInfoResponse(this.auth,t,e):null}return pi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Sr(F_),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Sr(F_),s=sf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield df(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield pi._fromGetAccountInfoResponse(e,m,h)}else p=pi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function yR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($R(e))return"Blackberry";if(HR(e))return"Webos";if(VR(e))return"Safari";if((e.includes("chrome/")||jR(e))&&!e.includes("edge/"))return"Chrome";if(BR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function LR(n=Xe()){return/firefox\//i.test(n)}function VR(n=Xe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jR(n=Xe()){return/crios\//i.test(n)}function UR(n=Xe()){return/iemobile/i.test(n)}function BR(n=Xe()){return/android/i.test(n)}function $R(n=Xe()){return/blackberry/i.test(n)}function HR(n=Xe()){return/webos/i.test(n)}function tE(n=Xe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $$(n=Xe()){var e;return tE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function H$(){return Q0()&&document.documentMode===10}function qR(n=Xe()){return tE(n)||BR(n)||HR(n)||$R(n)||/windows phone/i.test(n)||UR(n)}function zR(n,e=[]){let t;switch(n){case"Browser":t=yR(Xe());break;case"Worker":t=`${yR(Xe())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hi}/${r}`}var L_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function q$(t){return v(this,arguments,function*(n,e={}){return Kn(n,"GET","/v2/passwordPolicy",Rr(n,e))})}var z$=6,V_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:z$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var j_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pf(this),this.idTokenSubscription=new pf(this),this.beforeStateQueue=new L_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield ff.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield df(this,{idToken:e}),r=yield pi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(jt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield hf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=N$()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(jt(this.app))return Promise.reject(Ar(this));let t=e?We(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return jt(this.app)?Promise.reject(Ar(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jt(this.app)?Promise.reject(Ar(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Sr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield q$(this),t=new V_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield U$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Sr(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield ff.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&S$(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function mi(n){return We(n)}var pf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=X0(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var wf={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G$(n){wf=n}function GR(n){return wf.loadJS(n)}function W$(){return wf.recaptchaEnterpriseScript}function K$(){return wf.gapiScript}function WR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var U_=class{constructor(){this.enterprise=new B_}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},B_=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Q$="recaptcha-enterprise",KR="NO_RECAPTCHA",$_=class{constructor(e){this.type=Q$,this.auth=mi(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){k$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new x_(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;pR(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(KR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new U_().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&pR(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=W$();u.length!==0&&(u+=a),GR(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function nu(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new $_(n),s;if(i)s=KR;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function gf(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield nu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield nu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield nu(n,e,t);return r(n,a).catch(u=>v(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield nu(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield nu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function QR(n,e){let t=In(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(sn(o,e??{}))return i;Wn(i,"already-initialized")}return t.initialize({options:e})}function Y$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Sr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function YR(n,e,t){let r=mi(n);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=JR(e),{host:s,port:a}=J$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(sn(l,r.config.emulator)&&sn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,li(s)?(Qh(`${o}//${s}${u}`),Yh("Auth",!0)):i||Z$()}function JR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function J$(n){let e=JR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:vR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:vR(s)}}}function vR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Z$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var su=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,t){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}};function X$(n,e){return v(this,null,function*(){return Kn(n,"POST","/v1/accounts:signUp",e)})}function eH(n,e){return v(this,null,function*(){return uu(n,"POST","/v1/accounts:signInWithPassword",Rr(n,e))})}function tH(n,e){return v(this,null,function*(){return Kn(n,"POST","/v1/accounts:sendOobCode",Rr(n,e))})}function nH(n,e){return v(this,null,function*(){return tH(n,e)})}function rH(n,e){return v(this,null,function*(){return uu(n,"POST","/v1/accounts:signInWithEmailLink",Rr(n,e))})}function iH(n,e){return v(this,null,function*(){return uu(n,"POST","/v1/accounts:signInWithEmailLink",Rr(n,e))})}var au=class n extends su{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gf(e,t,"signInWithPassword",eH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rH(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gf(e,r,"signUpPassword",X$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return iH(e,{idToken:t,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function N_(n,e){return v(this,null,function*(){return uu(n,"POST","/v1/accounts:signInWithIdp",Rr(n,e))})}function oH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sH(n){let e=js(Us(n)).link,t=e?js(Us(e)).deep_link_id:null,r=js(Us(n)).deep_link_id;return(r?js(Us(r)).link:null)||r||t||e||n}var mf=class n{constructor(e){var t,r,i,o,s,a;let u=js(Us(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=oH((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=sH(e);try{return new n(t)}catch{return null}}};var ZR=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return au._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=mf.parseLink(r);return W(i,"argument-error"),au._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),yf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var H_=class extends yf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function aH(n,e){return v(this,null,function*(){return uu(n,"POST","/v1/accounts:signUp",Rr(n,e))})}var $s=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield pi._fromIdTokenResponse(e,r,i),s=_R(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=_R(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function _R(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var q_=class n extends st{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function XR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?q_._fromErrorAndOperation(n,o,e,r):o})}function cH(n,e,t=!1){return v(this,null,function*(){let r=yield Bs(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return $s._forOperation(n,"link",r)})}function uH(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(jt(r.app))return Promise.reject(Ar(r));let i="reauthenticate";try{let o=yield Bs(n,XR(r,i,e,n),t);W(o.idToken,r,"internal-error");let s=eE(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(n.uid===a,r,"user-mismatch"),$s._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Wn(r,"user-mismatch"),o}})}function eN(n,e,t=!1){return v(this,null,function*(){if(jt(n.app))return Promise.reject(Ar(n));let r="signIn",i=yield XR(n,r,e),o=yield $s._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function tN(n,e){return v(this,null,function*(){return eN(mi(n),e)})}function lH(n,e,t){var r;W(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),W(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),W(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(W(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(W(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function nN(n){return v(this,null,function*(){let e=mi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Tf(n,e,t){return v(this,null,function*(){let r=mi(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&lH(r,i,t),yield gf(r,i,"getOobCode",nH,"EMAIL_PASSWORD_PROVIDER")})}function nE(n,e,t){return v(this,null,function*(){if(jt(n.app))return Promise.reject(Ar(n));let r=mi(n),s=yield gf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aH,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&nN(n),u}),a=yield $s._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function rE(n,e,t){return jt(n.app)?Promise.reject(Ar(n)):tN(We(n),ZR.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&nN(n),r}))}function dH(n,e){return v(this,null,function*(){return Kn(n,"POST","/v1/accounts:update",e)})}function iE(r,i){return v(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=We(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Bs(o,dH(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function rN(n,e,t,r){return We(n).onIdTokenChanged(e,t,r)}function iN(n,e,t){return We(n).beforeAuthStateChanged(e,t)}function oE(n){return We(n).signOut()}var vf="__sak";var _f=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var hH=1e3,fH=10,pH=(()=>{class n extends _f{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);H$()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,fH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},hH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield qr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield qr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield qr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),oN=pH;var gH=(()=>{class n extends _f{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),sE=gH;function mH(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var yH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield mH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function sN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var z_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=sN("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Gn(){return window}function vH(n){Gn().location.href=n}function aN(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}function _H(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function EH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function IH(){return aN()?self:null}var cN="firebaseLocalStorageDb",wH=1,Ef="firebaseLocalStorage",uN="fbase_key",Io=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Df(n,e){return n.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function TH(){let n=indexedDB.deleteDatabase(cN);return new Io(n).toPromise()}function G_(){let n=indexedDB.open(cN,wH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Ef,{keyPath:uN})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Ef)?e(r):(r.close(),yield TH(),e(yield G_()))}))})}function ER(n,e,t){return v(this,null,function*(){let r=Df(n,!0).put({[uN]:e,value:t});return new Io(r).toPromise()})}function DH(n,e){return v(this,null,function*(){let t=Df(n,!1).get(e),r=yield new Io(t).toPromise();return r===void 0?null:r.value})}function IR(n,e){let t=Df(n,!0).delete(e);return new Io(t).toPromise()}var bH=800,CH=3,SH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield G_(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>CH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return aN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=yH._getInstance(IH()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield _H(),!this.activeServiceWorker)return;this.sender=new z_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||EH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield G_();return yield ER(t,vf,"1"),yield IR(t,vf),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>ER(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>DH(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>IR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Df(o,!1).getAll();return new Io(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),bH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lN=SH;var Doe=WR("rcb"),boe=new Eo(3e4,6e4);function AH(n,e){return e?Sr(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var cu=class extends su{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return N_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return N_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return N_(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function RH(n){return eN(n.auth,new cu(n),n.bypassAuthState)}function NH(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),uH(t,new cu(n),n.bypassAuthState)}function MH(n){return v(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),cH(t,new cu(n),n.bypassAuthState)})}var W_=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RH;case"linkViaPopup":case"linkViaRedirect":return MH;case"reauthViaPopup":case"reauthViaRedirect":return NH;default:Wn(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Coe=new Eo(2e3,1e4);var PH="pendingRedirect",af=new Map,K_=class n extends W_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=af.get(this.auth._key());if(!e){try{let r=(yield OH(this.resolver,this.auth))?yield qr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}af.set(this.auth._key(),e)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return qr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,qr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function OH(n,e){return v(this,null,function*(){let t=FH(e),r=kH(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function xH(n,e){af.set(n._key(),e)}function kH(n){return Sr(n._redirectPersistence)}function FH(n){return sf(PH,n.config.apiKey,n.name)}function LH(n,e,t=!1){return v(this,null,function*(){if(jt(n.app))return Promise.reject(Ar(n));let r=mi(n),i=AH(r,e),s=yield new K_(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var VH=10*60*1e3,Q_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(_o(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VH&&this.cachedEventUids.clear(),this.cachedEventUids.has(wR(e))}saveEventToCache(e){this.cachedEventUids.add(wR(e)),this.lastProcessedEventTime=Date.now()}};function wR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function jH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dN(n);default:return!1}}function UH(t){return v(this,arguments,function*(n,e={}){return Kn(n,"GET","/v1/projects",e)})}var BH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$H=/^https?/;function HH(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield UH(n);for(let t of e)try{if(qH(t))return}catch{}Wn(n,"unauthorized-domain")})}function qH(n){let e=P_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!$H.test(t))return!1;if(BH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var zH=new Eo(3e4,6e4);function TR(){let n=Gn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function GH(n){return new Promise((e,t)=>{var r,i,o;function s(){TR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TR(),t(_o(n,"network-request-failed"))},timeout:zH.get()})}if(!((i=(r=Gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Gn().gapi)===null||o===void 0)&&o.load)s();else{let a=WR("iframefcb");return Gn()[a]=()=>{gapi.load?s():t(_o(n,"network-request-failed"))},GR(`${K$()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw cf=null,e})}var cf=null;function WH(n){return cf=cf||GH(n),cf}var KH=new Eo(5e3,15e3),QH="__/auth/iframe",YH="emulator/auth/iframe",JH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XH(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?X_(e,YH):`https://${n.config.authDomain}/${QH}`,r={apiKey:e.apiKey,appName:n.name,v:hi},i=ZH.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${eu(r).slice(1)}`}function e4(n){return v(this,null,function*(){let e=yield WH(n),t=Gn().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:XH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JH,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=_o(n,"network-request-failed"),a=Gn().setTimeout(()=>{o(s)},KH.get());function u(){Gn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var t4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n4=500,r4=600,i4="_blank",o4="http://localhost",If=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function s4(n,e,t,r=n4,i=r4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},t4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Xe().toLowerCase();t&&(a=jR(l)?i4:t),LR(l)&&(e=e||o4,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if($$(l)&&a!=="_self")return a4(e||"",a),new If(null);let p=window.open(e||"",a,h);W(p,n,"popup-blocked");try{p.focus()}catch{}return new If(p)}function a4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var c4="__/auth/handler",u4="emulator/auth/handler",l4=encodeURIComponent("fac");function DR(n,e,t,r,i,o){return v(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:hi,eventId:i};if(e instanceof yf){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Z0(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof H_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${l4}=${encodeURIComponent(u)}`:"";return`${d4(n)}?${eu(a).slice(1)}${l}`})}function d4({config:n}){return n.emulator?X_(n,u4):`https://${n.authDomain}/${c4}`}var M_="webStorageSupport",Y_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sE,this._completeRedirectFn=LH,this._overrideRedirectResult=xH}_openPopup(e,t,r,i){return v(this,null,function*(){var o;gi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield DR(e,t,r,P_(),i);return s4(e,s,sN())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield DR(e,t,r,P_(),i);return vH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(gi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield e4(e),r=new Q_(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(M_,{type:M_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[M_];s!==void 0&&t(!!s),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qR()||VR()||tE()}},hN=Y_;var bR="@firebase/auth",CR="1.10.8";var J_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function h4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f4(n){Vt(new et("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zR(n)},l=new j_(r,i,o,u);return Y$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Vt(new et("auth-internal",e=>{let t=mi(e.getProvider("auth").getImmediate());return(r=>new J_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),at(bR,CR,h4(n)),at(bR,CR,"esm2017")}var p4=5*60,g4=h_("authIdTokenMaxAge")||p4,SR=null,m4=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>g4)return;let i=t?.token;SR!==i&&(SR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function aE(n=vo()){let e=In(n,"auth");if(e.isInitialized())return e.getImmediate();let t=QR(n,{popupRedirectResolver:hN,persistence:[lN,oN,sE]}),r=h_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=m4(o.toString());iN(t,s,()=>s(t.currentUser)),rN(t,a=>s(a))}}let i=l_("auth");return i&&YR(t,`http://${i}`),t}function y4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}G$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=_o("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",y4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f4("Browser");var fN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pN={};var Nr,cE;(function(){var n;function e(T,_){function I(){}I.prototype=_.prototype,T.D=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,D,S){for(var E=Array(arguments.length-2),nr=2;nr<arguments.length;nr++)E[nr-2]=arguments[nr];return _.prototype[D].apply(w,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);var w=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)w[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)w[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],D=T.g[2];var S=T.g[3],E=_+(S^I&(D^S))+w[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[2]+606105819&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[6]+2821735955&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[10]+4294925233&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(S^I&(D^S))+w[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(D^_&(I^D))+w[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=D+(I^S&(_^I))+w[14]+2792965006&4294967295,D=S+(E<<17&4294967295|E>>>15),E=I+(_^D&(S^_))+w[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(D^S&(I^D))+w[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[11]+643717713&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[15]+3634488961&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[3]+4107603335&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^S&(I^D))+w[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^D&(_^I))+w[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(S^_))+w[7]+1735328473&4294967295,D=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(D^S))+w[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(I^D^S)+w[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[11]+1839030562&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[7]+4139469664&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[3]+3572445317&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^S)+w[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^D)+w[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=D+(S^_^I)+w[15]+530742520&4294967295,D=S+(E<<16&4294967295|E>>>16),E=I+(D^S^_)+w[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(D^(I|~S))+w[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[14]+2878612391&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[10]+4293915773&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[6]+2734768916&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~S))+w[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~D))+w[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=D+(_^(S|~I))+w[2]+718787259&4294967295,D=S+(E<<15&4294967295|E>>>17),E=I+(S^(D|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var I=_-this.blockSize,w=this.B,D=this.h,S=0;S<_;){if(D==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<_;)if(w[D++]=T.charCodeAt(S++),D==this.blockSize){i(this,w),D=0;break}}else for(;S<_;)if(w[D++]=T[S++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var I=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=I&255,I/=256;for(this.u(T),T=Array(16),_=I=0;4>_;++_)for(var w=0;32>w;w+=8)T[I++]=this.g[_]>>>w&255;return T};function o(T,_){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function s(T,_){this.h=_;for(var I=[],w=!0,D=T.length-1;0<=D;D--){var S=T[D]|0;w&&S==_||(I[D]=S,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var _=[],I=1,w=0;T>=I;w++)_[w]=T/I|0,I*=4294967296;return new s(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return R(h(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),w=p,D=0;D<T.length;D+=8){var S=Math.min(8,T.length-D),E=parseInt(T.substring(D,D+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-R(this).m();for(var T=0,_=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var _=l(Math.pow(T,6)),I=this,w="";;){var D=pe(I,_).g;I=k(I,D.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,C(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=k(this,T),N(T)?-1:C(T)?0:1};function R(T){for(var _=T.g.length,I=[],w=0;w<_;w++)I[w]=~T.g[w];return new s(I,~T.h).add(m)}n.abs=function(){return N(this)?R(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0,D=0;D<=_;D++){var S=w+(this.i(D)&65535)+(T.i(D)&65535),E=(S>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=E>>>16,S&=65535,E&=65535,I[D]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(T,_){return T.add(R(_))}n.j=function(T){if(C(this)||C(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,I=[],w=0;w<2*_;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var S=this.i(w)>>>16,E=this.i(w)&65535,nr=T.i(D)>>>16,_a=T.i(D)&65535;I[2*w+2*D]+=E*_a,z(I,2*w+2*D),I[2*w+2*D+1]+=S*_a,z(I,2*w+2*D+1),I[2*w+2*D+1]+=E*nr,z(I,2*w+2*D+1),I[2*w+2*D+2]+=S*nr,z(I,2*w+2*D+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new s(I,0)};function z(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function B(T,_){this.g=T,this.h=_}function pe(T,_){if(C(_))throw Error("division by zero");if(C(T))return new B(p,p);if(N(T))return _=pe(R(T),_),new B(R(_.g),R(_.h));if(N(_))return _=pe(T,R(_)),new B(R(_.g),_.h);if(30<T.g.length){if(N(T)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=_;0>=w.l(T);)I=He(I),w=He(w);var D=le(I,1),S=le(w,1);for(w=le(w,2),I=le(I,2);!C(w);){var E=S.add(w);0>=E.l(T)&&(D=D.add(I),S=E),w=le(w,1),I=le(I,1)}return _=k(T,D.j(_)),new B(D,_)}for(D=p;0<=T.l(_);){for(I=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(_);N(E)||0<E.l(T);)I-=w,S=l(I),E=S.j(_);C(S)&&(S=m),D=D.add(S),T=k(T,E)}return new B(D,T)}n.A=function(T){return pe(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function He(T){for(var _=T.g.length+1,I=[],w=0;w<_;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function le(T,_){var I=_>>5;_%=32;for(var w=T.g.length-I,D=[],S=0;S<w;S++)D[S]=0<_?T.i(S+I)>>>_|T.i(S+I+1)<<32-_:T.i(S+I);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cE=pN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Nr=pN.Integer=s}).apply(typeof fN<"u"?fN:typeof self<"u"?self:typeof window<"u"?window:{});var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mr={};var uE,v4,Hs,lE,lu,Cf,dE,hE,fE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof bf=="object"&&bf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var F=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)F[Ie-2]=arguments[Ie];return d.prototype[b].apply(g,F)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let F=0;F<A;F++)c[b+F]=g[F]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function B(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function pe(c){return pe[" "](c),c}pe[" "]=function(){};var He=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function le(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=jp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class nr{constructor(){this.h=this.g=null}add(d,f){let g=_a.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var _a=new k(()=>new ZO,c=>c.reset());class ZO{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ea,Ia=!1,jp=new nr,Gw=()=>{let c=a.Promise.resolve(void 0);Ea=()=>{c.then(XO)}};var XO=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=_a;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ia=!1};function Ur(){this.s=this.s,this.C=this.C}Ur.prototype.s=!1,Ur.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ur.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var ex=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function wa(c,d){if(ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(He){e:{try{pe(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:tx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&wa.aa.h.call(this)}}C(wa,ct);var tx={2:"touch",3:"pen",4:"mouse"};wa.prototype.h=function(){wa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ta="closure_listenable_"+(1e6*Math.random()|0),nx=0;function rx(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++nx,this.da=this.fa=!1}function ju(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Uu(c){this.src=c,this.g={},this.h=0}Uu.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var F=Bp(c,d,g,b);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new rx(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function Up(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(ju(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Bp(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var $p="closure_lm_"+(1e6*Math.random()|0),Hp={};function Ww(c,d,f,g,b){if(g&&g.once)return Qw(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Ww(c,d[A],f,g,b);return null}return f=Wp(f),c&&c[Ta]?c.K(d,f,l(g)?!!g.capture:!!g,b):Kw(c,d,f,!1,g,b)}function Kw(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var F=l(b)?!!b.capture:!!b,Ie=zp(c);if(Ie||(c[$p]=Ie=new Uu(c)),f=Ie.add(d,f,g,F,A),f.proxy)return f;if(g=ix(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)ex||(b=F),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(Jw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ix(){function c(f){return d.call(c.src,c.listener,f)}let d=ox;return c}function Qw(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Qw(c,d[A],f,g,b);return null}return f=Wp(f),c&&c[Ta]?c.L(d,f,l(g)?!!g.capture:!!g,b):Kw(c,d,f,!0,g,b)}function Yw(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)Yw(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Wp(f),c&&c[Ta]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Bp(A,f,g,b),-1<f&&(ju(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=zp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Bp(d,f,g,b)),(f=-1<c?d[c]:null)&&qp(f))}function qp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ta])Up(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Jw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=zp(d))?(Up(f,c),f.h==0&&(f.src=null,d[$p]=null)):ju(c)}}}function Jw(c){return c in Hp?Hp[c]:Hp[c]="on"+c}function ox(c,d){if(c.da)c=!0;else{d=new wa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&qp(c),c=f.call(g,d)}return c}function zp(c){return c=c[$p],c instanceof Uu?c:null}var Gp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wp(c){return typeof c=="function"?c:(c[Gp]||(c[Gp]=function(d){return c.handleEvent(d)}),c[Gp])}function ut(){Ur.call(this),this.i=new Uu(this),this.M=this,this.F=null}C(ut,Ur),ut.prototype[Ta]=!0,ut.prototype.removeEventListener=function(c,d,f,g){Yw(this,c,d,f,g)};function Et(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ct(d,c);else if(d instanceof ct)d.target=d.target||c;else{var b=d;d=new ct(g,c),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var F=d.g=f[A];b=Bu(F,g,!0,d)&&b}if(F=d.g=c,b=Bu(F,g,!0,d)&&b,b=Bu(F,g,!1,d)&&b,f)for(A=0;A<f.length;A++)F=d.g=f[A],b=Bu(F,g,!1,d)&&b}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)ju(f[g]);delete c.g[d],c.h--}}this.F=null},ut.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ut.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Bu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==f){var Ie=F.listener,rt=F.ha||F.src;F.fa&&Up(c.i,F),b=Ie.call(rt,g)!==!1&&b}}return b&&!g.defaultPrevented}function Zw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Xw(c){c.g=Zw(()=>{c.g=null,c.i&&(c.i=!1,Xw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class sx extends Ur{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Xw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Da(c){Ur.call(this),this.h=c,this.g={}}C(Da,Ur);var eT=[];function tT(c){le(c.g,function(d,f){this.g.hasOwnProperty(f)&&qp(d)},c),c.g={}}Da.prototype.N=function(){Da.aa.N.call(this),tT(this)},Da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kp=a.JSON.stringify,ax=a.JSON.parse,cx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Qp(){}Qp.prototype.h=null;function nT(c){return c.h||(c.h=c.i())}function rT(){}var ba={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yp(){ct.call(this,"d")}C(Yp,ct);function Jp(){ct.call(this,"c")}C(Jp,ct);var Ni={},iT=null;function $u(){return iT=iT||new ut}Ni.La="serverreachability";function oT(c){ct.call(this,Ni.La,c)}C(oT,ct);function Ca(c){let d=$u();Et(d,new oT(d))}Ni.STAT_EVENT="statevent";function sT(c,d){ct.call(this,Ni.STAT_EVENT,c),this.stat=d}C(sT,ct);function It(c){let d=$u();Et(d,new sT(d,c))}Ni.Ma="timingevent";function aT(c,d){ct.call(this,Ni.Ma,c),this.size=d}C(aT,ct);function Sa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Aa(){this.g=!0}Aa.prototype.xa=function(){this.g=!1};function ux(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var F="",Ie=A.split("&"),rt=0;rt<Ie.length;rt++){var me=Ie[rt].split("=");if(1<me.length){var lt=me[0];me=me[1];var dt=lt.split("_");F=2<=dt.length&&dt[1]=="type"?F+(lt+"="+me+"&"):F+(lt+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+F})}function lx(c,d,f,g,b,A,F){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+F})}function Bo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+hx(c,f)+(g?" "+g:"")})}function dx(c,d){c.info(function(){return"TIMEOUT: "+d})}Aa.prototype.info=function(){};function hx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<b.length;F++)b[F]=""}}}}return Kp(f)}catch{return d}}var Hu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zp;function qu(){}C(qu,Qp),qu.prototype.g=function(){return new XMLHttpRequest},qu.prototype.i=function(){return{}},Zp=new qu;function Br(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Da(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uT}function uT(){this.i=null,this.g="",this.h=!1}var lT={},Xp={};function eg(c,d,f){c.L=1,c.v=Ku(rr(d)),c.m=f,c.P=!0,dT(c,null)}function dT(c,d){c.F=Date.now(),zu(c),c.A=rr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),bT(f.i,"t",g),c.C=0,f=c.j.J,c.h=new uT,c.g=HT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new sx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(eT[0]=b.toString()),b=eT);for(var A=0;A<b.length;A++){var F=Ww(f,b[A],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ca(),ux(c.i,c.u,c.A,c.l,c.R,c.m)}Br.prototype.ca=function(c){c=c.target;let d=this.M;d&&ir(c)==3?d.j():this.Y(c)},Br.prototype.Y=function(c){try{if(c==this.g)e:{let dt=ir(this.g);var d=this.g.Ba();let qo=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||PT(this.g)))){this.J||dt!=4||d==7||(d==8||0>=qo?Ca(3):Ca(2)),tg(this);var f=this.g.Z();this.X=f;t:if(hT(this)){var g=PT(this.g);c="";var b=g.length,A=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),Ra(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,lx(this.i,this.u,this.A,this.l,this.R,dt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,rt=this.g;if((Ie=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Ie)){var me=Ie;break t}}me=null}if(f=me)Bo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ng(this,f);else{this.o=!1,this.s=3,It(12),Mi(this),Ra(this);break e}}if(this.P){f=!0;let cn;for(;!this.J&&this.C<F.length;)if(cn=fx(this,F),cn==Xp){dt==4&&(this.s=4,It(14),f=!1),Bo(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==lT){this.s=4,It(15),Bo(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Bo(this.i,this.l,cn,null),ng(this,cn);if(hT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||F.length!=0||this.h.h||(this.s=1,It(16),f=!1),this.o=this.o&&f,!f)Bo(this.i,this.l,F,"[Invalid Chunked Response]"),Mi(this),Ra(this);else if(0<F.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),cg(lt),lt.M=!0,It(11))}}else Bo(this.i,this.l,F,null),ng(this,F);dt==4&&Mi(this),this.o&&!this.J&&(dt==4?jT(this.j,this):(this.o=!1,zu(this)))}else Nx(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Mi(this),Ra(this)}}}catch{}finally{}};function hT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Xp:(f=Number(d.substring(f,g)),isNaN(f)?lT:(g+=1,g+f>d.length?Xp:(d=d.slice(g,g+f),c.C=g+f,d)))}Br.prototype.cancel=function(){this.J=!0,Mi(this)};function zu(c){c.S=Date.now()+c.I,fT(c,c.I)}function fT(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Sa(m(c.ba,c),d)}function tg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Br.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(dx(this.i,this.A),this.L!=2&&(Ca(),It(17)),Mi(this),this.s=2,Ra(this)):fT(this,this.S-c)};function Ra(c){c.j.G==0||c.J||jT(c.j,c)}function Mi(c){tg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,tT(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ng(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||rg(f.h,c))){if(!c.K&&rg(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Xu(f),Ju(f);else break e;ag(f),It(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Sa(m(f.Za,f),6e3));if(1>=mT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Oi(f,11)}else if((c.K||f.g==c)&&Xu(f),!z(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let me=b[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let lt=me[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));let dt=me[4];dt!=null&&(f.Aa=dt,f.j.info("SVER="+f.Aa));let qo=me[5];qo!=null&&typeof qo=="number"&&0<qo&&(g=1.5*qo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let cn=c.g;if(cn){let tl=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var A=g.h;A.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(ig(A,A.h),A.h=null))}if(g.D){let ug=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;ug&&(g.ya=ug,Te(g.I,g.D,ug))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=c;if(g.qa=$T(g,g.J?g.ia:null,g.W),F.K){yT(g.h,F);var Ie=F,rt=g.L;rt&&(Ie.I=rt),Ie.B&&(tg(Ie),zu(Ie)),g.g=F}else LT(g);0<f.i.length&&Zu(f)}else me[0]!="stop"&&me[0]!="close"||Oi(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Oi(f,7):sg(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Ca(4)}catch{}}var px=class{constructor(c,d){this.g=c,this.map=d}};function pT(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gT(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function mT(c){return c.h?1:c.g?c.g.size:0}function rg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function ig(c,d){c.g?c.g.add(d):c.h=d}function yT(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}pT.prototype.cancel=function(){if(this.i=vT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function vT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function gx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function mx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function _T(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=mx(c),g=gx(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var ET=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Pi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Pi){this.h=c.h,Gu(this,c.j),this.o=c.o,this.g=c.g,Wu(this,c.s),this.l=c.l;var d=c.i,f=new Pa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),IT(this,f),this.m=c.m}else c&&(d=String(c).match(ET))?(this.h=!1,Gu(this,d[1]||"",!0),this.o=Na(d[2]||""),this.g=Na(d[3]||"",!0),Wu(this,d[4]),this.l=Na(d[5]||"",!0),IT(this,d[6]||"",!0),this.m=Na(d[7]||"")):(this.h=!1,this.i=new Pa(null,this.h))}Pi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ma(d,wT,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ma(d,wT,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ma(f,f.charAt(0)=="/"?Ex:_x,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ma(f,wx)),c.join("")};function rr(c){return new Pi(c)}function Gu(c,d,f){c.j=f?Na(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Wu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function IT(c,d,f){d instanceof Pa?(c.i=d,Tx(c.i,c.h)):(f||(d=Ma(d,Ix)),c.i=new Pa(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function Ku(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Na(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ma(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,vx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var wT=/[#\/\?@]/g,_x=/[#\?:]/g,Ex=/[#\?]/g,Ix=/[#\?@]/g,wx=/#/g;function Pa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function $r(c){c.g||(c.g=new Map,c.h=0,c.i&&yx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Pa.prototype,n.add=function(c,d){$r(this),this.i=null,c=$o(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function TT(c,d){$r(c),d=$o(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function DT(c,d){return $r(c),d=$o(c,d),c.g.has(d)}n.forEach=function(c,d){$r(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){$r(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},n.V=function(c){$r(this);let d=[];if(typeof c=="string")DT(this,c)&&(d=d.concat(this.g.get($o(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return $r(this),this.i=null,c=$o(this,c),DT(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function bT(c,d,f){TT(c,d),0<f.length&&(c.i=null,c.g.set($o(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var b=A;F[g]!==""&&(b+="="+encodeURIComponent(String(F[g]))),c.push(b)}}return this.i=c.join("&")};function $o(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Tx(c,d){d&&!c.j&&($r(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(TT(this,g),bT(this,b,f))},c)),c.j=d}function Dx(c,d){let f=new Aa;if(a.Image){let g=new Image;g.onload=y(Hr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Hr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Hr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Hr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function bx(c,d){let f=new Aa,g=new AbortController,b=setTimeout(()=>{g.abort(),Hr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Hr(f,"TestPingServer: ok",!0,d):Hr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Hr(f,"TestPingServer: error",!1,d)})}function Hr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function Cx(){this.g=new cx}function Sx(c,d,f){let g=f||"";try{_T(c,function(b,A){let F=b;l(b)&&(F=Kp(b)),d.push(g+A+"="+encodeURIComponent(F))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Oa(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Oa,Qp),Oa.prototype.g=function(){return new Qu(this.l,this.j)},Oa.prototype.i=function(c){return function(){return c}}({});function Qu(c,d){ut.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Qu,ut),n=Qu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ka(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;CT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function CT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?xa(this):ka(this),this.readyState==3&&CT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,xa(this))},n.Qa=function(c){this.g&&(this.response=c,xa(this))},n.ga=function(){this.g&&xa(this)};function xa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ka(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ka(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ST(c){let d="";return le(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function og(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=ST(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Ne(c){ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ne,ut);var Ax=/^https?$/i,Rx=["POST","PUT"];n=Ne.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zp.g(),this.v=this.o?nT(this.o):nT(Zp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){AT(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Rx,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of f)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{MT(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){AT(this,A)}};function AT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,RT(c),Yu(c)}function RT(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),Yu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yu(this,!0)),Ne.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?NT(this):this.bb())},n.bb=function(){NT(this)};function NT(c){if(c.h&&typeof s<"u"&&(!c.v[1]||ir(c)!=4||c.Z()!=2)){if(c.u&&ir(c)==4)Zw(c.Ea,0,c);else if(Et(c,"readystatechange"),ir(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=F===0){var b=String(c.D).match(ET)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!Ax.test(b?b.toLowerCase():"")}f=g}if(f)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var A=2<ir(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",RT(c)}}finally{Yu(c)}}}}function Yu(c,d){if(c.g){MT(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Et(c,"ready");try{f.onreadystatechange=g}catch{}}}function MT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function ir(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),ax(d)}};function PT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Nx(c){let d={};c=(c.g&&2<=ir(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function OT(c){this.Aa=0,this.i=[],this.j=new Aa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,c),this.cb=Fa("retryDelaySeedMs",1e4,c),this.Wa=Fa("forwardChannelMaxRetries",2,c),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pT(c&&c.concurrentRequestLimit),this.Da=new Cx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=OT.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){It(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=$T(this,null,this.W),Zu(this)};function sg(c){if(xT(c),c.G==3){var d=c.U++,f=rr(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),La(c,f),d=new Br(c,c.j,d),d.L=2,d.v=Ku(rr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=HT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),zu(d)}BT(c)}function Ju(c){c.g&&(cg(c),c.g.cancel(),c.g=null)}function xT(c){Ju(c),c.u&&(a.clearTimeout(c.u),c.u=null),Xu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Zu(c){if(!gT(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ea||Gw(),Ia||(Ea(),Ia=!0),jp.add(d,c),c.B=0}}function Mx(c,d){return mT(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Sa(m(c.Ga,c,d),UT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Br(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=FT(this,b,d),f=rr(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),La(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(ST(A)))+"&"+d:this.m&&og(f,this.m,A)),ig(this.h,b),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),b.T=!0,eg(b,f,null)):eg(b,f,d),this.G=2}}else this.G==3&&(c?kT(this,c):this.i.length==0||gT(this.h)||kT(this))};function kT(c,d){var f;d?f=d.l:f=c.U++;let g=rr(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),La(c,g),c.m&&c.o&&og(g,c.m,c.o),f=new Br(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=FT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ig(c.h,f),eg(f,g,d)}function La(c,d){c.H&&le(c.H,function(f,g){Te(d,g,f)}),c.l&&_T({},function(f,g){Te(d,g,f)})}function FT(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let F=["count="+f];A==-1?0<f?(A=b[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let Ie=!0;for(let rt=0;rt<f;rt++){let me=b[rt].g,lt=b[rt].map;if(me-=A,0>me)A=Math.max(0,b[rt].g-100),Ie=!1;else try{Sx(lt,F,"req"+me+"_")}catch{g&&g(lt)}}if(Ie){g=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function LT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ea||Gw(),Ia||(Ea(),Ia=!0),jp.add(d,c),c.v=0}}function ag(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Sa(m(c.Fa,c),UT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,VT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Sa(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Ju(this),VT(this))};function cg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function VT(c){c.g=new Br(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=rr(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),La(c,d),c.m&&c.o&&og(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ku(rr(d)),f.m=null,f.P=!0,dT(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Ju(this),ag(this),It(19))};function Xu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function jT(c,d){var f=null;if(c.g==d){Xu(c),cg(c),c.g=null;var g=2}else if(rg(c.h,d))f=d.D,yT(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=$u(),Et(g,new aT(g,f)),Zu(c)}else LT(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&Mx(c,d)||g==2&&ag(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Oi(c,5);break;case 4:Oi(c,10);break;case 3:Oi(c,6);break;default:Oi(c,2)}}}function UT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Oi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Pi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gu(g,"https"),Ku(g),b?Dx(g.toString(),f):bx(g.toString(),f)}else It(2);c.G=0,c.l&&c.l.sa(d),BT(c),xT(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function BT(c){if(c.G=0,c.ka=[],c.l){let d=vT(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function $T(c,d,f){var g=f instanceof Pi?rr(f):new Pi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Wu(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Pi(null);g&&Gu(A,g),d&&(A.g=d),b&&Wu(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),La(c,g),g}function HT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ne(new Oa({eb:f})):new Ne(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qT(){}n=qT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function el(){}el.prototype.g=function(c,d){return new Bt(c,d)};function Bt(c,d){ut.call(this),this.g=new OT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ho(this)}C(Bt,ut),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){sg(this.g)},Bt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Kp(c),c=f);d.i.push(new px(d.Ya++,c)),d.G==3&&Zu(d)},Bt.prototype.N=function(){this.g.l=null,delete this.j,sg(this.g),delete this.g,Bt.aa.N.call(this)};function zT(c){Yp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(zT,Yp);function GT(){Jp.call(this),this.status=1}C(GT,Jp);function Ho(c){this.g=c}C(Ho,qT),Ho.prototype.ua=function(){Et(this.g,"a")},Ho.prototype.ta=function(c){Et(this.g,new zT(c))},Ho.prototype.sa=function(c){Et(this.g,new GT)},Ho.prototype.ra=function(){Et(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,fE=Mr.createWebChannelTransport=function(){return new el},hE=Mr.getStatEventTarget=function(){return $u()},dE=Mr.Event=Ni,Cf=Mr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hu.NO_ERROR=0,Hu.TIMEOUT=8,Hu.HTTP_ERROR=6,lu=Mr.ErrorCode=Hu,cT.COMPLETE="complete",lE=Mr.EventType=cT,rT.EventType=ba,ba.OPEN="a",ba.CLOSE="b",ba.ERROR="c",ba.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Hs=Mr.WebChannel=rT,v4=Mr.FetchXmlHttpFactory=Oa,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,uE=Mr.XhrIo=Ne}).apply(typeof bf<"u"?bf:typeof self<"u"?self:typeof window<"u"?window:{});var gN="@firebase/firestore",mN="4.8.0";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var da="11.10.0";var Co=new qn("@firebase/firestore");function qs(){return Co.logLevel}function V(n,...e){if(Co.logLevel<=de.DEBUG){let t=e.map(JI);Co.debug(`Firestore (${da}): ${n}`,...t)}}function Pr(n,...e){if(Co.logLevel<=de.ERROR){let t=e.map(JI);Co.error(`Firestore (${da}): ${n}`,...t)}}function wi(n,...e){if(Co.logLevel<=de.WARN){let t=e.map(JI);Co.warn(`Firestore (${da}): ${n}`,...t)}}function JI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,iM(n,r,t)}function iM(n,e,t){let r=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Pr(r),new Error(r)}function _e(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||iM(e,i,r)}function Z(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends st{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Tn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Of=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},_E=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},EE=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Tn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Tn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new Of(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new tt(e)}},IE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},wE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new IE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},TE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function _4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function oM(){return new TextEncoder}var mu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=_4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function DE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ae(r,i);{let o=oM(),s=E4(o.encode(yN(n,t)),o.encode(yN(e,t)));return s!==0?s:ae(r,i)}}t+=r>65535?2:1}return ae(n.length,e.length)}function yN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function E4(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ae(n[t],e[t]);return ae(n.length,e.length)}function Zs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var vN="__name__",kf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):DE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nr.fromString(e.substring(4,e.length-2))}},Re=class n extends kf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},I4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class n extends kf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return I4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vN}static keyField(){return new n([vN])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var K=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};function sM(n,e,t){if(!t)throw new $(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function w4(n,e,t,r){if(e===!0&&r===!0)throw new $(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _N(n){if(!K.isDocumentKey(n))throw new $(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EN(n){if(K.isDocumentKey(n))throw new $(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aM(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ZI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q(12329,{type:typeof n})}function Ti(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ZI(n);throw new $(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Be(n,e){let t={typeString:n};return e&&(t.value=e),t}function Su(n,e){if(!aM(n))throw new $(P.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new $(P.INVALID_ARGUMENT,t);return!0}var IN=-62135596800,wN=1e6,$e=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*wN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<IN)throw new $(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wN}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-IN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Be("string",$e._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};var ee=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new $e(0,0))}static max(){return new n(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yu=-1,bE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};bE.UNKNOWN_ID=-1;function T4(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new So(i,K.empty(),e)}function D4(n){return new So(n.readTime,n.key,yu)}var So=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),K.empty(),yu)}static max(){return new n(ee.max(),K.empty(),yu)}};function b4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=K.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var C4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",CE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ha(n){return v(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==C4)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function S4(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fa(n){return n.name==="IndexedDbTransactionError"}var XI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),ew=-1;function fp(n){return n==null}function vu(n){return n===0&&1/n==-1/0}function A4(n){return typeof n=="number"&&Number.isInteger(n)&&!vu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var cM="";function R4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TN(e)),e=N4(n.get(t),e);return TN(e)}function N4(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case cM:t+="";break;default:t+=o}}return t}function TN(n){return n+cM+""}var M4="remoteDocuments",uM="owner";var lM="mutationQueues";var dM="mutations";var hM="documentMutations",P4="remoteDocumentsV14";var fM="remoteDocumentGlobal";var pM="targets";var gM="targetDocuments";var mM="targetGlobal",yM="collectionParents";var vM="clientMetadata";var _M="bundles";var EM="namedQueries";var O4="indexConfiguration";var x4="indexState";var k4="indexEntries";var IM="documentOverlays";var F4="globals";var L4=[lM,dM,hM,M4,pM,uM,mM,gM,vM,fM,yM,_M,EM],rae=[...L4,IM],V4=[lM,dM,hM,P4,pM,uM,mM,gM,vM,fM,yM,_M,EM,IM],j4=V4,U4=[...j4,O4,x4,k4];var iae=[...U4,F4];function DN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ks(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ks(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ks(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ks(this.root,e,this.comparator,!0)}},Ks=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}};Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var nt=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ff(this.data.getIterator())}getIteratorFrom(e){return new Ff(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ff=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qn=class n{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new n([])}unionWith(e){let t=new nt(Kt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Lf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var _t=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Lf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_t.EMPTY_BYTE_STRING=new _t("");var B4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(n){if(_e(!!n,39018),typeof n=="string"){let e=0,t=B4.exec(n);if(_e(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(n.seconds),nanos:be(n.nanos)}}function be(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xr(n){return typeof n=="string"?_t.fromBase64String(n):_t.fromUint8Array(n)}var TM="server_timestamp",DM="__type__",bM="__previous_value__",CM="__local_write_time__";function tw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[DM])===null||t===void 0?void 0:t.stringValue)===TM}function pp(n){let e=n.mapValue.fields[bM];return tw(e)?pp(e):e}function _u(n){let e=Or(n.mapValue.fields[CM].timestampValue);return new $e(e.seconds,e.nanos)}var SE=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Vf="(default)",jf=class n{constructor(e,t){this.projectId=e,this.database=t||Vf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Vf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var nw="__type__",SM="__max__",Sf={mapValue:{fields:{__type__:{stringValue:SM}}}},rw="__vector__",Xs="value";function Di(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tw(n)?4:RM(n)?9007199254740991:AM(n)?10:11:Q(28295,{value:n})}function Xn(n,e){if(n===e)return!0;let t=Di(n);if(t!==Di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _u(n).isEqual(_u(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Or(i.timestampValue),a=Or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return xr(i.bytesValue).isEqual(xr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?vu(s)===vu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Zs(n.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(DN(s)!==DN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Xn(s[u],a[u])))return!1;return!0}(n,e);default:return Q(52216,{left:n})}}function Eu(n,e){return(n.values||[]).find(t=>Xn(t,e))!==void 0}function ea(n,e){if(n===e)return 0;let t=Di(n),r=Di(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return bN(n.timestampValue,e.timestampValue);case 4:return bN(_u(n),_u(e));case 5:return DE(n.stringValue,e.stringValue);case 6:return function(o,s){let a=xr(o),u=xr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(be(o.latitude),be(s.latitude));return a!==0?a:ae(be(o.longitude),be(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return CN(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[Xs])===null||a===void 0?void 0:a.arrayValue,C=(u=m[Xs])===null||u===void 0?void 0:u.arrayValue,N=ae(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:CN(y,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Sf.mapValue&&s===Sf.mapValue)return 0;if(o===Sf.mapValue)return 1;if(s===Sf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=DE(u[p],h[p]);if(m!==0)return m;let y=ea(a[u[p]],l[h[p]]);if(y!==0)return y}return ae(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Q(23264,{le:t})}}function bN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=Or(n),r=Or(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function CN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ea(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function ta(n){return AE(n)}function AE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Or(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return K.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=AE(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${AE(t.fields[s])}`;return i+"}"}(n.mapValue):Q(61005,{value:n})}function Nf(n){switch(Di(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=pp(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return xr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Nf(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Oo(r.fields,(o,s)=>{i+=o.length+Nf(s)}),i}(n.mapValue);default:throw Q(13486,{value:n})}}function RE(n){return!!n&&"integerValue"in n}function iw(n){return!!n&&"arrayValue"in n}function SN(n){return!!n&&"nullValue"in n}function AN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mf(n){return!!n&&"mapValue"in n}function AM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[nw])===null||t===void 0?void 0:t.stringValue)===rw}function hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Oo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===SM}var sae={mapValue:{fields:{[nw]:{stringValue:rw},[Xs]:{arrayValue:{}}}}};var wn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=Kt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=hu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Oo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(hu(this.value))}};function NM(n){let e=[];return Oo(n.fields,(t,r)=>{let i=new Kt([t]);if(Mf(r)){let o=NM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Qn(e)}var Dn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),wn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var na=class{constructor(e,t){this.position=e,this.inclusive=t}};function RN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=K.comparator(K.fromName(s.referenceValue),t.key):r=ea(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function NN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xn(n.position[t],e.position[t]))return!1;return!0}var ra=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Uf=class{},Ke=class n extends Uf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ME(e,t,r):t==="array-contains"?new xE(e,r):t==="in"?new kE(e,r):t==="not-in"?new FE(e,r):t==="array-contains-any"?new LE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PE(e,r):new OE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ea(t,this.value)):t!==null&&Di(this.value)===Di(t)&&this.matchesComparison(ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},er=class n extends Uf{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return MM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function MM(n){return n.op==="and"}function PM(n){return H4(n)&&MM(n)}function H4(n){for(let e of n.filters)if(e instanceof er)return!1;return!0}function NE(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+ta(n.value);if(PM(n))return n.filters.map(e=>NE(e)).join(",");{let e=n.filters.map(t=>NE(t)).join(",");return`${n.op}(${e})`}}function OM(n,e){return n instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(n,e):n instanceof er?function(r,i){return i instanceof er&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&OM(s,i.filters[a]),!0):!1}(n,e):void Q(19439)}function xM(n){return n instanceof Ke?function(t){return`${t.field.canonicalString()} ${t.op} ${ta(t.value)}`}(n):n instanceof er?function(t){return t.op.toString()+" {"+t.getFilters().map(xM).join(" ,")+"}"}(n):"Filter"}var ME=class extends Ke{constructor(e,t,r){super(e,t,r),this.key=K.fromName(r.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},PE=class extends Ke{constructor(e,t){super(e,"in",t),this.keys=kM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},OE=class extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=kM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function kM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>K.fromName(r.referenceValue))}var xE=class extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return iw(t)&&Eu(t.arrayValue,this.value)}},kE=class extends Ke{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}},FE=class extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Eu(this.value.arrayValue,t)}},LE=class extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!iw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Eu(this.value.arrayValue,r))}};var VE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function MN(n,e=null,t=[],r=[],i=null,o=null,s=null){return new VE(n,e,t,r,i,o,s)}function ow(n){let e=Z(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>NE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ta(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ta(r)).join(",")),e.Pe=t}return e.Pe}function sw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NN(n.startAt,e.startAt)&&NN(n.endAt,e.endAt)}function jE(n){return K.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ia=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function q4(n,e,t,r,i,o,s,a){return new ia(n,e,t,r,i,o,s,a)}function aw(n){return new ia(n)}function PN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function z4(n){return n.collectionGroup!==null}function fu(n){let e=Z(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new nt(Kt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ra(o,r))}),t.has(Kt.keyField().canonicalString())||e.Te.push(new ra(Kt.keyField(),r))}return e.Te}function Jn(n){let e=Z(n);return e.Ie||(e.Ie=G4(e,fu(n))),e.Ie}function G4(n,e){if(n.limitType==="F")return MN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ra(i.field,o)});let t=n.endAt?new na(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new na(n.startAt.position,n.startAt.inclusive):null;return MN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function UE(n,e,t){return new ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gp(n,e){return sw(Jn(n),Jn(e))&&n.limitType===e.limitType}function FM(n){return`${ow(Jn(n))}|lt:${n.limitType}`}function zs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>xM(i)).join(", ")}]`),fp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ta(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ta(i)).join(",")),`Target(${r})`}(Jn(n))}; limitType=${n.limitType})`}function mp(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of fu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=RN(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,fu(r),i)||r.endAt&&!function(s,a,u){let l=RN(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,fu(r),i))}(n,e)}function W4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LM(n){return(e,t)=>{let r=!1;for(let i of fu(n)){let o=K4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function K4(n,e,t){let r=n.field.isKeyField()?K.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ea(u,l):Q(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:n.dir})}}var kr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return wM(this.inner)}size(){return this.innerSize}};var Q4=new Oe(K.comparator);function Fr(){return Q4}var VM=new Oe(K.comparator);function du(...n){let e=VM;for(let t of n)e=e.insert(t.key,t);return e}function jM(n){let e=VM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wo(){return pu()}function UM(){return pu()}function pu(){return new kr(n=>n.toString(),(n,e)=>n.isEqual(e))}var Y4=new Oe(K.comparator),J4=new nt(K.comparator);function fe(...n){let e=J4;for(let t of n)e=e.add(t);return e}var Z4=new nt(ae);function X4(){return Z4}function cw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vu(e)?"-0":e}}function BM(n){return{integerValue:""+n}}function eq(n,e){return A4(e)?BM(e):cw(n,e)}var oa=class{constructor(){this._=void 0}};function tq(n,e,t){return n instanceof sa?function(i,o){let s={fields:{[DM]:{stringValue:TM},[CM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&tw(o)&&(o=pp(o)),o&&(s.fields[bM]=o),{mapValue:s}}(t,e):n instanceof Ao?HM(n,e):n instanceof Ro?qM(n,e):function(i,o){let s=$M(i,o),a=ON(s)+ON(i.Ee);return RE(s)&&RE(i.Ee)?BM(a):cw(i.serializer,a)}(n,e)}function nq(n,e,t){return n instanceof Ao?HM(n,e):n instanceof Ro?qM(n,e):t}function $M(n,e){return n instanceof aa?function(r){return RE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var sa=class extends oa{},Ao=class extends oa{constructor(e){super(),this.elements=e}};function HM(n,e){let t=zM(e);for(let r of n.elements)t.some(i=>Xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ro=class extends oa{constructor(e){super(),this.elements=e}};function qM(n,e){let t=zM(e);for(let r of n.elements)t=t.filter(i=>!Xn(i,r));return{arrayValue:{values:t}}}var aa=class extends oa{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function ON(n){return be(n.integerValue||n.doubleValue)}function zM(n){return iw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function rq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ao&&i instanceof Ao||r instanceof Ro&&i instanceof Ro?Zs(r.elements,i.elements,Xn):r instanceof aa&&i instanceof aa?Xn(r.Ee,i.Ee):r instanceof sa&&i instanceof sa}(n.transform,e.transform)}var BE=class{constructor(e,t){this.version=e,this.transformResults=t}},yi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ca=class{};function GM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Iu(n.key,yi.none()):new No(n.key,n.data,yi.none());{let t=n.data,r=wn.empty(),i=new nt(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Lr(n.key,r,new Qn(i.toArray()),yi.none())}}function iq(n,e,t){n instanceof No?function(i,o,s){let a=i.value.clone(),u=kN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Lr?function(i,o,s){if(!Pf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=kN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(WM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function gu(n,e,t,r){return n instanceof No?function(o,s,a,u){if(!Pf(o.precondition,s))return a;let l=o.value.clone(),h=FN(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Lr?function(o,s,a,u){if(!Pf(o.precondition,s))return a;let l=FN(o.fieldTransforms,u,s),h=s.data;return h.setAll(WM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Pf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function oq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=$M(r.transform,i||null);o!=null&&(t===null&&(t=wn.empty()),t.set(r.field,o))}return t||null}function xN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zs(r,i,(o,s)=>rq(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var No=class extends ca{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lr=class extends ca{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function WM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function kN(n,e,t){let r=new Map;_e(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,nq(s,a,t[i]))}return r}function FN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,tq(o,s,e))}return r}var Iu=class extends ca{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$E=class extends ca{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var HE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&iq(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=UM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=GM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(t,r)=>xN(t,r))&&Zs(this.baseMutations,e.baseMutations,(t,r)=>xN(t,r))}},qE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Y4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var zE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var GE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var je,ge;function sq(n){switch(n){case P.OK:return Q(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return Q(15467,{code:n})}}function KM(n){if(n===void 0)return Pr("GRPC error has no .code"),P.UNKNOWN;switch(n){case je.OK:return P.OK;case je.CANCELLED:return P.CANCELLED;case je.UNKNOWN:return P.UNKNOWN;case je.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case je.INTERNAL:return P.INTERNAL;case je.UNAVAILABLE:return P.UNAVAILABLE;case je.UNAUTHENTICATED:return P.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case je.NOT_FOUND:return P.NOT_FOUND;case je.ALREADY_EXISTS:return P.ALREADY_EXISTS;case je.PERMISSION_DENIED:return P.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case je.ABORTED:return P.ABORTED;case je.OUT_OF_RANGE:return P.OUT_OF_RANGE;case je.UNIMPLEMENTED:return P.UNIMPLEMENTED;case je.DATA_LOSS:return P.DATA_LOSS;default:return Q(39323,{code:n})}}(ge=je||(je={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var LN=null;var aq=new Nr([4294967295,4294967295],0);function VN(n){let e=oM().encode(n),t=new cE;return t.update(e),new Uint8Array(t.digest())}function jN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Nr([t,r],0),new Nr([i,o],0)]}var WE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new To(`Invalid padding: ${t}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new To(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Nr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Nr.fromNumber(r)));return i.compare(aq)===1&&(i=new Nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=VN(e),[r,i]=jN(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=VN(e),[r,i]=jN(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},To=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Bf=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Oe(ae),Fr(),fe())}},wu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var Qs=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},$f=class{constructor(e,t){this.targetId=e,this.De=t}},Hf=class{constructor(e,t,r=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},qf=class{constructor(){this.ve=0,this.Ce=UN(),this.Fe=_t.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),t=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:o})}}),new wu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=UN()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},KE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Fr(),this.je=Af(),this.Je=Af(),this.He=new Oe(ae)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(jE(o))if(r===0){let s=new K(o.path);this.Xe(t,s,Dn.newNoDocument(s,ee.min()))}else _e(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}LN?.ct(function(h,p,m,y,C){var N,R,k,z,B,pe;let He={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},le=p.unchangedNames;return le&&(He.bloomFilter={applied:C===0,hashCount:(N=le?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(z=(k=(R=le?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&z!==void 0?z:0,padding:(pe=(B=le?.bits)===null||B===void 0?void 0:B.padding)!==null&&pe!==void 0?pe:0,mightContain:T=>{var _;return(_=y?.mightContain(T))!==null&&_!==void 0&&_}}),He}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=xr(r).toUint8Array()}catch(u){if(u instanceof Lf)return wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new WE(s,i,o)}catch(u){return wi(u instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&jE(a.target)){let u=new K(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Dn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Bf(e,t,this.He,this.ze,r);return this.ze=Fr(),this.je=Af(),this.Je=Af(),this.He=new Oe(ae),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new qf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new nt(ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new nt(ae),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new qf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Af(){return new Oe(K.comparator)}function UN(){return new Oe(K.comparator)}var cq={asc:"ASCENDING",desc:"DESCENDING"},uq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lq={and:"AND",or:"OR"},QE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function YE(n,e){return n.useProto3Json||fp(e)?e:{value:e}}function zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dq(n,e){return zf(n,e.toTimestamp())}function Zn(n){return _e(!!n,49232),ee.fromTimestamp(function(t){let r=Or(t);return new $e(r.seconds,r.nanos)}(n))}function uw(n,e){return JE(n,e).canonicalString()}function JE(n,e){let t=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function YM(n){let e=Re.fromString(n);return _e(tP(e),10190,{key:e.toString()}),e}function ZE(n,e){return uw(n.databaseId,e.path)}function pE(n,e){let t=YM(e);if(t.get(1)!==n.databaseId.projectId)throw new $(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new K(ZM(t))}function JM(n,e){return uw(n.databaseId,e)}function hq(n){let e=YM(n);return e.length===4?Re.emptyPath():ZM(e)}function XE(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZM(n){return _e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BN(n,e,t){return{name:ZE(n,e),fields:t.value.mapValue.fields}}function fq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(_e(h===void 0||typeof h=="string",58123),_t.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),_t.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?P.UNKNOWN:KM(l.code);return new $(h,l.message||"")}(s);t=new Hf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pE(n,r.document.name),o=Zn(r.document.updateTime),s=r.document.createTime?Zn(r.document.createTime):ee.min(),a=new wn({mapValue:{fields:r.document.fields}}),u=Dn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Qs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pE(n,r.document),o=r.readTime?Zn(r.readTime):ee.min(),s=Dn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Qs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pE(n,r.document),o=r.removedTargetIds||[];t=new Qs([],o,i,null)}else{if(!("filter"in e))return Q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new GE(i,o),a=r.targetId;t=new $f(a,s)}}return t}function pq(n,e){let t;if(e instanceof No)t={update:BN(n,e.key,e.value)};else if(e instanceof Iu)t={delete:ZE(n,e.key)};else if(e instanceof Lr)t={update:BN(n,e.key,e.data),updateMask:Tq(e.fieldMask)};else{if(!(e instanceof $E))return Q(16599,{Rt:e.type});t={verify:ZE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof sa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ao)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ro)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof aa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:dq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q(27497)}(n,e.precondition)),t}function gq(n,e){return n&&n.length>0?(_e(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Zn(i.updateTime):Zn(o);return s.isEqual(ee.min())&&(s=Zn(o)),new BE(s,i.transformResults||[])}(t,e))):[]}function mq(n,e){return{documents:[JM(n,e.path)]}}function yq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=JM(n,i);let o=function(l){if(l.length!==0)return eP(er.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Gs(m.field),direction:Eq(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=YE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function vq(n){let e=hq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){_e(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=XM(p);return m instanceof er&&PM(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(C){return new ra(Ws(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,fp(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new na(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new na(y,m)}(t.endAt)),q4(e,i,s,o,a,"F",u,l)}function _q(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ws(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ws(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ws(t.unaryFilter.field);return Ke.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ws(t.unaryFilter.field);return Ke.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ke.create(Ws(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return er.create(t.compositeFilter.filters.map(r=>XM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(t.compositeFilter.op))}(n):Q(30097,{filter:n})}function Eq(n){return cq[n]}function Iq(n){return uq[n]}function wq(n){return lq[n]}function Gs(n){return{fieldPath:n.canonicalString()}}function Ws(n){return Kt.fromServerFormat(n.fieldPath)}function eP(n){return n instanceof Ke?function(t){if(t.op==="=="){if(AN(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NAN"}};if(SN(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AN(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NAN"}};if(SN(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(t.field),op:Iq(t.op),value:t.value}}}(n):n instanceof er?function(t){let r=t.getFilters().map(i=>eP(i));return r.length===1?r[0]:{compositeFilter:{op:wq(t.op),filters:r}}}(n):Q(54877,{filter:n})}function Tq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Tu=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=_t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var eI=class{constructor(e){this.gt=e}};function Dq(n){let e=vq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?UE(e,e.limit,"L"):e}var Gf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),vu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Or(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(xr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?RM(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):AM(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Q(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Xs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(be(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),K.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Gf.Ut=new Gf;var tI=class{constructor(){this.Dn=new nI}addToCollectionParentIndex(e,t){return this.Dn.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(So.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(So.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},nI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nt(Re.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Re.comparator)).toArray()}};var aae=new Uint8Array(0);var $N={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nP=41943040,an=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(nP,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);var Du=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var HN="LruGarbageCollector",bq=1048576;function qN([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var rI=class{constructor(e){this.Tr=e,this.buffer=new nt(qN),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();qN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},iI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(HN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){fa(t)?V(HN,"Ignoring IndexedDB error during garbage collection: ",t):yield ha(t)}yield this.Rr(3e5)}))}},oI=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(XI.ue);let r=new rI(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve($N)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$N):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),qs()<=de.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Cq(n,e){return new oI(n,e)}var sI=class{constructor(){this.changes=new kr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var aI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var cI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&gu(r.mutation,i,Qn.empty(),$e.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=wo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=du();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=wo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Fr(),s=pu(),a=function(){return pu()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Lr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),gu(h.mutation,l,h.mutation.getFieldMask(),$e.now())):s.set(l.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new aI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=pu(),i=new Oe((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Qn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=UM();h.forEach(m=>{if(!o.has(m)){let y=GM(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):z4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):O.resolve(wo()),a=yu,u=o;return s.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:jM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(r=>{let i=du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=du();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,u=>{let l=function(p,m){return new ia(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Dn.newInvalidDocument(h)))});let a=du();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&gu(h.mutation,l,Qn.empty(),$e.now()),mp(t,l)&&(a=a.insert(u,l))}),a})}};var uI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return O.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:Dq(i.bundledQuery),readTime:Zn(i.readTime)}}(t)),O.resolve()}};var lI=class{constructor(){this.overlays=new Oe(K.comparator),this.kr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=wo();return O.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=wo(),o=t.length+1,s=new K(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=wo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=wo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zE(t,r));let o=this.kr.get(t);o===void 0&&(o=fe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var dI=class{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var bu=class{constructor(){this.qr=new nt(Ue.Qr),this.$r=new nt(Ue.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ue(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ue(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new K(new Re([])),r=new Ue(t,e),i=new Ue(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new K(new Re([])),r=new Ue(t,e),i=new Ue(t,e+1),o=fe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ue(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return K.comparator(e.key,t.key)||ae(e.Hr,t.Hr)}static Ur(e,t){return ae(e.Hr,t.Hr)||K.comparator(e.key,t.key)}};var hI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new nt(Ue.Qr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new HE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ue(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,t){return O.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?ew:this.er-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ue(t,0),i=new Ue(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(ae);return t.forEach(i=>{let o=new Ue(i,0),s=new Ue(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),O.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;K.isDocumentKey(o)||(o=o.child(""));let s=new Ue(new K(o),0),a=new nt(ae);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),O.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_e(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return O.forEach(t.mutations,i=>{let o=new Ue(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ue(t,0),i=this.Yr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var fI=class{constructor(e){this.ni=e,this.docs=function(){return new Oe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=Fr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Dn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Fr(),s=t.path,a=new K(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||b4(D4(h),r)<=0||(i.has(h.key)||mp(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q(9500)}ri(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pI(this)}getSize(e){return O.resolve(this.size)}},pI=class extends sI{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var gI=class{constructor(e){this.persistence=e,this.ii=new kr(t=>ow(t),sw),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new bu,this.targetCount=0,this._i=Du.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),O.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Du(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.hr(t),O.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.oi.containsKey(t))}};var Wf=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new XI(0),this.ci=!1,this.ci=!0,this.li=new dI,this.referenceDelegate=e(this),this.hi=new gI(this),this.indexManager=new tI,this.remoteDocumentCache=function(i){return new fI(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new eI(t),this.Ti=new uI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new hI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new mI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return O.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},mI=class extends CE{constructor(e){super(),this.currentSequenceNumber=e}},yI=class n{constructor(e){this.persistence=e,this.Ai=new bu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Q(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),O.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.mi,r=>{let i=K.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return O.or([()=>O.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Kf=class n{constructor(e,t){this.persistence=e,this.gi=new kr(r=>R4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Cq(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return O.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return O.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?O.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),O.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),O.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}Sr(e,t,r){return O.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var vI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fe(),i=fe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var _I=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var EI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Y0()?8:S4(Xe())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new _I;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(qs()<=de.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",zs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(qs()<=de.DEBUG&&V("QueryEngine","Query:",zs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(qs()<=de.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",zs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):O.resolve())}ps(e,t){if(PN(t))return O.resolve(null);let r=Jn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=UE(t,null,"F"),r=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,UE(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return PN(t)||i.isEqual(ee.min())?O.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?O.resolve(null):(qs()<=de.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zs(t)),this.vs(e,s,t,T4(i,yu)).next(a=>a))})}bs(e,t){let r=new nt(LM(e));return t.forEach((i,o)=>{mp(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return qs()<=de.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",zs(t)),this.gs.getDocumentsMatchingQuery(e,t,So.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var lw="LocalStore",Sq=3e8,II=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Oe(ae),this.Ms=new kr(o=>ow(o),sw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Aq(n,e,t,r){return new II(n,e,t,r)}function rP(n,e){return v(this,null,function*(){let t=Z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Rq(n,e){let t=Z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=O.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);_e(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function iP(n){let e=Z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Nq(n,e){let t=Z(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(_t.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Sq?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=Fr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Mq(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ee.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function Mq(n,e,t){let r=fe(),i=fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Fr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(lw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function Pq(n,e){let t=Z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ew),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oq(n,e){let t=Z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Tu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function wI(n,e,t){return v(this,null,function*(){let r=Z(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!fa(s))throw s;V(lw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function zN(n,e,t){let r=Z(n),i=ee.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Z(u),m=p.Ms.get(h);return m!==void 0?O.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:fe())).next(a=>(xq(r,W4(e),a),{documents:a,qs:o})))}function xq(n,e,t){let r=n.xs.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Qf=class{constructor(){this.activeTargetIds=X4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var TI=class{constructor(){this.Fo=new Qf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var DI=class{xo(e){}shutdown(){}};var GN="ConnectivityMonitor",Yf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(GN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(GN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Rf=null;function bI(){return Rf===null?Rf=function(){return 268435456+Math.round(2147483648*Math.random())}():Rf++,"0x"+Rf.toString(16)}var gE="RestConnection",kq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},CI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Vf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=bI(),a=this.Go(e,t.toUriEncodedString());V(gE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=li(l);return this.jo(e,a,u,r,h).then(p=>(V(gE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw wi(gE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=kq[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var SI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var yt="WebChannelConnection",AI=class extends CI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=bI();return new Promise((a,u)=>{let l=new uE;l.setWithCredentials(!0),l.listenOnce(lE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lu.NO_ERROR:let p=l.getResponseJson();V(yt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case lu.TIMEOUT:V(yt,`RPC '${e}' ${s} timed out`),u(new $(P.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:let m=l.getStatus();if(V(yt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=function(k){let z=k.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(z)>=0?z:P.UNKNOWN}(C.status);u(new $(N,C.message))}else u(new $(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new $(P.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(yt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(yt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=bI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fE(),a=hE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,C=new SI({Ho:R=>{y?V(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(yt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,k,z)=>{R.listen(k,B=>{try{z(B)}catch(pe){setTimeout(()=>{throw pe},0)}})};return N(p,Hs.EventType.OPEN,()=>{y||(V(yt,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),N(p,Hs.EventType.CLOSE,()=>{y||(y=!0,V(yt,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),N(p,Hs.EventType.ERROR,R=>{y||(y=!0,wi(yt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new $(P.UNAVAILABLE,"The operation could not be completed")))}),N(p,Hs.EventType.MESSAGE,R=>{var k;if(!y){let z=R.data[0];_e(!!z,16349);let B=z,pe=B?.error||((k=B[0])===null||k===void 0?void 0:k.error);if(pe){V(yt,`RPC '${e}' stream ${i} received error:`,pe);let He=pe.status,le=function(I){let w=je[I];if(w!==void 0)return KM(w)}(He),T=pe.message;le===void 0&&(le=P.INTERNAL,T="Unknown error status: "+He+" with message "+pe.message),y=!0,C.__(new $(le,T)),p.close()}else V(yt,`RPC '${e}' stream ${i} received:`,z),C.a_(z)}}),N(a,dE.STAT_EVENT,R=>{R.stat===Cf.PROXY?V(yt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Cf.NOPROXY&&V(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function mE(){return typeof document<"u"?document:null}function yp(n){return new QE(n,!0)}var Jf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var WN="PersistentStream",Zf=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Jf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new $(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return V(WN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(V(WN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},RI=class extends Zf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=fq(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Zn(s.readTime):ee.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=XE(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=jE(u)?{documents:mq(o,u)}:{query:yq(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=QM(o,s.resumeToken);let l=YE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=zf(o,s.snapshotVersion.toTimestamp());let l=YE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=_q(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=XE(this.serializer),t.removeTarget=e,this.k_(t)}},NI=class extends Zf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=gq(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=XE(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>pq(this.serializer,r))};this.k_(t)}};var MI=class{},PI=class extends MI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new $(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,JE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(P.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,JE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},OI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Pr(t),this._a=!1):V("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Mo="RemoteStore",xI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){xo(this)&&(V(Mo,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=Z(u);l.Ia.add(4),yield Au(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield vp(l)})}(this))}))}),this.Aa=new OI(r,i)}};function vp(n){return v(this,null,function*(){if(xo(n))for(let e of n.da)yield e(!0)})}function Au(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function oP(n,e){let t=Z(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),pw(t)?fw(t):pa(t).x_()&&hw(t,e))}function dw(n,e){let t=Z(n),r=pa(t);t.Ta.delete(e),r.x_()&&sP(t,e),t.Ta.size===0&&(r.x_()?r.B_():xo(t)&&t.Aa.set("Unknown"))}function hw(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pa(n).H_(e)}function sP(n,e){n.Ra.$e(e),pa(n).Y_(e)}function fw(n){n.Ra=new KE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),pa(n).start(),n.Aa.aa()}function pw(n){return xo(n)&&!pa(n).M_()&&n.Ta.size>0}function xo(n){return Z(n).Ia.size===0}function aP(n){n.Ra=void 0}function Fq(n){return v(this,null,function*(){n.Aa.set("Online")})}function Lq(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{hw(n,e)})})}function Vq(n,e){return v(this,null,function*(){aP(n),pw(n)?(n.Aa.la(e),fw(n)):n.Aa.set("Unknown")})}function jq(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof Hf&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){V(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xf(n,r)}else if(e instanceof Qs?n.Ra.Ye(e):e instanceof $f?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ee.min()))try{let r=yield iP(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(_t.EMPTY_BYTE_STRING,h.snapshotVersion)),sP(o,u);let p=new Tu(h.target,u,l,h.sequenceNumber);hw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V(Mo,"Failed to raise snapshot:",r),yield Xf(n,r)}})}function Xf(n,e,t){return v(this,null,function*(){if(!fa(e))throw e;n.Ia.add(1),yield Au(n),n.Aa.set("Offline"),t||(t=()=>iP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){V(Mo,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield vp(n)}))})}function cP(n,e){return e().catch(t=>Xf(n,t,e))}function _p(n){return v(this,null,function*(){let e=Z(n),t=bi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ew;for(;Uq(e);)try{let i=yield Pq(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Bq(e,i)}catch(i){yield Xf(e,i)}uP(e)&&lP(e)})}function Uq(n){return xo(n)&&n.Pa.length<10}function Bq(n,e){n.Pa.push(e);let t=bi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function uP(n){return xo(n)&&!bi(n).M_()&&n.Pa.length>0}function lP(n){bi(n).start()}function $q(n){return v(this,null,function*(){bi(n).na()})}function Hq(n){return v(this,null,function*(){let e=bi(n);for(let t of n.Pa)e.X_(t.mutations)})}function qq(n,e,t){return v(this,null,function*(){let r=n.Pa.shift(),i=qE.from(r,e,t);yield cP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _p(n)})}function zq(n,e){return v(this,null,function*(){e&&bi(n).Z_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return sq(s)&&s!==P.ABORTED}(i.code)){let o=r.Pa.shift();bi(r).N_(),yield cP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _p(r)}})}(n,e)),uP(n)&&lP(n)})}function KN(n,e){return v(this,null,function*(){let t=Z(n);t.asyncQueue.verifyOperationInProgress(),V(Mo,"RemoteStore received new credentials");let r=xo(t);t.Ia.add(3),yield Au(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield vp(t)})}function Gq(n,e){return v(this,null,function*(){let t=Z(n);e?(t.Ia.delete(2),yield vp(t)):e||(t.Ia.add(2),yield Au(t),t.Aa.set("Unknown"))})}function pa(n){return n.Va||(n.Va=function(t,r,i){let o=Z(t);return o.ia(),new RI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:Fq.bind(null,n),e_:Lq.bind(null,n),n_:Vq.bind(null,n),J_:jq.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),pw(n)?fw(n):n.Aa.set("Unknown")):(yield n.Va.stop(),aP(n))}))),n.Va}function bi(n){return n.ma||(n.ma=function(t,r,i){let o=Z(t);return o.ia(),new NI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$q.bind(null,n),n_:zq.bind(null,n),ea:Hq.bind(null,n),ta:qq.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.N_(),yield _p(n)):(yield n.ma.stop(),n.Pa.length>0&&(V(Mo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var kI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gw(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),fa(n))return new $(P.UNAVAILABLE,`${e}: ${n}`);throw n}var ep=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||K.comparator(t.key,r.key):(t,r)=>K.comparator(t.key,r.key),this.keyedMap=du(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var tp=class{constructor(){this.fa=new Oe(K.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Q(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},ua=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ep.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var FI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},LI=class{constructor(){this.queries=QN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Z(t),o=i.queries;i.queries=QN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new $(P.ABORTED,"Firestore shutting down"))}};function QN(){return new kr(n=>FM(n),gp)}function dP(n,e){return v(this,null,function*(){let t=Z(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new FI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=gw(s,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&mw(t)})}function hP(n,e){return v(this,null,function*(){let t=Z(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Wq(n,e){let t=Z(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&mw(t)}function Kq(n,e,t){let r=Z(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function mw(n){n.Da.forEach(e=>{e.next()})}var VI,YN;(YN=VI||(VI={})).Fa="default",YN.Cache="cache";var np=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==VI.Cache}};var rp=class{constructor(e){this.key=e}},ip=class{constructor(e){this.key=e}},jI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=LM(e),this.eu=new ep(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new tp,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=mp(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{At:R})}};return N(y)-N(C)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new ua(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new tp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new ip(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new rp(r))}),t}uu(e){this.Ha=e.qs,this.Za=fe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ua.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},yw="SyncEngine",UI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},BI=class{constructor(e){this.key=e,this.lu=!1}},$I=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new kr(a=>FM(a),gp),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(K.comparator),this.Eu=new Map,this.Au=new bu,this.Ru={},this.Vu=new Map,this.mu=Du.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Qq(n,e,t=!0){return v(this,null,function*(){let r=vP(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield fP(r,e,t,!0),i})}function Yq(n,e){return v(this,null,function*(){let t=vP(n);yield fP(t,e,!0,!1)})}function fP(n,e,t,r){return v(this,null,function*(){let i=yield Oq(n.localStore,Jn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Jq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&oP(n.remoteStore,i),a})}function Jq(n,e,t,r,i){return v(this,null,function*(){n.gu=(p,m,y)=>function(N,R,k,z){return v(this,null,function*(){let B=R.view.nu(k);B.Ds&&(B=yield zN(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,B)));let pe=z&&z.targetChanges.get(R.targetId),He=z&&z.targetMismatches.get(R.targetId)!=null,le=R.view.applyChanges(B,N.isPrimaryClient,pe,He);return ZN(N,R.targetId,le._u),le.snapshot})}(n,p,m,y);let o=yield zN(n.localStore,e,!0),s=new jI(e,o.qs),a=s.nu(o.documents),u=wu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);ZN(n,t,l._u);let h=new UI(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function Zq(n,e,t){return v(this,null,function*(){let r=Z(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!gp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&dw(r.remoteStore,i.targetId),HI(r,i.targetId)}).catch(ha))):(HI(r,i.targetId),yield wI(r.localStore,i.targetId,!0))})}function Xq(n,e){return v(this,null,function*(){let t=Z(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),dw(t.remoteStore,r.targetId))})}function ez(n,e,t){return v(this,null,function*(){let r=az(n);try{let i=yield function(s,a){let u=Z(s),l=$e.now(),h=a.reduce((y,C)=>y.add(C.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Fr(),N=fe();return u.Os.getEntries(y,h).next(R=>{C=R,C.forEach((k,z)=>{z.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let k=[];for(let z of a){let B=oq(z,p.get(z.key).overlayedDocument);B!=null&&k.push(new Lr(z.key,B,NM(B.value.mapValue),yi.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:jM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Oe(ae)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Ru(r,i.changes),yield _p(r.remoteStore)}catch(i){let o=gw(i,"Failed to persist write");t.reject(o)}})}function pP(n,e){return v(this,null,function*(){let t=Z(n);try{let r=yield Nq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?_e(s.lu,14607):i.removedDocuments.size>0&&(_e(s.lu,42227),s.lu=!1))}),yield Ru(t,r,e)}catch(r){yield ha(r)}})}function JN(n,e,t){let r=Z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Z(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&mw(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tz(n,e,t){return v(this,null,function*(){let r=Z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Oe(K.comparator);s=s.insert(o,Dn.newNoDocument(o,ee.min()));let a=fe().add(o),u=new Bf(ee.min(),new Map,new Oe(ae),s,a);yield pP(r,u),r.du=r.du.remove(o),r.Eu.delete(e),vw(r)}else yield wI(r.localStore,e,!1).then(()=>HI(r,e,t)).catch(ha)})}function nz(n,e){return v(this,null,function*(){let t=Z(n),r=e.batch.batchId;try{let i=yield Rq(t.localStore,e);mP(t,r,null),gP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ru(t,i)}catch(i){yield ha(i)}})}function rz(n,e,t){return v(this,null,function*(){let r=Z(n);try{let i=yield function(s,a){let u=Z(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(_e(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);mP(r,e,t),gP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ru(r,i)}catch(i){yield ha(i)}})}function gP(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function mP(n,e,t){let r=Z(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function HI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||yP(n,r)})}function yP(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(dw(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),vw(n))}function ZN(n,e,t){for(let r of t)r instanceof rp?(n.Au.addReference(r.key,e),iz(n,r)):r instanceof ip?(V(yw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||yP(n,r.key)):Q(19791,{yu:r})}function iz(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(V(yw,"New document in limbo: "+t),n.Iu.add(r),vw(n))}function vw(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new K(Re.fromString(e)),r=n.mu.next();n.Eu.set(r,new BI(t)),n.du=n.du.insert(t,r),oP(n.remoteStore,new Tu(Jn(aw(t.path)),r,"TargetPurposeLimboResolution",XI.ue))}}function Ru(n,e,t){return v(this,null,function*(){let r=Z(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=vI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return v(this,null,function*(){let h=Z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>O.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!fa(p))throw p;V(lw,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(m,N)}}})}(r.localStore,o))})}function oz(n,e){return v(this,null,function*(){let t=Z(n);if(!t.currentUser.isEqual(e)){V(yw,"User change. New user:",e.toKey());let r=yield rP(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new $(P.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ru(t,r.Bs)}})}function sz(n,e){let t=Z(n),r=t.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function vP(n){let e=Z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tz.bind(null,e),e.hu.J_=Wq.bind(null,e.eventManager),e.hu.pu=Kq.bind(null,e.eventManager),e}function az(n){let e=Z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rz.bind(null,e),e}var _P=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=yp(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Aq(this.persistence,new EI,t.initialUser,this.serializer)}Du(t){return new Wf(yI.Vi,this.serializer)}bu(t){return new TI}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),qI=class extends _P{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){_e(this.persistence.referenceDelegate instanceof Kf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new iI(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Wf(r=>Kf.Vi(r,t),this.serializer)}};var cz=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oz.bind(null,this.syncEngine),yield Gq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new LI}()}createDatastore(t){let r=yp(t.databaseInfo.databaseId),i=function(s){return new AI(s)}(t.databaseInfo);return function(s,a,u,l){return new PI(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new xI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>JN(this.syncEngine,r,0),function(){return Yf.C()?new Yf:new DI}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new $I(o,s,a,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=Z(o);V(Mo,"RemoteStore shutting down."),s.Ia.add(5),yield Au(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var op=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ci="FirestoreClient",zI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=mu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){V(Ci,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(Ci,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=gw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yE(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V(Ci,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield rP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{wi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{wi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function XN(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield uz(n);V(Ci,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>KN(e.remoteStore,i)),n._onlineComponents=e})}function uz(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(Ci,"Using user provided OfflineComponentProvider");try{yield yE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;wi("Error using user provided cache. Falling back to memory cache: "+t),yield yE(n,new _P)}}else V(Ci,"Using default OfflineComponentProvider"),yield yE(n,new qI(void 0));return n._offlineComponents})}function EP(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(Ci,"Using user provided OnlineComponentProvider"),yield XN(n,n._uninitializedComponentsProvider._online)):(V(Ci,"Using default OnlineComponentProvider"),yield XN(n,new cz))),n._onlineComponents})}function lz(n){return EP(n).then(e=>e.syncEngine)}function IP(n){return v(this,null,function*(){let e=yield EP(n),t=e.eventManager;return t.onListen=Qq.bind(null,e.syncEngine),t.onUnlisten=Zq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Yq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Xq.bind(null,e.syncEngine),t})}function dz(n,e,t={}){let r=new Tn;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,u,l){let h=new op({next:m=>{h.Ou(),s.enqueueAndForget(()=>hP(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new $(P.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new $(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new np(aw(a.path),h,{includeMetadataChanges:!0,ka:!0});return dP(o,p)}(yield IP(n),n.asyncQueue,e,t,r)})),r.promise}function hz(n,e,t={}){let r=new Tn;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,u,l){let h=new op({next:m=>{h.Ou(),s.enqueueAndForget(()=>hP(o,p)),m.fromCache&&u.source==="server"?l.reject(new $(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new np(a,h,{includeMetadataChanges:!0,ka:!0});return dP(o,p)}(yield IP(n),n.asyncQueue,e,t,r)})),r.promise}function wP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eM=new Map;var TP="firestore.googleapis.com",tM=!0,sp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TP,this.ssl=tM}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:tM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bq)throw new $(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},la=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vE;switch(r.type){case"firstParty":return new wE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=eM.get(t);r&&(V("ComponentProvider","Removing Datastore"),eM.delete(t),r.terminate())}(this),Promise.resolve()}};function fz(n,e,t,r={}){var i;n=Ti(n,la);let o=li(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Qh(`https://${u}`),Yh("Firestore",!0)),s.host!==TP&&s.host!==u&&wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!sn(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=tt.MOCK_USER;else{h=z0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new $(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new tt(m)}n._authCredentials=new _E(new Of(h,p))}}var ap=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},vt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Su(t,n._jsonSchema))return new n(e,r||null,new K(Re.fromString(t.referencePath)))}};vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:Be("string",vt._jsonSchemaVersion),referencePath:Be("string")};var vi=class n extends ap{constructor(e,t,r){super(e,t,aw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new K(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function DP(n,e,...t){if(n=We(n),sM("collection","path",e),n instanceof la){let r=Re.fromString(e,...t);return EN(r),new vi(n,null,r)}{if(!(n instanceof vt||n instanceof vi))throw new $(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return EN(r),new vi(n.firestore,null,r)}}function tr(n,e,...t){if(n=We(n),arguments.length===1&&(e=mu.newId()),sM("doc","path",e),n instanceof la){let r=Re.fromString(e,...t);return _N(r),new vt(n,null,new K(r))}{if(!(n instanceof vt||n instanceof vi))throw new $(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return _N(r),new vt(n.firestore,n instanceof vi?n.converter:null,new K(r))}}var nM="AsyncQueue",cp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Jf(this,"async_queue_retry"),this.oc=()=>{let r=mE();r&&V(nM,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=mE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=mE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Tn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!fa(e))throw e;V(nM,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Pr("INTERNAL UNHANDLED ERROR: ",rM(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=kI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Q(47125,{hc:rM(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function rM(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Po=class extends la{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new cp(e),this._firestoreClient=void 0,yield e}})}};function bP(n,e){let t=typeof n=="object"?n:vo(),r=typeof n=="string"?n:e||Vf,i=In(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=q0("firestore");o&&fz(i,...o)}return i}function _w(n){if(n._terminated)throw new $(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||pz(n),n._firestoreClient}function pz(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new SE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wP(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new zI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var _i=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(_t.fromBase64String(e))}catch(t){throw new $(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};_i._jsonSchemaVersion="firestore/bytes/1.0",_i._jsonSchema={type:Be("string",_i._jsonSchemaVersion),bytes:Be("string")};var Cu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var up=class{constructor(e){this._methodName=e}};var Ei=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Su(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ei._jsonSchemaVersion="firestore/geoPoint/1.0",Ei._jsonSchema={type:Be("string",Ei._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};var Ii=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new $(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:Be("string",Ii._jsonSchemaVersion),vectorValues:Be("object")};var gz=/^__.*__$/,GI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new No(e,this.data,t,this.fieldTransforms)}};function CP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ec:n})}}var WI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return lp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(CP(this.Ec)&&gz.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},KI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yp(e)}Dc(e,t,r,i=!1){return new WI({Ec:e,methodName:t,bc:r,path:Kt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function mz(n){let e=n._freezeSettings(),t=yp(n._databaseId);return new KI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yz(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);NP("Data must be an object, but it was:",s,r);let a=AP(r,s),u,l;if(o.merge)u=new Qn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=vz(e,p,t);if(!s.contains(m))throw new $(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Ez(h,m)||h.push(m)}u=new Qn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new GI(new wn(a),u,l)}function SP(n,e){if(RP(n=We(n)))return NP("Unsupported field value:",e,n),AP(n,e);if(n instanceof up)return function(r,i){if(!CP(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=SP(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=$e.fromDate(r);return{timestampValue:zf(i.serializer,o)}}if(r instanceof $e){let o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zf(i.serializer,o)}}if(r instanceof Ei)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _i)return{bytesValue:QM(i.serializer,r._byteString)};if(r instanceof vt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ii)return function(s,a){return{mapValue:{fields:{[nw]:{stringValue:rw},[Xs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return cw(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${ZI(r)}`)}(n,e)}function AP(n,e){let t={};return wM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(n,(r,i)=>{let o=SP(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function RP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof Ei||n instanceof _i||n instanceof vt||n instanceof up||n instanceof Ii)}function NP(n,e,t){if(!RP(t)||!aM(t)){let r=ZI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function vz(n,e,t){if((e=We(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return MP(n,e);throw lp("Field path arguments must be of type string or ",n,!1,void 0,t)}var _z=new RegExp("[~\\*/\\[\\]]");function MP(n,e,t){if(e.search(_z)>=0)throw lp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cu(...e.split("."))._internalPath}catch{throw lp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(P.INVALID_ARGUMENT,a+n+u)}function Ez(n,e){return n.some(t=>t.isEqual(e))}var dp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new QI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(PP("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},QI=class extends dp{data(){return super.data()}};function PP(n,e){return typeof e=="string"?MP(n,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}function Iz(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var YI=class{convertValue(e,t="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Oo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Xs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>be(s.doubleValue));return new Ii(o)}convertGeoPoint(e){return new Ei(be(e.latitude),be(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=pp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){let t=Or(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);_e(tP(r),9688,{name:e});let i=new jf(r.get(1),r.get(3)),o=new K(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function wz(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Do=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bo=class n extends dp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ys(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(PP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",bo._jsonSchema={type:Be("string",bo._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};var Ys=class extends bo{data(e={}){return super.data(e)}},Js=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Do(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ys(this._firestore,this._userDataWriter,r.key,r,new Do(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ys(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Do(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ys(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Do(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Tz(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Tz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:n})}}function Ew(n){n=Ti(n,vt);let e=Ti(n.firestore,Po);return dz(_w(e),n._key).then(t=>Dz(e,n,t))}Js._jsonSchemaVersion="firestore/querySnapshot/1.0",Js._jsonSchema={type:Be("string",Js._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};var hp=class extends YI{constructor(e){super(),this.firestore=e}convertBytes(e){return new _i(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}};function OP(n){n=Ti(n,ap);let e=Ti(n.firestore,Po),t=_w(e),r=new hp(e);return Iz(n._query),hz(t,n._query).then(i=>new Js(e,r,n,i))}function Vr(n,e,t){n=Ti(n,vt);let r=Ti(n.firestore,Po),i=wz(n.converter,e,t);return xP(r,[yz(mz(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,yi.none())])}function cae(n){return xP(Ti(n.firestore,Po),[new Iu(n._key,yi.none())])}function xP(n,e){return function(r,i){let o=new Tn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return ez(yield lz(r),i,o)})),o.promise}(_w(n),e)}function Dz(n,e,t){let r=t.docs.get(e._key),i=new hp(n);return new bo(n,i,e._key,r,new Do(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){da=i})(hi),Vt(new et("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Po(new EE(r.getProvider("auth-internal")),new TE(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),at(gN,mN,e),at(gN,mN,"esm2017")})();var bz="firebase",Cz="11.10.0";at(bz,Cz,"app");var LP="@firebase/installations",Dw="0.6.18";var VP=1e4,jP=`w:${Dw}`,UP="FIS_v2",Sz="https://firebaseinstallations.googleapis.com/v1",Az=60*60*1e3,Rz="installations",Nz="Installations";var Mz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fo=new Wt(Rz,Nz,Mz);function BP(n){return n instanceof st&&n.code.includes("request-failed")}function $P({projectId:n}){return`${Sz}/projects/${n}/installations`}function HP(n){return{token:n.token,requestStatus:2,expiresIn:Oz(n.expiresIn),creationTime:Date.now()}}function qP(n,e){return v(this,null,function*(){let r=(yield e.json()).error;return Fo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function zP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Pz(n,{refreshToken:e}){let t=zP(n);return t.append("Authorization",xz(e)),t}function GP(n){return v(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function Oz(n){return Number(n.replace("s","000"))}function xz(n){return`${UP} ${n}`}function kz(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=$P(n),s=zP(n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:t,authVersion:UP,appId:n.appId,sdkVersion:jP},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield GP(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:HP(p.authToken)}}else throw yield qP("Create Installation",h)})}function WP(n){return new Promise(e=>{setTimeout(e,n)})}function Fz(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var Lz=/^[cdef][\w-]{21}$/,Tw="";function Vz(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=jz(n);return Lz.test(t)?t:Tw}catch{return Tw}}function jz(n){return Fz(n).substr(0,22)}function Ip(n){return`${n.appName}!${n.appId}`}var KP=new Map;function QP(n,e){let t=Ip(n);YP(t,e),Uz(t,e)}function YP(n,e){let t=KP.get(n);if(t)for(let r of t)r(e)}function Uz(n,e){let t=Bz();t&&t.postMessage({key:n,fid:e}),$z()}var ko=null;function Bz(){return!ko&&"BroadcastChannel"in self&&(ko=new BroadcastChannel("[Firebase] FID Change"),ko.onmessage=n=>{YP(n.data.key,n.data.fid)}),ko}function $z(){KP.size===0&&ko&&(ko.close(),ko=null)}var Hz="firebase-installations-database",qz=1,Lo="firebase-installations-store",Iw=null;function bw(){return Iw||(Iw=tf(Hz,qz,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Lo)}}})),Iw}function Ep(n,e){return v(this,null,function*(){let t=Ip(n),i=(yield bw()).transaction(Lo,"readwrite"),o=i.objectStore(Lo),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&QP(n,e.fid),e})}function JP(n){return v(this,null,function*(){let e=Ip(n),r=(yield bw()).transaction(Lo,"readwrite");yield r.objectStore(Lo).delete(e),yield r.done})}function wp(n,e){return v(this,null,function*(){let t=Ip(n),i=(yield bw()).transaction(Lo,"readwrite"),o=i.objectStore(Lo),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&QP(n,a.fid),a})}function Cw(n){return v(this,null,function*(){let e,t=yield wp(n.appConfig,r=>{let i=zz(r),o=Gz(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===Tw?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function zz(n){let e=n||{fid:Vz(),registrationStatus:0};return ZP(e)}function Gz(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Fo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Wz(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Kz(n)}:{installationEntry:e}}function Wz(n,e){return v(this,null,function*(){try{let t=yield kz(n,e);return Ep(n.appConfig,t)}catch(t){throw BP(t)&&t.customData.serverCode===409?yield JP(n.appConfig):yield Ep(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function Kz(n){return v(this,null,function*(){let e=yield kP(n.appConfig);for(;e.registrationStatus===1;)yield WP(100),e=yield kP(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield Cw(n);return r||t}return e})}function kP(n){return wp(n,e=>{if(!e)throw Fo.create("installation-not-found");return ZP(e)})}function ZP(n){return Qz(n)?{fid:n.fid,registrationStatus:0}:n}function Qz(n){return n.registrationStatus===1&&n.registrationTime+VP<Date.now()}function Yz(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=Jz(n,t),s=Pz(n,t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:jP,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield GP(()=>fetch(o,l));if(h.ok){let p=yield h.json();return HP(p)}else throw yield qP("Generate Auth Token",h)})}function Jz(n,{fid:e}){return`${$P(n)}/${e}/authTokens:generate`}function Sw(n,e=!1){return v(this,null,function*(){let t,r=yield wp(n.appConfig,o=>{if(!XP(o))throw Fo.create("not-registered");let s=o.authToken;if(!e&&eG(s))return o;if(s.requestStatus===1)return t=Zz(n,e),o;{if(!navigator.onLine)throw Fo.create("app-offline");let a=nG(o);return t=Xz(n,a),a}});return t?yield t:r.authToken})}function Zz(n,e){return v(this,null,function*(){let t=yield FP(n.appConfig);for(;t.authToken.requestStatus===1;)yield WP(100),t=yield FP(n.appConfig);let r=t.authToken;return r.requestStatus===0?Sw(n,e):r})}function FP(n){return wp(n,e=>{if(!XP(e))throw Fo.create("not-registered");let t=e.authToken;return rG(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Xz(n,e){return v(this,null,function*(){try{let t=yield Yz(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Ep(n.appConfig,r),t}catch(t){if(BP(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield JP(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Ep(n.appConfig,r)}throw t}})}function XP(n){return n!==void 0&&n.registrationStatus===2}function eG(n){return n.requestStatus===2&&!tG(n)}function tG(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Az}function nG(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function rG(n){return n.requestStatus===1&&n.requestTime+VP<Date.now()}function iG(n){return v(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield Cw(e);return r?r.catch(console.error):Sw(e).catch(console.error),t.fid})}function oG(n,e=!1){return v(this,null,function*(){let t=n;return yield sG(t),(yield Sw(t,e)).token})}function sG(n){return v(this,null,function*(){let{registrationPromise:e}=yield Cw(n);e&&(yield e)})}function aG(n){if(!n||!n.options)throw ww("App Configuration");if(!n.name)throw ww("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw ww(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ww(n){return Fo.create("missing-app-config-values",{valueName:n})}var eO="installations",cG="installations-internal",uG=n=>{let e=n.getProvider("app").getImmediate(),t=aG(e),r=In(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lG=n=>{let e=n.getProvider("app").getImmediate(),t=In(e,eO).getImmediate();return{getId:()=>iG(t),getToken:i=>oG(t,i)}};function dG(){Vt(new et(eO,uG,"PUBLIC")),Vt(new et(cG,lG,"PRIVATE"))}dG();at(LP,Dw);at(LP,Dw,"esm2017");var Tp="analytics",hG="firebase_id",fG="origin",pG=60*1e3,gG="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xw="https://www.googletagmanager.com/gtag/js";var Ut=new qn("@firebase/analytics");var mG={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qt=new Wt("analytics","Analytics",mG);function yG(n){if(!n.startsWith(xw)){let e=Qt.create("invalid-gtag-resource",{gtagURL:n});return Ut.warn(e.message),""}return n}function aO(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function vG(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function _G(n,e){let t=vG("firebase-js-sdk-policy",{createScriptURL:yG}),r=document.createElement("script"),i=`${xw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function EG(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function IG(n,e,t,r,i,o){return v(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield aO(t)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){Ut.error(a)}n("config",i,o)})}function wG(n,e,t,r,i){return v(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield aO(t);for(let u of s){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Ut.error(o)}})}function TG(n,e,t,r){function i(o,...s){return v(this,null,function*(){try{if(o==="event"){let[a,u]=s;yield wG(n,e,t,a,u)}else if(o==="config"){let[a,u]=s;yield IG(n,e,t,r,a,u)}else if(o==="consent"){let[a,u]=s;n("consent",a,u)}else if(o==="get"){let[a,u,l]=s;n("get",a,u,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){Ut.error(a)}})}return i}function DG(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=TG(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function bG(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(xw)&&t.src.includes(n))return t;return null}var CG=30,SG=1e3,Rw=class{constructor(e={},t=SG){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},cO=new Rw;function AG(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function RG(n){return v(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:AG(r)},o=gG.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Qt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function NG(r){return v(this,arguments,function*(n,e=cO,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Qt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Qt.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Nw;return setTimeout(()=>v(null,null,function*(){u.abort()}),t!==void 0?t:pG),uO({appId:i,apiKey:o,measurementId:s},a,u,e)})}function uO(o,s,a){return v(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=cO){var u;let{appId:l,measurementId:h}=n;try{yield MG(r,e)}catch(p){if(h)return Ut.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield RG(n);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!PG(m)){if(i.deleteThrottleMetadata(l),h)return Ut.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:h};throw p}let y=Number((u=m?.customData)===null||u===void 0?void 0:u.httpStatus)===503?f_(t,i.intervalMillis,CG):f_(t,i.intervalMillis),C={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return i.setThrottleMetadata(l,C),Ut.debug(`Calling attemptFetch again in ${y} millis`),uO(n,C,r,i)}})}function MG(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Qt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function PG(n){if(!(n instanceof st)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var Nw=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Mw;function OG(n,e,t,r,i){return v(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var Pw;function xG(n){Pw=n}function kG(n){Mw=n}function FG(){return v(this,null,function*(){if(Xc())try{yield Zh()}catch(n){return Ut.warn(Qt.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Ut.warn(Qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function LG(n,e,t,r,i,o,s){return v(this,null,function*(){var a;let u=NG(n);u.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&Ut.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Ut.error(y)),e.push(u);let l=FG().then(y=>{if(y)return r.getId()}),[h,p]=yield Promise.all([u,l]);bG(o)||_G(o,h.measurementId),Pw&&(i("consent","default",Pw),xG(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[fG]="firebase",m.update=!0,p!=null&&(m[hG]=p),i("config",h.measurementId,m),Mw&&(i("set",Mw),kG(void 0)),h.measurementId})}var Ow=class{constructor(e){this.app=e}_delete(){return delete Nu[this.app.options.appId],Promise.resolve()}},Nu={},tO=[],nO={},Aw="dataLayer",VG="gtag",rO,lO,iO=!1;function jG(){let n=[];if(Jh()&&n.push("This is a browser extension environment."),J0()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Qt.create("invalid-analytics-context",{errorInfo:e});Ut.warn(t.message)}}function UG(n,e,t){jG();let r=n.options.appId;if(!r)throw Qt.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ut.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qt.create("no-api-key");if(Nu[r]!=null)throw Qt.create("already-exists",{id:r});if(!iO){EG(Aw);let{wrappedGtag:o,gtagCore:s}=DG(Nu,tO,nO,Aw,VG);lO=o,rO=s,iO=!0}return Nu[r]=LG(n,tO,nO,e,rO,Aw,t),new Ow(n)}function dO(n=vo()){n=We(n);let e=In(n,Tp);return e.isInitialized()?e.getImmediate():BG(n)}function BG(n,e={}){let t=In(n,Tp);if(t.isInitialized()){let i=t.getImmediate();if(sn(e,t.getOptions()))return i;throw Qt.create("already-initialized")}return t.initialize({options:e})}function $G(n,e,t,r){n=We(n),OG(lO,Nu[n.app.options.appId],e,t,r).catch(i=>Ut.error(i))}var oO="@firebase/analytics",sO="0.10.17";function HG(){Vt(new et(Tp,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return UG(r,i,t)},"PUBLIC")),Vt(new et("analytics-internal",n,"PRIVATE")),at(oO,sO),at(oO,sO,"esm2017");function n(e){try{let t=e.getProvider(Tp).getImmediate();return{logEvent:(r,i,o)=>$G(t,r,i,o)}}catch(t){throw Qt.create("interop-component-reg-failed",{reason:t})}}}HG();var Si={production:!1,firebase:{apiKey:"AIzaSyBO2LgH44L2i_SgV9iEwBr9sznXatAbDLY",authDomain:"database-9f5ec.firebaseapp.com",projectId:"database-9f5ec",storageBucket:"database-9f5ec.firebasestorage.app",messagingSenderId:"225913763350",appId:"1:225913763350:web:ae6008a4ecf405f0d62737",measurementId:"G-5EYMTM0X1L"}};var qG={apiKey:Si.firebase.apiKey,authDomain:Si.firebase.authDomain,projectId:Si.firebase.projectId,storageBucket:Si.firebase.storageBucket,messagingSenderId:Si.firebase.messagingSenderId,appId:Si.firebase.appId,measurementId:Si.firebase.measurementId},kw=A_(qG),Vo=aE(kw),bn=bP(kw),Lae=dO(kw);var hO=class n{currentUserSubject=new Le(null);currentUser$=this.currentUserSubject.asObservable();currentUserProfileSubject=new Le(null);currentUserProfile$=this.currentUserProfileSubject.asObservable();constructor(){Vo.onAuthStateChanged(e=>v(this,null,function*(){if(this.currentUserSubject.next(e),e){this.updateLastLogin(e.uid);let t=yield this.getUserProfile(e.uid);this.currentUserProfileSubject.next(t)}else this.currentUserProfileSubject.next(null)}))}register(e,t,r,i){return v(this,null,function*(){try{let s=(yield nE(Vo,e,t)).user;if(r||i){let a=`${r||""} ${i||""}`.trim();yield iE(s,{displayName:a})}return yield this.saveUserProfile(s,r,i),s}catch(o){throw new Error(this.getErrorMessage(o.code))}})}signIn(e,t){return v(this,null,function*(){try{return(yield rE(Vo,e,t)).user}catch(r){throw new Error(this.getErrorMessage(r.code))}})}signOut(){return v(this,null,function*(){try{yield oE(Vo)}catch{throw new Error("Sign out failed")}})}saveUserProfile(e,t,r){return v(this,null,function*(){let i={uid:e.uid,email:e.email,displayName:e.displayName||void 0,firstName:t,lastName:r,role:"user",isActive:!0,createdAt:new Date,lastLoginAt:new Date,totalOrders:0,totalSpent:0,wishlist:[],reviews:[],preferences:{favoriteGenres:[],newsletter:!1,language:"en",currency:"USD",notifications:{email:!0,sms:!1,push:!0}}};yield Vr(tr(bn,"users",e.uid),i)})}updateLastLogin(e){return v(this,null,function*(){try{let t=tr(bn,"users",e);(yield Ew(t)).exists()&&(yield Vr(t,{lastLoginAt:new Date},{merge:!0}))}catch(t){console.error("Error updating last login:",t)}})}getUserProfile(e){return v(this,null,function*(){try{let t=tr(bn,"users",e),r=yield Ew(t);return r.exists()?r.data():null}catch(t){return console.error("Error getting user profile:",t),null}})}getAllUsers(){return v(this,null,function*(){try{let e=DP(bn,"users"),t=yield OP(e),r=[];return t.forEach(i=>{let o=i.data();r.push(J(x({},o),{uid:i.id}))}),r.sort((i,o)=>{let s=i.createdAt instanceof Date?i.createdAt:new Date(i.createdAt||0);return(o.createdAt instanceof Date?o.createdAt:new Date(o.createdAt||0)).getTime()-s.getTime()})}catch(e){throw console.error("Error fetching users:",e),new Error("Failed to fetch users")}})}updateUserProfile(e,t){return v(this,null,function*(){try{let r=tr(bn,"users",e);yield Vr(r,t,{merge:!0})}catch(r){throw console.error("Error updating user profile:",r),new Error("Failed to update user profile")}})}deactivateUser(e){return v(this,null,function*(){try{let t=tr(bn,"users",e);yield Vr(t,{isActive:!1,deactivatedAt:new Date},{merge:!0})}catch(t){throw console.error("Error deactivating user:",t),new Error("Failed to deactivate user")}})}reactivateUser(e){return v(this,null,function*(){try{let t=tr(bn,"users",e);yield Vr(t,{isActive:!0,reactivatedAt:new Date},{merge:!0})}catch(t){throw console.error("Error reactivating user:",t),new Error("Failed to reactivate user")}})}updateCurrentUserProfile(e){return v(this,null,function*(){let t=this.getCurrentUser();if(!t)throw new Error("No user logged in");try{let r=tr(bn,"users",t.uid);yield Vr(r,e,{merge:!0});let i=yield this.getUserProfile(t.uid);this.currentUserProfileSubject.next(i)}catch(r){throw console.error("Error updating user profile:",r),new Error("Failed to update profile")}})}addToWishlist(e){return v(this,null,function*(){let t=this.getCurrentUser(),r=this.getCurrentUserProfile();if(!t||!r)throw new Error("No user logged in");try{let i=r.wishlist||[];if(!i.includes(e)){let o=[...i,e];yield this.updateCurrentUserProfile({wishlist:o})}}catch(i){throw console.error("Error adding to wishlist:",i),new Error("Failed to add to wishlist")}})}removeFromWishlist(e){return v(this,null,function*(){let t=this.getCurrentUser(),r=this.getCurrentUserProfile();if(!t||!r)throw new Error("No user logged in");try{let o=(r.wishlist||[]).filter(s=>s!==e);yield this.updateCurrentUserProfile({wishlist:o})}catch(i){throw console.error("Error removing from wishlist:",i),new Error("Failed to remove from wishlist")}})}addReview(e,t,r,i){return v(this,null,function*(){let o=this.getCurrentUser(),s=this.getCurrentUserProfile();if(!o||!s)throw new Error("No user logged in");try{let a={id:Date.now().toString(),bookId:e,bookTitle:t,rating:r,comment:i,createdAt:new Date,helpful:0},l=[...s.reviews||[],a];yield this.updateCurrentUserProfile({reviews:l})}catch(a){throw console.error("Error adding review:",a),new Error("Failed to add review")}})}isAuthenticated(){return!!this.currentUserSubject.value}isAdmin(){return this.currentUserProfileSubject.value?.role==="admin"}getCurrentUser(){return this.currentUserSubject.value}getCurrentUserProfile(){return this.currentUserProfileSubject.value}promoteToAdmin(e){return v(this,null,function*(){try{let t=tr(bn,"users",e);if(yield Vr(t,{role:"admin"},{merge:!0}),e===this.getCurrentUser()?.uid){let r=yield this.getUserProfile(e);this.currentUserProfileSubject.next(r)}}catch(t){throw console.error("Error promoting user to admin:",t),new Error("Failed to promote user to admin")}})}demoteFromAdmin(e){return v(this,null,function*(){try{let t=tr(bn,"users",e);if(yield Vr(t,{role:"user"},{merge:!0}),e===this.getCurrentUser()?.uid){let r=yield this.getUserProfile(e);this.currentUserProfileSubject.next(r)}}catch(t){throw console.error("Error demoting user from admin:",t),new Error("Failed to demote user from admin")}})}sendPasswordReset(e){return v(this,null,function*(){try{yield Tf(Vo,e)}catch(t){throw new Error(this.getErrorMessage(t.code))}})}getErrorMessage(e){switch(e){case"auth/user-not-found":return"No user found with this email address.";case"auth/wrong-password":return"Incorrect password.";case"auth/email-already-in-use":return"This email address is already registered.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Invalid email address format.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"An error occurred. Please try again."}}sendPasswordResetEmail(e){return v(this,null,function*(){try{yield Tf(Vo,e)}catch(t){throw t}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var TO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(q(mn),q(St))};static \u0275dir=ye({type:n})}return n})(),Lu=(()=>{class n extends TO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,features:[ze]})}return n})(),Uo=new j(""),zG={provide:Uo,useExisting:Je(()=>GG),multi:!0},GG=(()=>{class n extends Lu{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&rn("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[At([zG]),ze]})}return n})(),WG={provide:Uo,useExisting:Je(()=>DO),multi:!0};function KG(){let n=on()?on().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var QG=new j(""),DO=(()=>{class n extends TO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!KG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(q(mn),q(St),q(QG,8))};static \u0275dir=ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&rn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[At([WG]),ze]})}return n})();function jw(n){return n==null||Uw(n)===0}function Uw(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ri=new j(""),kp=new j(""),YG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fO=class{static min(e){return bO(e)}static max(e){return CO(e)}static required(e){return SO(e)}static requiredTrue(e){return JG(e)}static email(e){return ZG(e)}static minLength(e){return AO(e)}static maxLength(e){return XG(e)}static pattern(e){return e3(e)}static nullValidator(e){return bp()}static compose(e){return xO(e)}static composeAsync(e){return kO(e)}};function bO(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function CO(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function SO(n){return jw(n.value)?{required:!0}:null}function JG(n){return n.value===!0?null:{required:!0}}function ZG(n){return jw(n.value)||YG.test(n.value)?null:{email:!0}}function AO(n){return e=>{let t=e.value?.length??Uw(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function XG(n){return e=>{let t=e.value?.length??Uw(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function e3(n){if(!n)return bp;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(jw(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function bp(n){return null}function RO(n){return n!=null}function NO(n){return vr(n)?we(n):n}function MO(n){let e={};return n.forEach(t=>{e=t!=null?x(x({},e),t):e}),Object.keys(e).length===0?null:e}function PO(n,e){return e.map(t=>t(n))}function t3(n){return!n.validate}function OO(n){return n.map(e=>t3(e)?e:t=>e.validate(t))}function xO(n){if(!n)return null;let e=n.filter(RO);return e.length==0?null:function(t){return MO(PO(t,e))}}function Bw(n){return n!=null?xO(OO(n)):null}function kO(n){if(!n)return null;let e=n.filter(RO);return e.length==0?null:function(t){let r=PO(t,e).map(NO);return wg(r).pipe(te(MO))}}function $w(n){return n!=null?kO(OO(n)):null}function pO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function FO(n){return n._rawValidators}function LO(n){return n._rawAsyncValidators}function Fw(n){return n?Array.isArray(n)?n:[n]:[]}function Cp(n,e){return Array.isArray(n)?n.includes(e):n===e}function gO(n,e){let t=Fw(e);return Fw(n).forEach(i=>{Cp(t,i)||t.push(i)}),t}function mO(n,e){return Fw(e).filter(t=>!Cp(n,t))}var Sp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Bw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$w(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},jr=class extends Sp{name;get formDirective(){return null}get path(){return null}},jo=class extends Sp{_parent=null;name=null;valueAccessor=null},Ap=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},n3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},uce=J(x({},n3),{"[class.ng-submitted]":"isSubmitted"}),lce=(()=>{class n extends Ap{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(jo,2))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ic("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ze]})}return n})(),dce=(()=>{class n extends Ap{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(jr,10))};static \u0275dir=ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ic("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ze]})}return n})();var Mu="VALID",Dp="INVALID",ga="PENDING",Pu="DISABLED",Ai=class{},Rp=class extends Ai{value;source;constructor(e,t){super(),this.value=e,this.source=t}},xu=class extends Ai{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ku=class extends Ai{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ma=class extends Ai{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Np=class extends Ai{source;constructor(e){super(),this.source=e}},Mp=class extends Ai{source;constructor(e){super(),this.source=e}};function Hw(n){return(Fp(n)?n.validators:n)||null}function r3(n){return Array.isArray(n)?Bw(n):n||null}function qw(n,e){return(Fp(e)?e.asyncValidators:n)||null}function i3(n){return Array.isArray(n)?$w(n):n||null}function Fp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function VO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new L(1e3,"");if(!r[t])throw new L(1001,"")}function jO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new L(1002,"")})}var ya=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rt(this.statusReactive)}set status(e){Rt(()=>this.statusReactive.set(e))}_status=co(()=>this.statusReactive());statusReactive=xn(void 0);get valid(){return this.status===Mu}get invalid(){return this.status===Dp}get pending(){return this.status==ga}get disabled(){return this.status===Pu}get enabled(){return this.status!==Pu}errors;get pristine(){return Rt(this.pristineReactive)}set pristine(e){Rt(()=>this.pristineReactive.set(e))}_pristine=co(()=>this.pristineReactive());pristineReactive=xn(!0);get dirty(){return!this.pristine}get touched(){return Rt(this.touchedReactive)}set touched(e){Rt(()=>this.touchedReactive.set(e))}_touched=co(()=>this.touchedReactive());touchedReactive=xn(!1);get untouched(){return!this.touched}_events=new xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mO(e,this._rawAsyncValidators))}hasValidator(e){return Cp(this._rawValidators,e)}hasAsyncValidator(e){return Cp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(J(x({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ku(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ku(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(J(x({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new xu(!0,r))}markAsPending(e={}){this.status=ga;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ma(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(J(x({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pu,this.errors=null,this._forEachChild(i=>{i.disable(J(x({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rp(this.value,r)),this._events.next(new ma(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(J(x({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mu,this._forEachChild(r=>{r.enable(J(x({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(J(x({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mu||this.status===ga)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rp(this.value,t)),this._events.next(new ma(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(J(x({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pu:Mu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ga,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=NO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ma(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Se,this.statusChanges=new Se}_calculateStatus(){return this._allControlsDisabled()?Pu:this.errors?Dp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ga)?ga:this._anyControlsHaveStatus(Dp)?Dp:Mu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new xu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ku(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=r3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=i3(this._rawAsyncValidators)}},va=class extends ya{constructor(e,t,r){super(Hw(t),qw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){jO(this,!0,e),Object.keys(e).forEach(r=>{VO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Lw=class extends va{};var Vu=new j("",{providedIn:"root",factory:()=>Lp}),Lp="always";function UO(n,e){return[...e.path,n]}function Pp(n,e,t=Lp){zw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),s3(n,e),c3(n,e),a3(n,e),o3(n,e)}function yO(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Op(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function o3(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function zw(n,e){let t=FO(n);e.validator!==null?n.setValidators(pO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=LO(n);e.asyncValidator!==null?n.setAsyncValidators(pO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Op(e._rawValidators,i),Op(e._rawAsyncValidators,i)}function xp(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=FO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=LO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Op(e._rawValidators,r),Op(e._rawAsyncValidators,r),t}function s3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&BO(n,e)})}function a3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&BO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function BO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function c3(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function $O(n,e){n==null,zw(n,e)}function u3(n,e){return xp(n,e)}function HO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function l3(n){return Object.getPrototypeOf(n.constructor)===Lu}function qO(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function zO(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===DO?t=o:l3(o)?r=o:i=o}),i||r||t||null}function d3(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var h3={provide:jr,useExisting:Je(()=>f3)},Ou=Promise.resolve(),f3=(()=>{class n extends jr{callSetDisabledState;get submitted(){return Rt(this.submittedReactive)}_submitted=co(()=>this.submittedReactive());submittedReactive=xn(!1);_directives=new Set;form;ngSubmit=new Se;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new va({},Bw(t),$w(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ou.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Pp(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ou.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ou.then(()=>{let r=this._findContainer(t.path),i=new va({});$O(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ou.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ou.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),qO(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Np(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Mp(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(q(Ri,10),q(kp,10),q(Vu,8))};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&rn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[At([h3]),ze]})}return n})();function vO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _O(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Fu=class extends ya{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Hw(t),qw(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_O(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_O(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var p3=n=>n instanceof Fu;var g3={provide:jo,useExisting:Je(()=>m3)},EO=Promise.resolve(),m3=(()=>{class n extends jo{_changeDetectorRef;callSetDisabledState;control=new Fu;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Se;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=zO(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),HO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Pp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){EO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ri(r);EO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?UO(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(q(jr,9),q(Ri,10),q(kp,10),q(Uo,10),q(Er,8),q(Vu,8))};static \u0275dir=ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[At([g3]),ze,tn]})}return n})();var fce=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),y3={provide:Uo,useExisting:Je(()=>v3),multi:!0},v3=(()=>{class n extends Lu{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&rn("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[At([y3]),ze]})}return n})();var GO=new j("");var _3={provide:jr,useExisting:Je(()=>E3)},E3=(()=>{class n extends jr{callSetDisabledState;get submitted(){return Rt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=co(()=>this._submittedReactive());_submittedReactive=xn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Se;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Pp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){yO(t.control||null,t,!1),d3(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),qO(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Np(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new Mp(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(yO(r||null,t),p3(i)&&(Pp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);$O(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&u3(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zw(this.form,this),this._oldForm&&xp(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(q(Ri,10),q(kp,10),q(Vu,8))};static \u0275dir=ye({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&rn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[At([_3]),ze,tn]})}return n})();var I3={provide:jo,useExisting:Je(()=>w3)},w3=(()=>{class n extends jo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Se;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=zO(this,o)}ngOnChanges(t){this._added||this._setUpControl(),HO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return UO(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(q(jr,13),q(Ri,10),q(kp,10),q(Uo,10),q(GO,8))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[At([I3]),ze,tn]})}return n})();var T3={provide:Uo,useExisting:Je(()=>KO),multi:!0};function WO(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function D3(n){return n.split(":")[0]}var KO=(()=>{class n extends Lu{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=WO(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=D3(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&rn("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[At([T3]),ze]})}return n})(),pce=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(WO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(q(St),q(mn),q(KO,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),b3={provide:Uo,useExisting:Je(()=>QO),multi:!0};function IO(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function C3(n){return n.split(":")[0]}var QO=(()=>{class n extends Lu{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=C3(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&rn("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[At([b3]),ze]})}return n})(),gce=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(IO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(IO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(q(St),q(mn),q(QO,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function S3(n){return typeof n=="number"?n:parseInt(n,10)}function YO(n){return typeof n=="number"?n:parseFloat(n)}var Vp=(()=>{class n{_validator=bp;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bp,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,features:[tn]})}return n})(),A3={provide:Ri,useExisting:Je(()=>R3),multi:!0},R3=(()=>{class n extends Vp{max;inputName="max";normalizeInput=t=>YO(t);createValidator=t=>CO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_r("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[At([A3]),ze]})}return n})(),N3={provide:Ri,useExisting:Je(()=>M3),multi:!0},M3=(()=>{class n extends Vp{min;inputName="min";normalizeInput=t=>YO(t);createValidator=t=>bO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_r("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[At([N3]),ze]})}return n})(),P3={provide:Ri,useExisting:Je(()=>O3),multi:!0};var O3=(()=>{class n extends Vp{required;inputName="required";normalizeInput=ri;createValidator=t=>SO;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&_r("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[At([P3]),ze]})}return n})();var x3={provide:Ri,useExisting:Je(()=>k3),multi:!0},k3=(()=>{class n extends Vp{minlength;inputName="minlength";normalizeInput=t=>S3(t);createValidator=t=>AO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ft(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_r("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[At([x3]),ze]})}return n})();var JO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=nn({type:n});static \u0275inj=$t({})}return n})(),Vw=class extends ya{constructor(e,t,r){super(Hw(t),qw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){jO(this,!1,e),e.forEach((r,i)=>{VO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function wO(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var mce=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return wO(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new va(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Lw(i,r)}control(t,r,i){let o={};return this.useNonNullable?(wO(r)?o=r:(o.validators=r,o.asyncValidators=i),new Fu(t,J(x({},o),{nonNullable:!0}))):new Fu(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Vw(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Fu)return t;if(t instanceof ya)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vu,useValue:t.callSetDisabledState??Lp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=nn({type:n});static \u0275inj=$t({imports:[JO]})}return n})(),vce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:GO,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Vu,useValue:t.callSetDisabledState??Lp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=nn({type:n});static \u0275inj=$t({imports:[JO]})}return n})();export{x as a,J as b,v as c,Me as d,xe as e,Le as f,G as g,te as h,ht as i,Cn as j,qx as k,sr as l,zx as m,U as n,$t as o,H as p,M as q,ob as r,sb as s,$k as t,_s as u,MC as v,P1 as w,Z1 as x,q as y,By as z,nn as A,$y as B,IS as C,_r as D,RS as E,Jy as F,Zy as G,Jd as H,cV as I,rn as J,lV as K,dV as L,xS as M,Ic as N,wV as O,OV as P,US as Q,nv as R,BS as S,HS as T,LV as U,qS as V,$V as W,HV as X,zV as Y,WV as Z,QV as _,JV as $,dA as aa,Rj as ba,Oj as ca,hA as da,ere as ea,Yj as fa,wr as ga,PA as ha,TU as ia,DU as ja,Gt as ka,Hn as la,Jv as ma,En as na,zh as oa,eB as pa,rB as qa,iB as ra,tr as sa,Ew as ta,Vr as ua,cae as va,bn as wa,hO as xa,GG as ya,DO as za,fO as Aa,lce as Ba,dce as Ca,f3 as Da,m3 as Ea,fce as Fa,v3 as Ga,E3 as Ha,w3 as Ia,KO as Ja,pce as Ka,gce as La,R3 as Ma,M3 as Na,O3 as Oa,k3 as Pa,mce as Qa,yce as Ra,vce as Sa};
