var Px=Object.defineProperty,Ox=Object.defineProperties;var xx=Object.getOwnPropertyDescriptors;var Jb=Object.getOwnPropertySymbols,kx=Object.getPrototypeOf,Fx=Object.prototype.hasOwnProperty,Lx=Object.prototype.propertyIsEnumerable,Vx=Reflect.get;var Zb=(n,e,t)=>e in n?Px(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e)=>{for(var t in e||={})Fx.call(e,t)&&Zb(n,t,e[t]);if(Jb)for(var t of Jb(e))Lx.call(e,t)&&Zb(n,t,e[t]);return n},Y=(n,e)=>Ox(n,xx(e));var Hr=(n,e,t)=>Vx(kx(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function ee(n){return typeof n=="function"}function $o(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var il=$o(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Pi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Me=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof il?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Xb(o)}catch(s){e=e??[],s instanceof il?e=[...e,...s.errors]:e.push(s)}}if(e)throw new il(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Xb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Pi(t,e)}remove(e){let{_finalizers:t}=this;t&&Pi(t,e),e instanceof n&&e._removeParent(this)}};Me.EMPTY=(()=>{let n=new Me;return n.closed=!0,n})();var hg=Me.EMPTY;function ol(n){return n instanceof Me||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function Xb(n){ee(n)?n():n.unsubscribe()}var dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ho={setTimeout(n,e,...t){let{delegate:r}=Ho;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ho;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function sl(n){Ho.setTimeout(()=>{let{onUnhandledError:e}=dn;if(e)e(n);else throw n})}function Fa(){}var eT=fg("C",void 0,void 0);function tT(n){return fg("E",void 0,n)}function nT(n){return fg("N",n,void 0)}function fg(n,e,t){return{kind:n,value:e,error:t}}var Oi=null;function qo(n){if(dn.useDeprecatedSynchronousErrorHandling){let e=!Oi;if(e&&(Oi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Oi;if(Oi=null,t)throw r}}else n()}function rT(n){dn.useDeprecatedSynchronousErrorHandling&&Oi&&(Oi.errorThrown=!0,Oi.error=n)}var xi=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ol(e)&&e.add(this)):this.destination=Bx}static create(e,t,r){return new zo(e,t,r)}next(e){this.isStopped?gg(nT(e),this):this._next(e)}error(e){this.isStopped?gg(tT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gg(eT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jx=Function.prototype.bind;function pg(n,e){return jx.call(n,e)}var mg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){al(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){al(r)}else al(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){al(t)}}},zo=class extends xi{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&pg(e.next,o),error:e.error&&pg(e.error,o),complete:e.complete&&pg(e.complete,o)}):i=e}this.destination=new mg(i)}};function al(n){dn.useDeprecatedSynchronousErrorHandling?rT(n):sl(n)}function Ux(n){throw n}function gg(n,e){let{onStoppedNotification:t}=dn;t&&Ho.setTimeout(()=>t(n,e))}var Bx={closed:!0,next:Fa,error:Ux,complete:Fa};var Go=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function yg(...n){return vg(n)}function vg(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Hx(t)?t:new zo(t,r,i);return qo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=iT(r),new r((i,o)=>{let s=new zo({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Go](){return this}pipe(...t){return vg(t)(this)}toPromise(t){return t=iT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function iT(n){var e;return(e=n??dn.Promise)!==null&&e!==void 0?e:Promise}function $x(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function Hx(n){return n&&n instanceof xi||$x(n)&&ol(n)}var oT=$o(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new cl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new oT}next(t){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?hg:(this.currentObservers=null,o.push(t),new Me(()=>{this.currentObservers=null,Pi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new cl(e,t),n})(),cl=class extends xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:hg}};function _g(n){return ee(n?.lift)}function ue(n){return e=>{if(_g(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,i){return new Eg(n,e,t,r,i)}var Eg=class extends xi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ht(n,e){return ue((t,r)=>{let i=0;t.subscribe(oe(r,o=>n.call(e,o,i++)&&r.next(o)))})}var ul=class extends Me{constructor(e,t){super()}schedule(e,t=0){return this}};var La={setInterval(n,e,...t){let{delegate:r}=La;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=La;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ll=class extends ul{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return La.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&La.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Pi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ig={now(){return(Ig.delegate||Date).now()},delegate:void 0};var Wo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Wo.now=Ig.now;var dl=class extends Wo{constructor(e,t=Wo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var sT=new dl(ll);function qx(n,e=sT){return ue((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(oe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function zx(n,e=It){return n=n??Gx,ue((t,r)=>{let i,o=!0;t.subscribe(oe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Gx(n,e){return n===e}function Ko(){return ue((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Qo=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,_g(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return Ko()(this)}};var Ie=class extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ot=new ce(n=>n.complete());function aT(n){return n&&ee(n.schedule)}function cT(n){return n[n.length-1]}function hl(n){return ee(cT(n))?n.pop():void 0}function qr(n){return aT(cT(n))?n.pop():void 0}function wg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function lT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function uT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ki(n){return this instanceof ki?(this.v=n,this):new ki(n)}function dT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,k){o.push([y,N,R,k])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof ki?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function hT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof uT=="function"?uT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var fl=n=>n&&typeof n.length=="number"&&typeof n!="function";function pl(n){return ee(n?.then)}function gl(n){return ee(n[Go])}function ml(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function yl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Wx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vl=Wx();function _l(n){return ee(n?.[vl])}function El(n){return dT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ki(t.read());if(i)return yield ki(void 0);yield yield ki(r)}}finally{t.releaseLock()}})}function Il(n){return ee(n?.getReader)}function Ve(n){if(n instanceof ce)return n;if(n!=null){if(gl(n))return Kx(n);if(fl(n))return Qx(n);if(pl(n))return Yx(n);if(ml(n))return fT(n);if(_l(n))return Jx(n);if(Il(n))return Zx(n)}throw yl(n)}function Kx(n){return new ce(e=>{let t=n[Go]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Qx(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Yx(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,sl)})}function Jx(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function fT(n){return new ce(e=>{Xx(n,e).catch(t=>e.error(t))})}function Zx(n){return fT(El(n))}function Xx(n,e){var t,r,i,o;return lT(this,void 0,void 0,function*(){try{for(t=hT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function xt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function wl(n,e=0){return ue((t,r)=>{t.subscribe(oe(r,i=>xt(r,n,()=>r.next(i),e),()=>xt(r,n,()=>r.complete(),e),i=>xt(r,n,()=>r.error(i),e)))})}function bl(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function pT(n,e){return Ve(n).pipe(bl(e),wl(e))}function gT(n,e){return Ve(n).pipe(bl(e),wl(e))}function mT(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function yT(n,e){return new ce(t=>{let r;return xt(t,e,()=>{r=n[vl](),xt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Tl(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{xt(t,e,()=>{let r=n[Symbol.asyncIterator]();xt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function vT(n,e){return Tl(El(n),e)}function _T(n,e){if(n!=null){if(gl(n))return pT(n,e);if(fl(n))return mT(n,e);if(pl(n))return gT(n,e);if(ml(n))return Tl(n,e);if(_l(n))return yT(n,e);if(Il(n))return vT(n,e)}throw yl(n)}function be(n,e){return e?_T(n,e):Ve(n)}function H(...n){let e=qr(n);return be(n,e)}function Yo(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function bg(n){return!!n&&(n instanceof ce||ee(n.lift)&&ee(n.subscribe))}var sr=$o(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return ue((t,r)=>{let i=0;t.subscribe(oe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:ek}=Array;function tk(n,e){return ek(e)?n(...e):n(e)}function Dl(n){return J(e=>tk(n,e))}var{isArray:nk}=Array,{getPrototypeOf:rk,prototype:ik,keys:ok}=Object;function Cl(n){if(n.length===1){let e=n[0];if(nk(e))return{args:e,keys:null};if(sk(e)){let t=ok(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function sk(n){return n&&typeof n=="object"&&rk(n)===ik}function Sl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Va(...n){let e=qr(n),t=hl(n),{args:r,keys:i}=Cl(n);if(r.length===0)return be([],e);let o=new ce(ak(r,e,i?s=>Sl(i,s):It));return t?o.pipe(Dl(t)):o}function ak(n,e,t=It){return r=>{ET(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)ET(e,()=>{let l=be(n[u],e),h=!1;l.subscribe(oe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ET(n,e,t){n?xt(t,n,e):e()}function IT(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;Ve(t(N,h++)).subscribe(oe(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?xt(e,s,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return n.subscribe(oe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function ke(n,e,t=1/0){return ee(e)?ke((r,i)=>J((o,s)=>e(r,o,i,s))(Ve(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>IT(r,i,n,t)))}function zr(n=1/0){return ke(It,n)}function wT(){return zr(1)}function Jo(...n){return wT()(be(n,qr(n)))}function ja(n){return new ce(e=>{Ve(n()).subscribe(e)})}function Tg(...n){let e=hl(n),{args:t,keys:r}=Cl(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ve(t[h]).subscribe(oe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Sl(r,a):a),o.complete())}))}});return e?i.pipe(Dl(e)):i}function wt(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(oe(t,void 0,void 0,s=>{o=Ve(n(s,wt(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function bT(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(oe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Rn(n,e){return ee(e)?ke(n,e,1):ke(n,1)}function Gr(n){return ue((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ar(n){return n<=0?()=>Ot:ue((e,t)=>{let r=0;e.subscribe(oe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Al(n=ck){return ue((e,t)=>{let r=!1;e.subscribe(oe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ck(){return new sr}function Fi(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function cr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ht((i,o)=>n(i,o,r)):It,ar(1),t?Gr(e):Al(()=>new sr))}function Zo(n){return n<=0?()=>Ot:ue((e,t)=>{let r=[];e.subscribe(oe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Dg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ht((i,o)=>n(i,o,r)):It,Zo(1),t?Gr(e):Al(()=>new sr))}function Cg(n,e){return ue(bT(n,e,arguments.length>=2,!0))}function Sg(...n){let e=qr(n);return ue((t,r)=>{(e?Jo(n,t,e):Jo(n,t)).subscribe(r)})}function bt(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,h=o++;Ve(n(u,h)).subscribe(i=oe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Rl(n){return ue((e,t)=>{Ve(n).subscribe(oe(t,()=>t.complete(),Fa)),!t.closed&&e.subscribe(t)})}function Ke(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var Ag;function Rg(){return Ag}function ur(n){let e=Ag;return Ag=n,e}var uk=Symbol("NotFound"),Nl=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function Xo(n){return n===uk||n?.name==="\u0275NotFound"}function kl(n,e){return Object.is(n,e)}var qe=null,Ml=!1,Ng=1,lk=null,ft=Symbol("SIGNAL");function ie(n){let e=qe;return qe=n,e}function Fl(){return qe}var Li={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function es(n){if(Ml)throw new Error("");if(qe===null)return;qe.consumerOnSignalRead(n);let e=qe.nextProducerIndex++;if(Ul(qe),e<qe.producerNode.length&&qe.producerNode[e]!==n&&Ba(qe)){let t=qe.producerNode[e];jl(t,qe.producerIndexOfThis[e])}qe.producerNode[e]!==n&&(qe.producerNode[e]=n,qe.producerIndexOfThis[e]=Ba(qe)?DT(n,qe,e):0),qe.producerLastReadVersion[e]=n.version}function TT(){Ng++}function Ll(n){if(!(Ba(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ng)){if(!n.producerMustRecompute(n)&&!$a(n)){xl(n);return}n.producerRecomputeValue(n),xl(n)}}function Mg(n){if(n.liveConsumerNode===void 0)return;let e=Ml;Ml=!0;try{for(let t of n.liveConsumerNode)t.dirty||dk(t)}finally{Ml=e}}function Pg(){return qe?.consumerAllowSignalWrites!==!1}function dk(n){n.dirty=!0,Mg(n),n.consumerMarkedDirty?.(n)}function xl(n){n.dirty=!1,n.lastCleanEpoch=Ng}function Vi(n){return n&&(n.nextProducerIndex=0),ie(n)}function ts(n,e){if(ie(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ba(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)jl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $a(n){Ul(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ll(t),r!==t.version))return!0}return!1}function Vl(n){if(Ul(n),Ba(n))for(let e=0;e<n.producerNode.length;e++)jl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function DT(n,e,t){if(CT(n),n.liveConsumerNode.length===0&&ST(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=DT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function jl(n,e){if(CT(n),n.liveConsumerNode.length===1&&ST(n))for(let r=0;r<n.producerNode.length;r++)jl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ul(i),i.producerIndexOfThis[r]=e}}function Ba(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ul(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function CT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function ST(n){return n.producerNode!==void 0}function Bl(n){lk?.(n)}function $l(n,e){let t=Object.create(hk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ll(t),es(t),t.value===Ua)throw t.error;return t.value};return r[ft]=t,Bl(t),r}var Pl=Symbol("UNSET"),Ol=Symbol("COMPUTING"),Ua=Symbol("ERRORED"),hk=Y(P({},Li),{value:Pl,dirty:!0,error:null,equal:kl,kind:"computed",producerMustRecompute(n){return n.value===Pl||n.value===Ol},producerRecomputeValue(n){if(n.value===Ol)throw new Error("");let e=n.value;n.value=Ol;let t=Vi(n),r,i=!1;try{r=n.computation(),ie(null),i=e!==Pl&&e!==Ua&&r!==Ua&&n.equal(e,r)}catch(o){r=Ua,n.error=o}finally{ts(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function fk(){throw new Error}var AT=fk;function RT(n){AT(n)}function Og(n){AT=n}var pk=null;function xg(n,e){let t=Object.create(Hl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>NT(t);return r[ft]=t,Bl(t),[r,s=>ns(t,s),s=>kg(t,s)]}function NT(n){return es(n),n.value}function ns(n,e){Pg()||RT(n),n.equal(n.value,e)||(n.value=e,gk(n))}function kg(n,e){Pg()||RT(n),ns(n,e(n.value))}var Hl=Y(P({},Li),{equal:kl,value:void 0,kind:"signal"});function gk(n){n.version++,TT(),Mg(n),pk?.(n)}function MT(n){let e=ie(null);try{return n()}finally{ie(e)}}var Kl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,t){super(is(e,t)),this.code=e}};function mk(n){return`NG0${Math.abs(n)}`}function is(n,e){return`${mk(n)}${e?": "+e:""}`}var Ga=globalThis;function De(n){for(let e in n)if(n[e]===De)return e;throw Error("")}function kT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(kt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ql(n,e){return n?e?`${n} ${e}`:n:e||""}var yk=De({__forward_ref__:De});function Ye(n){return n.__forward_ref__=Ye,n.toString=function(){return kt(this())},n}function it(n){return Kg(n)?n():n}function Kg(n){return typeof n=="function"&&n.hasOwnProperty(yk)&&n.__forward_ref__===Ye}function FT(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function L(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wa(n){return vk(n,Yl)}function Qg(n){return Wa(n)!==null}function vk(n,e){return n.hasOwnProperty(e)&&n[e]||null}function _k(n){let e=n?.[Yl]??null;return e||null}function Lg(n){return n&&n.hasOwnProperty(zl)?n[zl]:null}var Yl=De({\u0275prov:De}),zl=De({\u0275inj:De}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=L({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Yg(n){return n&&!!n.\u0275providers}var Jg=De({\u0275cmp:De}),Zg=De({\u0275dir:De}),Xg=De({\u0275pipe:De}),em=De({\u0275mod:De}),qa=De({\u0275fac:De}),Hi=De({__NG_ELEMENT_ID__:De}),PT=De({__NG_ENV_ID__:De});function qi(n){return typeof n=="string"?n:n==null?"":String(n)}function LT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():qi(n)}function tm(n,e){throw new V(-200,n)}function Jl(n,e){throw new V(-201,!1)}var Vg;function VT(){return Vg}function Tt(n){let e=Vg;return Vg=n,e}function nm(n,e,t){let r=Wa(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Jl(n,"Injector")}var Ek={},ji=Ek,jg="__NG_DI_FLAG__",Ug=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ui(t)||0;try{return this.injector.get(e,r&8?null:ji,r)}catch(i){if(Xo(i))return i;throw i}}},Gl="ngTempTokenPath",Ik="ngTokenPath",wk=/\n/gm,bk="\u0275",OT="__source";function Tk(n,e=0){let t=Rg();if(t===void 0)throw new V(-203,!1);if(t===null)return nm(n,void 0,e);{let r=Dk(e),i=t.retrieve(n,r);if(Xo(i)){if(r.optional)return null;throw i}return i}}function B(n,e=0){return(VT()||Tk)(it(n),e)}function M(n,e){return B(n,Ui(e))}function Ui(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Dk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Bg(n){let e=[];for(let t=0;t<n.length;t++){let r=it(n[t]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Ck(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(B(i,o))}else e.push(B(r))}return e}function rm(n,e){return n[jg]=e,n.prototype[jg]=e,n}function Ck(n){return n[jg]}function Sk(n,e,t,r){let i=n[Gl];throw e[OT]&&i.unshift(e[OT]),n.message=Ak(`
`+n.message,i,t,r),n[Ik]=i,n[Gl]=null,n}function Ak(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==bk?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(wk,`
  `)}`}function Wr(n,e){let t=n.hasOwnProperty(qa);return t?n[qa]:null}function jT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function UT(n){return n.flat(Number.POSITIVE_INFINITY)}function Zl(n,e){n.forEach(t=>Array.isArray(t)?Zl(t,e):e(t))}function im(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ka(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function BT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Xl(n,e,t){let r=os(n,e);return r>=0?n[r|1]=t:(r=~r,BT(n,r,e,t)),r}function ed(n,e){let t=os(n,e);if(t>=0)return n[t|1]}function os(n,e){return Rk(n,e,1)}function Rk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Qr={},Dt=[],hr=new U(""),om=new U("",-1),sm=new U(""),za=class{get(e,t=ji){if(t===ji)throw new Nl(`NullInjectorError: No provider for ${kt(e)}!`);return t}};function am(n){return n[em]||null}function fr(n){return n[Jg]||null}function cm(n){return n[Zg]||null}function $T(n){return n[Xg]||null}function Nn(n){return{\u0275providers:n}}function HT(n){return Nn([{provide:hr,multi:!0,useValue:n}])}function qT(...n){return{\u0275providers:um(!0,n),\u0275fromNgModule:!0}}function um(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Zl(e,s=>{let a=s;Wl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&zT(i,o),t}function zT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];lm(i,o=>{e(o,r)})}}function Wl(n,e,t,r){if(n=it(n),!n)return!1;let i=null,o=Lg(n),s=!o&&fr(n);if(!o&&!s){let u=n.ngModule;if(o=Lg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Wl(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Zl(o.imports,h=>{Wl(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&zT(l,e)}if(!a){let l=Wr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dt},i),e({provide:sm,useValue:i,multi:!0},i),e({provide:hr,useValue:()=>B(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;lm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function lm(n,e){for(let t of n)Yg(t)&&(t=t.\u0275providers),Array.isArray(t)?lm(t,e):e(t)}var Nk=De({provide:String,useValue:De});function GT(n){return n!==null&&typeof n=="object"&&Nk in n}function Mk(n){return!!(n&&n.useExisting)}function Pk(n){return!!(n&&n.useFactory)}function Bi(n){return typeof n=="function"}function WT(n){return!!n.useClass}var Qa=new U(""),ql={},xT={},Fg;function Ya(){return Fg===void 0&&(Fg=new za),Fg}var Fe=class{},$i=class extends Fe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Hg(e,s=>this.processProvider(s)),this.records.set(om,rs(void 0,this)),i.has("environment")&&this.records.set(Fe,rs(void 0,this));let o=this.records.get(Qa);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(sm,Dt,{self:!0}))}retrieve(e,t){let r=Ui(t)||0;try{return this.get(e,ji,r)}catch(i){if(Xo(i))return i;throw i}}destroy(){Ha(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return Ha(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ha(this);let t=ur(this),r=Tt(void 0),i;try{return e()}finally{ur(t),Tt(r)}}get(e,t=ji,r){if(Ha(this),e.hasOwnProperty(PT))return e[PT](this);let i=Ui(r),o,s=ur(this),a=Tt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Lk(e)&&Wa(e);h&&this.injectableDefInScope(h)?l=rs($g(e),ql):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let u=i&2?Ya():this.parent;return t=i&8&&t===ji?null:t,u.get(e,t)}catch(u){if(Xo(u)){if((u[Gl]=u[Gl]||[]).unshift(kt(e)),s)throw u;return Sk(u,e,"R3InjectorError",this.source)}else throw u}finally{Tt(a),ur(s)}}resolveInjectorInitializers(){let e=ie(null),t=ur(this),r=Tt(void 0),i;try{let o=this.get(hr,Dt,{self:!0});for(let s of o)s()}finally{ur(t),Tt(r),ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=it(e);let t=Bi(e)?e:it(e&&e.provide),r=xk(e);if(!Bi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=rs(void 0,ql,!0),i.factory=()=>Bg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ie(null);try{return t.value===xT?tm(kt(e)):t.value===ql&&(t.value=xT,t.value=t.factory()),typeof t.value=="object"&&t.value&&Fk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=it(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function $g(n){let e=Wa(n),t=e!==null?e.factory:Wr(n);if(t!==null)return t;if(n instanceof U)throw new V(204,!1);if(n instanceof Function)return Ok(n);throw new V(204,!1)}function Ok(n){if(n.length>0)throw new V(204,!1);let t=_k(n);return t!==null?()=>t.factory(n):()=>new n}function xk(n){if(GT(n))return rs(void 0,n.useValue);{let e=dm(n);return rs(e,ql)}}function dm(n,e,t){let r;if(Bi(n)){let i=it(n);return Wr(i)||$g(i)}else if(GT(n))r=()=>it(n.useValue);else if(Pk(n))r=()=>n.useFactory(...Bg(n.deps||[]));else if(Mk(n))r=()=>B(it(n.useExisting));else{let i=it(n&&(n.useClass||n.provide));if(kk(n))r=()=>new i(...Bg(n.deps));else return Wr(i)||$g(i)}return r}function Ha(n){if(n.destroyed)throw new V(205,!1)}function rs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kk(n){return!!n.deps}function Fk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Lk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Hg(n,e){for(let t of n)Array.isArray(t)?Hg(t,e):t&&Yg(t)?Hg(t.\u0275providers,e):e(t)}function pt(n,e){let t;n instanceof $i?(Ha(n),t=n):t=new Ug(n);let r,i=ur(t),o=Tt(void 0);try{return e()}finally{ur(i),Tt(o)}}function KT(){return VT()!==void 0||Rg()!=null}var fn=0,ne=1,Z=2,Qe=3,Zt=4,Xt=5,Ja=6,ss=7,gt=8,zi=9,Mn=10,Pe=11,as=12,hm=13,Gi=14,en=15,Yr=16,Wi=17,Pn=18,Za=19,fm=20,lr=21,td=22,Xa=23,zt=24,Ki=25,Lt=26,QT=1;var Jr=7,ec=8,Qi=9,Ct=10;function On(n){return Array.isArray(n)&&typeof n[QT]=="object"}function pn(n){return Array.isArray(n)&&n[QT]===!0}function pm(n){return(n.flags&4)!==0}function Zr(n){return n.componentOffset>-1}function nd(n){return(n.flags&1)===1}function xn(n){return!!n.template}function cs(n){return(n[Z]&512)!==0}function Yi(n){return(n[Z]&256)===256}var YT="svg",JT="math";function tn(n){for(;Array.isArray(n);)n=n[fn];return n}function gm(n,e){return tn(e[n])}function gn(n,e){return tn(e[n.index])}function rd(n,e){return n.data[e]}function mm(n,e){return n[e]}function ym(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function nn(n,e){let t=e[n];return On(t)?t:t[fn]}function ZT(n){return(n[Z]&4)===4}function id(n){return(n[Z]&128)===128}function XT(n){return pn(n[Qe])}function tc(n,e){return e==null?null:n[e]}function vm(n){n[Wi]=0}function _m(n){n[Z]&1024||(n[Z]|=1024,id(n)&&us(n))}function eD(n,e){for(;n>0;)e=e[Gi],n--;return e}function nc(n){return!!(n[Z]&9216||n[zt]?.dirty)}function od(n){n[Mn].changeDetectionScheduler?.notify(8),n[Z]&64&&(n[Z]|=1024),nc(n)&&us(n)}function us(n){n[Mn].changeDetectionScheduler?.notify(0);let e=Kr(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!id(e)));)e=Kr(e)}function Em(n,e){if(Yi(n))throw new V(911,!1);n[lr]===null&&(n[lr]=[]),n[lr].push(e)}function tD(n,e){if(n[lr]===null)return;let t=n[lr].indexOf(e);t!==-1&&n[lr].splice(t,1)}function Kr(n){let e=n[Qe];return pn(e)?e[Qe]:e}function Im(n){return n[ss]??=[]}function wm(n){return n.cleanup??=[]}function nD(n,e,t,r){let i=Im(e);i.push(t),n.firstCreatePass&&wm(n).push(r,i.length-1)}var se={lFrame:ID(null),bindingsEnabled:!0,skipHydrationRootTNode:null},rc=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(rc||{}),Vk=0,qg=!1;function rD(){return se.lFrame.elementDepthCount}function iD(){se.lFrame.elementDepthCount++}function oD(){se.lFrame.elementDepthCount--}function bm(){return se.bindingsEnabled}function sD(){return se.skipHydrationRootTNode!==null}function aD(n){return se.skipHydrationRootTNode===n}function cD(){se.skipHydrationRootTNode=null}function he(){return se.lFrame.lView}function Je(){return se.lFrame.tView}function uD(n){return se.lFrame.contextLView=n,n[gt]}function lD(n){return se.lFrame.contextLView=null,n}function ot(){let n=Tm();for(;n!==null&&n.type===64;)n=n.parent;return n}function Tm(){return se.lFrame.currentTNode}function dD(){let n=se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ls(n,e){let t=se.lFrame;t.currentTNode=n,t.isParent=e}function Dm(){return se.lFrame.isParent}function hD(){se.lFrame.isParent=!1}function fD(){return se.lFrame.contextLView}function Cm(n){FT("Must never be called in production mode"),Vk=n}function Sm(){return qg}function Am(n){let e=qg;return qg=n,e}function sd(){let n=se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function pD(){return se.lFrame.bindingIndex}function gD(n){return se.lFrame.bindingIndex=n}function ic(){return se.lFrame.bindingIndex++}function ad(n){let e=se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mD(){return se.lFrame.inI18n}function yD(n,e){let t=se.lFrame;t.bindingIndex=t.bindingRootIndex=n,cd(e)}function vD(){return se.lFrame.currentDirectiveIndex}function cd(n){se.lFrame.currentDirectiveIndex=n}function _D(n){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Rm(){return se.lFrame.currentQueryIndex}function ud(n){se.lFrame.currentQueryIndex=n}function jk(n){let e=n[ne];return e.type===2?e.declTNode:e.type===1?n[Xt]:null}function Nm(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=jk(o),i===null||(o=o[Gi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=se.lFrame=ED();return r.currentTNode=e,r.lView=n,!0}function ld(n){let e=ED(),t=n[ne];se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ED(){let n=se.lFrame,e=n===null?null:n.child;return e===null?ID(n):e}function ID(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function wD(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Mm=wD;function dd(){let n=wD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bD(n){return(se.lFrame.contextLView=eD(n,se.lFrame.contextLView))[gt]}function pr(){return se.lFrame.selectedIndex}function Xr(n){se.lFrame.selectedIndex=n}function hd(){let n=se.lFrame;return rd(n.tView,n.selectedIndex)}function TD(){return se.lFrame.currentNamespace}var DD=!0;function fd(){return DD}function pd(n){DD=n}function zg(n,e=null,t=null,r){let i=Pm(n,e,t,r);return i.resolveInjectorInitializers(),i}function Pm(n,e=null,t=null,r,i=new Set){let o=[t||Dt,qT(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new $i(o,e||Ya(),r||null,i)}var Ft=class n{static THROW_IF_NOT_FOUND=ji;static NULL=new za;static create(e,t){if(Array.isArray(e))return zg({name:""},t,e,"");{let r=e.name??"";return zg({name:r},e.parent,e.providers,r)}}static \u0275prov=L({token:n,providedIn:"any",factory:()=>B(om)});static __NG_ELEMENT_ID__=-1},Se=new U(""),kn=(()=>{class n{static __NG_ELEMENT_ID__=Uk;static __NG_ENV_ID__=t=>t}return n})(),Gg=class extends kn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Yi(this._lView)}onDestroy(e){let t=this._lView;return Em(t,e),()=>tD(t,e)}};function Uk(){return new Gg(he())}var hn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},mt=new U("",{providedIn:"root",factory:()=>{let n=M(Fe),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(hn),e.handleError(t))}}}),CD={provide:hr,useValue:()=>void M(hn),multi:!0},Bk=new U("",{providedIn:"root",factory:()=>{let n=M(Se).defaultView;if(!n)return;let e=M(mt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(kn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function $k(){return Nn([HT(()=>void M(Bk))])}function Om(n){return typeof n=="function"&&n[ft]!==void 0}function Fn(n,e){let[t,r,i]=xg(n,e?.equal),o=t,s=o[ft];return o.set=r,o.update=i,o.asReadonly=SD.bind(o),o}function SD(){let n=this[ft];if(n.readonlyFn===void 0){let e=()=>this();e[ft]=n,n.readonlyFn=e}return n.readonlyFn}function xm(n){return Om(n)&&typeof n.set=="function"}var dr=class{},oc=new U("",{providedIn:"root",factory:()=>!1});var km=new U(""),Fm=new U("");var gd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Hk}return n})();function Hk(){return new gd(he(),ot())}var gr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ie(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),md=(()=>{class n{internalPendingTasks=M(gr);scheduler=M(dr);errorHandler=M(mt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})();function sc(...n){}var Lm=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new Wg})}return n})(),Wg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ps(n){return{toString:n}.toString()}var yd="__parameters__";function Jk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function rC(n,e,t){return ps(()=>{let r=Jk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(yd)?u[yd]:Object.defineProperty(u,yd,{value:[]})[yd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var iC=rm(rC("Optional"),8);var oC=rm(rC("SkipSelf"),4);function Zk(n){return typeof n=="function"}var Td=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function sC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var rn=(()=>{let n=()=>aC;return n.ngInherit=!0,n})();function aC(n){return n.type.prototype.ngOnChanges&&(n.setInput=e1),Xk}function Xk(){let n=uC(this),e=n?.current;if(e){let t=n.previous;if(t===Qr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function e1(n,e,t,r,i){let o=this.declaredInputs[r],s=uC(n)||t1(n,{previous:Qr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Td(l&&l.currentValue,t,u===Qr),sC(n,e,i,t)}var cC="__ngSimpleChanges__";function uC(n){return n[cC]||null}function t1(n,e){return n[cC]=e}var AD=[];var Ee=function(n,e=null,t){for(let r=0;r<AD.length;r++){let i=AD[r];i(n,e,t)}};function n1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=aC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function lC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Ed(n,e,t){dC(n,e,3,t)}function Id(n,e,t,r){(n[Z]&3)===t&&dC(n,e,t,r)}function Vm(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function dC(n,e,t,r){let i=r!==void 0?n[Wi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Wi]+=65536),(a<o||o==-1)&&(r1(n,t,e,u),n[Wi]=(n[Wi]&4294901760)+u+2),u++}function RD(n,e){Ee(4,n,e);let t=ie(null);try{e.call(n)}finally{ie(t),Ee(5,n,e)}}function r1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Z]>>14<n[Wi]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,RD(a,o)):RD(a,o)}var hs=-1,Zi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function i1(n){return(n.flags&8)!==0}function o1(n){return(n.flags&16)!==0}function s1(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];a1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function hC(n){return n===3||n===4||n===6}function a1(n){return n.charCodeAt(0)===64}function uc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ND(n,t,i,null,e[++r]):ND(n,t,i,null,null))}}return n}function ND(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function fC(n){return n!==hs}function Dd(n){return n&32767}function c1(n){return n>>16}function Cd(n,e){let t=c1(n),r=e;for(;t>0;)r=r[Gi],t--;return r}var Km=!0;function Sd(n){let e=Km;return Km=n,e}var u1=256,pC=u1-1,gC=5,l1=0,Ln={};function d1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Hi)&&(r=t[Hi]),r==null&&(r=t[Hi]=l1++);let i=r&pC,o=1<<i;e.data[n+(i>>gC)]|=o}function Ad(n,e){let t=mC(n,e);if(t!==-1)return t;let r=e[ne];r.firstCreatePass&&(n.injectorIndex=e.length,jm(r.data,n),jm(e,null),jm(r.blueprint,null));let i=Ey(n,e),o=n.injectorIndex;if(fC(i)){let s=Dd(i),a=Cd(i,e),u=a[ne].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function jm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function mC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ey(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=IC(i),r===null)return hs;if(t++,i=i[Gi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return hs}function Qm(n,e,t){d1(n,e,t)}function h1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(hC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function yC(n,e,t){if(t&8||n!==void 0)return n;Jl(e,"NodeInjector")}function vC(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[zi],o=Tt(void 0);try{return i?i.get(e,r,t&8):nm(e,r,t&8)}finally{Tt(o)}}return yC(r,e,t)}function _C(n,e,t,r=0,i){if(n!==null){if(e[Z]&2048&&!(r&2)){let s=m1(n,e,t,r,Ln);if(s!==Ln)return s}let o=EC(n,e,t,r,Ln);if(o!==Ln)return o}return vC(e,t,r,i)}function EC(n,e,t,r,i){let o=p1(t);if(typeof o=="function"){if(!Nm(e,n,r))return r&1?yC(i,t,r):vC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Jl(t);else return s}finally{Mm()}}else if(typeof o=="number"){let s=null,a=mC(n,e),u=hs,l=r&1?e[en][Xt]:null;for((a===-1||r&4)&&(u=a===-1?Ey(n,e):e[a+8],u===hs||!PD(r,!1)?a=-1:(s=e[ne],a=Dd(u),e=Cd(u,e)));a!==-1;){let h=e[ne];if(MD(o,a,h.data)){let p=f1(a,e,t,s,r,l);if(p!==Ln)return p}u=e[a+8],u!==hs&&PD(r,e[ne].data[a+8]===l)&&MD(o,a,e)?(s=h,a=Dd(u),e=Cd(u,e)):a=-1}}return i}function f1(n,e,t,r,i,o){let s=e[ne],a=s.data[n+8],u=r==null?Zr(a)&&Km:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=wd(a,s,t,u,l);return h!==null?lc(e,s,h,a):Ln}function wd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&t===C||y>=u&&C.type===t)return y}if(i){let y=s[u];if(y&&xn(y)&&y.type===t)return u}return null}function lc(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Zi){let s=i;s.resolving&&tm(LT(o[t]));let a=Sd(s.canSeeViewProviders);s.resolving=!0;let u=o[t].type||o[t],l,h=s.injectImpl?Tt(s.injectImpl):null,p=Nm(n,r,0);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&n1(t,o[t],e)}finally{h!==null&&Tt(h),Sd(a),s.resolving=!1,Mm()}}return i}function p1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Hi)?n[Hi]:void 0;return typeof e=="number"?e>=0?e&pC:g1:e}function MD(n,e,t){let r=1<<n;return!!(t[e+(n>>gC)]&r)}function PD(n,e){return!(n&2)&&!(n&1&&e)}var Ji=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return _C(this._tNode,this._lView,e,Ui(r),t)}};function g1(){return new Ji(ot(),he())}function Vt(n){return ps(()=>{let e=n.prototype.constructor,t=e[qa]||Ym(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[qa]||Ym(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ym(n){return Kg(n)?()=>{let e=Ym(it(n));return e&&e()}:Wr(n)}function m1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!cs(s);){let a=EC(o,s,t,r|2,Ln);if(a!==Ln)return a;let u=o.parent;if(!u){let l=s[fm];if(l){let h=l.get(t,Ln,r);if(h!==Ln)return h}u=IC(s),s=s[Gi]}o=u}return i}function IC(n){let e=n[ne],t=e.type;return t===2?e.declTNode:t===1?n[Xt]:null}function pc(n){return h1(ot(),n)}function y1(){return gs(ot(),he())}function gs(n,e){return new St(gn(n,e))}var St=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=y1}return n})();function v1(n){return n instanceof St?n.nativeElement:n}function _1(){return this._results[Symbol.iterator]()}var Rd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new xe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=UT(e);(this._changesDetected=!jT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=_1};function wC(n){return(n.flags&128)===128}var Iy=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Iy||{}),bC=new Map,E1=0;function I1(){return E1++}function w1(n){bC.set(n[Za],n)}function Jm(n){bC.delete(n[Za])}var OD="__ngContext__";function gc(n,e){On(e)?(n[OD]=e[Za],w1(e)):n[OD]=e}function TC(n){return CC(n[as])}function DC(n){return CC(n[Zt])}function CC(n){for(;n!==null&&!pn(n);)n=n[Zt];return n}var Zm;function wy(n){Zm=n}function SC(){if(Zm!==void 0)return Zm;if(typeof document<"u")return document;throw new V(210,!1)}var Bd=new U("",{providedIn:"root",factory:()=>b1}),b1="ng",$d=new U(""),ms=new U("",{providedIn:"platform",factory:()=>"unknown"});var Hd=new U("",{providedIn:"root",factory:()=>SC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var T1="h",D1="b";var AC=!1,RC=new U("",{providedIn:"root",factory:()=>AC});var C1=(n,e,t,r)=>{};function S1(n,e,t,r){C1(n,e,t,r)}var A1=()=>null;function NC(n,e,t=!1){return A1(n,e,t)}function MC(n,e){let t=n.contentQueries;if(t!==null){let r=ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ud(o),a.contentQueries(2,e[s],s)}}}finally{ie(r)}}}function Xm(n,e,t){ud(0);let r=ie(null);try{e(n,t)}finally{ie(r)}}function PC(n,e,t){if(pm(e)){let r=ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ie(r)}}}var mr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(mr||{});var vd;function R1(){if(vd===void 0&&(vd=null,Ga.trustedTypes))try{vd=Ga.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return vd}function xD(n){return R1()?.createScriptURL(n)||n}var Nd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kl})`}};function ys(n){return n instanceof Nd?n.changingThisBreaksApplicationSecurity:n}function by(n,e){let t=OC(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Kl})`)}return t===e}function OC(n){return n instanceof Nd&&n.getTypeName()||null}var N1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xC(n){return n=String(n),n.match(N1)?n:"unsafe:"+n}var qd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(qd||{});function kC(n){let e=LC();return e?e.sanitize(qd.URL,n)||"":by(n,"URL")?ys(n):xC(qi(n))}function FC(n){let e=LC();if(e)return xD(e.sanitize(qd.RESOURCE_URL,n)||"");if(by(n,"ResourceURL"))return xD(ys(n));throw new V(904,!1)}function M1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?FC:kC}function Ty(n,e,t){return M1(e,t)(n)}function LC(){let n=he();return n&&n[Mn].sanitizer}function P1(n){return n.ownerDocument.defaultView}function VC(n){return n instanceof Function?n():n}function O1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var jC="ng-template";function x1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&O1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Dy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Dy(n){return n.type===4&&n.value!==jC}function k1(n,e,t){let r=n.type===4&&!t?jC:n.value;return e===r}function F1(n,e,t){let r=4,i=n.attrs,o=i!==null?j1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!mn(r)&&!mn(u))return!1;if(s&&mn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!k1(n,u,t)||u===""&&e.length===1){if(mn(r))return!1;s=!0}}else if(r&8){if(i===null||!x1(n,i,u,t)){if(mn(r))return!1;s=!0}}else{let l=e[++a],h=L1(u,i,Dy(n),t);if(h===-1){if(mn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(mn(r))return!1;s=!0}}}}return mn(r)||s}function mn(n){return(n&1)===0}function L1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return U1(e,n)}function V1(n,e,t=!1){for(let r=0;r<e.length;r++)if(F1(n,e[r],t))return!0;return!1}function j1(n){for(let e=0;e<n.length;e++){let t=n[e];if(hC(t))return e}return n.length}function U1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function kD(n,e){return n?":not("+e.trim()+")":e}function B1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!mn(s)&&(e+=kD(o,i),i=""),r=s,o=o||!mn(r);t++}return i!==""&&(e+=kD(o,i)),e}function $1(n){return n.map(B1).join(",")}function H1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!mn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var jt={};function q1(n,e){return n.createText(e)}function z1(n,e,t){n.setValue(e,t)}function UC(n,e,t){return n.createElement(e,t)}function Md(n,e,t,r,i){n.insertBefore(e,t,r,i)}function BC(n,e,t){n.appendChild(e,t)}function FD(n,e,t,r,i){r!==null?Md(n,e,t,r,i):BC(n,e,t)}function G1(n,e,t){n.removeChild(null,e,t)}function W1(n,e,t){n.setAttribute(e,"style",t)}function K1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $C(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&s1(n,e,r),i!==null&&K1(n,e,i),o!==null&&W1(n,e,o)}function Cy(n,e,t,r,i,o,s,a,u,l,h){let p=Lt+r,m=p+i,y=Q1(p,m),C=typeof l=="function"?l():l;return y[ne]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function Q1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:jt);return t}function Y1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Cy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Sy(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[fn]=i,p[Z]=r|4|128|8|64|1024,(l!==null||n&&n[Z]&2048)&&(p[Z]|=2048),vm(p),p[Qe]=p[Gi]=n,p[gt]=t,p[Mn]=s||n&&n[Mn],p[Pe]=a||n&&n[Pe],p[zi]=u||n&&n[zi]||null,p[Xt]=o,p[Za]=I1(),p[Ja]=h,p[fm]=l,p[en]=e.type==2?n[en]:p,p}function J1(n,e,t){let r=gn(e,n),i=Y1(t),o=n[Mn].rendererFactory,s=Ay(n,Sy(n,i,null,HC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function HC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function qC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Ay(n,e){return n[as]?n[hm][Zt]=e:n[as]=e,n[hm]=e,e}function Z1(n=1){zC(Je(),he(),pr()+n,!1)}function zC(n,e,t,r){if(!r)if((e[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ed(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Id(e,o,0,t)}Xr(t)}var zd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(zd||{});function ey(n,e,t,r){let i=ie(null);try{let[o,s,a]=n.inputs[t],u=null;(s&zd.SignalBased)!==0&&(u=e[o][ft]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):sC(e,u,o,r)}finally{ie(i)}}function GC(n,e,t,r,i){let o=pr(),s=r&2;try{Xr(-1),s&&e.length>Lt&&zC(n,e,Lt,!1),Ee(s?2:0,i,t),t(r,i)}finally{Xr(o),Ee(s?3:1,i,t)}}function Ry(n,e,t){oF(n,e,t),(t.flags&64)===64&&sF(n,e,t)}function WC(n,e,t=gn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function X1(n,e,t,r){let o=r.get(RC,AC)||t===mr.ShadowDom,s=n.selectRootElement(e,o);return eF(s),s}function eF(n){tF(n)}var tF=()=>null;function nF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function KC(n,e,t,r,i,o){let s=e[ne];if(Ny(n,s,e,t,r)){Zr(n)&&iF(e,n.index);return}rF(n,e,t,r,i,o)}function rF(n,e,t,r,i,o){if(n.type&3){let s=gn(n,e);t=nF(t),r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function iF(n,e){let t=nn(e,n);t[Z]&16||(t[Z]|=64)}function oF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Zr(t)&&J1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ad(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=lc(e,n,s,t);if(gc(u,e),o!==null&&lF(e,s-r,u,a,t,o),xn(a)){let l=nn(t.index,e);l[gt]=lc(e,n,s,t)}}}function sF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=vD();try{Xr(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];cd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&aF(u,l)}}finally{Xr(-1),cd(s)}}function aF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function QC(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];V1(e,o.selectors,!1)&&(r??=[],xn(o)?r.unshift(o):r.push(o))}return r}function cF(n,e,t,r,i,o){let s=gn(n,e);uF(e[Pe],s,o,n.value,t,r,i)}function uF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?qi(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function lF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];ey(r,t,u,l)}}function dF(n,e){let t=n[zi];if(!t)return;t.get(mt,null)?.(e)}function Ny(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];ey(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];ey(h,l,r,i),a=!0}return a}function hF(n,e){let t=nn(e,n),r=t[ne];fF(r,t);let i=t[fn];i!==null&&t[Ja]===null&&(t[Ja]=NC(i,t[zi])),Ee(18),My(r,t,t[gt]),Ee(19,t[gt])}function fF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function My(n,e,t){ld(e);try{let r=n.viewQuery;r!==null&&Xm(1,r,t);let i=n.template;i!==null&&GC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Pn]?.finishViewCreation(n),n.staticContentQueries&&MC(n,e),n.staticViewQueries&&Xm(2,n.viewQuery,t);let o=n.components;o!==null&&pF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Z]&=-5,dd()}}function pF(n,e){for(let t=0;t<e.length;t++)hF(n,e[t])}function gF(n,e,t,r){let i=ie(null);try{let o=e.tView,a=n[Z]&4096?4096:16,u=Sy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Yr]=l;let h=n[Pn];return h!==null&&(u[Pn]=h.createEmbeddedView(o)),My(o,u,t),u}finally{ie(i)}}function LD(n,e){return!e||e.firstChild===null||wC(n)}var VD=!1,mF=new U(""),yF;function Py(n,e){return yF(n,e)}var Vn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Vn||{});function Oy(n){return(n.flags&32)===32}function ds(n,e,t,r,i){if(r!=null){let o,s=!1;pn(r)?o=r:On(r)&&(s=!0,r=r[fn]);let a=tn(r);n===0&&t!==null?i==null?BC(e,t,a):Md(e,t,a,i||null,!0):n===1&&t!==null?Md(e,t,a,i||null,!0):n===2?G1(e,a,s):n===3&&e.destroyNode(a),o!=null&&RF(e,n,o,t,i)}}function vF(n,e){YC(n,e),e[fn]=null,e[Xt]=null}function _F(n,e,t,r,i,o){r[fn]=i,r[Xt]=e,Gd(n,r,t,1,i,o)}function YC(n,e){e[Mn].changeDetectionScheduler?.notify(9),Gd(n,e,e[Pe],2,null,null)}function EF(n){let e=n[as];if(!e)return Um(n[ne],n);for(;e;){let t=null;if(On(e))t=e[as];else{let r=e[Ct];r&&(t=r)}if(!t){for(;e&&!e[Zt]&&e!==n;)On(e)&&Um(e[ne],e),e=e[Qe];e===null&&(e=n),On(e)&&Um(e[ne],e),t=e&&e[Zt]}e=t}}function xy(n,e){let t=n[Qi],r=t.indexOf(e);t.splice(r,1)}function JC(n,e){if(Yi(e))return;let t=e[Pe];t.destroyNode&&Gd(n,e,t,3,null,null),EF(e)}function Um(n,e){if(Yi(e))return;let t=ie(null);try{e[Z]&=-129,e[Z]|=256,e[zt]&&Vl(e[zt]),wF(n,e),IF(n,e),e[ne].type===1&&e[Pe].destroy();let r=e[Yr];if(r!==null&&pn(e[Qe])){r!==e[Qe]&&xy(r,e);let i=e[Pn];i!==null&&i.detachView(n)}Jm(e)}finally{ie(t)}}function IF(n,e){let t=n.cleanup,r=e[ss];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ss]=null);let i=e[lr];if(i!==null){e[lr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Xa];if(o!==null){e[Xa]=null;for(let s of o)s.destroy()}}function wF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Zi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ee(4,a,u);try{u.call(a)}finally{Ee(5,a,u)}}else{Ee(4,i,o);try{o.call(i)}finally{Ee(5,i,o)}}}}}function bF(n,e,t){return TF(n,e.parent,t)}function TF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[fn];if(Zr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===mr.None||i===mr.Emulated)return null}return gn(r,t)}function DF(n,e,t){return SF(n,e,t)}function CF(n,e,t){return n.type&40?gn(n,t):null}var SF=CF,jD;function ky(n,e,t,r){let i=bF(n,r,e),o=e[Pe],s=r.parent||e[Xt],a=DF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)FD(o,i,t[u],a,!1);else FD(o,i,t,a,!1);jD!==void 0&&jD(o,r,e,t,i)}function ac(n,e){if(e!==null){let t=e.type;if(t&3)return gn(e,n);if(t&4)return ty(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ac(n,r);{let i=n[e.index];return pn(i)?ty(-1,i):tn(i)}}else{if(t&128)return ac(n,e.next);if(t&32)return Py(e,n)()||tn(n[e.index]);{let r=ZC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Kr(n[en]);return ac(i,r)}else return ac(n,e.next)}}}return null}function ZC(n,e){if(e!==null){let r=n[en][Xt],i=e.projection;return r.projection[i]}return null}function ty(n,e){let t=Ct+n+1;if(t<e.length){let r=e[t],i=r[ne].firstChild;if(i!==null)return ac(r,i)}return e[Jr]}function Fy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&gc(tn(a),r),t.flags|=2),!Oy(t))if(u&8)Fy(n,e,t.child,r,i,o,!1),ds(e,n,i,a,o);else if(u&32){let l=Py(t,r),h;for(;h=l();)ds(e,n,i,h,o);ds(e,n,i,a,o)}else u&16?AF(n,e,r,t,i,o):ds(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Gd(n,e,t,r,i,o){Fy(t,r,n.firstChild,e,i,o,!1)}function AF(n,e,t,r,i,o){let s=t[en],u=s[Xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ds(e,n,i,h,o)}else{let l=u,h=s[Qe];wC(r)&&(l.flags|=128),Fy(n,e,l,h,i,o,!0)}}function RF(n,e,t,r,i){let o=t[Jr],s=tn(t);o!==s&&ds(e,n,r,o,i);for(let a=Ct;a<t.length;a++){let u=t[a];Gd(u[ne],u,n,e,r,o)}}function NF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Vn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Vn.Important),n.setStyle(t,r,i,o))}}function dc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(tn(o)),pn(o)&&XC(o,r);let s=t.type;if(s&8)dc(n,e,t.child,r);else if(s&32){let a=Py(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=ZC(e,t);if(Array.isArray(a))r.push(...a);else{let u=Kr(e[en]);dc(u[ne],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function XC(n,e){for(let t=Ct;t<n.length;t++){let r=n[t],i=r[ne].firstChild;i!==null&&dc(r[ne],r,i,e)}n[Jr]!==n[fn]&&e.push(n[Jr])}function eS(n){if(n[Ki]!==null){for(let e of n[Ki])e.impl.addSequence(e);n[Ki].length=0}}var tS=[];function MF(n){return n[zt]??PF(n)}function PF(n){let e=tS.pop()??Object.create(xF);return e.lView=n,e}function OF(n){n.lView[zt]!==n&&(n.lView=null,tS.push(n))}var xF=Y(P({},Li),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{us(n.lView)},consumerOnSignalRead(){this.lView[zt]=this}});function kF(n){let e=n[zt]??Object.create(FF);return e.lView=n,e}var FF=Y(P({},Li),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Kr(n.lView);for(;e&&!nS(e[ne]);)e=Kr(e);e&&_m(e)},consumerOnSignalRead(){this.lView[zt]=this}});function nS(n){return n.type!==2}function rS(n){if(n[Xa]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Xa])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Z]&8192)}}var LF=100;function Ly(n,e=0){let r=n[Mn].rendererFactory,i=!1;i||r.begin?.();try{VF(n,e)}finally{i||r.end?.()}}function VF(n,e){let t=Sm();try{Am(!0),ny(n,e);let r=0;for(;nc(n);){if(r===LF)throw new V(103,!1);r++,ny(n,1)}}finally{Am(t)}}function iS(n,e){Cm(e?rc.Exhaustive:rc.OnlyDirtyViews);try{Ly(n)}finally{Cm(rc.Off)}}function jF(n,e,t,r){if(Yi(e))return;let i=e[Z],o=!1,s=!1;ld(e);let a=!0,u=null,l=null;o||(nS(n)?(l=MF(e),u=Vi(l)):Fl()===null?(a=!1,l=kF(e),u=Vi(l)):e[zt]&&(Vl(e[zt]),e[zt]=null));try{vm(e),gD(n.bindingStartIndex),t!==null&&GC(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Ed(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Id(e,y,0,null),Vm(e,0)}if(s||UF(e),rS(e),oS(e,0),n.contentQueries!==null&&MC(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Ed(e,y)}else{let y=n.contentHooks;y!==null&&Id(e,y,1),Vm(e,1)}$F(n,e);let p=n.components;p!==null&&aS(e,p,0);let m=n.viewQuery;if(m!==null&&Xm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Ed(e,y)}else{let y=n.viewHooks;y!==null&&Id(e,y,2),Vm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[td]){for(let y of e[td])y();e[td]=null}o||(eS(e),e[Z]&=-73)}catch(h){throw o||us(e),h}finally{l!==null&&(ts(l,u),a&&OF(l)),dd()}}function oS(n,e){for(let t=TC(n);t!==null;t=DC(t))for(let r=Ct;r<t.length;r++){let i=t[r];sS(i,e)}}function UF(n){for(let e=TC(n);e!==null;e=DC(e)){if(!(e[Z]&2))continue;let t=e[Qi];for(let r=0;r<t.length;r++){let i=t[r];_m(i)}}}function BF(n,e,t){Ee(18);let r=nn(e,n);sS(r,t),Ee(19,r[gt])}function sS(n,e){id(n)&&ny(n,e)}function ny(n,e){let r=n[ne],i=n[Z],o=n[zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$a(o)),s||=!1,o&&(o.dirty=!1),n[Z]&=-9217,s)jF(r,n,r.template,n[gt]);else if(i&8192){let a=ie(null);try{rS(n),oS(n,1);let u=r.components;u!==null&&aS(n,u,1),eS(n)}finally{ie(a)}}}function aS(n,e,t){for(let r=0;r<e.length;r++)BF(n,e[r],t)}function $F(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Xr(~i);else{let o=i,s=t[++r],a=t[++r];yD(s,o);let u=e[o];Ee(24,u),a(2,u),Ee(25,u)}}}finally{Xr(-1)}}function Vy(n,e){let t=Sm()?64:1088;for(n[Mn].changeDetectionScheduler?.notify(e);n;){n[Z]|=t;let r=Kr(n);if(cs(n)&&!r)return n;n=r}return null}function cS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function HF(n,e,t,r=!0){let i=e[ne];if(qF(i,e,n,t),r){let s=ty(t,n),a=e[Pe],u=a.parentNode(n[Jr]);u!==null&&_F(i,n[Xt],a,e,u,s)}let o=e[Ja];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ry(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t];if(r){let i=r[Yr];i!==null&&i!==n&&xy(i,r),e>0&&(n[t-1][Zt]=r[Zt]);let o=Ka(n,Ct+e);vF(r[ne],r);let s=o[Pn];s!==null&&s.detachView(o[ne]),r[Qe]=null,r[Zt]=null,r[Z]&=-129}return r}function qF(n,e,t,r){let i=Ct+r,o=t.length;r>0&&(t[i-1][Zt]=e),r<o-Ct?(e[Zt]=t[i],im(t,Ct+r,e)):(t.push(e),e[Zt]=null),e[Qe]=t;let s=e[Yr];s!==null&&t!==s&&uS(s,e);let a=e[Pn];a!==null&&a.insertView(n),od(e),e[Z]|=128}function uS(n,e){let t=n[Qi],r=e[Qe];if(On(r))n[Z]|=2;else{let i=r[Qe][en];e[en]!==i&&(n[Z]|=2)}t===null?n[Qi]=[e]:t.push(e)}var ei=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ne];return dc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[gt]}set context(e){this._lView[gt]=e}get destroyed(){return Yi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qe];if(pn(e)){let t=e[ec],r=t?t.indexOf(this):-1;r>-1&&(ry(e,r),Ka(t,r))}this._attachedToViewContainer=!1}JC(this._lView[ne],this._lView)}onDestroy(e){Em(this._lView,e)}markForCheck(){Vy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){od(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,Ly(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[zi].get(mF,VD)}catch{this.exhaustive=VD}}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=cs(this._lView),t=this._lView[Yr];t!==null&&!e&&xy(t,this._lView),YC(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let t=cs(this._lView),r=this._lView[Yr];r!==null&&!t&&uS(r,this._lView),od(this._lView)}};var ti=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=zF;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=gF(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ei(o)}}return n})();function zF(){return Wd(ot(),he())}function Wd(n,e){return n.type&4?new ti(e,n,gs(n,e)):null}function jy(n,e,t,r,i){let o=n.data[e];if(o===null)o=GF(n,e,t,r,i),mD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=dD();o.injectorIndex=s===null?-1:s.injectorIndex}return ls(o,!0),o}function GF(n,e,t,r,i){let o=Tm(),s=Dm(),a=s?o:o&&o.parent,u=n.data[e]=KF(n,a,t,e,r,i);return WF(n,u,o,s),u}function WF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function KF(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return sD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var wQ=new RegExp(`^(\\d+)*(${D1}|${T1})*(.*)`);var QF=()=>null;function UD(n,e){return QF(n,e)}var lS=class{},Kd=class{},iy=class{resolveComponentFactory(e){throw new V(917,!1)}},mc=class{static NULL=new iy},Xi=class{},vn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>YF()}return n})();function YF(){let n=he(),e=ot(),t=nn(e.index,n);return(On(t)?t:n)[Pe]}var dS=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>null})}return n})();var bd={},oy=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,bd,r);return i!==bd||t===bd?i:this.parentInjector.get(e,t,r)}};function BD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ql(i,a);else if(o==2){let u=a,l=e[++s];r=Ql(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function z(n,e=0){let t=he();if(t===null)return B(n,e);let r=ot();return _C(r,t,it(n),e)}function Uy(){let n="invalid";throw new Error(n)}function hS(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}XF(n,e,t,a,o,u,l)}o!==null&&r!==null&&JF(t,r,o)}function JF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function ZF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function XF(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&xn(y)&&(u=!0,ZF(n,t,m)),Qm(Ad(t,e),n,y.type)}oL(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=qC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=uc(t.mergedAttrs,y.hostAttrs),tL(n,t,e,p,y),iL(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);t.directiveToIndex.set(y.type,[p,N+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}eL(n,t,o)}function eL(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))$D(0,e,i,r),$D(1,e,i,r),qD(e,r,!1);else{let o=t.get(i);HD(0,e,o,r),HD(1,e,o,r),qD(e,r,!0)}}}function $D(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),fS(e,o)}}function HD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),fS(e,s)}}function fS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function qD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Dy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function tL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Wr(i.type,!0)),s=new Zi(o,xn(i),z);n.blueprint[r]=s,t[r]=s,nL(n,e,r,qC(n,t,i.hostVars,jt),i)}function nL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;rL(s)!=a&&s.push(a),s.push(t,r,o)}}function rL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function iL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xn(e)&&(t[""]=n)}}function oL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function pS(n,e,t,r,i,o,s,a){let u=e.consts,l=tc(u,s),h=jy(e,n,2,r,l);return o&&hS(e,t,h,tc(u,a),i),h.mergedAttrs=uc(h.mergedAttrs,h.attrs),h.attrs!==null&&BD(h,h.attrs,!1),h.mergedAttrs!==null&&BD(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function gS(n,e){lC(n,e),pm(e)&&n.queries.elementEnd(e)}function By(n){return yS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function mS(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function yS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function vS(n,e,t){return n[e]=t}function sL(n,e){return n[e]}function yr(n,e,t){if(t===jt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function aL(n,e,t,r){let i=yr(n,e,t);return yr(n,e+1,r)||i}function Bm(n,e,t){return function r(i){let o=Zr(n)?nn(n.index,e):e;Vy(o,5);let s=e[gt],a=zD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=zD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function zD(n,e,t,r){let i=ie(null);try{return Ee(6,e,t),t(r)!==!1}catch(o){return dF(n,o),!1}finally{Ee(7,e,t),ie(i)}}function cL(n,e,t,r,i,o,s,a){let u=nd(n),l=!1,h=null;if(!r&&u&&(h=uL(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=gn(n,t),m=r?r(p):p;S1(t,m,o,a);let y=i.listen(m,o,a),C=r?N=>r(tn(N[n.index])):n.index;_S(C,e,t,o,a,y,!1)}return l}function uL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ss],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function _S(n,e,t,r,i,o,s){let a=e.firstCreatePass?wm(e):null,u=Im(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function GD(n,e,t,r,i,o){let s=e[t],a=e[ne],l=a.data[t].outputs[r],p=s[l].subscribe(o);_S(n.index,a,e,i,o,p,!0)}var sy=Symbol("BINDING");var Pd=class extends mc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=fr(e);return new eo(t,this.ngModule)}};function lL(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&zd.SignalBased)!==0};return i&&(o.transform=i),o})}function dL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function hL(n,e,t){let r=e instanceof Fe?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new oy(t,r):t}function fL(n){let e=n.get(Xi,null);if(e===null)throw new V(407,!1);let t=n.get(dS,null),r=n.get(dr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function pL(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return UC(e,t,t==="svg"?YT:t==="math"?JT:null)}var eo=class extends Kd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=lL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=dL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=$1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ee(22);let a=ie(null);try{let u=this.componentDef,l=gL(r,u,s,o),h=hL(u,i||this.ngModule,e),p=fL(h),m=p.rendererFactory.createRenderer(null,u),y=r?X1(m,r,u.encapsulation,h):pL(u,m),C=s?.some(WD)||o?.some(k=>typeof k!="function"&&k.bindings.some(WD)),N=Sy(null,l,null,512|HC(u),null,null,p,m,h,null,NC(y,h,!0));N[Lt]=y,ld(N);let R=null;try{let k=pS(Lt,l,N,"#host",()=>l.directiveRegistry,!0,0);y&&($C(m,y,k),gc(y,N)),Ry(l,N,k),PC(l,k,N),gS(l,k),t!==void 0&&yL(k,this.ngContentSelectors,t),R=nn(k.index,N),N[gt]=R[gt],My(l,N,null)}catch(k){throw R!==null&&Jm(R),Jm(N),k}finally{Ee(23),dd()}return new Od(this.componentType,N,!!C)}finally{ie(a)}}};function gL(n,e,t,r){let i=n?["ng-version","20.0.5"]:H1(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[sy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[sy].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=cm(p);u.push(m)}return Cy(0,null,mL(o,s),1,a,u,null,null,null,[i],null)}function mL(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function WD(n){let e=n[sy].kind;return e==="input"||e==="twoWay"}var Od=class extends lS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=rd(t[ne],Lt),this.location=gs(this._tNode,t),this.instance=nn(this._tNode.index,t)[gt],this.hostView=this.changeDetectorRef=new ei(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Ny(r,i[ne],i,e,t);this.previousInputValues.set(e,t);let s=nn(r.index,i);Vy(s,1)}get injector(){return new Ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var vr=(()=>{class n{static __NG_ELEMENT_ID__=vL}return n})();function vL(){let n=ot();return IS(n,he())}var _L=vr,ES=class extends _L{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return gs(this._hostTNode,this._hostLView)}get injector(){return new Ji(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ey(this._hostTNode,this._hostLView);if(fC(e)){let t=Cd(e,this._hostLView),r=Dd(e),i=t[ne].data[r+8];return new Ji(i,t)}else return new Ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=KD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=UD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,LD(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!Zk(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new eo(fr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(Fe,null);k&&(o=k)}let m=fr(h.componentType??{}),y=UD(this._lContainer,m?.id??null),C=y?.firstChild??null,N=h.create(p,i,C,o,s,a);return this.insertImpl(N.hostView,l,LD(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(XT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Qe],l=new ES(u,u[Xt],u[Qe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return HF(s,i,o,r),e.attachToViewContainerRef(),im($m(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=KD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ry(this._lContainer,t);r&&(Ka($m(this._lContainer),t),JC(r[ne],r))}detach(e){let t=this._adjustIndex(e,-1),r=ry(this._lContainer,t);return r&&Ka($m(this._lContainer),t)!=null?new ei(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function KD(n){return n[ec]}function $m(n){return n[ec]||(n[ec]=[])}function IS(n,e){let t,r=e[n.index];return pn(r)?t=r:(t=cS(r,e,null,n),e[n.index]=t,Ay(e,t)),IL(t,e,n,r),new ES(t,n,e)}function EL(n,e){let t=n[Pe],r=t.createComment(""),i=gn(e,n),o=t.parentNode(i);return Md(t,o,r,t.nextSibling(i),!1),r}var IL=TL,wL=()=>!1;function bL(n,e,t){return wL(n,e,t)}function TL(n,e,t,r){if(n[Jr])return;let i;t.type&8?i=tn(r):i=EL(e,t),n[Jr]=i}var ay=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},cy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)$y(e,t).matches!==null&&this.queries[t].setDirty()}},uy=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=PL(e):this.predicate=e}},ly=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},dy=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,DL(t,o)),this.matchTNodeWithReadOption(e,t,wd(t,e,o,!1,!1))}else r===ti?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,wd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===St||i===vr||i===ti&&t.type&4)this.addMatch(t.index,-2);else{let o=wd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function DL(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function CL(n,e){return n.type&11?gs(n,e):n.type&4?Wd(n,e):null}function SL(n,e,t,r){return t===-1?CL(e,n):t===-2?AL(n,e,r):lc(n,n[ne],t,e)}function AL(n,e,t){if(t===St)return gs(e,n);if(t===ti)return Wd(e,n);if(t===vr)return IS(e,n)}function wS(n,e,t,r){let i=e[Pn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(SL(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function hy(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=wS(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Ct;p<h.length;p++){let m=h[p];m[Yr]===m[Qe]&&hy(m[ne],m,l,r)}if(h[Qi]!==null){let p=h[Qi];for(let m=0;m<p.length;m++){let y=p[m];hy(y[ne],y,l,r)}}}}}return r}function RL(n,e){return n[Pn].queries[e].queryList}function NL(n,e,t){let r=new Rd((t&4)===4);return nD(n,e,r,r.destroy),(e[Pn]??=new cy).queries.push(new ay(r))-1}function ML(n,e,t,r){let i=Je();if(i.firstCreatePass){let o=ot();OL(i,new uy(e,t,r),o.index),xL(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return NL(i,he(),t)}function PL(n){return n.split(",").map(e=>e.trim())}function OL(n,e,t){n.queries===null&&(n.queries=new ly),n.queries.track(new dy(e,t))}function xL(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function $y(n,e){return n.queries.getByIndex(e)}function kL(n,e){let t=n[ne],r=$y(t,e);return r.crossesNgTemplate?hy(t,n,e,[]):wS(t,n,r,e)}var QD=new Set;function ro(n){QD.has(n)||(QD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var to=class{},Qd=class{};var xd=class extends to{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Pd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=am(e);this._bootstrapComponents=VC(o.bootstrap),this._r3Injector=Pm(e,t,[{provide:to,useValue:this},{provide:mc,useValue:this.componentFactoryResolver},...r],kt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kd=class extends Qd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new xd(this.moduleType,e,[])}};var hc=class extends to{injector;componentFactoryResolver=new Pd(this);instance=null;constructor(e){super();let t=new $i([...e.providers,{provide:to,useValue:this},{provide:mc,useValue:this.componentFactoryResolver}],e.parent||Ya(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function vs(n,e,t=null){return new hc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var FL=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=um(!1,t.type),i=r.length>0?vs([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=L({token:n,providedIn:"environment",factory:()=>new n(B(Fe))})}return n})();function Hy(n){return ps(()=>{let e=bS(n),t=Y(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Iy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(FL).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||mr.Emulated,styles:n.styles||Dt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ro("NgStandalone"),TS(t);let r=n.dependencies;return t.directiveDefs=YD(r,!1),t.pipeDefs=YD(r,!0),t.id=BL(t),t})}function LL(n){return fr(n)||cm(n)}function VL(n){return n!==null}function on(n){return ps(()=>({type:n.type,bootstrap:n.bootstrap||Dt,declarations:n.declarations||Dt,imports:n.imports||Dt,exports:n.exports||Dt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jL(n,e){if(n==null)return Qr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=zd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function UL(n){if(n==null)return Qr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ye(n){return ps(()=>{let e=bS(n);return TS(e),e})}function qy(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function bS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Qr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Dt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:jL(n.inputs,e),outputs:UL(n.outputs),debugInfo:null}}function TS(n){n.features?.forEach(e=>e(n))}function YD(n,e){if(!n)return null;let t=e?$T:LL;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(VL)}function BL(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $L(n){return Object.getPrototypeOf(n.prototype).constructor}function ze(n){let e=$L(n.type),t=!0,r=[n];for(;e;){let i;if(xn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Hm(n.inputs),s.declaredInputs=Hm(n.declaredInputs),s.outputs=Hm(n.outputs);let a=i.hostBindings;a&&WL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&zL(n,u),l&&GL(n,l),HL(n,i),kT(n.outputs,i.outputs),xn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ze&&(t=!1)}}e=Object.getPrototypeOf(e)}qL(r)}function HL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function qL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uc(i.hostAttrs,t=uc(t,i.hostAttrs))}}function Hm(n){return n===Qr?{}:n===Dt?[]:n}function zL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function GL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function WL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function KL(n,e,t,r,i,o,s,a,u){let l=e.consts,h=jy(e,n,4,s||null,a||null);bm()&&hS(e,t,h,tc(l,u),QC),h.mergedAttrs=uc(h.mergedAttrs,h.attrs),lC(e,h);let p=h.tView=Cy(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function QL(n,e,t,r,i,o,s,a,u,l,h){let p=t+Lt,m=e.firstCreatePass?KL(p,e,n,r,i,o,s,a,l):e.data[p];u&&(m.flags|=u),ls(m,!1);let y=YL(e,n,m,t);fd()&&ky(e,n,y,m),gc(y,n);let C=cS(y,n,y,m);return n[p]=C,Ay(n,C),bL(C,m,n),nd(m)&&Ry(e,n,m),l!=null&&WC(n,m,h),m}function DS(n,e,t,r,i,o,s,a){let u=he(),l=Je(),h=tc(l.consts,o);return QL(u,l,n,e,t,r,i,h,void 0,s,a),DS}var YL=JL;function JL(n,e,t,r){return pd(!0),e[Pe].createComment("")}var Yd=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Yd||{}),io=new U(""),CS=!1,fy=class extends xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,KT()&&(this.destroyRef=M(kn,{optional:!0})??void 0,this.pendingTasks=M(gr,{optional:!0})??void 0)}emit(e){let t=ie(null);try{super.next(e)}finally{ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Me&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ae=fy;function SS(n){let e,t;function r(){n=sc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function JD(n){return queueMicrotask(()=>n()),()=>{n=sc}}var zy="isAngularZone",Fd=zy+"_ID",ZL=0,Re=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ae(!1);onMicrotaskEmpty=new Ae(!1);onStable=new Ae(!1);onError=new Ae(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=CS}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new V(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,XL,sc,sc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},XL={};function Gy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){SS(()=>{n.callbackScheduled=!1,py(n),n.isCheckStableRunning=!0,Gy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),py(n)}function tV(n){let e=()=>{eV(n)},t=ZL++;n._inner=n._inner.fork({name:"angular",properties:{[zy]:!0,[Fd]:t,[Fd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(nV(u))return r.invokeTask(o,s,a,u);try{return ZD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),XD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return ZD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rV(u)&&e(),XD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,py(n),Gy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function py(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XD(n){n._nesting--,Gy(n)}var Ld=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ae;onMicrotaskEmpty=new Ae;onStable=new Ae;onError=new Ae;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function nV(n){return AS(n,"__ignore_ng_zone__")}function rV(n){return AS(n,"__scheduler_tick__")}function AS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Wy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),RS=[0,1,2,3],NS=(()=>{class n{ngZone=M(Re);scheduler=M(dr);errorHandler=M(hn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(io,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ee(16),this.executing=!0;for(let r of RS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ee(17)}register(t){let{view:r}=t;r!==void 0?((r[Ki]??=[]).push(t),us(r),r[Z]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Yd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ki];e&&(this.view[Ki]=e.filter(t=>t!==this))}};function Ky(n,e){let t=e?.injector??M(Ft);return ro("NgAfterNextRender"),oV(n,t,e,!0)}function iV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function oV(n,e,t,r){let i=e.get(Wy);i.impl??=e.get(NS);let o=e.get(io,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(kn):null,a=e.get(gd,null,{optional:!0}),u=new Vd(i.impl,iV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Qy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Yy=new U("");function _r(n){return!!n&&typeof n.then=="function"}function Jd(n){return!!n&&typeof n.subscribe=="function"}var Jy=new U("");function Zd(n){return Nn([{provide:Jy,multi:!0,useValue:n}])}var Zy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(Jy,{optional:!0})??[];injector=M(Ft);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=pt(this.injector,i);if(_r(o))t.push(o);else if(Jd(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yc=new U("");function MS(){Og(()=>{let n="";throw new V(600,n)})}function PS(n){return n.isBoundToModule}var sV=10;var oo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(mt);afterRenderManager=M(Wy);zonelessEnabled=M(oc);rootEffectScheduler=M(Lm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(gr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(J(t=>!t))}constructor(){M(io,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(Fe);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ft.NULL){return this._injector.get(Re).run(()=>{Ee(10);let s=t instanceof Kd;if(!this._injector.get(Zy).done){let C="";throw new V(405,C)}let u;s?u=t:u=this._injector.get(mc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=PS(u)?void 0:this._injector.get(to),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Yy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),cc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Ee(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Yd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new V(101,!1);let t=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(t),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Xi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<sV;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!nc(i))continue;let o=r&&!this.zonelessEnabled?0:1;Ly(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>nc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;cc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(yc,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>cc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new V(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Er(n,e,t,r){let i=he(),o=ic();if(yr(i,o,e)){let s=Je(),a=hd();cF(a,i,n,e,t,r)}return Er}function OS(n,e,t){let r=he(),i=ic();if(yr(r,i,e)){let o=Je(),s=hd();KC(s,r,n,e,r[Pe],t)}return OS}function gy(n,e,t,r,i){Ny(e,n,t,i?"class":"style",r)}function Xy(n,e,t,r){let i=he(),o=Je(),s=Lt+n,a=i[Pe],u=o.firstCreatePass?pS(s,o,i,e,QC,bm(),t,r):o.data[s],l=aV(o,i,u,a,e,n);i[s]=l;let h=nd(u);return ls(u,!0),$C(a,l,u),!Oy(u)&&fd()&&ky(o,i,l,u),(rD()===0||h)&&gc(l,i),iD(),h&&(Ry(o,i,u),PC(o,u,i)),r!==null&&WC(i,u),Xy}function ev(){let n=ot();Dm()?hD():(n=n.parent,ls(n,!1));let e=n;aD(e)&&cD(),oD();let t=Je();return t.firstCreatePass&&gS(t,e),e.classesWithoutHost!=null&&i1(e)&&gy(t,e,he(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&o1(e)&&gy(t,e,he(),e.stylesWithoutHost,!1),ev}function Xd(n,e,t,r){return Xy(n,e,t,r),ev(),Xd}var aV=(n,e,t,r,i,o)=>(pd(!0),UC(r,i,TD()));function cV(){return he()}var vc="en-US";var uV=vc;function xS(n){typeof n=="string"&&(uV=n.toLowerCase().replace(/_/g,"-"))}function sn(n,e,t){let r=he(),i=Je(),o=ot();return kS(i,r,r[Pe],o,n,e,t),sn}function kS(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Bm(r,e,o),cL(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Bm(r,e,o),GD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Bm(r,e,o),GD(r,e,p,i,i,u)}}function lV(n=1){return bD(n)}function tv(n,e,t,r){ML(n,e,t,r)}function nv(n){let e=he(),t=Je(),r=Rm();ud(r+1);let i=$y(t,r);if(n.dirty&&ZT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=kL(e,r);n.reset(o,v1),n.notifyOnChanges()}return!0}return!1}function rv(){return RL(he(),Rm())}function dV(n){let e=fD();return mm(e,Lt+n)}function _d(n,e){return n<<17|e<<2}function no(n){return n>>17&32767}function hV(n){return(n&2)==2}function fV(n,e){return n&131071|e<<17}function my(n){return n|2}function fs(n){return(n&131068)>>2}function qm(n,e){return n&-131069|e<<2}function pV(n){return(n&1)===1}function yy(n){return n|1}function gV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=no(s),u=fs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||os(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=no(n[a+1]);n[r+1]=_d(m,a),m!==0&&(n[m+1]=qm(n[m+1],r)),n[a+1]=fV(n[a+1],r)}else n[r+1]=_d(a,0),a!==0&&(n[a+1]=qm(n[a+1],r)),a=r;else n[r+1]=_d(u,0),a===0?a=r:n[u+1]=qm(n[u+1],r),u=r;l&&(n[r+1]=my(n[r+1])),eC(n,h,r,!0),eC(n,h,r,!1),mV(e,h,n,r,o),s=_d(a,u),o?e.classBindings=s:e.styleBindings=s}function mV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&os(o,e)>=0&&(t[r+1]=yy(t[r+1]))}function eC(n,e,t,r){let i=n[t+1],o=e===null,s=r?no(i):fs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];yV(u,e)&&(a=!0,n[s+1]=r?yy(l):my(l)),s=r?no(l):fs(l)}a&&(n[t+1]=r?my(i):yy(i))}function yV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?os(n,e)>=0:!1}var yn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vV(n){return n.substring(yn.key,yn.keyEnd)}function _V(n){return EV(n),FS(n,LS(n,0,yn.textEnd))}function FS(n,e){let t=yn.textEnd;return t===e?-1:(e=yn.keyEnd=IV(n,yn.key=e,t),LS(n,e,t))}function EV(n){yn.key=0,yn.keyEnd=0,yn.value=0,yn.valueEnd=0,yn.textEnd=n.length}function LS(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function IV(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function VS(n,e,t){return jS(n,e,t,!1),VS}function _c(n,e){return jS(n,e,null,!0),_c}function wV(n){TV(NV,bV,n,!0)}function bV(n,e){for(let t=_V(e);t>=0;t=FS(e,t))Xl(n,vV(e),!0)}function jS(n,e,t,r){let i=he(),o=Je(),s=ad(2);if(o.firstUpdatePass&&BS(o,n,s,r),e!==jt&&yr(i,s,e)){let a=o.data[pr()];$S(o,a,i,i[Pe],n,i[s+1]=PV(e,t),r,s)}}function TV(n,e,t,r){let i=Je(),o=ad(2);i.firstUpdatePass&&BS(i,null,o,r);let s=he();if(t!==jt&&yr(s,o,t)){let a=i.data[pr()];if(HS(a,r)&&!US(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Ql(u,t||"")),gy(i,a,s,t,r)}else MV(i,a,s,s[Pe],s[o+1],s[o+1]=RV(n,e,t),r,o)}}function US(n,e){return e>=n.expandoStartIndex}function BS(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[pr()],s=US(n,t);HS(o,r)&&e===null&&!s&&(e=!1),e=DV(i,o,e,r),gV(i,o,e,t,s,r)}}function DV(n,e,t,r){let i=_D(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=zm(null,n,e,t,r),t=fc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=zm(i,n,e,t,r),o===null){let u=CV(n,e,r);u!==void 0&&Array.isArray(u)&&(u=zm(null,n,e,u[1],r),u=fc(u,e.attrs,r),SV(n,e,r,u))}else o=AV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function CV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(fs(r)!==0)return n[no(r)]}function SV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[no(i)]=r}function AV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=fc(r,s,t)}return fc(r,e.attrs,t)}function zm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=fc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function fc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Xl(n,s,t?!0:e[++o]))}return n===void 0?null:n}function RV(n,e,t){if(t==null||t==="")return Dt;let r=[],i=ys(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function NV(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Xl(n,r,t)}function MV(n,e,t,r,i,o,s,a){i===jt&&(i=Dt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,C=null,N;h===p?(u+=2,l+=2,m!==y&&(C=p,N=y)):p===null||h!==null&&h<p?(u+=2,C=h):(l+=2,C=p,N=y),C!==null&&$S(n,e,t,r,C,N,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function $S(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=pV(l)?tC(u,e,t,i,fs(l),s):void 0;if(!jd(h)){jd(o)||hV(l)&&(o=tC(u,null,t,i,a,s));let p=gm(pr(),t);NF(r,s,p,i,o)}}function tC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===jt&&(m=p?Dt:void 0);let y=p?ed(m,r):h===r?m:void 0;if(l&&!jd(y)&&(y=ed(u,r)),jd(y)&&(a=y,s))return a;let C=n[i+1];i=s?no(C):fs(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ed(u,r))}return a}function jd(n){return n!==void 0}function PV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=kt(ys(n)))),n}function HS(n,e){return(n.flags&(e?8:16))!==0}function OV(n,e=""){let t=he(),r=Je(),i=n+Lt,o=r.firstCreatePass?jy(r,i,1,e,null):r.data[i],s=xV(r,t,o,e,n);t[i]=s,fd()&&ky(r,t,s,o),ls(o,!1)}var xV=(n,e,t,r,i)=>(pd(!0),q1(e[Pe],r));function kV(n,e,t,r=""){return yr(n,ic(),t)?e+qi(t)+r:jt}function FV(n,e,t,r,i,o=""){let s=pD(),a=aL(n,s,t,i);return ad(2),a?e+qi(t)+r+qi(i)+o:jt}function qS(n){return iv("",n),qS}function iv(n,e,t){let r=he(),i=kV(r,n,e,t);return i!==jt&&GS(r,pr(),i),iv}function zS(n,e,t,r,i){let o=he(),s=FV(o,n,e,t,r,i);return s!==jt&&GS(o,pr(),s),zS}function GS(n,e,t){let r=gm(e,n);z1(n[Pe],r,t)}function WS(n,e,t){xm(e)&&(e=e());let r=he(),i=ic();if(yr(r,i,e)){let o=Je(),s=hd();KC(s,r,n,e,r[Pe],t)}return WS}function LV(n,e){let t=xm(n);return t&&n.set(e),t}function KS(n,e){let t=he(),r=Je(),i=ot();return kS(r,t,t[Pe],i,n,e),KS}function VV(n,e,t){let r=Je();if(r.firstCreatePass){let i=xn(n);vy(t,r.data,r.blueprint,i,!0),vy(e,r.data,r.blueprint,i,!1)}}function vy(n,e,t,r,i){if(n=it(n),Array.isArray(n))for(let o=0;o<n.length;o++)vy(n[o],e,t,r,i);else{let o=Je(),s=he(),a=ot(),u=Bi(n)?n:it(n.provide),l=dm(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Bi(n)||!n.multi){let y=new Zi(l,i,z),C=Wm(u,e,i?h:h+m,p);C===-1?(Qm(Ad(a,s),o,u),Gm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=Wm(u,e,h+m,p),C=Wm(u,e,h,h+m),N=y>=0&&t[y],R=C>=0&&t[C];if(i&&!R||!i&&!N){Qm(Ad(a,s),o,u);let k=BV(i?UV:jV,t.length,i,r,l);!i&&R&&(t[C].providerFactory=k),Gm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=QS(t[i?C:y],l,!i&&r);Gm(o,n,y>-1?y:C,k)}!i&&r&&R&&t[C].componentProviders++}}}function Gm(n,e,t,r){let i=Bi(e),o=WT(e);if(i||o){let u=(o?it(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function QS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Wm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function jV(n,e,t,r){return _y(this.multi,[])}function UV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=lc(t,t[ne],this.providerFactory.index,r);o=a.slice(0,s),_y(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],_y(i,o);return o}function _y(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function BV(n,e,t,r,i){let o=new Zi(n,t,z);return o.multi=[],o.index=e,o.componentProviders=0,QS(o,i,r&&!t),o}function At(n,e=[]){return t=>{t.providersResolver=(r,i)=>VV(r,i?i(n):n,e)}}function $V(n,e,t){let r=sd()+n,i=he();return i[r]===jt?vS(i,r,t?e.call(t):e()):sL(i,r)}function HV(n,e,t,r){return YS(he(),sd(),n,e,t,r)}function qV(n,e){let t=n[e];return t===jt?void 0:t}function YS(n,e,t,r,i,o){let s=e+t;return yr(n,s,i)?vS(n,s+1,o?r.call(o,i):r(i)):qV(n,s+1)}function zV(n,e){let t=Je(),r,i=n+Lt;t.firstCreatePass?(r=GV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Wr(r.type,!0)),s,a=Tt(z);try{let u=Sd(!1),l=o();return Sd(u),ym(t,he(),i,l),l}finally{Tt(a)}}function GV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function WV(n,e,t){let r=n+Lt,i=he(),o=mm(i,r);return KV(i,r)?YS(i,sd(),e,o.transform,t,o):o.transform(t)}function KV(n,e){return n[ne].data[e].pure}function QV(n,e){return Wd(n,e)}var Ud=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ov=(()=>{class n{compileModuleSync(t){return new kd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=am(t),o=VC(i.declarations).reduce((s,a)=>{let u=fr(a);return u&&s.push(new eo(u)),s},[]);return new Ud(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var YV=(()=>{class n{zone=M(Re);changeDetectionScheduler=M(dr);applicationRef=M(oo);applicationErrorHandler=M(mt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JS=new U("",{factory:()=>!1});function sv({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Re(Y(P({},av()),{scheduleInRootZone:t})),[{provide:Re,useFactory:n},{provide:hr,multi:!0,useFactory:()=>{let r=M(YV,{optional:!0});return()=>r.initialize()}},{provide:hr,multi:!0,useFactory:()=>{let r=M(ZV);return()=>{r.initialize()}}},e===!0?{provide:km,useValue:!0}:[],{provide:Fm,useValue:t??CS},{provide:mt,useFactory:()=>{let r=M(Re),i=M(Fe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(hn),o.handleError(s))})}}}]}function JV(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=sv({ngZoneFactory:()=>{let i=av(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ro("NgZone_CoalesceEvent"),new Re(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Nn([{provide:JS,useValue:!0},{provide:oc,useValue:!1},r])}function av(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var ZV=(()=>{class n{subscription=new Me;initialized=!1;zone=M(Re);pendingTasks=M(gr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ZS=(()=>{class n{applicationErrorHandler=M(mt);appRef=M(oo);taskService=M(gr);ngZone=M(Re);zonelessEnabled=M(oc);tracing=M(io,{optional:!0});disableScheduling=M(km,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Fm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ld||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?JD:SS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,JD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XV(){return typeof $localize<"u"&&$localize.locale||vc}var eh=new U("",{providedIn:"root",factory:()=>M(eh,{optional:!0,skipSelf:!0})||XV()});function Rt(n){return MT(n)}function so(n,e){return $l(n,e?.equal)}var XS=class{[ft];constructor(e){this[ft]=e}destroy(){this[ft].destroy()}};var i0=Symbol("InputSignalNode#UNSET"),fj=Y(P({},Hl),{transformFn:void 0,applyValueToInputSignal(n,e){ns(n,e)}});function o0(n,e){let t=Object.create(fj);t.value=n,t.transformFn=e?.transform;function r(){if(es(t),t.value===i0){let i=null;throw new V(-950,i)}return t.value}return r[ft]=t,r}var nh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>pc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},pj=new U("");pj.__NG_ELEMENT_ID__=n=>{let e=ot();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new V(204,!1)};function e0(n,e){return o0(n,e)}function gj(n){return o0(i0,n)}var s0=(e0.required=gj,e0);var cv=new U(""),mj=new U("");function Ec(n){return!n.moduleRef}function yj(n){let e=Ec(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Re);return t.run(()=>{Ec(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(mt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ec(n)){let o=()=>e.destroy(),s=n.platformInjector.get(cv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(cv);s.add(o),n.moduleRef.onDestroy(()=>{cc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return _j(r,t,()=>{let o=e.get(Zy);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(eh,vc);if(xS(s||vc),!e.get(mj,!0))return Ec(n)?e.get(oo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ec(n)){let u=e.get(oo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return vj?.(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}var vj;function _j(n,e,t){try{let r=t();return _r(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var th=null;function Ej(n=[],e){return Ft.create({name:e,providers:[{provide:Qa,useValue:"platform"},{provide:cv,useValue:new Set([()=>th=null])},...n]})}function Ij(n=[]){if(th)return th;let e=Ej(n);return th=e,MS(),wj(e),e}function wj(n){let e=n.get($d,null);pt(n,()=>{e?.forEach(t=>t())})}var Ir=(()=>{class n{static __NG_ELEMENT_ID__=bj}return n})();function bj(n){return Tj(ot(),he(),(n&16)===16)}function Tj(n,e,t){if(Zr(n)&&!t){let r=nn(n.index,e);return new ei(r,r)}else if(n.type&175){let r=e[en];return new ei(r,e)}return null}var uv=class{constructor(){}supports(e){return By(e)}create(e){return new lv(e)}},Dj=(n,e)=>e,lv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Dj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<t0(r,i,o)?t:r,a=t0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,C=y+m;h<=C&&C<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!By(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,mS(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new dv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new rh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new rh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},dv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},hv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},rh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new hv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function t0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function n0(){return new fv([new uv])}var fv=(()=>{class n{factories;static \u0275prov=L({token:n,providedIn:"root",factory:n0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||n0()),deps:[[n,new oC,new iC]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new V(901,!1)}}return n})();function a0(n){Ee(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Ij(r),o=[sv({}),{provide:dr,useExisting:ZS},CD,...t||[]],s=new hc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return yj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ee(9)}}function ni(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function c0(n){let e=fr(n);if(!e)return null;let t=new eo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var d0=null;function an(){return d0}function pv(n){d0??=n}var Ic=class{},wc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(h0),providedIn:"platform"})}return n})(),gv=new U(""),h0=(()=>{class n extends wc{_location;_history;_doc=M(Se);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return an().getBaseHref(this._doc)}onPopState(t){let r=an().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=an().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ih(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function u0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function _n(n){return n&&n[0]!=="?"?`?${n}`:n}var En=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(sh),providedIn:"root"})}return n})(),oh=new U(""),sh=(()=>{class n extends En{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ih(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+_n(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+_n(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+_n(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(B(wc),B(oh,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ri=(()=>{class n{_subject=new xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Aj(u0(l0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_n(r))}normalize(t){return n.stripTrailingSlash(Sj(this._basePath,l0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_n(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_n(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=_n;static joinWithSlash=ih;static stripTrailingSlash=u0;static \u0275fac=function(r){return new(r||n)(B(En))};static \u0275prov=L({token:n,factory:()=>Cj(),providedIn:"root"})}return n})();function Cj(){return new ri(B(En))}function Sj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function l0(n){return n.replace(/\/index.html$/,"")}function Aj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var vv=(()=>{class n extends En{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=ih(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+_n(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+_n(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(B(wc),B(oh,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();var ah=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},g0=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ah(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),f0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);f0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(z(vr),z(ti),z(fv))};static \u0275dir=ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function f0(n,e){n.context.$implicit=e.item}var Rj=(()=>{class n{_viewContainer;_context=new ch;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){p0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){p0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(z(vr),z(ti))};static \u0275dir=ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ch=class{$implicit=null;ngIf=null};function p0(n,e){if(n&&!n.createEmbeddedView)throw new V(2020,!1)}function Nj(n,e){return new V(2100,!1)}var mv=class{createSubscription(e,t,r){return Rt(()=>e.subscribe({next:t,error:r}))}dispose(e){Rt(()=>e.unsubscribe())}},yv=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},Mj=new yv,Pj=new mv,Oj=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=M(mt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(_r(t))return Mj;if(Jd(t))return Pj;throw Nj(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(z(Ir,16))};static \u0275pipe=qy({name:"async",type:n,pure:!1})}return n})();var m0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=on({type:n});static \u0275inj=qt({})}return n})();function bc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ao=class{};var Ev="browser",kj="server";function sre(n){return n===Ev}function y0(n){return n===kj}var v0=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new _v(M(Se),window)})}return n})(),_v=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Y(P({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=Fj(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(is(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Y(P({},t),{left:i-s[0],top:o-s[1]}))}};function Fj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var dh=new U(""),Tv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(B(dh),B(Re))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Tc=class{_doc;constructor(e){this._doc=e}manager},uh="ng-app-id";function _0(n){for(let e of n)e.remove()}function E0(n,e){let t=e.createElement("style");return t.textContent=n,t}function Vj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${uh}="${e}"],link[${uh}="${e}"]`);if(i)for(let o of i)o.removeAttribute(uh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function wv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Dv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=y0(o),Vj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,E0);r?.forEach(i=>this.addUsage(i,this.external,wv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(_0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])_0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,E0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,wv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(uh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(B(Se),B(Bd),B(Hd,8),B(ms))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Iv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cv=/%COMP%/g;var w0="%COMP%",jj=`_nghost-${w0}`,Uj=`_ngcontent-${w0}`,Bj=!0,$j=new U("",{providedIn:"root",factory:()=>Bj});function Hj(n){return Uj.replace(Cv,n)}function qj(n){return jj.replace(Cv,n)}function b0(n,e){return e.map(t=>t.replace(Cv,n))}var Sv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Dc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof lh?i.applyToHost(t):i instanceof Cc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case mr.Emulated:o=new lh(u,l,r,this.appId,h,s,a,p,m);break;case mr.ShadowDom:return new bv(u,l,t,r,s,a,this.nonce,p,m);default:o=new Cc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(B(Tv),B(Dv),B(Bd),B($j),B(Se),B(ms),B(Re),B(Hd),B(io,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Dc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Iv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(I0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(I0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Iv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Iv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Vn.DashCase|Vn.Important)?e.style.setProperty(t,r,i&Vn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Vn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=an().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function I0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var bv=class extends Dc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=b0(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=wv(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cc=class extends Dc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?b0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},lh=class extends Cc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=Hj(h),this.hostAttr=qj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var hh=class n extends Ic{supportsDOMEvents=!0;static makeCurrent(){pv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=zj();return t==null?null:Gj(t)}resetBaseElement(){Sc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bc(document.cookie,e)}},Sc=null;function zj(){return Sc=Sc||document.head.querySelector("base"),Sc?Sc.getAttribute("href"):null}function Gj(n){return new URL(n,document.baseURI).pathname}var Wj=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),D0=(()=>{class n extends Tc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),T0=["alt","control","meta","shift"],Kj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},C0=(()=>{class n extends Tc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>an().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),T0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=Kj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),T0.forEach(s=>{if(s!==i){let a=Qj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function Yj(n,e){return a0(P({rootComponent:n},Jj(e)))}function Jj(n){return{appProviders:[...n2,...n?.providers??[]],platformProviders:t2}}function Zj(){hh.makeCurrent()}function Xj(){return new hn}function e2(){return wy(document),document}var t2=[{provide:ms,useValue:Ev},{provide:$d,useValue:Zj,multi:!0},{provide:Se,useFactory:e2}];var n2=[{provide:Qa,useValue:"root"},{provide:hn,useFactory:Xj},{provide:dh,useClass:D0,multi:!0,deps:[Se]},{provide:dh,useClass:C0,multi:!0,deps:[Se]},Sv,Dv,Tv,{provide:Xi,useExisting:Sv},{provide:ao,useClass:Wj},[]];var Es=class{},Is=class{},jn=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var gh=class{encodeKey(e){return S0(e)}encodeValue(e){return S0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function r2(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var i2=/%(\d[a-f0-9])/gi,o2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function S0(n){return encodeURIComponent(n).replace(i2,(e,t)=>o2[t]??e)}function fh(n){return`${n}`}var In=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new gh,e.fromString){if(e.fromObject)throw new V(2805,!1);this.map=r2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(fh):[fh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(fh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(fh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var mh=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function s2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function A0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function R0(n){return typeof Blob<"u"&&n instanceof Blob}function N0(n){return typeof FormData<"u"&&n instanceof FormData}function a2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ac="Content-Type",yh="Accept",Pv="X-Request-URL",P0="text/plain",O0="application/json",x0=`${O0}, ${P0}, */*`,_s=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(s2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new jn,this.context??=new mh,!this.params)this.params=new In,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||A0(this.body)||R0(this.body)||N0(this.body)||a2(this.body)?this.body:this.body instanceof In?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||N0(this.body)?null:R0(this.body)?this.body.type||null:A0(this.body)?null:typeof this.body=="string"?P0:this.body instanceof In?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?O0:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,u=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,h=e.headers||this.headers,p=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((y,C)=>y.set(C,e.setHeaders[C]),h)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,C)=>y.set(C,e.setParams[C]),p)),new n(t,r,a,{params:p,headers:h,context:m,reportProgress:l,responseType:i,withCredentials:u,transferCache:s,keepalive:o})}},br=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(br||{}),ws=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new jn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Rc=class n extends ws{constructor(e={}){super(e)}type=br.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},bs=class n extends ws{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=br.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},wr=class extends ws{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},k0=200,c2=204;function Av(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var _h=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof _s)o=t;else{let u;i.headers instanceof jn?u=i.headers:u=new jn(i.headers);let l;i.params&&(i.params instanceof In?l=i.params:l=new In({fromObject:i.params})),o=new _s(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let s=H(o).pipe(Rn(u=>this.handler.handle(u)));if(t instanceof _s||i.observe==="events")return s;let a=s.pipe(ht(u=>u instanceof bs));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new V(2806,!1);return u.body}));case"blob":return a.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new V(2807,!1);return u.body}));case"text":return a.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new V(2808,!1);return u.body}));case"json":default:return a.pipe(J(u=>u.body))}case"response":return a;default:throw new V(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new In().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Av(i,r))}post(t,r,i={}){return this.request("POST",t,Av(i,r))}put(t,r,i={}){return this.request("PUT",t,Av(i,r))}static \u0275fac=function(r){return new(r||n)(B(Es))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),u2=/^\)\]\}',?\n/;function M0(n){if(n.url)return n.url;let e=Pv.toLocaleLowerCase();return n.headers.get(e)}var F0=new U(""),ph=(()=>{class n{fetchImpl=M(Rv,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t));ngZone=M(Re);destroyRef=M(kn);destroyed=!1;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0})}handle(t){return new ce(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(Nv,o=>r.error(new wr({error:o}))),()=>i.abort()})}doRequest(t,r,i){return v(this,null,function*(){let o=this.createRequestInit(t),s;try{let y=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,P({signal:r},o)));l2(y),i.next({type:br.Sent}),s=yield y}catch(y){i.error(new wr({error:y,status:y.status??0,statusText:y.statusText,url:t.urlWithParams,headers:y.headers}));return}let a=new jn(s.headers),u=s.statusText,l=M0(s)??t.urlWithParams,h=s.status,p=null;if(t.reportProgress&&i.next(new Rc({headers:a,status:h,statusText:u,url:l})),s.body){let y=s.headers.get("content-length"),C=[],N=s.body.getReader(),R=0,k,G,$=typeof Zone<"u"&&Zone.current,pe=!1;if(yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){if(this.destroyed){yield N.cancel(),pe=!0;break}let{done:le,value:b}=yield N.read();if(le)break;if(C.push(b),R+=b.length,t.reportProgress){G=t.responseType==="text"?(G??"")+(k??=new TextDecoder).decode(b,{stream:!0}):void 0;let _=()=>i.next({type:br.DownloadProgress,total:y?+y:void 0,loaded:R,partialText:G});$?$.run(_):_()}}})),pe){i.complete();return}let He=this.concatChunks(C,R);try{let le=s.headers.get(Ac)??"";p=this.parseBody(t,He,le)}catch(le){i.error(new wr({error:le,headers:new jn(s.headers),status:s.status,statusText:s.statusText,url:M0(s)??t.urlWithParams}));return}}h===0&&(h=p?k0:0),h>=200&&h<300?(i.next(new bs({body:p,headers:a,status:h,statusText:u,url:l})),i.complete()):i.error(new wr({error:p,headers:a,status:h,statusText:u,url:l}))})}parseBody(t,r,i){switch(t.responseType){case"json":let o=new TextDecoder().decode(r).replace(u2,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),t.headers.has(yh)||(r[yh]=x0),!t.headers.has(Ac)){let o=t.detectContentTypeHeader();o!==null&&(r[Ac]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i,keepalive:t.keepalive}}concatChunks(t,r){let i=new Uint8Array(r),o=0;for(let s of t)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Rv=class{};function Nv(){}function l2(n){n.then(Nv,Nv)}function d2(n,e){return e(n)}function h2(n,e,t){return(r,i)=>pt(t,()=>e(r,o=>n(o,i)))}var L0=new U(""),V0=new U(""),j0=new U("",{providedIn:"root",factory:()=>!0});var vh=(()=>{class n extends Es{backend;injector;chain=null;pendingTasks=M(md);contributeToStability=M(j0);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(L0),...this.injector.get(V0,[])]));this.chain=r.reduceRight((i,o)=>h2(i,o,this.injector),d2)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Fi(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(B(Is),B(Fe))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();var f2=/^\)\]\}',?\n/,p2=RegExp(`^${Pv}:`,"m");function g2(n){return"responseURL"in n&&n.responseURL?n.responseURL:p2.test(n.getAllResponseHeaders())?n.getResponseHeader(Pv):null}var Mv=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new V(-2800,!1);t.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?be(r.\u0275loadImpl()):H(null)).pipe(bt(()=>new ce(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,R)=>s.setRequestHeader(N,R.join(","))),t.headers.has(yh)||s.setRequestHeader(yh,x0),!t.headers.has(Ac)){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader(Ac,N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=s.statusText||"OK",R=new jn(s.getAllResponseHeaders()),k=g2(s)||t.url;return u=new Rc({headers:R,status:s.status,statusText:N,url:k}),u},h=()=>{let{headers:N,status:R,statusText:k,url:G}=l(),$=null;R!==c2&&($=typeof s.response>"u"?s.responseText:s.response),R===0&&(R=$?k0:0);let pe=R>=200&&R<300;if(t.responseType==="json"&&typeof $=="string"){let He=$;$=$.replace(f2,"");try{$=$!==""?JSON.parse($):null}catch(le){$=He,pe&&(pe=!1,$={error:le,text:$})}}pe?(o.next(new bs({body:$,headers:N,status:R,statusText:k,url:G||void 0})),o.complete()):o.error(new wr({error:$,headers:N,status:R,statusText:k,url:G||void 0}))},p=N=>{let{url:R}=l(),k=new wr({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:R||void 0});o.error(k)},m=!1,y=N=>{m||(o.next(l()),m=!0);let R={type:br.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),t.responseType==="text"&&s.responseText&&(R.partialText=s.responseText),o.next(R)},C=N=>{let R={type:br.UploadProgress,loaded:N.loaded};N.lengthComputable&&(R.total=N.total),o.next(R)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:br.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(B(ao))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),U0=new U(""),m2="XSRF-TOKEN",y2=new U("",{providedIn:"root",factory:()=>m2}),v2="X-XSRF-TOKEN",_2=new U("",{providedIn:"root",factory:()=>v2}),Nc=class{},E2=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(B(Se),B(y2))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function I2(n,e){let t=n.url.toLowerCase();if(!M(U0)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=M(Nc).getToken(),i=M(_2);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ov=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ov||{});function w2(n,e){return{\u0275kind:n,\u0275providers:e}}function b2(...n){let e=[_h,Mv,vh,{provide:Es,useExisting:vh},{provide:Is,useFactory:()=>M(F0,{optional:!0})??M(Mv)},{provide:L0,useValue:I2,multi:!0},{provide:U0,useValue:!0},{provide:Nc,useClass:E2}];for(let t of n)e.push(...t.\u0275providers);return Nn(e)}function T2(){return w2(Ov.Fetch,[ph,{provide:F0,useExisting:ph},{provide:Is,useExisting:ph}])}var B0=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(B(Se))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Hc=Symbol("RouteTitle"),Vv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function lo(n){return new Vv(n)}function Q0(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function S2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Un(n[t],e[t]))return!1;return!0}function Un(n,e){let t=n?jv(n):void 0,r=e?jv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Y0(n[i],e[i]))return!1;return!0}function jv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Y0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function J0(n){return n.length>0?n[n.length-1]:null}function Tr(n){return bg(n)?n:_r(n)?be(Promise.resolve(n)):H(n)}var A2={exact:X0,subset:eA},Z0={exact:R2,subset:N2,ignored:()=>!0};function $0(n,e,t){return A2[t.paths](n.root,e.root,t.matrixParams)&&Z0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function R2(n,e){return Un(n,e)}function X0(n,e,t){if(!co(n.segments,e.segments)||!wh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!X0(n.children[r],e.children[r],t))return!1;return!0}function N2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Y0(n[t],e[t]))}function eA(n,e,t){return tA(n,e,e.segments,t)}function tA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!co(i,t)||e.hasChildren()||!wh(i,t,r))}else if(n.segments.length===t.length){if(!co(n.segments,t)||!wh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!eA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!co(n.segments,i)||!wh(n.segments,i,r)||!n.children[re]?!1:tA(n.children[re],e,o,r)}}function wh(n,e,t){return e.every((r,i)=>Z0[t](n[i].parameters,r.parameters))}var $n=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=lo(this.queryParams),this._queryParamMap}toString(){return O2.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bh(this)}},ii=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=lo(this.parameters),this._parameterMap}toString(){return rA(this)}};function M2(n,e){return co(n,e)&&n.every((t,r)=>Un(t.parameters,e[r].parameters))}function co(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function P2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var ho=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>new oi,providedIn:"root"})}return n})(),oi=class{parse(e){let t=new Bv(e);return new $n(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Mc(e.root,!0)}`,r=F2(e.queryParams),i=typeof e.fragment=="string"?`#${x2(e.fragment)}`:"";return`${t}${r}${i}`}},O2=new oi;function bh(n){return n.segments.map(e=>rA(e)).join("/")}function Mc(n,e){if(!n.hasChildren())return bh(n);if(e){let t=n.children[re]?Mc(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${Mc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=P2(n,(r,i)=>i===re?[Mc(n.children[re],!1)]:[`${i}:${Mc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${bh(n)}/${t[0]}`:`${bh(n)}/(${t.join("//")})`}}function nA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eh(n){return nA(n).replace(/%3B/gi,";")}function x2(n){return encodeURI(n)}function Uv(n){return nA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Th(n){return decodeURIComponent(n)}function H0(n){return Th(n.replace(/\+/g,"%20"))}function rA(n){return`${Uv(n.path)}${k2(n.parameters)}`}function k2(n){return Object.entries(n).map(([e,t])=>`;${Uv(e)}=${Uv(t)}`).join("")}function F2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Eh(t)}=${Eh(i)}`).join("&"):`${Eh(t)}=${Eh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var L2=/^[^\/()?;#]+/;function xv(n){let e=n.match(L2);return e?e[0]:""}var V2=/^[^\/()?;=#]+/;function j2(n){let e=n.match(V2);return e?e[0]:""}var U2=/^[^=?&#]+/;function B2(n){let e=n.match(U2);return e?e[0]:""}var $2=/^[^&#]+/;function H2(n){let e=n.match($2);return e?e[0]:""}var Bv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new ve(e,t)),r}parseSegment(){let e=xv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new ii(Th(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=j2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=xv(this.remaining);i&&(r=i,this.capture(r))}e[Th(t)]=Th(r)}parseQueryParam(e){let t=B2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=H2(this.remaining);s&&(r=s,this.capture(r))}let i=H0(t),o=H0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[re]:new ve([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function iA(n){return n.segments.length>0?new ve([],{[re]:n}):n}function oA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=oA(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ve(n.segments,e);return q2(t)}function q2(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new ve(n.segments.concat(e.segments),e.children)}return n}function si(n){return n instanceof $n}function sA(n,e,t=null,r=null){let i=aA(n);return cA(i,e,t,r)}function aA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ve(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=iA(r);return e??i}function cA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return kv(i,i,i,t,r);let o=z2(e);if(o.toRoot())return kv(i,i,new ve([],{}),t,r);let s=G2(o,i,n),a=s.processChildren?Oc(s.segmentGroup,s.index,o.commands):lA(s.segmentGroup,s.index,o.commands);return kv(i,s.segmentGroup,a,t,r)}function Dh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function kc(n){return typeof n=="object"&&n!=null&&n.outlets}function kv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=uA(n,e,t);let a=iA(oA(s));return new $n(a,o,i)}function uA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=uA(o,e,t)}),new ve(n.segments,r)}var Ch=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dh(r[0]))throw new V(4003,!1);let i=r.find(kc);if(i&&i!==J0(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function z2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ch(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ch(t,e,r)}var Cs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function G2(n,e,t){if(n.isAbsolute)return new Cs(e,!0,0);if(!t)return new Cs(e,!1,NaN);if(t.parent===null)return new Cs(t,!0,0);let r=Dh(n.commands[0])?0:1,i=t.segments.length-1+r;return W2(t,i,n.numberOfDoubleDots)}function W2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new Cs(r,!1,i-o)}function K2(n){return kc(n[0])?n[0].outlets:{[re]:n}}function lA(n,e,t){if(n??=new ve([],{}),n.segments.length===0&&n.hasChildren())return Oc(n,e,t);let r=Q2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ve(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new ve(n.segments.slice(r.pathIndex),n.children),Oc(o,0,i)}else return r.match&&i.length===0?new ve(n.segments,{}):r.match&&!n.hasChildren()?$v(n,e,t):r.match?Oc(n,0,i):$v(n,e,t)}function Oc(n,e,t){if(t.length===0)return new ve(n.segments,{});{let r=K2(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=Oc(n.children[re],e,t);return new ve(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=lA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(n.segments,i)}}function Q2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(kc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!z0(u,l,s))return o;r+=2}else{if(!z0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function $v(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(kc(o)){let u=Y2(o.outlets);return new ve(r,u)}if(i===0&&Dh(t[0])){let u=n.segments[e];r.push(new ii(u.path,q0(t[0]))),i++;continue}let s=kc(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Dh(a)?(r.push(new ii(s,q0(a))),i+=2):(r.push(new ii(s,{})),i++)}return new ve(r,{})}function Y2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=$v(new ve([],{}),0,r))}),e}function q0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function z0(n,e,t){return n==t.path&&Un(e,t.parameters)}var Ss="imperative",Ge=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ge||{}),Wt=class{id;url;constructor(e,t){this.id=e,this.url=t}},ai=class extends Wt{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kt=class extends Wt{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(Mt||{}),Rs=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Rs||{}),Bn=class extends Wt{reason;code;type=Ge.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hn=class extends Wt{reason;code;type=Ge.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ns=class extends Wt{error;target;type=Ge.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fc=class extends Wt{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sh=class extends Wt{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ah=class extends Wt{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rh=class extends Wt{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nh=class extends Wt{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mh=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ph=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Oh=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xh=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kh=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fh=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ms=class{routerEvent;position;anchor;type=Ge.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Lc=class{},Ps=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function J2(n){return!(n instanceof Lc)&&!(n instanceof Ps)}function Z2(n,e){return n.providers&&!n._injector&&(n._injector=vs(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wn(n){return n.outlet||re}function X2(n,e){let t=n.filter(r=>wn(r)===e);return t.push(...n.filter(r=>wn(r)!==e)),t}function qc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Lh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return qc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new fo(this.rootInjector)}},fo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Lh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(B(Fe))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Hv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Hv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=qv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qv(e,this._root).map(t=>t.value)}};function Hv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Hv(n,t);if(r)return r}return null}function qv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=qv(n,t);if(r.length)return r.unshift(e),r}return[]}var Gt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ds(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Vc=class extends Vh{snapshot;constructor(e,t){super(e),this.snapshot=t,Zv(this,e)}toString(){return this.snapshot.toString()}};function dA(n){let e=eU(n),t=new Ie([new ii("",{})]),r=new Ie({}),i=new Ie({}),o=new Ie({}),s=new Ie(""),a=new qn(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new Vc(new Gt(a,[]),e)}function eU(n){let e={},t={},r={},i="",o=new uo([],e,r,i,t,re,n,null,{});return new jc("",new Gt(o,[]))}var qn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(l=>l[Hc]))??H(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>lo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>lo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&fA(i)&&(r.resolve[Hc]=i.title),r}var uo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Hc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=lo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=lo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},jc=class extends Vh{url;constructor(e,t){super(t),this.url=e,Zv(this,t)}toString(){return hA(this._root)}};function Zv(n,e){e.value._routerState=n,e.children.forEach(t=>Zv(n,t))}function hA(n){let e=n.children.length>0?` { ${n.children.map(hA).join(", ")} } `:"";return`${n.value}${e}`}function Fv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Un(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Un(e.params,t.params)||n.paramsSubject.next(t.params),S2(e.url,t.url)||n.urlSubject.next(t.url),Un(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zv(n,e){let t=Un(n.params,e.params)&&M2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||zv(n.parent,e.parent))}function fA(n){return typeof n.title=="string"||n.title===null}var pA=new U(""),Xv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Ae;deactivateEvents=new Ae;attachEvents=new Ae;detachEvents=new Ae;routerOutletData=s0(void 0);parentContexts=M(fo);location=M(vr);changeDetector=M(Ir);inputBinder=M(zc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Gv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[rn]})}return n})(),Gv=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===qn?this.route:e===fo?this.childContexts:e===pA?this.outletData:this.parent.get(e,t)}},zc=new U(""),e_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Va([r.queryParams,r.params,r.data]).pipe(bt(([o,s,a],u)=>(a=P(P(P({},o),s),a),u===0?H(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=c0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),t_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Hy({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Xd(0,"router-outlet")},dependencies:[Xv],encapsulation:2})}return n})();function n_(n){let e=n.children&&n.children.map(n_),t=e?Y(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=t_),t}function tU(n,e,t){let r=Uc(n,e._root,t?t._root:void 0);return new Vc(r,e)}function Uc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=nU(n,e,t);return new Gt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Uc(n,a)),s}}let r=rU(e.value),i=e.children.map(o=>Uc(n,o));return new Gt(r,i)}}function nU(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Uc(n,r,i);return Uc(n,r)})}function rU(n){return new qn(new Ie(n.url),new Ie(n.params),new Ie(n.queryParams),new Ie(n.fragment),new Ie(n.data),n.outlet,n.component,n)}var Os=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},gA="ngNavigationCancelingError";function Uh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=si(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mA(!1,Mt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function mA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[gA]=!0,t.cancellationCode=e,t}function iU(n){return yA(n)&&si(n.url)}function yA(n){return!!n&&n[gA]}var oU=(n,e,t,r)=>J(i=>(new Wv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Wv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ds(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ds(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ds(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Fh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new xh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Fv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Fv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Bh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},As=class{component;route;constructor(e,t){this.component=e,this.route=t}};function sU(n,e,t){let r=n._root,i=e?e._root:null;return Pc(r,i,t,[r.value])}function aU(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ks(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Qg(n)?n:e.get(n):r}function Pc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ds(e);return n.children.forEach(s=>{cU(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xc(a,t.getContext(s),i)),i}function cU(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=uU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Bh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Pc(n,e,a?a.children:null,r,i):Pc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new As(a.outlet.component,s))}else s&&xc(e,a,i),i.canActivateChecks.push(new Bh(r)),o.component?Pc(n,null,a?a.children:null,r,i):Pc(n,null,t,r,i);return i}function uU(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!co(n.url,e.url);case"pathParamsOrQueryParamsChange":return!co(n.url,e.url)||!Un(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zv(n,e)||!Un(n.queryParams,e.queryParams);case"paramsChange":default:return!zv(n,e)}}function xc(n,e,t){let r=Ds(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?xc(s,e.children.getContext(o),t):xc(s,null,t):xc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new As(e.outlet.component,i)):t.canDeactivateChecks.push(new As(null,i)):t.canDeactivateChecks.push(new As(null,i))}function Gc(n){return typeof n=="function"}function lU(n){return typeof n=="boolean"}function dU(n){return n&&Gc(n.canLoad)}function hU(n){return n&&Gc(n.canActivate)}function fU(n){return n&&Gc(n.canActivateChild)}function pU(n){return n&&Gc(n.canDeactivate)}function gU(n){return n&&Gc(n.canMatch)}function vA(n){return n instanceof sr||n?.name==="EmptyError"}var Ih=Symbol("INITIAL_VALUE");function xs(){return bt(n=>Va(n.map(e=>e.pipe(ar(1),Sg(Ih)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===Ih)return Ih;if(t===!1||mU(t))return t}return!0}),ht(e=>e!==Ih),ar(1)))}function mU(n){return si(n)||n instanceof Os}function yU(n,e){return ke(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?H(Y(P({},t),{guardsResult:!0})):vU(s,r,i,n).pipe(ke(a=>a&&lU(a)?_U(r,o,n,e):H(a)),J(a=>Y(P({},t),{guardsResult:a})))})}function vU(n,e,t,r){return be(n).pipe(ke(i=>TU(i.component,i.route,t,e,r)),cr(i=>i!==!0,!0))}function _U(n,e,t,r){return be(e).pipe(Rn(i=>Jo(IU(i.route.parent,r),EU(i.route,r),bU(n,i.path,t),wU(n,i.route,t))),cr(i=>i!==!0,!0))}function EU(n,e){return n!==null&&e&&e(new kh(n)),H(!0)}function IU(n,e){return n!==null&&e&&e(new Oh(n)),H(!0)}function wU(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return H(!0);let i=r.map(o=>ja(()=>{let s=qc(e)??t,a=ks(o,s),u=hU(a)?a.canActivate(e,n):pt(s,()=>a(e,n));return Tr(u).pipe(cr())}));return H(i).pipe(xs())}function bU(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>aU(s)).filter(s=>s!==null).map(s=>ja(()=>{let a=s.guards.map(u=>{let l=qc(s.node)??t,h=ks(u,l),p=fU(h)?h.canActivateChild(r,n):pt(l,()=>h(r,n));return Tr(p).pipe(cr())});return H(a).pipe(xs())}));return H(o).pipe(xs())}function TU(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return H(!0);let s=o.map(a=>{let u=qc(e)??i,l=ks(a,u),h=pU(l)?l.canDeactivate(n,e,t,r):pt(u,()=>l(n,e,t,r));return Tr(h).pipe(cr())});return H(s).pipe(xs())}function DU(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return H(!0);let o=i.map(s=>{let a=ks(s,n),u=dU(a)?a.canLoad(e,t):pt(n,()=>a(e,t));return Tr(u)});return H(o).pipe(xs(),_A(r))}function _A(n){return yg(Ke(e=>{if(typeof e!="boolean")throw Uh(n,e)}),J(e=>e===!0))}function CU(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return H(!0);let o=i.map(s=>{let a=ks(s,n),u=gU(a)?a.canMatch(e,t):pt(n,()=>a(e,t));return Tr(u)});return H(o).pipe(xs(),_A(r))}var Bc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},$c=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ts(n){return Yo(new Bc(n))}function SU(n){return Yo(new V(4e3,!1))}function AU(n){return Yo(mA(!1,Mt.GuardRejected))}var Kv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return H(r);if(i.numberOfChildren>1||!i.children[re])return SU(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return RU(t,i,o).pipe(J(s=>{if(s instanceof $n)throw new $c(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new $c(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new $n(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function RU(n,e,t){if(typeof n=="string")return H(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Tr(pt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var Qv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NU(n,e,t,r,i){let o=EA(n,e,t);return o.matched?(r=Z2(e,r),CU(r,e,t,i).pipe(J(s=>s===!0?o:P({},Qv)))):H(o)}function EA(n,e,t){if(e.path==="**")return MU(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},Qv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Q0)(t,n,e);if(!i)return P({},Qv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function MU(n){return{matched:!0,parameters:n.length>0?J0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function G0(n,e,t,r){return t.length>0&&xU(n,t,r)?{segmentGroup:new ve(e,OU(r,new ve(t,n.children))),slicedSegments:[]}:t.length===0&&kU(n,t,r)?{segmentGroup:new ve(n.segments,PU(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ve(n.segments,n.children),slicedSegments:t}}function PU(n,e,t,r){let i={};for(let o of t)if(Hh(n,e,o)&&!r[wn(o)]){let s=new ve([],{});i[wn(o)]=s}return P(P({},r),i)}function OU(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&wn(r)!==re){let i=new ve([],{});t[wn(r)]=i}return t}function xU(n,e,t){return t.some(r=>Hh(n,e,r)&&wn(r)!==re)}function kU(n,e,t){return t.some(r=>Hh(n,e,r))}function Hh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function FU(n,e,t){return e.length===0&&!n.children[t]}var Yv=class{};function LU(n,e,t,r,i,o,s="emptyOnly"){return new Jv(n,e,t,r,i,s,o).recognize()}var VU=31,Jv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Kv(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=G0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new Gt(r,t),o=new jc("",i),s=sA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new uo([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(J(r=>({children:r,rootSnapshot:t})),wt(r=>{if(r instanceof $c)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof Gt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return be(o).pipe(Rn(s=>{let a=r.children[s],u=X2(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Cg((s,a)=>(s.push(...a),s)),Gr(null),Dg(),ke(s=>{if(s===null)return Ts(r);let a=IA(s);return jU(a),H(a)}))}processSegment(e,t,r,i,o,s,a){return be(t).pipe(Rn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(wt(l=>{if(l instanceof Bc)return H(null);throw l}))),cr(u=>!!u),wt(u=>{if(vA(u))return FU(r,i,o)?H(new Yv):Ts(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return wn(r)!==s&&(s===re||!Hh(i,o,r))?Ts(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ts(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=EA(t,i,o);if(!u)return Ts(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>VU&&(this.allowRedirects=!1));let y=new uo(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,W0(i),wn(i),i.component??i._loadedComponent??null,i,K0(i)),C=jh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(bt(R=>this.applyRedirects.lineralizeSegments(i,R)),ke(R=>this.processSegment(e,r,t,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=NU(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(bt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new uo(m,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,W0(r),wn(r),r.component??r._loadedComponent??null,r,K0(r)),N=jh(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=G0(t,m,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(J($=>new Gt(C,$)));if(l.length===0&&k.length===0)return H(new Gt(C,[]));let G=wn(r)===o;return this.processSegment(h,l,R,k,G?re:o,!0,C).pipe(J($=>new Gt(C,$ instanceof Gt?[$]:[])))}))):Ts(t)))}getChildConfig(e,t,r){return t.children?H({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?H({routes:t._loadedRoutes,injector:t._loadedInjector}):DU(e,t,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,t).pipe(Ke(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):AU(t))):H({routes:[],injector:e})}};function jU(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function UU(n){let e=n.value.routeConfig;return e&&e.path===""}function IA(n){let e=[],t=new Set;for(let r of n){if(!UU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=IA(r.children);e.push(new Gt(r.value,i))}return e.filter(r=>!t.has(r))}function W0(n){return n.data||{}}function K0(n){return n.resolve||{}}function BU(n,e,t,r,i,o){return ke(s=>LU(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:u})=>Y(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function $U(n,e){return ke(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return H(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of wA(u))s.add(l);let a=0;return be(s).pipe(Rn(u=>o.has(u)?HU(u,r,n,e):(u.data=jh(u,u.parent,n).resolve,H(void 0))),Ke(()=>a++),Zo(1),ke(u=>a===s.size?H(t):Ot))})}function wA(n){let e=n.children.map(t=>wA(t)).flat();return[n,...e]}function HU(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!fA(i)&&(o[Hc]=i.title),ja(()=>(n.data=jh(n,n.parent,t).resolve,qU(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=P(P({},n.data),s),null)))))}function qU(n,e,t,r){let i=jv(n);if(i.length===0)return H({});let o={};return be(i).pipe(ke(s=>zU(n[s],e,t,r).pipe(cr(),Ke(a=>{if(a instanceof Os)throw Uh(new oi,a);o[s]=a}))),Zo(1),J(()=>o),wt(s=>vA(s)?Ot:Yo(s)))}function zU(n,e,t,r){let i=qc(e)??r,o=ks(n,i),s=o.resolve?o.resolve(e,t):pt(i,()=>o(e,t));return Tr(s)}function Lv(n){return bt(e=>{let t=n(e);return t?be(t).pipe(J(()=>e)):H(e)})}var r_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Hc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(bA),providedIn:"root"})}return n})(),bA=(()=>{class n extends r_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(B(B0))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ci=new U("",{providedIn:"root",factory:()=>({})}),po=new U(""),qh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(ov);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return H(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Tr(t.loadComponent()).pipe(J(DA),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Fi(()=>{this.componentLoaders.delete(t)})),i=new Qo(r,()=>new xe).pipe(Ko());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=TA(r,this.compiler,t,this.onLoadEndListener).pipe(Fi(()=>{this.childrenLoaders.delete(r)})),s=new Qo(o,()=>new xe).pipe(Ko());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TA(n,e,t,r){return Tr(n.loadChildren()).pipe(J(DA),ke(i=>i instanceof Qd||Array.isArray(i)?H(i):be(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(po,[],{optional:!0,self:!0}).flat()),{routes:s.map(n_),injector:o}}))}function GU(n){return n&&typeof n=="object"&&"default"in n}function DA(n){return GU(n)?n.default:n}var zh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(WU),providedIn:"root"})}return n})(),WU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),i_=new U(""),o_=new U("");function CA(n,e,t){let r=n.get(o_),i=n.get(Se);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),KU(n))),{onViewTransitionCreated:u}=r;return u&&pt(n,()=>u({transition:a,from:e,to:t})),s}function KU(n){return new Promise(e=>{Ky({read:()=>setTimeout(e)},{injector:n})})}var s_=new U(""),Gh=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new xe;transitionAbortWithErrorSubject=new xe;configLoader=M(qh);environmentInjector=M(Fe);destroyRef=M(kn);urlSerializer=M(ho);rootContexts=M(fo);location=M(ri);inputBindingEnabled=M(zc,{optional:!0})!==null;titleStrategy=M(r_);options=M(ci,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(zh);createViewTransition=M(i_,{optional:!0});navigationErrorHandler=M(s_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>H(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Mh(i)),r=i=>this.events.next(new Ph(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Y(P({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Ie(null),this.transitions.pipe(ht(r=>r!==null),bt(r=>{let i=!1;return H(r).pipe(bt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),Ot;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Y(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Hn(o.id,this.urlSerializer.serialize(o.rawUrl),u,Rs.IgnoredSameUrlNavigation)),o.resolve(!1),Ot}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return H(o).pipe(bt(u=>(this.events.next(new ai(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Ot:Promise.resolve(u))),BU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Y(P({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new Fc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new ai(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let C=dA(this.rootComponentType).snapshot;return this.currentTransition=r=Y(P({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:Y(P({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,H(r)}else{let u="";return this.events.next(new Hn(o.id,this.urlSerializer.serialize(o.extractedUrl),u,Rs.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ot}}),Ke(o=>{let s=new Sh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),J(o=>(this.currentTransition=r=Y(P({},o),{guards:sU(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),yU(this.environmentInjector,o=>this.events.next(o)),Ke(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Uh(this.urlSerializer,o.guardsResult);let s=new Ah(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ht(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Mt.GuardRejected),!1)),Lv(o=>{if(o.guards.canActivateChecks.length!==0)return H(o).pipe(Ke(s=>{let a=new Rh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),bt(s=>{let a=!1;return H(s).pipe($U(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Mt.NoDataFromResolver)}}))}),Ke(s=>{let a=new Nh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Lv(o=>{let s=a=>{let u=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(a.routeConfig).pipe(Ke(l=>{a.component=l}),J(()=>{})));for(let l of a.children)u.push(...s(l));return u};return Va(s(o.targetSnapshot.root)).pipe(Gr(null),ar(1))}),Lv(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?be(a).pipe(J(()=>r)):H(r)}),J(o=>{let s=tU(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Y(P({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Ke(()=>{this.events.next(new Lc)}),oU(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ar(1),Rl(new ce(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ht(()=>!i&&!r.targetRouterState),Ke(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Mt.Aborted)}))),Ke({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Rl(this.transitionAbortWithErrorSubject.pipe(Ke(o=>{throw o}))),Fi(()=>{i||this.cancelNavigationTransition(r,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),wt(o=>{if(this.destroyed)return r.resolve(!1),Ot;if(i=!0,yA(o))this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),iU(o)?this.events.next(new Ps(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ns(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=pt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Os){let{message:u,cancellationCode:l}=Uh(this.urlSerializer,a);this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ps(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Ot}))}))}cancelNavigationTransition(t,r,i){let o=new Bn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QU(n){return n!==Ss}var SA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(YU),providedIn:"root"})}return n})(),$h=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},YU=(()=>{class n extends $h{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AA=(()=>{class n{urlSerializer=M(ho);options=M(ci,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(ri);urlHandlingStrategy=M(zh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new $n;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof $n?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=dA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>M(JU),providedIn:"root"})}return n})(),JU=(()=>{class n extends AA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ai?this.updateStateMemento():t instanceof Hn?this.commitTransition(r):t instanceof Fc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Lc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Bn&&t.code!==Mt.SupersededByNewNavigation&&t.code!==Mt.Redirect?this.restoreHistory(r):t instanceof Ns?this.restoreHistory(r,!0):t instanceof Kt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=P(P({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=P(P({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wh(n,e){n.events.pipe(ht(t=>t instanceof Kt||t instanceof Bn||t instanceof Ns||t instanceof Hn),J(t=>t instanceof Kt||t instanceof Hn?0:(t instanceof Bn?t.code===Mt.Redirect||t.code===Mt.SupersededByNewNavigation:!1)?2:1),ht(t=>t!==2),ar(1)).subscribe(()=>{e()})}var ZU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Qy);stateManager=M(AA);options=M(ci,{optional:!0})||{};pendingTasks=M(gr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(Gh);urlSerializer=M(ho);location=M(ri);urlHandlingStrategy=M(zh);injector=M(Fe);_events=new xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(SA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(po,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(zc,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Bn&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Kt)this.navigated=!0;else if(r instanceof Ps){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||QU(i.source)},s);this.scheduleNavigation(a,Ss,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}J2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ss,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.injector.get(mt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(n_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=aA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return cA(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=si(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ss,null,r)}navigate(t,r={skipLocationChange:!1}){return eB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},ZU):r===!1?i=P({},XU):i=r,si(t))return $0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return $0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Wh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new V(4008,!1)}var Kh=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Fn(null);get href(){return Rt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new xe;applicationErrorHandler=M(mt);options=M(ci,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new nh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Kt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(si(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:si(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(z(bn),z(qn),pc("tabindex"),z(vn),z(St),z(En))};static \u0275dir=ye({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&sn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Er("href",i.reactiveHref(),Ty)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ni],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ni],replaceUrl:[2,"replaceUrl","replaceUrl",ni],routerLink:"routerLink"},features:[rn]})}return n})(),tB=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ae;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Kt&&this.update()})}ngAfterContentInit(){H(this.links.changes,H(null)).pipe(zr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=be(t).pipe(zr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=nB(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(z(bn),z(St),z(vn),z(Ir),z(Kh,8))};static \u0275dir=ye({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&tv(o,Kh,5),r&2){let s;nv(s=rv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[rn]})}return n})();function nB(n){return!!n.paths}var Wc=class{};var RA=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ht(t=>t instanceof Kt),Rn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=vs(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return be(i).pipe(zr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=H(null);let o=i.pipe(ke(s=>s===null?H(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return be([o,s]).pipe(zr())}else return o})}static \u0275fac=function(r){return new(r||n)(B(bn),B(Fe),B(Wc),B(qh))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NA=new U(""),rB=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ss;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ai?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Kt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Hn&&t.code===Rs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ms&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>v(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ms(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Uy()};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function iB(n,...e){return Nn([{provide:po,multi:!0,useValue:n},[],{provide:qn,useFactory:MA,deps:[bn]},{provide:yc,multi:!0,useFactory:PA},e.map(t=>t.\u0275providers)])}function MA(n){return n.routerState.root}function Kc(n,e){return{\u0275kind:n,\u0275providers:e}}function PA(){let n=M(Ft);return e=>{let t=n.get(oo);if(e!==t.components[0])return;let r=n.get(bn),i=n.get(OA);n.get(c_)===1&&r.initialNavigation(),n.get(FA,null,{optional:!0})?.setUpPreloading(),n.get(NA,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var OA=new U("",{factory:()=>new xe}),c_=new U("",{providedIn:"root",factory:()=>1});function xA(){let n=[{provide:c_,useValue:0},Zd(()=>{let e=M(Ft);return e.get(gv,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(bn),o=e.get(OA);Wh(i,()=>{r(!0)}),e.get(Gh).afterPreactivation=()=>(r(!0),o.closed?H(void 0):o),i.initialNavigation()}))})];return Kc(2,n)}function kA(){let n=[Zd(()=>{M(bn).setUpLocationChangeListener()}),{provide:c_,useValue:2}];return Kc(3,n)}var FA=new U("");function LA(n){return Kc(0,[{provide:FA,useExisting:RA},{provide:Wc,useExisting:n}])}function VA(){return Kc(8,[e_,{provide:zc,useExisting:e_}])}function jA(n){ro("NgRouterViewTransitions");let e=[{provide:i_,useValue:CA},{provide:o_,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Kc(9,e)}var UA=[ri,{provide:ho,useClass:oi},bn,fo,{provide:qn,useFactory:MA,deps:[bn]},qh,[]],oB=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[UA,[],{provide:po,multi:!0,useValue:t},[],r?.errorHandler?{provide:s_,useValue:r.errorHandler}:[],{provide:ci,useValue:r||{}},r?.useHash?aB():cB(),sB(),r?.preloadingStrategy?LA(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?uB(r):[],r?.bindToComponentInputs?VA().\u0275providers:[],r?.enableViewTransitions?jA().\u0275providers:[],lB()]}}static forChild(t){return{ngModule:n,providers:[{provide:po,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=on({type:n});static \u0275inj=qt({})}return n})();function sB(){return{provide:NA,useFactory:()=>{let n=M(v0),e=M(Re),t=M(ci),r=M(Gh),i=M(ho);return t.scrollOffset&&n.setOffset(t.scrollOffset),new rB(i,r,n,e,t)}}}function aB(){return{provide:En,useClass:vv}}function cB(){return{provide:En,useClass:sh}}function uB(n){return[n.initialNavigation==="disabled"?kA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?xA().\u0275providers:[]]}var a_=new U("");function lB(){return[{provide:a_,useFactory:PA},{provide:yc,multi:!0,useExisting:a_}]}var Fs=class n{currentCurrency=new Ie({code:"USD",symbol:"$",name:"US Dollar",rate:1});currency$=this.currentCurrency.asObservable();currencies=[{code:"USD",symbol:"$",name:"US Dollar",rate:1},{code:"EUR",symbol:"\u20AC",name:"Euro",rate:.85},{code:"TRY",symbol:"\u20BA",name:"Turkish Lira",rate:40}];pricingConfig={basePrices:{fiction:12.99,programming:45.99,science:35.99,history:18.99,biography:22.99,business:28.99,philosophy:16.99,psychology:24.99,art:29.99,health:19.99,education:39.99,religion:15.99,general:14.99},modifiers:{bestseller:1.3,featured:1.15,newBook:1.1,pageCount:{under200:.8,between200And400:1,between400And600:1.2,over600:1.4},publishedYear:{current:1.2,recent:1.1,older:.9},authorPopularity:{famous:1.5,known:1.2,unknown:1}}};constructor(){let e=localStorage.getItem("selectedCurrency");if(e){let t=this.currencies.find(r=>r.code===e);t&&this.currentCurrency.next(t)}}calculateBookPrice(e){let t=e.category?.toLowerCase()||"general",r=this.pricingConfig.basePrices[t]||this.pricingConfig.basePrices.general;if(e.isBestseller&&(r*=this.pricingConfig.modifiers.bestseller),e.isFeatured&&(r*=this.pricingConfig.modifiers.featured),e.isNew&&(r*=this.pricingConfig.modifiers.newBook),e.pageCount&&(e.pageCount<200?r*=this.pricingConfig.modifiers.pageCount.under200:e.pageCount<=400?r*=this.pricingConfig.modifiers.pageCount.between200And400:e.pageCount<=600?r*=this.pricingConfig.modifiers.pageCount.between400And600:r*=this.pricingConfig.modifiers.pageCount.over600),e.publishedDate){let i=new Date(e.publishedDate).getFullYear(),s=new Date().getFullYear()-i;s===0?r*=this.pricingConfig.modifiers.publishedYear.current:s<=3?r*=this.pricingConfig.modifiers.publishedYear.recent:r*=this.pricingConfig.modifiers.publishedYear.older}if(e.author){let i=["Stephen King","J.K. Rowling","Dan Brown","John Grisham","Agatha Christie"],o=["Malcolm Gladwell","Yuval Noah Harari","Jordan Peterson"];i.some(s=>e.author.includes(s))?r*=this.pricingConfig.modifiers.authorPopularity.famous:o.some(s=>e.author.includes(s))&&(r*=this.pricingConfig.modifiers.authorPopularity.known)}return Math.round(r*100)/100}convertPrice(e){let t=this.currentCurrency.value,r=e*t.rate;return Math.round(r*100)/100}formatPrice(e){let t=this.currentCurrency.value,r=this.convertPrice(e);switch(t.code){case"EUR":return`${r.toFixed(2)}${t.symbol}`;case"TRY":return`${r.toFixed(2)} ${t.symbol}`;default:return`${t.symbol}${r.toFixed(2)}`}}getCurrencies(){return this.currencies}getCurrentCurrency(){return this.currentCurrency.value}setCurrency(e){let t=this.currencies.find(r=>r.code===e);t&&(this.currentCurrency.next(t),localStorage.setItem("selectedCurrency",e))}updateExchangeRates(e){this.currencies.forEach(r=>{e[r.code]&&(r.rate=e[r.code])});let t=this.getCurrentCurrency();e[t.code]&&this.currentCurrency.next(Y(P({},t),{rate:e[t.code]}))}getPricingConfig(){return P({},this.pricingConfig)}updatePricingConfig(e){this.pricingConfig=P(P({},this.pricingConfig),e),localStorage.setItem("pricingConfig",JSON.stringify(this.pricingConfig))}resetToDefaults(){this.pricingConfig={basePrices:{fiction:12.99,programming:45.99,science:35.99,history:18.99,biography:22.99,business:28.99,philosophy:16.99,psychology:24.99,art:29.99,health:19.99,education:39.99,religion:15.99,general:14.99},modifiers:{bestseller:1.3,featured:1.15,newBook:1.1,pageCount:{under200:.8,between200And400:1,between400And600:1.2,over600:1.4},publishedYear:{current:1.2,recent:1.1,older:.9},authorPopularity:{famous:1.5,known:1.2,unknown:1}}},localStorage.removeItem("pricingConfig")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qh=class n{constructor(e,t){this.http=e;this.pricingService=t;console.log("OpenLibraryService initialized")}baseUrl="https://openlibrary.org";searchUrl=`${this.baseUrl}/search.json`;coversUrl="https://covers.openlibrary.org";searchBooks(e,t=40,r=0,i){let o=new In().set("q",e).set("limit",t.toString()).set("offset",r.toString()).set("fields","key,title,author_name,author_key,first_publish_year,publisher,isbn,cover_i,cover_edition_key,edition_count,subject,language,has_fulltext,public_scan_b,ia,ebook_access,ebook_count_i,publish_date,publish_year,ratings_average,ratings_count,want_to_read_count,currently_reading_count,already_read_count");return i&&(o=o.set("sort",i)),this.http.get(this.searchUrl,{params:o}).pipe(wt(s=>(console.error("Error searching books:",s),H({start:0,num_found:0,numFound:0,numFoundExact:!0,docs:[]}))))}searchBySubject(e,t=40,r=0,i){return this.searchBooks(`subject:${e}`,t,r,i)}searchByAuthor(e,t=40,r=0){return this.searchBooks(`author:${e}`,t,r)}getRandomBooksBySubject(e,t=10){return this.searchBySubject(e,t,0,"random")}getPopularBooks(e=40){return this.searchBooks("*",e,0,"rating desc")}getNewReleases(e=40){return this.searchBooks("*",e,0,"new")}convertToBook(e){let t=e.key?.replace("/works/","")||e.key||Math.random().toString(36).substr(2,9),r=e.first_publish_year||parseInt(e.publish_date?.[0]||"2000"),i=this.extractCategory(e.subject),o=(e.ratings_count||0)>100,s=r>2020,a=e.author_name?.join(", ")||"Unknown Author",u=this.pricingService.calculateBookPrice({category:i,isBestseller:o,isFeatured:!1,isNew:s,pageCount:300,publishedDate:r.toString(),author:a});return{id:t,title:e.title||"Unknown Title",author:a,isbn:e.isbn?.[0]||"",publishedDate:r.toString(),publisher:e.publisher?.[0]||"",pageCount:300,category:i,description:"",coverImage:this.getCoverImageUrl(e.cover_i,e.cover_edition_key),price:u,originalPrice:o?u*1.2:void 0,rating:e.ratings_average||0,reviewCount:e.ratings_count||0,language:e.language?.[0]||"en",format:e.has_fulltext?"Digital":"Physical",availability:e.ebook_access==="public"?"Available":"Limited",tags:e.subject?.slice(0,5)||[],isFeatured:!1,isBestseller:o,isNew:s,createdAt:new Date,updatedAt:new Date}}extractCategory(e){if(!e||e.length===0)return"General";let t={fiction:"Fiction",fantasy:"Fiction","science fiction":"Fiction",mystery:"Mystery",romance:"Romance",biography:"Biography",history:"History",science:"Science","self-help":"Self-Help",business:"Business",psychology:"Psychology",philosophy:"Philosophy",religion:"Religion",politics:"Politics",travel:"Travel",cooking:"Cooking",art:"Arts",music:"Arts",sports:"Sports",health:"Health",medicine:"Science",technology:"Technology",computer:"Technology",education:"Education",children:"Children",juvenile:"Children","young adult":"Young Adult",poetry:"Poetry",drama:"Drama",humor:"Humor",thriller:"Mystery",crime:"Mystery",horror:"Horror"};for(let r of e){let i=r.toLowerCase();for(let[o,s]of Object.entries(t))if(i.includes(o))return s}return"General"}getCoverImageUrl(e,t,r="M"){return e?`${this.coversUrl}/b/id/${e}-${r}.jpg`:t?`${this.coversUrl}/b/olid/${t}-${r}.jpg`:"assets/images/no-book-cover.jpg"}getAuthorImageUrl(e,t="M"){return`${this.coversUrl}/a/olid/${e}-${t}.jpg`}convertSearchResponseToBooks(e){return e.docs.map(t=>this.convertToBook(t))}static \u0275fac=function(t){return new(t||n)(B(_h),B(Fs))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var $A=class n{constructor(e,t){this.openLibraryService=e;this.pricingService=t}booksSubject=new Ie([]);books$=this.booksSubject.asObservable();currentBooks=[];getReliableCoverUrl(e){return e.includes("assets/images/no-book-cover.jpg")?e:e.includes("covers.openlibrary.org")?e.replace("http://","https://"):e}getAlternativeCoverUrls(){return{"The Great Gatsby":["https://covers.openlibrary.org/b/isbn/9780743273565-M.jpg","https://covers.openlibrary.org/b/olid/OL82563W-M.jpg","assets/images/no-book-cover.jpg"],"To Kill a Mockingbird":["https://covers.openlibrary.org/b/isbn/9780061120084-M.jpg","https://covers.openlibrary.org/b/olid/OL5735363W-M.jpg","assets/images/no-book-cover.jpg"],1984:["https://covers.openlibrary.org/b/isbn/9780451524935-M.jpg","https://covers.openlibrary.org/b/olid/OL14934393M-M.jpg","assets/images/no-book-cover.jpg"]}}loadBooks(){return v(this,null,function*(){try{console.log("Starting to load books from Open Library API..."),this.loadFallbackBooks();let e=this.openLibraryService.getPopularBooks(20),t=this.openLibraryService.searchBooks("*",20,0,"random"),[r,i]=yield Promise.all([e.toPromise(),t.toPromise()]),o=[];if(r){let s=this.openLibraryService.convertSearchResponseToBooks(r);o.push(...s)}if(i){let s=this.openLibraryService.convertSearchResponseToBooks(i);o.push(...s)}if(o.length>0){let s=o.filter((a,u,l)=>u===l.findIndex(h=>h.openLibraryId===a.openLibraryId));console.log(`Total unique books loaded from API: ${s.length}`),this.currentBooks=s,this.booksSubject.next(this.currentBooks)}else console.log("No books loaded from API, keeping fallback books")}catch(e){console.error("Error loading books from Open Library:",e)}})}searchBooks(e){return this.openLibraryService.searchBooks(e,40).pipe(J(t=>t&&t.docs?this.openLibraryService.convertSearchResponseToBooks(t):[]),wt(t=>(console.error("Error searching books:",t),H([]))))}getBooksByCategory(e){return this.openLibraryService.searchBySubject(e.toLowerCase(),40).pipe(J(t=>t&&t.docs?this.openLibraryService.convertSearchResponseToBooks(t):[]),wt(t=>(console.error("Error getting books by category:",t),H([]))))}getRandomFeaturedBooks(e=6){return v(this,null,function*(){try{let t=["fiction","mystery","science","history","biography","romance"],r=t[Math.floor(Math.random()*t.length)],i=yield this.openLibraryService.getRandomBooksBySubject(r,e*2).toPromise();if(i&&i.docs){let o=this.openLibraryService.convertSearchResponseToBooks(i);return this.shuffleArray(o).slice(0,e).map(s=>Y(P({},s),{isFeatured:!0}))}}catch(t){console.error("Error getting random featured books:",t)}return this.getFallbackBooks().slice(0,e)})}getBookById(e){let t=this.currentBooks.find(r=>r.id===e);return H(t||null)}getAllBooks(){return this.books$}addBook(e){return console.log("Add book functionality - would integrate with backend"),H(e)}updateBook(e){return console.log("Update book functionality - would integrate with backend"),H(e)}deleteBook(e){return console.log("Delete book functionality - would integrate with backend"),H(!0)}importBookFromOpenLibrary(e){let t=this.openLibraryService.convertToBook(e);return console.log("Importing book from Open Library:",t),H(t)}calculateAutomatedPrice(e){return this.pricingService.calculateBookPrice({category:e.category,isBestseller:e.isBestseller,isFeatured:e.isFeatured,isNew:e.isNew,pageCount:e.pageCount,publishedDate:e.publishedDate,author:e.author})}formatPrice(e){return this.pricingService.formatPrice(e)}shuffleArray(e){let t=[...e];for(let r=t.length-1;r>0;r--){let i=Math.floor(Math.random()*(r+1));[t[r],t[i]]=[t[i],t[r]]}return t}loadFallbackBooks(){let e=this.getFallbackBooks();this.currentBooks=e,this.booksSubject.next(this.currentBooks),console.log(`Loaded ${e.length} fallback books`)}getFallbackBooks(){return[{id:"fallback-1",openLibraryId:"OL82563W",title:"The Great Gatsby",author:"F. Scott Fitzgerald",description:"A classic American novel set in the Jazz Age.",category:"Fiction",price:12.99,originalPrice:15.99,coverImage:"https://covers.openlibrary.org/b/id/8225261-M.jpg",rating:4.2,reviewCount:1500,stock:25,isActive:!0,isFeatured:!0,isBestseller:!0,isNew:!1,publishedDate:"1925-04-10",pageCount:180,createdAt:new Date,updatedAt:new Date,tags:["classic","american-literature","jazz-age"]},{id:"fallback-2",openLibraryId:"OL5735363W",title:"To Kill a Mockingbird",author:"Harper Lee",description:"A gripping tale of racial injustice and childhood innocence.",category:"Fiction",price:14.99,originalPrice:18.99,coverImage:"https://covers.openlibrary.org/b/id/8227691-M.jpg",rating:4.5,reviewCount:2100,stock:18,isActive:!0,isFeatured:!1,isBestseller:!0,isNew:!1,publishedDate:"1960-07-11",pageCount:376,createdAt:new Date,updatedAt:new Date,tags:["classic","social-justice","coming-of-age"]},{id:"fallback-3",openLibraryId:"OL14934393M",title:"1984",author:"George Orwell",description:"A dystopian social science fiction novel and cautionary tale.",category:"Fiction",price:13.99,originalPrice:16.99,coverImage:"https://covers.openlibrary.org/b/id/7222246-M.jpg",rating:4.3,reviewCount:2800,stock:30,isActive:!0,isFeatured:!0,isBestseller:!1,isNew:!1,publishedDate:"1949-06-08",pageCount:328,createdAt:new Date,updatedAt:new Date,tags:["dystopian","political","classic"]},{id:"fallback-4",openLibraryId:"OL8509161M",title:"Clean Code",author:"Robert C. Martin",description:"A handbook of agile software craftsmanship.",category:"Programming",price:39.99,originalPrice:49.99,coverImage:"https://covers.openlibrary.org/b/id/8509161-M.jpg",rating:4.6,reviewCount:890,stock:15,isActive:!0,isFeatured:!0,isBestseller:!1,isNew:!1,publishedDate:"2008-08-01",pageCount:464,createdAt:new Date,updatedAt:new Date,tags:["programming","software-engineering","best-practices"]},{id:"fallback-5",openLibraryId:"OL8494321M",title:"Sapiens",author:"Yuval Noah Harari",description:"A brief history of humankind.",category:"History",price:18.99,originalPrice:24.99,coverImage:"https://covers.openlibrary.org/b/id/8494321-M.jpg",rating:4.4,reviewCount:1200,stock:22,isActive:!0,isFeatured:!1,isBestseller:!0,isNew:!1,publishedDate:"2014-09-04",pageCount:512,createdAt:new Date,updatedAt:new Date,tags:["history","anthropology","evolution"]},{id:"fallback-6",openLibraryId:"OL8225261M",title:"JavaScript: The Good Parts",author:"Douglas Crockford",description:"Essential JavaScript techniques and best practices.",category:"Programming",price:29.99,originalPrice:35.99,coverImage:"https://covers.openlibrary.org/b/id/8225261-M.jpg",rating:4.1,reviewCount:650,stock:12,isActive:!0,isFeatured:!1,isBestseller:!1,isNew:!0,publishedDate:"2023-01-15",pageCount:176,createdAt:new Date,updatedAt:new Date,tags:["programming","javascript","web-development"]}].map(t=>Y(P({},t),{price:this.calculateAutomatedPrice(t),originalPrice:void 0}))}getBestsellerBooks(e=5){return v(this,null,function*(){try{let t=yield this.openLibraryService.searchBooks("*",e*2,0,"rating desc").toPromise();if(t&&t.docs)return this.openLibraryService.convertSearchResponseToBooks(t).slice(0,e).map(i=>Y(P({},i),{isBestseller:!0}))}catch(t){console.error("Error getting bestseller books:",t)}return this.getFallbackBooks().filter(t=>t.isBestseller).slice(0,e)})}getNewArrivalBooks(e=4){return v(this,null,function*(){try{let t=yield this.openLibraryService.getNewReleases(e*2).toPromise();if(t&&t.docs)return this.openLibraryService.convertSearchResponseToBooks(t).slice(0,e).map(i=>Y(P({},i),{isNew:!0}))}catch(t){console.error("Error getting new arrival books:",t)}return this.getFallbackBooks().slice(0,e)})}static \u0275fac=function(t){return new(t||n)(B(Qh),B(Fs))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var HA=()=>{};var GA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},hB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},WA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(GA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new l_;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},l_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},fB=function(n){let e=GA(n);return WA.encodeByteArray(e,!0)},Yc=function(n){return fB(n).replace(/\./g,"")},Jh=function(n){try{return WA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var pB=()=>KA().__FIREBASE_DEFAULTS__,gB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Jh(n[1]);return e&&JSON.parse(e)},Zh=()=>{try{return HA()||pB()||gB()||mB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},h_=n=>{var e,t;return(t=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},QA=n=>{let e=h_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},f_=()=>{var n;return(n=Zh())===null||n===void 0?void 0:n.config},p_=n=>{var e;return(e=Zh())===null||e===void 0?void 0:e[`_${n}`]};var Yh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ui(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Xh(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function YA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Yc(JSON.stringify(t)),Yc(JSON.stringify(s)),""].join(".")}var Qc={};function yB(){let n={prod:[],emulator:[]};for(let e of Object.keys(Qc))Qc[e]?n.emulator.push(e):n.prod.push(e);return n}function vB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var qA=!1;function ef(n,e){if(typeof window>"u"||typeof document>"u"||!ui(window.location.host)||Qc[n]===e||Qc[n]||qA)return;Qc[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=yB().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{qA=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=vB(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),k=t("preprendIcon"),G=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let $=m.element;a($),h(R,N);let pe=l();u(G,k),$.append(G,C,R,pe),document.body.appendChild($)}o?(C.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function _B(){var n;let e=(n=Zh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tf(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eR(){let n=Ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tR(){return!_B()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jc(){try{return typeof indexedDB=="object"}catch{return!1}}function nf(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function nR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var EB="FirebaseError",st=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=EB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}},Qt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?IB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new st(i,a,r)}};function IB(n,e){return n.replace(wB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var wB=/\{\$([^}]+)}/g;function rR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function cn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(zA(o)&&zA(s)){if(!cn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function zA(n){return n!==null&&typeof n=="object"}function Zc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ls(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Vs(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function iR(n,e){let t=new d_(n,e);return t.subscribe.bind(t)}var d_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=u_),i.error===void 0&&(i.error=u_),i.complete===void 0&&(i.complete=u_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function u_(){}var TB=1e3,DB=2,CB=4*60*60*1e3,SB=.5;function g_(n,e=TB,t=DB){let r=e*Math.pow(t,n),i=Math.round(SB*r*(Math.random()-.5)*2);return Math.min(CB,r+i)}function Xe(n){return n&&n._delegate?n._delegate:n}var et=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var go="[DEFAULT]";var m_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Yh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RB(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AB(n){return n===go?void 0:n}function RB(n){return n.instantiationMode==="EAGER"}var rf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new m_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var NB=[],de=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(de||{}),MB={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},PB=de.INFO,OB={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},xB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=OB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zn=class{constructor(e){this.name=e,this._logLevel=PB,this._logHandler=xB,this._userLogHandler=null,NB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var kB=(n,e)=>e.some(t=>n instanceof t),oR,sR;function FB(){return oR||(oR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LB(){return sR||(sR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var aR=new WeakMap,v_=new WeakMap,cR=new WeakMap,y_=new WeakMap,E_=new WeakMap;function VB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Gn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&aR.set(t,n)}).catch(()=>{}),E_.set(e,n),e}function jB(n){if(v_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});v_.set(n,e)}var __={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return v_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uR(n){__=n(__)}function UB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(of(this),e,...t);return cR.set(r,e.sort?e.sort():[e]),Gn(r)}:LB().includes(n)?function(...e){return n.apply(of(this),e),Gn(aR.get(this))}:function(...e){return Gn(n.apply(of(this),e))}}function BB(n){return typeof n=="function"?UB(n):(n instanceof IDBTransaction&&jB(n),kB(n,FB())?new Proxy(n,__):n)}function Gn(n){if(n instanceof IDBRequest)return VB(n);if(y_.has(n))return y_.get(n);let e=BB(n);return e!==n&&(y_.set(n,e),E_.set(e,n)),e}var of=n=>E_.get(n);function sf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Gn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Gn(s.result),u.oldVersion,u.newVersion,Gn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var $B=["get","getKey","getAll","getAllKeys","count"],HB=["put","add","delete","clear"],I_=new Map;function lR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(I_.get(e))return I_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=HB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$B.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return I_.set(e,o),o}uR(n=>Y(P({},n),{get:(e,t,r)=>lR(e,t)||n.get(e,t,r),has:(e,t)=>!!lR(e,t)||n.has(e,t)}));var b_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function qB(n){let e=n.getComponent();return e?.type==="VERSION"}var T_="@firebase/app",dR="0.13.2";var Dr=new zn("@firebase/app"),zB="@firebase/app-compat",GB="@firebase/analytics-compat",WB="@firebase/analytics",KB="@firebase/app-check-compat",QB="@firebase/app-check",YB="@firebase/auth",JB="@firebase/auth-compat",ZB="@firebase/database",XB="@firebase/data-connect",e$="@firebase/database-compat",t$="@firebase/functions",n$="@firebase/functions-compat",r$="@firebase/installations",i$="@firebase/installations-compat",o$="@firebase/messaging",s$="@firebase/messaging-compat",a$="@firebase/performance",c$="@firebase/performance-compat",u$="@firebase/remote-config",l$="@firebase/remote-config-compat",d$="@firebase/storage",h$="@firebase/storage-compat",f$="@firebase/firestore",p$="@firebase/ai",g$="@firebase/firestore-compat",m$="firebase",y$="11.10.0";var D_="[DEFAULT]",v$={[T_]:"fire-core",[zB]:"fire-core-compat",[WB]:"fire-analytics",[GB]:"fire-analytics-compat",[QB]:"fire-app-check",[KB]:"fire-app-check-compat",[YB]:"fire-auth",[JB]:"fire-auth-compat",[ZB]:"fire-rtdb",[XB]:"fire-data-connect",[e$]:"fire-rtdb-compat",[t$]:"fire-fn",[n$]:"fire-fn-compat",[r$]:"fire-iid",[i$]:"fire-iid-compat",[o$]:"fire-fcm",[s$]:"fire-fcm-compat",[a$]:"fire-perf",[c$]:"fire-perf-compat",[u$]:"fire-rc",[l$]:"fire-rc-compat",[d$]:"fire-gcs",[h$]:"fire-gcs-compat",[f$]:"fire-fst",[g$]:"fire-fst-compat",[p$]:"fire-vertex","fire-js":"fire-js",[m$]:"fire-js-all"};var af=new Map,_$=new Map,C_=new Map;function hR(n,e){try{n.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ut(n){let e=n.name;if(C_.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;C_.set(e,n);for(let t of af.values())hR(t,n);for(let t of _$.values())hR(t,n);return!0}function Tn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Bt(n){return n==null?!1:n.settings!==void 0}var E$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new Qt("app","Firebase",E$);var S_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}};var di=y$;function N_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:D_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(t||(t=f_()),!t)throw li.create("no-options");let o=af.get(i);if(o){if(cn(t,o.options)&&cn(r,o.config))return o;throw li.create("duplicate-app",{appName:i})}let s=new rf(i);for(let u of C_.values())s.addComponent(u);let a=new S_(t,r,s);return af.set(i,a),a}function mo(n=D_){let e=af.get(n);if(!e&&n===D_&&f_())return N_();if(!e)throw li.create("no-app",{appName:n});return e}function at(n,e,t){var r;let i=(r=v$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(a.join(" "));return}Ut(new et(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var I$="firebase-heartbeat-database",w$=1,Xc="firebase-heartbeat-store",w_=null;function mR(){return w_||(w_=sf(I$,w$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xc)}catch(t){console.warn(t)}}}}).catch(n=>{throw li.create("idb-open",{originalErrorMessage:n.message})})),w_}function b$(n){return v(this,null,function*(){try{let t=(yield mR()).transaction(Xc),r=yield t.objectStore(Xc).get(yR(n));return yield t.done,r}catch(e){if(e instanceof st)Dr.warn(e.message);else{let t=li.create("idb-get",{originalErrorMessage:e?.message});Dr.warn(t.message)}}})}function fR(n,e){return v(this,null,function*(){try{let r=(yield mR()).transaction(Xc,"readwrite");yield r.objectStore(Xc).put(e,yR(n)),yield r.done}catch(t){if(t instanceof st)Dr.warn(t.message);else{let r=li.create("idb-set",{originalErrorMessage:t?.message});Dr.warn(r.message)}}})}function yR(n){return`${n.name}!${n.options.appId}`}var T$=1024,D$=30,A_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new R_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=pR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>D$){let s=S$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Dr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=pR(),{heartbeatsToSend:r,unsentEntries:i}=C$(this._heartbeatsCache.heartbeats),o=Yc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Dr.warn(t),""}})}};function pR(){return new Date().toISOString().substring(0,10)}function C$(n,e=T$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),gR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var R_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Jc()?nf().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield b$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return fR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return fR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function gR(n){return Yc(JSON.stringify({version:2,heartbeats:n})).length}function S$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function A$(n){Ut(new et("platform-logger",e=>new b_(e),"PRIVATE")),Ut(new et("heartbeat",e=>new A_(e),"PRIVATE")),at(T_,dR,n),at(T_,dR,"esm2017"),at("fire-js","")}A$("");var vR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_R={};var Cr,M_;(function(){var n;function e(b,_){function I(){}I.prototype=_.prototype,b.D=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(w,T,S){for(var E=Array(arguments.length-2),rr=2;rr<arguments.length;rr++)E[rr-2]=arguments[rr];return _.prototype[T].apply(w,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);var w=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)w[T]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(T=0;16>T;++T)w[T]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],T=b.g[2];var S=b.g[3],E=_+(S^I&(T^S))+w[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=S+(T^_&(I^T))+w[1]+3905402710&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(I^S&(_^I))+w[2]+606105819&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(_^T&(S^_))+w[3]+3250441966&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(S^I&(T^S))+w[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(T^_&(I^T))+w[5]+1200080426&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(I^S&(_^I))+w[6]+2821735955&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(_^T&(S^_))+w[7]+4249261313&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(S^I&(T^S))+w[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(T^_&(I^T))+w[9]+2336552879&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(I^S&(_^I))+w[10]+4294925233&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(_^T&(S^_))+w[11]+2304563134&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(S^I&(T^S))+w[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=S+(T^_&(I^T))+w[13]+4254626195&4294967295,S=_+(E<<12&4294967295|E>>>20),E=T+(I^S&(_^I))+w[14]+2792965006&4294967295,T=S+(E<<17&4294967295|E>>>15),E=I+(_^T&(S^_))+w[15]+1236535329&4294967295,I=T+(E<<22&4294967295|E>>>10),E=_+(T^S&(I^T))+w[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(_^I))+w[6]+3225465664&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(S^_))+w[11]+643717713&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(T^S))+w[0]+3921069994&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(I^T))+w[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(_^I))+w[10]+38016083&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(S^_))+w[15]+3634488961&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(T^S))+w[4]+3889429448&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(I^T))+w[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(_^I))+w[14]+3275163606&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(S^_))+w[3]+4107603335&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(T^S))+w[8]+1163531501&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(T^S&(I^T))+w[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=S+(I^T&(_^I))+w[2]+4243563512&4294967295,S=_+(E<<9&4294967295|E>>>23),E=T+(_^I&(S^_))+w[7]+1735328473&4294967295,T=S+(E<<14&4294967295|E>>>18),E=I+(S^_&(T^S))+w[12]+2368359562&4294967295,I=T+(E<<20&4294967295|E>>>12),E=_+(I^T^S)+w[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^T)+w[8]+2272392833&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^I)+w[11]+1839030562&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^_)+w[14]+4259657740&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^S)+w[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^T)+w[4]+1272893353&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^I)+w[7]+4139469664&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^_)+w[10]+3200236656&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^S)+w[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^T)+w[0]+3936430074&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^I)+w[3]+3572445317&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^_)+w[6]+76029189&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(I^T^S)+w[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=S+(_^I^T)+w[12]+3873151461&4294967295,S=_+(E<<11&4294967295|E>>>21),E=T+(S^_^I)+w[15]+530742520&4294967295,T=S+(E<<16&4294967295|E>>>16),E=I+(T^S^_)+w[2]+3299628645&4294967295,I=T+(E<<23&4294967295|E>>>9),E=_+(T^(I|~S))+w[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~T))+w[7]+1126891415&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~I))+w[14]+2878612391&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~_))+w[5]+4237533241&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~S))+w[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~T))+w[3]+2399980690&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~I))+w[10]+4293915773&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~_))+w[1]+2240044497&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~S))+w[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~T))+w[15]+4264355552&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~I))+w[6]+2734768916&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~_))+w[13]+1309151649&4294967295,I=T+(E<<21&4294967295|E>>>11),E=_+(T^(I|~S))+w[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=S+(I^(_|~T))+w[11]+3174756917&4294967295,S=_+(E<<10&4294967295|E>>>22),E=T+(_^(S|~I))+w[2]+718787259&4294967295,T=S+(E<<15&4294967295|E>>>17),E=I+(S^(T|~_))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var I=_-this.blockSize,w=this.B,T=this.h,S=0;S<_;){if(T==0)for(;S<=I;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<_;)if(w[T++]=b.charCodeAt(S++),T==this.blockSize){i(this,w),T=0;break}}else for(;S<_;)if(w[T++]=b[S++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var I=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=I&255,I/=256;for(this.u(b),b=Array(16),_=I=0;4>_;++_)for(var w=0;32>w;w+=8)b[I++]=this.g[_]>>>w&255;return b};function o(b,_){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function s(b,_){this.h=_;for(var I=[],w=!0,T=b.length-1;0<=T;T--){var S=b[T]|0;w&&S==_||(I[T]=S,w=!1)}this.g=I}var a={};function u(b){return-128<=b&&128>b?o(b,function(_){return new s([_|0],0>_?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return R(l(-b));for(var _=[],I=1,w=0;b>=I;w++)_[w]=b/I|0,I*=4294967296;return new s(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return R(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),w=p,T=0;T<b.length;T+=8){var S=Math.min(8,b.length-T),E=parseInt(b.substring(T,T+S),_);8>S?(S=l(Math.pow(_,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-R(this).m();for(var b=0,_=1,I=0;I<this.g.length;I++){var w=this.i(I);b+=(0<=w?w:4294967296+w)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(N(this))return"-"+R(this).toString(b);for(var _=l(Math.pow(b,6)),I=this,w="";;){var T=pe(I,_).g;I=k(I,T.j(_));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=T,C(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function N(b){return b.h==-1}n.l=function(b){return b=k(this,b),N(b)?-1:C(b)?0:1};function R(b){for(var _=b.g.length,I=[],w=0;w<_;w++)I[w]=~b.g[w];return new s(I,~b.h).add(m)}n.abs=function(){return N(this)?R(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],w=0,T=0;T<=_;T++){var S=w+(this.i(T)&65535)+(b.i(T)&65535),E=(S>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);w=E>>>16,S&=65535,E&=65535,I[T]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(b,_){return b.add(R(_))}n.j=function(b){if(C(this)||C(b))return p;if(N(this))return N(b)?R(this).j(R(b)):R(R(this).j(b));if(N(b))return R(this.j(R(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var _=this.g.length+b.g.length,I=[],w=0;w<2*_;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<b.g.length;T++){var S=this.i(w)>>>16,E=this.i(w)&65535,rr=b.i(T)>>>16,ya=b.i(T)&65535;I[2*w+2*T]+=E*ya,G(I,2*w+2*T),I[2*w+2*T+1]+=S*ya,G(I,2*w+2*T+1),I[2*w+2*T+1]+=E*rr,G(I,2*w+2*T+1),I[2*w+2*T+2]+=S*rr,G(I,2*w+2*T+2)}for(w=0;w<_;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=_;w<2*_;w++)I[w]=0;return new s(I,0)};function G(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function $(b,_){this.g=b,this.h=_}function pe(b,_){if(C(_))throw Error("division by zero");if(C(b))return new $(p,p);if(N(b))return _=pe(R(b),_),new $(R(_.g),R(_.h));if(N(_))return _=pe(b,R(_)),new $(R(_.g),_.h);if(30<b.g.length){if(N(b)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=_;0>=w.l(b);)I=He(I),w=He(w);var T=le(I,1),S=le(w,1);for(w=le(w,2),I=le(I,2);!C(w);){var E=S.add(w);0>=E.l(b)&&(T=T.add(I),S=E),w=le(w,1),I=le(I,1)}return _=k(b,T.j(_)),new $(T,_)}for(T=p;0<=b.l(_);){for(I=Math.max(1,Math.floor(b.m()/_.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(_);N(E)||0<E.l(b);)I-=w,S=l(I),E=S.j(_);C(S)&&(S=m),T=T.add(S),b=k(b,E)}return new $(T,b)}n.A=function(b){return pe(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)&b.i(w);return new s(I,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)|b.i(w);return new s(I,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],w=0;w<_;w++)I[w]=this.i(w)^b.i(w);return new s(I,this.h^b.h)};function He(b){for(var _=b.g.length+1,I=[],w=0;w<_;w++)I[w]=b.i(w)<<1|b.i(w-1)>>>31;return new s(I,b.h)}function le(b,_){var I=_>>5;_%=32;for(var w=b.g.length-I,T=[],S=0;S<w;S++)T[S]=0<_?b.i(S+I)>>>_|b.i(S+I+1)<<32-_:b.i(S+I);return new s(T,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,M_=_R.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Cr=_R.Integer=s}).apply(typeof vR<"u"?vR:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sr={};var P_,R$,js,O_,eu,uf,x_,k_,F_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,A){for(var F=Array(arguments.length-2),we=2;we<arguments.length;we++)F[we-2]=arguments[we];return d.prototype[D].apply(g,F)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,A=g.length||0;c.length=D+A;for(let F=0;F<A;F++)c[D+F]=g[F]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function pe(c){return pe[" "](c),c}pe[" "]=function(){};var He=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function le(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Bp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class rr{constructor(){this.h=this.g=null}add(d,f){let g=ya.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ya=new k(()=>new ZO,c=>c.reset());class ZO{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let va,_a=!1,Bp=new rr,Yw=()=>{let c=a.Promise.resolve(void 0);va=()=>{c.then(XO)}};var XO=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=ya;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}_a=!1};function jr(){this.s=this.s,this.C=this.C}jr.prototype.s=!1,jr.prototype.ma=function(){this.s||(this.s=!0,this.N())},jr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var ex=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ea(c,d){if(ct.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(He){e:{try{pe(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:tx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ea.aa.h.call(this)}}C(Ea,ct);var tx={2:"touch",3:"pen",4:"mouse"};Ea.prototype.h=function(){Ea.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ia="closure_listenable_"+(1e6*Math.random()|0),nx=0;function rx(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++nx,this.da=this.fa=!1}function Bu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $u(c){this.src=c,this.g={},this.h=0}$u.prototype.add=function(c,d,f,g,D){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var F=Hp(c,d,g,D);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new rx(d,this.src,A,!!g,D),d.fa=f,c.push(d)),d};function $p(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(Bu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Hp(c,d,f,g){for(var D=0;D<c.length;++D){var A=c[D];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return D}return-1}var qp="closure_lm_"+(1e6*Math.random()|0),zp={};function Jw(c,d,f,g,D){if(g&&g.once)return Xw(c,d,f,g,D);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Jw(c,d[A],f,g,D);return null}return f=Qp(f),c&&c[Ia]?c.K(d,f,l(g)?!!g.capture:!!g,D):Zw(c,d,f,!1,g,D)}function Zw(c,d,f,g,D,A){if(!d)throw Error("Invalid event type");var F=l(D)?!!D.capture:!!D,we=Wp(c);if(we||(c[qp]=we=new $u(c)),f=we.add(d,f,g,F,A),f.proxy)return f;if(g=ix(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)ex||(D=F),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(tb(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ix(){function c(f){return d.call(c.src,c.listener,f)}let d=ox;return c}function Xw(c,d,f,g,D){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Xw(c,d[A],f,g,D);return null}return f=Qp(f),c&&c[Ia]?c.L(d,f,l(g)?!!g.capture:!!g,D):Zw(c,d,f,!0,g,D)}function eb(c,d,f,g,D){if(Array.isArray(d))for(var A=0;A<d.length;A++)eb(c,d[A],f,g,D);else g=l(g)?!!g.capture:!!g,f=Qp(f),c&&c[Ia]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Hp(A,f,g,D),-1<f&&(Bu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Wp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Hp(d,f,g,D)),(f=-1<c?d[c]:null)&&Gp(f))}function Gp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ia])$p(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(tb(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Wp(d))?($p(f,c),f.h==0&&(f.src=null,d[qp]=null)):Bu(c)}}}function tb(c){return c in zp?zp[c]:zp[c]="on"+c}function ox(c,d){if(c.da)c=!0;else{d=new Ea(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Gp(c),c=f.call(g,d)}return c}function Wp(c){return c=c[qp],c instanceof $u?c:null}var Kp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qp(c){return typeof c=="function"?c:(c[Kp]||(c[Kp]=function(d){return c.handleEvent(d)}),c[Kp])}function ut(){jr.call(this),this.i=new $u(this),this.M=this,this.F=null}C(ut,jr),ut.prototype[Ia]=!0,ut.prototype.removeEventListener=function(c,d,f,g){eb(this,c,d,f,g)};function _t(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ct(d,c);else if(d instanceof ct)d.target=d.target||c;else{var D=d;d=new ct(g,c),w(d,D)}if(D=!0,f)for(var A=f.length-1;0<=A;A--){var F=d.g=f[A];D=Hu(F,g,!0,d)&&D}if(F=d.g=c,D=Hu(F,g,!0,d)&&D,D=Hu(F,g,!1,d)&&D,f)for(A=0;A<f.length;A++)F=d.g=f[A],D=Hu(F,g,!1,d)&&D}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Bu(f[g]);delete c.g[d],c.h--}}this.F=null},ut.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ut.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Hu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==f){var we=F.listener,rt=F.ha||F.src;F.fa&&$p(c.i,F),D=we.call(rt,g)!==!1&&D}}return D&&!g.defaultPrevented}function nb(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function rb(c){c.g=nb(()=>{c.g=null,c.i&&(c.i=!1,rb(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class sx extends jr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(c){jr.call(this),this.h=c,this.g={}}C(wa,jr);var ib=[];function ob(c){le(c.g,function(d,f){this.g.hasOwnProperty(f)&&Gp(d)},c),c.g={}}wa.prototype.N=function(){wa.aa.N.call(this),ob(this)},wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yp=a.JSON.stringify,ax=a.JSON.parse,cx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Jp(){}Jp.prototype.h=null;function sb(c){return c.h||(c.h=c.i())}function ab(){}var ba={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zp(){ct.call(this,"d")}C(Zp,ct);function Xp(){ct.call(this,"c")}C(Xp,ct);var Ai={},cb=null;function qu(){return cb=cb||new ut}Ai.La="serverreachability";function ub(c){ct.call(this,Ai.La,c)}C(ub,ct);function Ta(c){let d=qu();_t(d,new ub(d))}Ai.STAT_EVENT="statevent";function lb(c,d){ct.call(this,Ai.STAT_EVENT,c),this.stat=d}C(lb,ct);function Et(c){let d=qu();_t(d,new lb(d,c))}Ai.Ma="timingevent";function db(c,d){ct.call(this,Ai.Ma,c),this.size=d}C(db,ct);function Da(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ca(){this.g=!0}Ca.prototype.xa=function(){this.g=!1};function ux(c,d,f,g,D,A){c.info(function(){if(c.g)if(A)for(var F="",we=A.split("&"),rt=0;rt<we.length;rt++){var me=we[rt].split("=");if(1<me.length){var lt=me[0];me=me[1];var dt=lt.split("_");F=2<=dt.length&&dt[1]=="type"?F+(lt+"="+me+"&"):F+(lt+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+F})}function lx(c,d,f,g,D,A,F){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+A+" "+F})}function Vo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+hx(c,f)+(g?" "+g:"")})}function dx(c,d){c.info(function(){return"TIMEOUT: "+d})}Ca.prototype.info=function(){};function hx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<D.length;F++)D[F]=""}}}}return Yp(f)}catch{return d}}var zu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eg;function Gu(){}C(Gu,Jp),Gu.prototype.g=function(){return new XMLHttpRequest},Gu.prototype.i=function(){return{}},eg=new Gu;function Ur(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new wa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fb}function fb(){this.i=null,this.g="",this.h=!1}var pb={},tg={};function ng(c,d,f){c.L=1,c.v=Yu(ir(d)),c.m=f,c.P=!0,gb(c,null)}function gb(c,d){c.F=Date.now(),Wu(c),c.A=ir(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Rb(f.i,"t",g),c.C=0,f=c.j.J,c.h=new fb,c.g=Wb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new sx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(ib[0]=D.toString()),D=ib);for(var A=0;A<D.length;A++){var F=Jw(f,D[A],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ta(),ux(c.i,c.u,c.A,c.l,c.R,c.m)}Ur.prototype.ca=function(c){c=c.target;let d=this.M;d&&or(c)==3?d.j():this.Y(c)},Ur.prototype.Y=function(c){try{if(c==this.g)e:{let dt=or(this.g);var d=this.g.Ba();let Bo=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Fb(this.g)))){this.J||dt!=4||d==7||(d==8||0>=Bo?Ta(3):Ta(2)),rg(this);var f=this.g.Z();this.X=f;t:if(mb(this)){var g=Fb(this.g);c="";var D=g.length,A=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),Sa(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,lx(this.i,this.u,this.A,this.l,this.R,dt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,rt=this.g;if((we=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(we)){var me=we;break t}}me=null}if(f=me)Vo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ig(this,f);else{this.o=!1,this.s=3,Et(12),Ri(this),Sa(this);break e}}if(this.P){f=!0;let ln;for(;!this.J&&this.C<F.length;)if(ln=fx(this,F),ln==tg){dt==4&&(this.s=4,Et(14),f=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==pb){this.s=4,Et(15),Vo(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Vo(this.i,this.l,ln,null),ig(this,ln);if(mb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||F.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)Vo(this.i,this.l,F,"[Invalid Chunked Response]"),Ri(this),Sa(this);else if(0<F.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),lg(lt),lt.M=!0,Et(11))}}else Vo(this.i,this.l,F,null),ig(this,F);dt==4&&Ri(this),this.o&&!this.J&&(dt==4?Hb(this.j,this):(this.o=!1,Wu(this)))}else Nx(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Ri(this),Sa(this)}}}catch{}finally{}};function mb(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?tg:(f=Number(d.substring(f,g)),isNaN(f)?pb:(g+=1,g+f>d.length?tg:(d=d.slice(g,g+f),c.C=g+f,d)))}Ur.prototype.cancel=function(){this.J=!0,Ri(this)};function Wu(c){c.S=Date.now()+c.I,yb(c,c.I)}function yb(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Da(m(c.ba,c),d)}function rg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ur.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(dx(this.i,this.A),this.L!=2&&(Ta(),Et(17)),Ri(this),this.s=2,Sa(this)):yb(this,this.S-c)};function Sa(c){c.j.G==0||c.J||Hb(c.j,c)}function Ri(c){rg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ob(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ig(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||og(f.h,c))){if(!c.K&&og(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)tl(f),Xu(f);else break e;ug(f),Et(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Da(m(f.Za,f),6e3));if(1>=Eb(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Mi(f,11)}else if((c.K||f.g==c)&&tl(f),!G(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let me=D[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let lt=me[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));let dt=me[4];dt!=null&&(f.Aa=dt,f.j.info("SVER="+f.Aa));let Bo=me[5];Bo!=null&&typeof Bo=="number"&&0<Bo&&(g=1.5*Bo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let ln=c.g;if(ln){let rl=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var A=g.h;A.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(sg(A,A.h),A.h=null))}if(g.D){let dg=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;dg&&(g.ya=dg,Te(g.I,g.D,dg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=c;if(g.qa=Gb(g,g.J?g.ia:null,g.W),F.K){Ib(g.h,F);var we=F,rt=g.L;rt&&(we.I=rt),we.B&&(rg(we),Wu(we)),g.g=F}else Bb(g);0<f.i.length&&el(f)}else me[0]!="stop"&&me[0]!="close"||Mi(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Mi(f,7):cg(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Ta(4)}catch{}}var px=class{constructor(c,d){this.g=c,this.map=d}};function vb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _b(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Eb(c){return c.h?1:c.g?c.g.size:0}function og(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function sg(c,d){c.g?c.g.add(d):c.h=d}function Ib(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}vb.prototype.cancel=function(){if(this.i=wb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function wb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function gx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function mx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function bb(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=mx(c),g=gx(c),D=g.length,A=0;A<D;A++)d.call(void 0,g[A],f&&f[A],c)}var Tb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var A=c[f].substring(0,g);D=c[f].substring(g+1)}else A=c[f];d(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Ni(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ni){this.h=c.h,Ku(this,c.j),this.o=c.o,this.g=c.g,Qu(this,c.s),this.l=c.l;var d=c.i,f=new Na;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Db(this,f),this.m=c.m}else c&&(d=String(c).match(Tb))?(this.h=!1,Ku(this,d[1]||"",!0),this.o=Aa(d[2]||""),this.g=Aa(d[3]||"",!0),Qu(this,d[4]),this.l=Aa(d[5]||"",!0),Db(this,d[6]||"",!0),this.m=Aa(d[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}Ni.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ra(d,Cb,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ra(d,Cb,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ra(f,f.charAt(0)=="/"?Ex:_x,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ra(f,wx)),c.join("")};function ir(c){return new Ni(c)}function Ku(c,d,f){c.j=f?Aa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Qu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Db(c,d,f){d instanceof Na?(c.i=d,bx(c.i,c.h)):(f||(d=Ra(d,Ix)),c.i=new Na(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function Yu(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Aa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ra(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,vx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cb=/[#\/\?@]/g,_x=/[#\?:]/g,Ex=/[#\?]/g,Ix=/[#\?@]/g,wx=/#/g;function Na(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Br(c){c.g||(c.g=new Map,c.h=0,c.i&&yx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Na.prototype,n.add=function(c,d){Br(this),this.i=null,c=jo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Sb(c,d){Br(c),d=jo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Ab(c,d){return Br(c),d=jo(c,d),c.g.has(d)}n.forEach=function(c,d){Br(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},n.na=function(){Br(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let A=0;A<D.length;A++)f.push(d[g])}return f},n.V=function(c){Br(this);let d=[];if(typeof c=="string")Ab(this,c)&&(d=d.concat(this.g.get(jo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Br(this),this.i=null,c=jo(this,c),Ab(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Rb(c,d,f){Sb(c,d),0<f.length&&(c.i=null,c.g.set(jo(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var D=A;F[g]!==""&&(D+="="+encodeURIComponent(String(F[g]))),c.push(D)}}return this.i=c.join("&")};function jo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function bx(c,d){d&&!c.j&&(Br(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(Sb(this,g),Rb(this,D,f))},c)),c.j=d}function Tx(c,d){let f=new Ca;if(a.Image){let g=new Image;g.onload=y($r,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y($r,f,"TestLoadImage: error",!1,d,g),g.onabort=y($r,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y($r,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Dx(c,d){let f=new Ca,g=new AbortController,D=setTimeout(()=>{g.abort(),$r(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?$r(f,"TestPingServer: ok",!0,d):$r(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),$r(f,"TestPingServer: error",!1,d)})}function $r(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function Cx(){this.g=new cx}function Sx(c,d,f){let g=f||"";try{bb(c,function(D,A){let F=D;l(D)&&(F=Yp(D)),d.push(g+A+"="+encodeURIComponent(F))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Ma(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Ma,Jp),Ma.prototype.g=function(){return new Ju(this.l,this.j)},Ma.prototype.i=function(c){return function(){return c}}({});function Ju(c,d){ut.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ju,ut),n=Ju.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Oa(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nb(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nb(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Pa(this):Oa(this),this.readyState==3&&Nb(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Pa(this))},n.Qa=function(c){this.g&&(this.response=c,Pa(this))},n.ga=function(){this.g&&Pa(this)};function Pa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Oa(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Oa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ju.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mb(c){let d="";return le(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ag(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Mb(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Ne(c){ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ne,ut);var Ax=/^https?$/i,Rx=["POST","PUT"];n=Ne.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eg.g(),this.v=this.o?sb(this.o):sb(eg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Pb(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Rx,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of f)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kb(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Pb(this,A)}};function Pb(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Ob(c),Zu(c)}function Ob(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),Zu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zu(this,!0)),Ne.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xb(this):this.bb())},n.bb=function(){xb(this)};function xb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||or(c)!=4||c.Z()!=2)){if(c.u&&or(c)==4)nb(c.Ea,0,c);else if(_t(c,"readystatechange"),or(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=F===0){var D=String(c.D).match(Tb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!Ax.test(D?D.toLowerCase():"")}f=g}if(f)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var A=2<or(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Ob(c)}}finally{Zu(c)}}}}function Zu(c,d){if(c.g){kb(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||_t(c,"ready");try{f.onreadystatechange=g}catch{}}}function kb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function or(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),ax(d)}};function Fb(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Nx(c){let d={};c=(c.g&&2<=or(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var f=T(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[D]||[];d[D]=A,A.push(f)}b(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Lb(c){this.Aa=0,this.i=[],this.j=new Ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,c),this.cb=xa("retryDelaySeedMs",1e4,c),this.Wa=xa("forwardChannelMaxRetries",2,c),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new vb(c&&c.concurrentRequestLimit),this.Da=new Cx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Lb.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Et(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Gb(this,null,this.W),el(this)};function cg(c){if(Vb(c),c.G==3){var d=c.U++,f=ir(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),ka(c,f),d=new Ur(c,c.j,d),d.L=2,d.v=Yu(ir(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Wb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Wu(d)}zb(c)}function Xu(c){c.g&&(lg(c),c.g.cancel(),c.g=null)}function Vb(c){Xu(c),c.u&&(a.clearTimeout(c.u),c.u=null),tl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function el(c){if(!_b(c.h)&&!c.s){c.s=!0;var d=c.Ga;va||Yw(),_a||(va(),_a=!0),Bp.add(d,c),c.B=0}}function Mx(c,d){return Eb(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Da(m(c.Ga,c,d),qb(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new Ur(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Ub(this,D,d),f=ir(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),ka(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Mb(A)))+"&"+d:this.m&&ag(f,this.m,A)),sg(this.h,D),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),D.T=!0,ng(D,f,null)):ng(D,f,d),this.G=2}}else this.G==3&&(c?jb(this,c):this.i.length==0||_b(this.h)||jb(this))};function jb(c,d){var f;d?f=d.l:f=c.U++;let g=ir(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),ka(c,g),c.m&&c.o&&ag(g,c.m,c.o),f=new Ur(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Ub(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),sg(c.h,f),ng(f,g,d)}function ka(c,d){c.H&&le(c.H,function(f,g){Te(d,g,f)}),c.l&&bb({},function(f,g){Te(d,g,f)})}function Ub(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let A=-1;for(;;){let F=["count="+f];A==-1?0<f?(A=D[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let we=!0;for(let rt=0;rt<f;rt++){let me=D[rt].g,lt=D[rt].map;if(me-=A,0>me)A=Math.max(0,D[rt].g-100),we=!1;else try{Sx(lt,F,"req"+me+"_")}catch{g&&g(lt)}}if(we){g=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Bb(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;va||Yw(),_a||(va(),_a=!0),Bp.add(d,c),c.v=0}}function ug(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Da(m(c.Fa,c),qb(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,$b(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Da(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Xu(this),$b(this))};function lg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function $b(c){c.g=new Ur(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=ir(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),ka(c,d),c.m&&c.o&&ag(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Yu(ir(d)),f.m=null,f.P=!0,gb(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Xu(this),ug(this),Et(19))};function tl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Hb(c,d){var f=null;if(c.g==d){tl(c),lg(c),c.g=null;var g=2}else if(og(c.h,d))f=d.D,Ib(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=qu(),_t(g,new db(g,f)),el(c)}else Bb(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&Mx(c,d)||g==2&&ug(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:Mi(c,5);break;case 4:Mi(c,10);break;case 3:Mi(c,6);break;default:Mi(c,2)}}}function qb(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Mi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new Ni(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ku(g,"https"),Yu(g),D?Tx(g.toString(),f):Dx(g.toString(),f)}else Et(2);c.G=0,c.l&&c.l.sa(d),zb(c),Vb(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function zb(c){if(c.G=0,c.ka=[],c.l){let d=wb(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Gb(c,d,f){var g=f instanceof Ni?ir(f):new Ni(f);if(g.g!="")d&&(g.g=d+"."+g.g),Qu(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var A=new Ni(null);g&&Ku(A,g),d&&(A.g=d),D&&Qu(A,D),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),ka(c,g),g}function Wb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ne(new Ma({eb:f})):new Ne(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kb(){}n=Kb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function nl(){}nl.prototype.g=function(c,d){return new Ht(c,d)};function Ht(c,d){ut.call(this),this.g=new Lb(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Uo(this)}C(Ht,ut),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){cg(this.g)},Ht.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Yp(c),c=f);d.i.push(new px(d.Ya++,c)),d.G==3&&el(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,cg(this.g),delete this.g,Ht.aa.N.call(this)};function Qb(c){Zp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(Qb,Zp);function Yb(){Xp.call(this),this.status=1}C(Yb,Xp);function Uo(c){this.g=c}C(Uo,Kb),Uo.prototype.ua=function(){_t(this.g,"a")},Uo.prototype.ta=function(c){_t(this.g,new Qb(c))},Uo.prototype.sa=function(c){_t(this.g,new Yb)},Uo.prototype.ra=function(){_t(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,F_=Sr.createWebChannelTransport=function(){return new nl},k_=Sr.getStatEventTarget=function(){return qu()},x_=Sr.Event=Ai,uf=Sr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zu.NO_ERROR=0,zu.TIMEOUT=8,zu.HTTP_ERROR=6,eu=Sr.ErrorCode=zu,hb.COMPLETE="complete",O_=Sr.EventType=hb,ab.EventType=ba,ba.OPEN="a",ba.CLOSE="b",ba.ERROR="c",ba.MESSAGE="d",ut.prototype.listen=ut.prototype.K,js=Sr.WebChannel=ab,R$=Sr.FetchXmlHttpFactory=Ma,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,P_=Sr.XhrIo=Ne}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});var ER="@firebase/firestore",IR="4.8.0";var tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");var aa="11.10.0";var Io=new zn("@firebase/firestore");function Us(){return Io.logLevel}function j(n,...e){if(Io.logLevel<=de.DEBUG){let t=e.map(TI);Io.debug(`Firestore (${aa}): ${n}`,...t)}}function Ar(n,...e){if(Io.logLevel<=de.ERROR){let t=e.map(TI);Io.error(`Firestore (${aa}): ${n}`,...t)}}function mi(n,...e){if(Io.logLevel<=de.WARN){let t=e.map(TI);Io.warn(`Firestore (${aa}): ${n}`,...t)}}function TI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,cN(n,r,t)}function cN(n,e,t){let r=`FIRESTORE (${aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ar(r),new Error(r)}function _e(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||cN(e,i,r)}function X(n,e){return n}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends st{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Kn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var mf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},B_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tt.UNAUTHENTICATED))}shutdown(){}},$_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},H_=class{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new mf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new tt(e)}},q_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},z_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new q_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},yf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},G_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function N$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function uN(){return new TextEncoder}var au=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=N$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function W_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ae(r,i);{let o=uN(),s=M$(o.encode(wR(n,t)),o.encode(wR(e,t)));return s!==0?s:ae(r,i)}}t+=r>65535?2:1}return ae(n.length,e.length)}function wR(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function M$(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ae(n[t],e[t]);return ae(n.length,e.length)}function Ws(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var bR="__name__",vf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&K(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):W_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}},Le=class n extends vf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new q(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},P$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yt=class n extends vf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return P$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bR}static keyField(){return new n([bR])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new q(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Le.fromString(e))}static fromName(e){return new n(Le.fromString(e).popFirst(5))}static empty(){return new n(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Le(e.slice()))}};function O$(n,e,t){if(!t)throw new q(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x$(n,e,t,r){if(e===!0&&r===!0)throw new q(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TR(n){if(!Q.isDocumentKey(n))throw new q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function DI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K(12329,{type:typeof n})}function Ks(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=DI(n);throw new q(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Be(n,e){let t={typeString:n};return e&&(t.value=e),t}function Eu(n,e){if(!lN(n))throw new q(O.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new q(O.INVALID_ARGUMENT,t);return!0}var DR=-62135596800,CR=1e6,$e=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*CR);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DR)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CR}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-DR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Be("string",$e._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};var te=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new $e(0,0))}static max(){return new n(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var cu=-1,K_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};K_.UNKNOWN_ID=-1;function k$(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new wo(i,Q.empty(),e)}function F$(n){return new wo(n.readTime,n.key,cu)}var wo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(te.min(),Q.empty(),cu)}static max(){return new n(te.max(),Q.empty(),cu)}};function L$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var V$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Q_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ca(n){return v(this,null,function*(){if(n.code!==O.FAILED_PRECONDITION||n.message!==V$)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function j$(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ua(n){return n.name==="IndexedDbTransactionError"}var CI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),SI=-1;function Gf(n){return n==null}function uu(n){return n===0&&1/n==-1/0}function U$(n){return typeof n=="number"&&Number.isInteger(n)&&!uu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var dN="";function B$(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=SR(e)),e=$$(n.get(t),e);return SR(e)}function $$(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case dN:t+="";break;default:t+=o}}return t}function SR(n){return n+dN+""}var H$="remoteDocuments",hN="owner";var fN="mutationQueues";var pN="mutations";var gN="documentMutations",q$="remoteDocumentsV14";var mN="remoteDocumentGlobal";var yN="targets";var vN="targetDocuments";var _N="targetGlobal",EN="collectionParents";var IN="clientMetadata";var wN="bundles";var bN="namedQueries";var z$="indexConfiguration";var G$="indexState";var W$="indexEntries";var TN="documentOverlays";var K$="globals";var Q$=[fN,pN,gN,H$,yN,hN,_N,vN,IN,mN,EN,wN,bN],Woe=[...Q$,TN],Y$=[fN,pN,gN,q$,yN,hN,_N,vN,IN,mN,EN,wN,bN,TN],J$=Y$,Z$=[...J$,z$,G$,W$];var Koe=[...Z$,K$];function AR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qs(this.root,e,this.comparator,!1)}getReverseIterator(){return new qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qs(this.root,e,this.comparator,!0)}},qs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Qn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}};Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var nt=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _f(this.data.getIterator())}getIteratorFrom(e){return new _f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_f=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wn=class n{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new n([])}unionWith(e){let t=new nt(Yt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ws(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ef=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var vt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ef("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};vt.EMPTY_BYTE_STRING=new vt("");var X$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(n){if(_e(!!n,39018),typeof n=="string"){let e=0,t=X$.exec(n);if(_e(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Nr(n){return typeof n=="string"?vt.fromBase64String(n):vt.fromUint8Array(n)}var CN="server_timestamp",SN="__type__",AN="__previous_value__",RN="__local_write_time__";function AI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[SN])===null||t===void 0?void 0:t.stringValue)===CN}function Wf(n){let e=n.mapValue.fields[AN];return AI(e)?Wf(e):e}function lu(n){let e=Rr(n.mapValue.fields[RN].timestampValue);return new $e(e.seconds,e.nanos)}var Y_=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},If="(default)",wf=class n{constructor(e,t){this.projectId=e,this.database=t||If}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===If}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var RI="__type__",NN="__max__",lf={mapValue:{fields:{__type__:{stringValue:NN}}}},NI="__vector__",Qs="value";function yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?AI(n)?4:PN(n)?9007199254740991:MN(n)?10:11:K(28295,{value:n})}function Zn(n,e){if(n===e)return!0;let t=yi(n);if(t!==yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lu(n).isEqual(lu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Rr(i.timestampValue),a=Rr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Nr(i.bytesValue).isEqual(Nr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),a=Ce(o.doubleValue);return s===a?uu(s)===uu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ws(n.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(AR(s)!==AR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Zn(s[u],a[u])))return!1;return!0}(n,e);default:return K(52216,{left:n})}}function du(n,e){return(n.values||[]).find(t=>Zn(t,e))!==void 0}function Ys(n,e){if(n===e)return 0;let t=yi(n),r=yi(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return RR(n.timestampValue,e.timestampValue);case 4:return RR(lu(n),lu(e));case 5:return W_(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Nr(o),u=Nr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(Ce(o.latitude),Ce(s.latitude));return a!==0?a:ae(Ce(o.longitude),Ce(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return NR(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[Qs])===null||a===void 0?void 0:a.arrayValue,C=(u=m[Qs])===null||u===void 0?void 0:u.arrayValue,N=ae(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:NR(y,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===lf.mapValue&&s===lf.mapValue)return 0;if(o===lf.mapValue)return 1;if(s===lf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=W_(u[p],h[p]);if(m!==0)return m;let y=Ys(a[u[p]],l[h[p]]);if(y!==0)return y}return ae(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K(23264,{le:t})}}function RR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=Rr(n),r=Rr(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function NR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ys(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function Js(n){return J_(n)}function J_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Rr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Nr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=J_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${J_(t.fields[s])}`;return i+"}"}(n.mapValue):K(61005,{value:n})}function ff(n){switch(yi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Wf(n);return e?16+ff(e):16;case 5:return 2*n.stringValue.length;case 6:return Nr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ff(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return So(r.fields,(o,s)=>{i+=o.length+ff(s)}),i}(n.mapValue);default:throw K(13486,{value:n})}}function Z_(n){return!!n&&"integerValue"in n}function MI(n){return!!n&&"arrayValue"in n}function MR(n){return!!n&&"nullValue"in n}function PR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pf(n){return!!n&&"mapValue"in n}function MN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RI])===null||t===void 0?void 0:t.stringValue)===NI}function nu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return So(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=nu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===NN}var Yoe={mapValue:{fields:{[RI]:{stringValue:NI},[Qs]:{arrayValue:{}}}}};var Dn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(t)}setAll(e){let t=Yt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=nu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());pf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){So(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(nu(this.value))}};function ON(n){let e=[];return So(n.fields,(t,r)=>{let i=new Yt([t]);if(pf(r)){let o=ON(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Wn(e)}var Cn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,te.min(),te.min(),te.min(),Dn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,te.min(),te.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,te.min(),te.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zs=class{constructor(e,t){this.position=e,this.inclusive=t}};function OR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),t.key):r=Ys(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zn(n.position[t],e.position[t]))return!1;return!0}var Xs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function eH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var bf=class{},We=class n extends bf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new eE(e,t,r):t==="array-contains"?new rE(e,r):t==="in"?new iE(e,r):t==="not-in"?new oE(e,r):t==="array-contains-any"?new sE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new tE(e,r):new nE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ys(t,this.value)):t!==null&&yi(this.value)===yi(t)&&this.matchesComparison(Ys(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Xn=class n extends bf{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return xN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function xN(n){return n.op==="and"}function kN(n){return tH(n)&&xN(n)}function tH(n){for(let e of n.filters)if(e instanceof Xn)return!1;return!0}function X_(n){if(n instanceof We)return n.field.canonicalString()+n.op.toString()+Js(n.value);if(kN(n))return n.filters.map(e=>X_(e)).join(",");{let e=n.filters.map(t=>X_(t)).join(",");return`${n.op}(${e})`}}function FN(n,e){return n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Zn(r.value,i.value)}(n,e):n instanceof Xn?function(r,i){return i instanceof Xn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&FN(s,i.filters[a]),!0):!1}(n,e):void K(19439)}function LN(n){return n instanceof We?function(t){return`${t.field.canonicalString()} ${t.op} ${Js(t.value)}`}(n):n instanceof Xn?function(t){return t.op.toString()+" {"+t.getFilters().map(LN).join(" ,")+"}"}(n):"Filter"}var eE=class extends We{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},tE=class extends We{constructor(e,t){super(e,"in",t),this.keys=VN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},nE=class extends We{constructor(e,t){super(e,"not-in",t),this.keys=VN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function VN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var rE=class extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return MI(t)&&du(t.arrayValue,this.value)}},iE=class extends We{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&du(this.value.arrayValue,t)}},oE=class extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!du(this.value.arrayValue,t)}},sE=class extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!MI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>du(this.value.arrayValue,r))}};var aE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function kR(n,e=null,t=[],r=[],i=null,o=null,s=null){return new aE(n,e,t,r,i,o,s)}function PI(n){let e=X(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>X_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Js(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Js(r)).join(",")),e.Pe=t}return e.Pe}function OI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xR(n.startAt,e.startAt)&&xR(n.endAt,e.endAt)}function cE(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ea=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function nH(n,e,t,r,i,o,s,a){return new ea(n,e,t,r,i,o,s,a)}function xI(n){return new ea(n)}function FR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rH(n){return n.collectionGroup!==null}function ru(n){let e=X(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new nt(Yt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Xs(o,r))}),t.has(Yt.keyField().canonicalString())||e.Te.push(new Xs(Yt.keyField(),r))}return e.Te}function Yn(n){let e=X(n);return e.Ie||(e.Ie=iH(e,ru(n))),e.Ie}function iH(n,e){if(n.limitType==="F")return kR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Xs(i.field,o)});let t=n.endAt?new Zs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Zs(n.startAt.position,n.startAt.inclusive):null;return kR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function uE(n,e,t){return new ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kf(n,e){return OI(Yn(n),Yn(e))&&n.limitType===e.limitType}function jN(n){return`${PI(Yn(n))}|lt:${n.limitType}`}function Bs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>LN(i)).join(", ")}]`),Gf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Js(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Js(i)).join(",")),`Target(${r})`}(Yn(n))}; limitType=${n.limitType})`}function Qf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ru(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=OR(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ru(r),i)||r.endAt&&!function(s,a,u){let l=OR(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ru(r),i))}(n,e)}function oH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UN(n){return(e,t)=>{let r=!1;for(let i of ru(n)){let o=sH(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function sH(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ys(u,l):K(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:n.dir})}}var Mr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return DN(this.inner)}size(){return this.innerSize}};var aH=new Oe(Q.comparator);function Pr(){return aH}var BN=new Oe(Q.comparator);function tu(...n){let e=BN;for(let t of n)e=e.insert(t.key,t);return e}function $N(n){let e=BN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yo(){return iu()}function HN(){return iu()}function iu(){return new Mr(n=>n.toString(),(n,e)=>n.isEqual(e))}var cH=new Oe(Q.comparator),uH=new nt(Q.comparator);function fe(...n){let e=uH;for(let t of n)e=e.add(t);return e}var lH=new nt(ae);function dH(){return lH}function kI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(e)?"-0":e}}function qN(n){return{integerValue:""+n}}function hH(n,e){return U$(e)?qN(e):kI(n,e)}var ta=class{constructor(){this._=void 0}};function fH(n,e,t){return n instanceof na?function(i,o){let s={fields:{[SN]:{stringValue:CN},[RN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&AI(o)&&(o=Wf(o)),o&&(s.fields[AN]=o),{mapValue:s}}(t,e):n instanceof bo?GN(n,e):n instanceof To?WN(n,e):function(i,o){let s=zN(i,o),a=LR(s)+LR(i.Ee);return Z_(s)&&Z_(i.Ee)?qN(a):kI(i.serializer,a)}(n,e)}function pH(n,e,t){return n instanceof bo?GN(n,e):n instanceof To?WN(n,e):t}function zN(n,e){return n instanceof ra?function(r){return Z_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var na=class extends ta{},bo=class extends ta{constructor(e){super(),this.elements=e}};function GN(n,e){let t=KN(e);for(let r of n.elements)t.some(i=>Zn(i,r))||t.push(r);return{arrayValue:{values:t}}}var To=class extends ta{constructor(e){super(),this.elements=e}};function WN(n,e){let t=KN(e);for(let r of n.elements)t=t.filter(i=>!Zn(i,r));return{arrayValue:{values:t}}}var ra=class extends ta{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function LR(n){return Ce(n.integerValue||n.doubleValue)}function KN(n){return MI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function gH(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof bo&&i instanceof bo||r instanceof To&&i instanceof To?Ws(r.elements,i.elements,Zn):r instanceof ra&&i instanceof ra?Zn(r.Ee,i.Ee):r instanceof na&&i instanceof na}(n.transform,e.transform)}var lE=class{constructor(e,t){this.version=e,this.transformResults=t}},hi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function gf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ia=class{};function QN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hu(n.key,hi.none()):new Do(n.key,n.data,hi.none());{let t=n.data,r=Dn.empty(),i=new nt(Yt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Or(n.key,r,new Wn(i.toArray()),hi.none())}}function mH(n,e,t){n instanceof Do?function(i,o,s){let a=i.value.clone(),u=jR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Or?function(i,o,s){if(!gf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=jR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(YN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ou(n,e,t,r){return n instanceof Do?function(o,s,a,u){if(!gf(o.precondition,s))return a;let l=o.value.clone(),h=UR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Or?function(o,s,a,u){if(!gf(o.precondition,s))return a;let l=UR(o.fieldTransforms,u,s),h=s.data;return h.setAll(YN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return gf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function yH(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=zN(r.transform,i||null);o!=null&&(t===null&&(t=Dn.empty()),t.set(r.field,o))}return t||null}function VR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ws(r,i,(o,s)=>gH(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Do=class extends ia{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Or=class extends ia{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function YN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jR(n,e,t){let r=new Map;_e(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,pH(s,a,t[i]))}return r}function UR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,fH(o,s,e))}return r}var hu=class extends ia{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},dE=class extends ia{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var hE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&mH(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ou(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ou(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=HN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=QN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&Ws(this.mutations,e.mutations,(t,r)=>VR(t,r))&&Ws(this.baseMutations,e.baseMutations,(t,r)=>VR(t,r))}},fE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return cH}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var pE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var je,ge;function vH(n){switch(n){case O.OK:return K(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return K(15467,{code:n})}}function JN(n){if(n===void 0)return Ar("GRPC error has no .code"),O.UNKNOWN;switch(n){case je.OK:return O.OK;case je.CANCELLED:return O.CANCELLED;case je.UNKNOWN:return O.UNKNOWN;case je.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case je.INTERNAL:return O.INTERNAL;case je.UNAVAILABLE:return O.UNAVAILABLE;case je.UNAUTHENTICATED:return O.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case je.NOT_FOUND:return O.NOT_FOUND;case je.ALREADY_EXISTS:return O.ALREADY_EXISTS;case je.PERMISSION_DENIED:return O.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case je.ABORTED:return O.ABORTED;case je.OUT_OF_RANGE:return O.OUT_OF_RANGE;case je.UNIMPLEMENTED:return O.UNIMPLEMENTED;case je.DATA_LOSS:return O.DATA_LOSS;default:return K(39323,{code:n})}}(ge=je||(je={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var BR=null;var _H=new Cr([4294967295,4294967295],0);function $R(n){let e=uN().encode(n),t=new M_;return t.update(e),new Uint8Array(t.digest())}function HR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Cr([t,r],0),new Cr([i,o],0)]}var mE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vo(`Invalid padding: ${t}`);if(r<0)throw new vo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new vo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Cr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Cr.fromNumber(r)));return i.compare(_H)===1&&(i=new Cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=$R(e),[r,i]=HR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=$R(e),[r,i]=HR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},vo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Tf=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(te.min(),i,new Oe(ae),Pr(),fe())}},fu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var zs=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Df=class{constructor(e,t){this.targetId=e,this.De=t}},Cf=class{constructor(e,t,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Sf=class{constructor(){this.ve=0,this.Ce=qR(),this.Fe=vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),t=fe(),r=fe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new fu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=qR()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},yE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Pr(),this.je=df(),this.Je=df(),this.He=new Oe(ae)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(cE(o))if(r===0){let s=new Q(o.path);this.Xe(t,s,Cn.newNoDocument(s,te.min()))}else _e(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}BR?.ct(function(h,p,m,y,C){var N,R,k,G,$,pe;let He={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},le=p.unchangedNames;return le&&(He.bloomFilter={applied:C===0,hashCount:(N=le?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(G=(k=(R=le?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&G!==void 0?G:0,padding:(pe=($=le?.bits)===null||$===void 0?void 0:$.padding)!==null&&pe!==void 0?pe:0,mightContain:b=>{var _;return(_=y?.mightContain(b))!==null&&_!==void 0&&_}}),He}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Nr(r).toUint8Array()}catch(u){if(u instanceof Ef)return mi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new mE(s,i,o)}catch(u){return mi(u instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&cE(a.target)){let u=new Q(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Cn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=fe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Tf(e,t,this.He,this.ze,r);return this.ze=Pr(),this.je=df(),this.Je=df(),this.He=new Oe(ae),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Sf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new nt(ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new nt(ae),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Sf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function df(){return new Oe(Q.comparator)}function qR(){return new Oe(Q.comparator)}var EH={asc:"ASCENDING",desc:"DESCENDING"},IH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wH={and:"AND",or:"OR"},vE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function _E(n,e){return n.useProto3Json||Gf(e)?e:{value:e}}function Af(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bH(n,e){return Af(n,e.toTimestamp())}function Jn(n){return _e(!!n,49232),te.fromTimestamp(function(t){let r=Rr(t);return new $e(r.seconds,r.nanos)}(n))}function FI(n,e){return EE(n,e).canonicalString()}function EE(n,e){let t=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function XN(n){let e=Le.fromString(n);return _e(iM(e),10190,{key:e.toString()}),e}function IE(n,e){return FI(n.databaseId,e.path)}function L_(n,e){let t=XN(e);if(t.get(1)!==n.databaseId.projectId)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(tM(t))}function eM(n,e){return FI(n.databaseId,e)}function TH(n){let e=XN(n);return e.length===4?Le.emptyPath():tM(e)}function wE(n){return new Le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tM(n){return _e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zR(n,e,t){return{name:IE(n,e),fields:t.value.mapValue.fields}}function DH(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(_e(h===void 0||typeof h=="string",58123),vt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),vt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?O.UNKNOWN:JN(l.code);return new q(h,l.message||"")}(s);t=new Cf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=L_(n,r.document.name),o=Jn(r.document.updateTime),s=r.document.createTime?Jn(r.document.createTime):te.min(),a=new Dn({mapValue:{fields:r.document.fields}}),u=Cn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new zs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=L_(n,r.document),o=r.readTime?Jn(r.readTime):te.min(),s=Cn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new zs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=L_(n,r.document),o=r.removedTargetIds||[];t=new zs([],o,i,null)}else{if(!("filter"in e))return K(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new gE(i,o),a=r.targetId;t=new Df(a,s)}}return t}function CH(n,e){let t;if(e instanceof Do)t={update:zR(n,e.key,e.value)};else if(e instanceof hu)t={delete:IE(n,e.key)};else if(e instanceof Or)t={update:zR(n,e.key,e.data),updateMask:kH(e.fieldMask)};else{if(!(e instanceof dE))return K(16599,{Rt:e.type});t={verify:IE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof na)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof To)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ra)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:bH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)}(n,e.precondition)),t}function SH(n,e){return n&&n.length>0?(_e(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Jn(i.updateTime):Jn(o);return s.isEqual(te.min())&&(s=Jn(o)),new lE(s,i.transformResults||[])}(t,e))):[]}function AH(n,e){return{documents:[eM(n,e.path)]}}function RH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=eM(n,i);let o=function(l){if(l.length!==0)return rM(Xn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:$s(m.field),direction:PH(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=_E(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function NH(n){let e=TH(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){_e(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=nM(p);return m instanceof Xn&&kN(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(C){return new Xs(Hs(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Gf(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Zs(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Zs(y,m)}(t.endAt)),nH(e,i,s,o,a,"F",u,l)}function MH(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Hs(t.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Hs(t.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Hs(t.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Hs(t.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(n):n.fieldFilter!==void 0?function(t){return We.create(Hs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xn.create(t.compositeFilter.filters.map(r=>nM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(t.compositeFilter.op))}(n):K(30097,{filter:n})}function PH(n){return EH[n]}function OH(n){return IH[n]}function xH(n){return wH[n]}function $s(n){return{fieldPath:n.canonicalString()}}function Hs(n){return Yt.fromServerFormat(n.fieldPath)}function rM(n){return n instanceof We?function(t){if(t.op==="=="){if(PR(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NAN"}};if(MR(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PR(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NAN"}};if(MR(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(t.field),op:OH(t.op),value:t.value}}}(n):n instanceof Xn?function(t){let r=t.getFilters().map(i=>rM(i));return r.length===1?r[0]:{compositeFilter:{op:xH(t.op),filters:r}}}(n):K(54877,{filter:n})}function kH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var pu=class n{constructor(e,t,r,i,o=te.min(),s=te.min(),a=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var bE=class{constructor(e){this.gt=e}};function FH(n){let e=NH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uE(e,e.limit,"L"):e}var Rf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),uu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Rr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Nr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?PN(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):MN(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):K(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Qs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ce(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Q.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Rf.Ut=new Rf;var TE=class{constructor(){this.Dn=new DE}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(wo.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(wo.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},DE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nt(Le.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Le.comparator)).toArray()}};var Joe=new Uint8Array(0);var GR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oM=41943040,un=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(oM,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);var gu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var WR="LruGarbageCollector",LH=1048576;function KR([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var CE=class{constructor(e){this.Tr=e,this.buffer=new nt(KR),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();KR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},SE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){j(WR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ua(t)?j(WR,"Ignoring IndexedDB error during garbage collection: ",t):yield ca(t)}yield this.Rr(3e5)}))}},AE=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(CI.ue);let r=new CE(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(GR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GR):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Us()<=de.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function VH(n,e){return new AE(n,e)}var RE=class{constructor(){this.changes=new Mr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var NE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ME=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ou(r.mutation,i,Wn.empty(),$e.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=yo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=tu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=yo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Pr(),s=iu(),a=function(){return iu()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Or)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ou(h.mutation,l,h.mutation.getFieldMask(),$e.now())):s.set(l.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new NE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=iu(),i=new Oe((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Wn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=HN();h.forEach(m=>{if(!o.has(m)){let y=QN(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rH(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(yo()),a=cu,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:$N(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=tu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=tu();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,m){return new ea(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Cn.newInvalidDocument(h)))});let a=tu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ou(h.mutation,l,Wn.empty(),$e.now()),Qf(t,l)&&(a=a.insert(u,l))}),a})}};var PE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Jn(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:FH(i.bundledQuery),readTime:Jn(i.readTime)}}(t)),x.resolve()}};var OE=class{constructor(){this.overlays=new Oe(Q.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=yo();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=yo(),o=t.length+1,s=new Q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=yo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=yo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new pE(t,r));let o=this.kr.get(t);o===void 0&&(o=fe(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var xE=class{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var mu=class{constructor(){this.qr=new nt(Ue.Qr),this.$r=new nt(Ue.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ue(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ue(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Q(new Le([])),r=new Ue(t,e),i=new Ue(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Q(new Le([])),r=new Ue(t,e),i=new Ue(t,e+1),o=fe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ue(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Q.comparator(e.key,t.key)||ae(e.Hr,t.Hr)}static Ur(e,t){return ae(e.Hr,t.Hr)||Q.comparator(e.key,t.key)}};var kE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new nt(Ue.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new hE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ue(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?SI:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ue(t,0),i=new Ue(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(ae);return t.forEach(i=>{let o=new Ue(i,0),s=new Ue(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Q.isDocumentKey(o)||(o=o.child(""));let s=new Ue(new Q(o),0),a=new nt(ae);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_e(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new Ue(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ue(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var FE=class{constructor(e){this.ni=e,this.docs=function(){return new Oe(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Pr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Cn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Pr(),s=t.path,a=new Q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||L$(F$(h),r)<=0||(i.has(h.key)||Qf(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new LE(this)}getSize(e){return x.resolve(this.size)}},LE=class extends RE{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var VE=class{constructor(e){this.persistence=e,this.ii=new Mr(t=>PI(t),OI),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new mu,this.targetCount=0,this._i=gu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new gu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var Nf=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new CI(0),this.ci=!1,this.ci=!0,this.li=new xE,this.referenceDelegate=e(this),this.hi=new VE(this),this.indexManager=new TE,this.remoteDocumentCache=function(i){return new FE(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new bE(t),this.Ti=new PE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new kE(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new jE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},jE=class extends Q_{constructor(e){super(),this.currentSequenceNumber=e}},UE=class n{constructor(e){this.persistence=e,this.Ai=new mu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=Q.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Mf=class n{constructor(e,t){this.persistence=e,this.gi=new Mr(r=>B$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=VH(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ff(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var BE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fe(),i=fe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var $E=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var HE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return tR()?8:j$(Ze())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new $E;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Us()<=de.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Us()<=de.DEBUG&&j("QueryEngine","Query:",Bs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Us()<=de.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(t))):x.resolve())}ps(e,t){if(FR(t))return x.resolve(null);let r=Yn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=uE(t,null,"F"),r=Yn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,uE(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return FR(t)||i.isEqual(te.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(Us()<=de.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bs(t)),this.vs(e,s,t,k$(i,cu)).next(a=>a))})}bs(e,t){let r=new nt(UN(e));return t.forEach((i,o)=>{Qf(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Us()<=de.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Bs(t)),this.gs.getDocumentsMatchingQuery(e,t,wo.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var LI="LocalStore",jH=3e8,qE=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Oe(ae),this.Ms=new Mr(o=>PI(o),OI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ME(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function UH(n,e,t,r){return new qE(n,e,t,r)}function sM(n,e){return v(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function BH(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);_e(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function aM(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function $H(n,e){let t=X(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(vt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=jH?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=Pr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(HH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(te.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function HH(n,e,t){let r=fe(),i=fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Pr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j(LI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function qH(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=SI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zH(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new pu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function zE(n,e,t){return v(this,null,function*(){let r=X(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ua(s))throw s;j(LI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function QR(n,e,t){let r=X(n),i=te.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=X(u),m=p.Ms.get(h);return m!==void 0?x.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,Yn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:te.min(),t?o:fe())).next(a=>(GH(r,oH(e),a),{documents:a,qs:o})))}function GH(n,e,t){let r=n.xs.get(e)||te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Pf=class{constructor(){this.activeTargetIds=dH()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var GE=class{constructor(){this.Fo=new Pf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Pf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var WE=class{xo(e){}shutdown(){}};var YR="ConnectivityMonitor",Of=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(YR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){j(YR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hf=null;function KE(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}var V_="RestConnection",WH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},QE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===If?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=KE(),a=this.Go(e,t.toUriEncodedString());j(V_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=ui(l);return this.jo(e,a,u,r,h).then(p=>(j(V_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw mi(V_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+aa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=WH[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var YE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var yt="WebChannelConnection",JE=class extends QE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=KE();return new Promise((a,u)=>{let l=new P_;l.setWithCredentials(!0),l.listenOnce(O_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case eu.NO_ERROR:let p=l.getResponseJson();j(yt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case eu.TIMEOUT:j(yt,`RPC '${e}' ${s} timed out`),u(new q(O.DEADLINE_EXCEEDED,"Request time out"));break;case eu.HTTP_ERROR:let m=l.getStatus();if(j(yt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=function(k){let G=k.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(G)>=0?G:O.UNKNOWN}(C.status);u(new q(N,C.message))}else u(new q(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new q(O.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{j(yt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(yt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=KE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=F_(),a=k_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,C=new YE({Ho:R=>{y?j(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(j(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(yt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,k,G)=>{R.listen(k,$=>{try{G($)}catch(pe){setTimeout(()=>{throw pe},0)}})};return N(p,js.EventType.OPEN,()=>{y||(j(yt,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),N(p,js.EventType.CLOSE,()=>{y||(y=!0,j(yt,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),N(p,js.EventType.ERROR,R=>{y||(y=!0,mi(yt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new q(O.UNAVAILABLE,"The operation could not be completed")))}),N(p,js.EventType.MESSAGE,R=>{var k;if(!y){let G=R.data[0];_e(!!G,16349);let $=G,pe=$?.error||((k=$[0])===null||k===void 0?void 0:k.error);if(pe){j(yt,`RPC '${e}' stream ${i} received error:`,pe);let He=pe.status,le=function(I){let w=je[I];if(w!==void 0)return JN(w)}(He),b=pe.message;le===void 0&&(le=O.INTERNAL,b="Unknown error status: "+He+" with message "+pe.message),y=!0,C.__(new q(le,b)),p.close()}else j(yt,`RPC '${e}' stream ${i} received:`,G),C.a_(G)}}),N(a,x_.STAT_EVENT,R=>{R.stat===uf.PROXY?j(yt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===uf.NOPROXY&&j(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function j_(){return typeof document<"u"?document:null}function Yf(n){return new vE(n,!0)}var xf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var JR="PersistentStream",kf=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new xf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(Ar(t.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new q(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return j(JR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(j(JR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ZE=class extends kf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=DH(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?Jn(s.readTime):te.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=wE(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=cE(u)?{documents:AH(o,u)}:{query:RH(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ZN(o,s.resumeToken);let l=_E(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=Af(o,s.snapshotVersion.toTimestamp());let l=_E(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=MH(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=wE(this.serializer),t.removeTarget=e,this.k_(t)}},XE=class extends kf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=SH(e.writeResults,e.commitTime),r=Jn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=wE(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>CH(this.serializer,r))};this.k_(t)}};var eI=class{},tI=class extends eI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,EE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(O.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,EE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(O.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},nI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ar(t),this._a=!1):j("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Co="RemoteStore",rI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Ao(this)&&(j(Co,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=X(u);l.Ia.add(4),yield Iu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Jf(l)})}(this))}))}),this.Aa=new nI(r,i)}};function Jf(n){return v(this,null,function*(){if(Ao(n))for(let e of n.da)yield e(!0)})}function Iu(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function cM(n,e){let t=X(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),BI(t)?UI(t):la(t).x_()&&jI(t,e))}function VI(n,e){let t=X(n),r=la(t);t.Ta.delete(e),r.x_()&&uM(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ao(t)&&t.Aa.set("Unknown"))}function jI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}la(n).H_(e)}function uM(n,e){n.Ra.$e(e),la(n).Y_(e)}function UI(n){n.Ra=new yE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),la(n).start(),n.Aa.aa()}function BI(n){return Ao(n)&&!la(n).M_()&&n.Ta.size>0}function Ao(n){return X(n).Ia.size===0}function lM(n){n.Ra=void 0}function KH(n){return v(this,null,function*(){n.Aa.set("Online")})}function QH(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{jI(n,e)})})}function YH(n,e){return v(this,null,function*(){lM(n),BI(n)?(n.Aa.la(e),UI(n)):n.Aa.set("Unknown")})}function JH(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof Cf&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){j(Co,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ff(n,r)}else if(e instanceof zs?n.Ra.Ye(e):e instanceof Df?n.Ra.it(e):n.Ra.et(e),!t.isEqual(te.min()))try{let r=yield aM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),uM(o,u);let p=new pu(h.target,u,l,h.sequenceNumber);jI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j(Co,"Failed to raise snapshot:",r),yield Ff(n,r)}})}function Ff(n,e,t){return v(this,null,function*(){if(!ua(e))throw e;n.Ia.add(1),yield Iu(n),n.Aa.set("Offline"),t||(t=()=>aM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){j(Co,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Jf(n)}))})}function dM(n,e){return e().catch(t=>Ff(n,t,e))}function Zf(n){return v(this,null,function*(){let e=X(n),t=vi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:SI;for(;ZH(e);)try{let i=yield qH(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,XH(e,i)}catch(i){yield Ff(e,i)}hM(e)&&fM(e)})}function ZH(n){return Ao(n)&&n.Pa.length<10}function XH(n,e){n.Pa.push(e);let t=vi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function hM(n){return Ao(n)&&!vi(n).M_()&&n.Pa.length>0}function fM(n){vi(n).start()}function e4(n){return v(this,null,function*(){vi(n).na()})}function t4(n){return v(this,null,function*(){let e=vi(n);for(let t of n.Pa)e.X_(t.mutations)})}function n4(n,e,t){return v(this,null,function*(){let r=n.Pa.shift(),i=fE.from(r,e,t);yield dM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Zf(n)})}function r4(n,e){return v(this,null,function*(){e&&vi(n).Z_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return vH(s)&&s!==O.ABORTED}(i.code)){let o=r.Pa.shift();vi(r).N_(),yield dM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Zf(r)}})}(n,e)),hM(n)&&fM(n)})}function ZR(n,e){return v(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),j(Co,"RemoteStore received new credentials");let r=Ao(t);t.Ia.add(3),yield Iu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Jf(t)})}function i4(n,e){return v(this,null,function*(){let t=X(n);e?(t.Ia.delete(2),yield Jf(t)):e||(t.Ia.add(2),yield Iu(t),t.Aa.set("Unknown"))})}function la(n){return n.Va||(n.Va=function(t,r,i){let o=X(t);return o.ia(),new ZE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:KH.bind(null,n),e_:QH.bind(null,n),n_:YH.bind(null,n),J_:JH.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),BI(n)?UI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),lM(n))}))),n.Va}function vi(n){return n.ma||(n.ma=function(t,r,i){let o=X(t);return o.ia(),new XE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:e4.bind(null,n),n_:r4.bind(null,n),ea:t4.bind(null,n),ta:n4.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.N_(),yield Zf(n)):(yield n.ma.stop(),n.Pa.length>0&&(j(Co,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var iI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function $I(n,e){if(Ar("AsyncQueue",`${e}: ${n}`),ua(n))return new q(O.UNAVAILABLE,`${e}: ${n}`);throw n}var Lf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=tu(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Vf=class{constructor(){this.fa=new Oe(Q.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},oa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Lf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var oI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},sI=class{constructor(){this.queries=XR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=X(t),o=i.queries;i.queries=XR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new q(O.ABORTED,"Firestore shutting down"))}};function XR(){return new Mr(n=>jN(n),Kf)}function o4(n,e){return v(this,null,function*(){let t=X(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new oI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=$I(s,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&HI(t)})}function s4(n,e){return v(this,null,function*(){let t=X(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function a4(n,e){let t=X(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&HI(t)}function c4(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function HI(n){n.Da.forEach(e=>{e.next()})}var aI,eN;(eN=aI||(aI={})).Fa="default",eN.Cache="cache";var cI=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==aI.Cache}};var jf=class{constructor(e){this.key=e}},Uf=class{constructor(e){this.key=e}},uI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=UN(e),this.eu=new Lf(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Vf,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Qf(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:R})}};return N(y)-N(C)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new oa(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Vf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Uf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new jf(r))}),t}uu(e){this.Ha=e.qs,this.Za=fe();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return oa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},qI="SyncEngine",lI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},dI=class{constructor(e){this.key=e,this.lu=!1}},hI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Mr(a=>jN(a),Kf),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(Q.comparator),this.Eu=new Map,this.Au=new mu,this.Ru={},this.Vu=new Map,this.mu=gu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function u4(n,e,t=!0){return v(this,null,function*(){let r=_M(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield pM(r,e,t,!0),i})}function l4(n,e){return v(this,null,function*(){let t=_M(n);yield pM(t,e,!0,!1)})}function pM(n,e,t,r){return v(this,null,function*(){let i=yield zH(n.localStore,Yn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield d4(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&cM(n.remoteStore,i),a})}function d4(n,e,t,r,i){return v(this,null,function*(){n.gu=(p,m,y)=>function(N,R,k,G){return v(this,null,function*(){let $=R.view.nu(k);$.Ds&&($=yield QR(N.localStore,R.query,!1).then(({documents:b})=>R.view.nu(b,$)));let pe=G&&G.targetChanges.get(R.targetId),He=G&&G.targetMismatches.get(R.targetId)!=null,le=R.view.applyChanges($,N.isPrimaryClient,pe,He);return nN(N,R.targetId,le._u),le.snapshot})}(n,p,m,y);let o=yield QR(n.localStore,e,!0),s=new uI(e,o.qs),a=s.nu(o.documents),u=fu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);nN(n,t,l._u);let h=new lI(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function h4(n,e,t){return v(this,null,function*(){let r=X(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Kf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&VI(r.remoteStore,i.targetId),fI(r,i.targetId)}).catch(ca))):(fI(r,i.targetId),yield zE(r.localStore,i.targetId,!0))})}function f4(n,e){return v(this,null,function*(){let t=X(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),VI(t.remoteStore,r.targetId))})}function p4(n,e,t){return v(this,null,function*(){let r=I4(n);try{let i=yield function(s,a){let u=X(s),l=$e.now(),h=a.reduce((y,C)=>y.add(C.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Pr(),N=fe();return u.Os.getEntries(y,h).next(R=>{C=R,C.forEach((k,G)=>{G.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let k=[];for(let G of a){let $=yH(G,p.get(G.key).overlayedDocument);$!=null&&k.push(new Or(G.key,$,ON($.value.mapValue),hi.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:$N(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Oe(ae)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield wu(r,i.changes),yield Zf(r.remoteStore)}catch(i){let o=$I(i,"Failed to persist write");t.reject(o)}})}function gM(n,e){return v(this,null,function*(){let t=X(n);try{let r=yield $H(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?_e(s.lu,14607):i.removedDocuments.size>0&&(_e(s.lu,42227),s.lu=!1))}),yield wu(t,r,e)}catch(r){yield ca(r)}})}function tN(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=X(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&HI(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g4(n,e,t){return v(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Oe(Q.comparator);s=s.insert(o,Cn.newNoDocument(o,te.min()));let a=fe().add(o),u=new Tf(te.min(),new Map,new Oe(ae),s,a);yield gM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),zI(r)}else yield zE(r.localStore,e,!1).then(()=>fI(r,e,t)).catch(ca)})}function m4(n,e){return v(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield BH(t.localStore,e);yM(t,r,null),mM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wu(t,i)}catch(i){yield ca(i)}})}function y4(n,e,t){return v(this,null,function*(){let r=X(n);try{let i=yield function(s,a){let u=X(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(_e(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);yM(r,e,t),mM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wu(r,i)}catch(i){yield ca(i)}})}function mM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function yM(n,e,t){let r=X(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function fI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||vM(n,r)})}function vM(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(VI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),zI(n))}function nN(n,e,t){for(let r of t)r instanceof jf?(n.Au.addReference(r.key,e),v4(n,r)):r instanceof Uf?(j(qI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||vM(n,r.key)):K(19791,{yu:r})}function v4(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(j(qI,"New document in limbo: "+t),n.Iu.add(r),zI(n))}function zI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Q(Le.fromString(e)),r=n.mu.next();n.Eu.set(r,new dI(t)),n.du=n.du.insert(t,r),cM(n.remoteStore,new pu(Yn(xI(t.path)),r,"TargetPurposeLimboResolution",CI.ue))}}function wu(n,e,t){return v(this,null,function*(){let r=X(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=BE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return v(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ua(p))throw p;j(LI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(m,N)}}})}(r.localStore,o))})}function _4(n,e){return v(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){j(qI,"User change. New user:",e.toKey());let r=yield sM(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new q(O.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wu(t,r.Bs)}})}function E4(n,e){let t=X(n),r=t.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let i=fe(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function _M(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g4.bind(null,e),e.hu.J_=a4.bind(null,e.eventManager),e.hu.pu=c4.bind(null,e.eventManager),e}function I4(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y4.bind(null,e),e}var EM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Yf(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return UH(this.persistence,new HE,t.initialUser,this.serializer)}Du(t){return new Nf(UE.Vi,this.serializer)}bu(t){return new GE}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),pI=class extends EM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){_e(this.persistence.referenceDelegate instanceof Mf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new SE(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new Nf(r=>Mf.Vi(r,t),this.serializer)}};var w4=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_4.bind(null,this.syncEngine),yield i4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new sI}()}createDatastore(t){let r=Yf(t.databaseInfo.databaseId),i=function(s){return new JE(s)}(t.databaseInfo);return function(s,a,u,l){return new tI(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new rI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>tN(this.syncEngine,r,0),function(){return Of.C()?new Of:new WE}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new hI(o,s,a,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=X(o);j(Co,"RemoteStore shutting down."),s.Ia.add(5),yield Iu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var gI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var _i="FirestoreClient",mI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=au.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){j(_i,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j(_i,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=$I(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function U_(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j(_i,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield sM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{mi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{mi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function rN(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield b4(n);j(_i,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ZR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ZR(e.remoteStore,i)),n._onlineComponents=e})}function b4(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j(_i,"Using user provided OfflineComponentProvider");try{yield U_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),yield U_(n,new EM)}}else j(_i,"Using default OfflineComponentProvider"),yield U_(n,new pI(void 0));return n._offlineComponents})}function IM(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j(_i,"Using user provided OnlineComponentProvider"),yield rN(n,n._uninitializedComponentsProvider._online)):(j(_i,"Using default OnlineComponentProvider"),yield rN(n,new w4))),n._onlineComponents})}function T4(n){return IM(n).then(e=>e.syncEngine)}function D4(n){return v(this,null,function*(){let e=yield IM(n),t=e.eventManager;return t.onListen=u4.bind(null,e.syncEngine),t.onUnlisten=h4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=l4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=f4.bind(null,e.syncEngine),t})}function C4(n,e,t={}){let r=new Kn;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,u,l){let h=new gI({next:m=>{h.Ou(),s.enqueueAndForget(()=>s4(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new q(O.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new q(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new cI(xI(a.path),h,{includeMetadataChanges:!0,ka:!0});return o4(o,p)}(yield D4(n),n.asyncQueue,e,t,r)})),r.promise}function wM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var iN=new Map;var bM="firestore.googleapis.com",oN=!0,Bf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bM,this.ssl=oN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:oN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LH)throw new q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B_;switch(r.type){case"firstParty":return new z_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=iN.get(t);r&&(j("ComponentProvider","Removing Datastore"),iN.delete(t),r.terminate())}(this),Promise.resolve()}};function S4(n,e,t,r={}){var i;n=Ks(n,yu);let o=ui(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Xh(`https://${u}`),ef("Firestore",!0)),s.host!==bM&&s.host!==u&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!cn(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=tt.MOCK_USER;else{h=YA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new tt(m)}n._authCredentials=new $_(new mf(h,p))}}var yI=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Pt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Eu(t,n._jsonSchema))return new n(e,r||null,new Q(Le.fromString(t.referencePath)))}};Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Be("string",Pt._jsonSchemaVersion),referencePath:Be("string")};var vu=class n extends yI{constructor(e,t,r){super(e,t,xI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Sn(n,e,...t){if(n=Xe(n),arguments.length===1&&(e=au.newId()),O$("doc","path",e),n instanceof yu){let r=Le.fromString(e,...t);return TR(r),new Pt(n,null,new Q(r))}{if(!(n instanceof Pt||n instanceof vu))throw new q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Le.fromString(e,...t));return TR(r),new Pt(n.firestore,n instanceof vu?n.converter:null,new Q(r))}}var sN="AsyncQueue",$f=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new xf(this,"async_queue_retry"),this.oc=()=>{let r=j_();r&&j(sN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=j_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=j_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Kn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ua(e))throw e;j(sN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ar("INTERNAL UNHANDLED ERROR: ",aN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=iI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:aN(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function aN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var sa=class extends yu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new $f,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new $f(e),this._firestoreClient=void 0,yield e}})}};function TM(n,e){let t=typeof n=="object"?n:mo(),r=typeof n=="string"?n:e||If,i=Tn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=QA("firestore");o&&S4(i,...o)}return i}function DM(n){if(n._terminated)throw new q(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||A4(n),n._firestoreClient}function A4(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Y_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new mI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var fi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(vt.fromBase64String(e))}catch(t){throw new q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:Be("string",fi._jsonSchemaVersion),bytes:Be("string")};var _u=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hf=class{constructor(e){this._methodName=e}};var pi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:Be("string",pi._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};var gi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new q(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:Be("string",gi._jsonSchemaVersion),vectorValues:Be("object")};var R4=/^__.*__$/,vI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Do(e,this.data,t,this.fieldTransforms)}};function CM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:n})}}var _I=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return qf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(CM(this.Ec)&&R4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},EI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yf(e)}Dc(e,t,r,i=!1){return new _I({Ec:e,methodName:t,bc:r,path:Yt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function N4(n){let e=n._freezeSettings(),t=Yf(n._databaseId);return new EI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function M4(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);NM("Data must be an object, but it was:",s,r);let a=AM(r,s),u,l;if(o.merge)u=new Wn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=P4(e,p,t);if(!s.contains(m))throw new q(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);x4(h,m)||h.push(m)}u=new Wn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new vI(new Dn(a),u,l)}function SM(n,e){if(RM(n=Xe(n)))return NM("Unsupported field value:",e,n),AM(n,e);if(n instanceof Hf)return function(r,i){if(!CM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=SM(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=$e.fromDate(r);return{timestampValue:Af(i.serializer,o)}}if(r instanceof $e){let o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Af(i.serializer,o)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fi)return{bytesValue:ZN(i.serializer,r._byteString)};if(r instanceof Pt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:FI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gi)return function(s,a){return{mapValue:{fields:{[RI]:{stringValue:NI},[Qs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return kI(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${DI(r)}`)}(n,e)}function AM(n,e){let t={};return DN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,(r,i)=>{let o=SM(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function RM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof pi||n instanceof fi||n instanceof Pt||n instanceof Hf||n instanceof gi)}function NM(n,e,t){if(!RM(t)||!lN(t)){let r=DI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function P4(n,e,t){if((e=Xe(e))instanceof _u)return e._internalPath;if(typeof e=="string")return MM(n,e);throw qf("Field path arguments must be of type string or ",n,!1,void 0,t)}var O4=new RegExp("[~\\*/\\[\\]]");function MM(n,e,t){if(e.search(O4)>=0)throw qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _u(...e.split("."))._internalPath}catch{throw qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new q(O.INVALID_ARGUMENT,a+n+u)}function x4(n,e){return n.some(t=>t.isEqual(e))}var zf=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new II(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(PM("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},II=class extends zf{data(){return super.data()}};function PM(n,e){return typeof e=="string"?MM(n,e):e instanceof _u?e._internalPath:e._delegate._internalPath}var wI=class{convertValue(e,t="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return So(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Qs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new gi(o)}convertGeoPoint(e){return new pi(Ce(e.latitude),Ce(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Wf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){let t=Rr(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Le.fromString(e);_e(iM(r),9688,{name:e});let i=new wf(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(t)||Ar(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function k4(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var _o=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Eo=class n extends zf{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Gs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(PM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Eo._jsonSchema={type:Be("string",Eo._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};var Gs=class extends Eo{data(e={}){return super.data(e)}},su=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _o(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Gs(this._firestore,this._userDataWriter,r.key,r,new _o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new q(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _o(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _o(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:F4(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=au.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function F4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:n})}}function bu(n){n=Ks(n,Pt);let e=Ks(n.firestore,sa);return C4(DM(e),n._key).then(t=>L4(e,n,t))}su._jsonSchemaVersion="firestore/querySnapshot/1.0",su._jsonSchema={type:Be("string",su._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};var bI=class extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}};function Ei(n,e,t){n=Ks(n,Pt);let r=Ks(n.firestore,sa),i=k4(n.converter,e,t);return xM(r,[M4(N4(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,hi.none())])}function OM(n){return xM(Ks(n.firestore,sa),[new hu(n._key,hi.none())])}function xM(n,e){return function(r,i){let o=new Kn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return p4(yield T4(r),i,o)})),o.promise}(DM(n),e)}function L4(n,e,t){let r=t.docs.get(e._key),i=new bI(n);return new Eo(n,i,e._key,r,new _o(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){aa=i})(di),Ut(new et("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new sa(new H_(r.getProvider("auth-internal")),new G_(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),at(ER,IR,e),at(ER,IR,"esm2017")})();var V4="firebase",j4="11.10.0";at(V4,j4,"app");var LM="@firebase/installations",QI="0.6.18";var VM=1e4,jM=`w:${QI}`,UM="FIS_v2",U4="https://firebaseinstallations.googleapis.com/v1",B4=60*60*1e3,$4="installations",H4="Installations";var q4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},No=new Qt($4,H4,q4);function BM(n){return n instanceof st&&n.code.includes("request-failed")}function $M({projectId:n}){return`${U4}/projects/${n}/installations`}function HM(n){return{token:n.token,requestStatus:2,expiresIn:G4(n.expiresIn),creationTime:Date.now()}}function qM(n,e){return v(this,null,function*(){let r=(yield e.json()).error;return No.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function zM({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function z4(n,{refreshToken:e}){let t=zM(n);return t.append("Authorization",W4(e)),t}function GM(n){return v(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function G4(n){return Number(n.replace("s","000"))}function W4(n){return`${UM} ${n}`}function K4(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=$M(n),s=zM(n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:t,authVersion:UM,appId:n.appId,sdkVersion:jM},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield GM(()=>fetch(o,l));if(h.ok){let p=yield h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:HM(p.authToken)}}else throw yield qM("Create Installation",h)})}function WM(n){return new Promise(e=>{setTimeout(e,n)})}function Q4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var Y4=/^[cdef][\w-]{21}$/,KI="";function J4(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=Z4(n);return Y4.test(t)?t:KI}catch{return KI}}function Z4(n){return Q4(n).substr(0,22)}function ep(n){return`${n.appName}!${n.appId}`}var KM=new Map;function QM(n,e){let t=ep(n);YM(t,e),X4(t,e)}function YM(n,e){let t=KM.get(n);if(t)for(let r of t)r(e)}function X4(n,e){let t=eq();t&&t.postMessage({key:n,fid:e}),tq()}var Ro=null;function eq(){return!Ro&&"BroadcastChannel"in self&&(Ro=new BroadcastChannel("[Firebase] FID Change"),Ro.onmessage=n=>{YM(n.data.key,n.data.fid)}),Ro}function tq(){KM.size===0&&Ro&&(Ro.close(),Ro=null)}var nq="firebase-installations-database",rq=1,Mo="firebase-installations-store",GI=null;function YI(){return GI||(GI=sf(nq,rq,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Mo)}}})),GI}function Xf(n,e){return v(this,null,function*(){let t=ep(n),i=(yield YI()).transaction(Mo,"readwrite"),o=i.objectStore(Mo),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&QM(n,e.fid),e})}function JM(n){return v(this,null,function*(){let e=ep(n),r=(yield YI()).transaction(Mo,"readwrite");yield r.objectStore(Mo).delete(e),yield r.done})}function tp(n,e){return v(this,null,function*(){let t=ep(n),i=(yield YI()).transaction(Mo,"readwrite"),o=i.objectStore(Mo),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&QM(n,a.fid),a})}function JI(n){return v(this,null,function*(){let e,t=yield tp(n.appConfig,r=>{let i=iq(r),o=oq(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===KI?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function iq(n){let e=n||{fid:J4(),registrationStatus:0};return ZM(e)}function oq(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(No.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=sq(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:aq(n)}:{installationEntry:e}}function sq(n,e){return v(this,null,function*(){try{let t=yield K4(n,e);return Xf(n.appConfig,t)}catch(t){throw BM(t)&&t.customData.serverCode===409?yield JM(n.appConfig):yield Xf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function aq(n){return v(this,null,function*(){let e=yield kM(n.appConfig);for(;e.registrationStatus===1;)yield WM(100),e=yield kM(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield JI(n);return r||t}return e})}function kM(n){return tp(n,e=>{if(!e)throw No.create("installation-not-found");return ZM(e)})}function ZM(n){return cq(n)?{fid:n.fid,registrationStatus:0}:n}function cq(n){return n.registrationStatus===1&&n.registrationTime+VM<Date.now()}function uq(r,i){return v(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=lq(n,t),s=z4(n,t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:jM,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},h=yield GM(()=>fetch(o,l));if(h.ok){let p=yield h.json();return HM(p)}else throw yield qM("Generate Auth Token",h)})}function lq(n,{fid:e}){return`${$M(n)}/${e}/authTokens:generate`}function ZI(n,e=!1){return v(this,null,function*(){let t,r=yield tp(n.appConfig,o=>{if(!XM(o))throw No.create("not-registered");let s=o.authToken;if(!e&&fq(s))return o;if(s.requestStatus===1)return t=dq(n,e),o;{if(!navigator.onLine)throw No.create("app-offline");let a=gq(o);return t=hq(n,a),a}});return t?yield t:r.authToken})}function dq(n,e){return v(this,null,function*(){let t=yield FM(n.appConfig);for(;t.authToken.requestStatus===1;)yield WM(100),t=yield FM(n.appConfig);let r=t.authToken;return r.requestStatus===0?ZI(n,e):r})}function FM(n){return tp(n,e=>{if(!XM(e))throw No.create("not-registered");let t=e.authToken;return mq(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function hq(n,e){return v(this,null,function*(){try{let t=yield uq(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Xf(n.appConfig,r),t}catch(t){if(BM(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield JM(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Xf(n.appConfig,r)}throw t}})}function XM(n){return n!==void 0&&n.registrationStatus===2}function fq(n){return n.requestStatus===2&&!pq(n)}function pq(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+B4}function gq(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function mq(n){return n.requestStatus===1&&n.requestTime+VM<Date.now()}function yq(n){return v(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield JI(e);return r?r.catch(console.error):ZI(e).catch(console.error),t.fid})}function vq(n,e=!1){return v(this,null,function*(){let t=n;return yield _q(t),(yield ZI(t,e)).token})}function _q(n){return v(this,null,function*(){let{registrationPromise:e}=yield JI(n);e&&(yield e)})}function Eq(n){if(!n||!n.options)throw WI("App Configuration");if(!n.name)throw WI("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw WI(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function WI(n){return No.create("missing-app-config-values",{valueName:n})}var eP="installations",Iq="installations-internal",wq=n=>{let e=n.getProvider("app").getImmediate(),t=Eq(e),r=Tn(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},bq=n=>{let e=n.getProvider("app").getImmediate(),t=Tn(e,eP).getImmediate();return{getId:()=>yq(t),getToken:i=>vq(t,i)}};function Tq(){Ut(new et(eP,wq,"PUBLIC")),Ut(new et(Iq,bq,"PRIVATE"))}Tq();at(LM,QI);at(LM,QI,"esm2017");var np="analytics",Dq="firebase_id",Cq="origin",Sq=60*1e3,Aq="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ow="https://www.googletagmanager.com/gtag/js";var $t=new zn("@firebase/analytics");var Rq={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Jt=new Qt("analytics","Analytics",Rq);function Nq(n){if(!n.startsWith(ow)){let e=Jt.create("invalid-gtag-resource",{gtagURL:n});return $t.warn(e.message),""}return n}function aP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Mq(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Pq(n,e){let t=Mq("firebase-js-sdk-policy",{createScriptURL:Nq}),r=document.createElement("script"),i=`${ow}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Oq(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function xq(n,e,t,r,i,o){return v(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield aP(t)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){$t.error(a)}n("config",i,o)})}function kq(n,e,t,r,i){return v(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield aP(t);for(let u of s){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){$t.error(o)}})}function Fq(n,e,t,r){function i(o,...s){return v(this,null,function*(){try{if(o==="event"){let[a,u]=s;yield kq(n,e,t,a,u)}else if(o==="config"){let[a,u]=s;yield xq(n,e,t,r,a,u)}else if(o==="consent"){let[a,u]=s;n("consent",a,u)}else if(o==="get"){let[a,u,l]=s;n("get",a,u,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){$t.error(a)}})}return i}function Lq(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=Fq(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function Vq(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(ow)&&t.src.includes(n))return t;return null}var jq=30,Uq=1e3,ew=class{constructor(e={},t=Uq){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},cP=new ew;function Bq(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function $q(n){return v(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:Bq(r)},o=Aq.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Jt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function Hq(r){return v(this,arguments,function*(n,e=cP,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Jt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Jt.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new tw;return setTimeout(()=>v(null,null,function*(){u.abort()}),t!==void 0?t:Sq),uP({appId:i,apiKey:o,measurementId:s},a,u,e)})}function uP(o,s,a){return v(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=cP){var u;let{appId:l,measurementId:h}=n;try{yield qq(r,e)}catch(p){if(h)return $t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield $q(n);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!zq(m)){if(i.deleteThrottleMetadata(l),h)return $t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:h};throw p}let y=Number((u=m?.customData)===null||u===void 0?void 0:u.httpStatus)===503?g_(t,i.intervalMillis,jq):g_(t,i.intervalMillis),C={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return i.setThrottleMetadata(l,C),$t.debug(`Calling attemptFetch again in ${y} millis`),uP(n,C,r,i)}})}function qq(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function zq(n){if(!(n instanceof st)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var tw=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var nw;function Gq(n,e,t,r,i){return v(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}var rw;function Wq(n){rw=n}function Kq(n){nw=n}function Qq(){return v(this,null,function*(){if(Jc())try{yield nf()}catch(n){return $t.warn(Jt.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return $t.warn(Jt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Yq(n,e,t,r,i,o,s){return v(this,null,function*(){var a;let u=Hq(n);u.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&$t.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>$t.error(y)),e.push(u);let l=Qq().then(y=>{if(y)return r.getId()}),[h,p]=yield Promise.all([u,l]);Vq(o)||Pq(o,h.measurementId),rw&&(i("consent","default",rw),Wq(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[Cq]="firebase",m.update=!0,p!=null&&(m[Dq]=p),i("config",h.measurementId,m),nw&&(i("set",nw),Kq(void 0)),h.measurementId})}var iw=class{constructor(e){this.app=e}_delete(){return delete Tu[this.app.options.appId],Promise.resolve()}},Tu={},tP=[],nP={},XI="dataLayer",Jq="gtag",rP,lP,iP=!1;function Zq(){let n=[];if(tf()&&n.push("This is a browser extension environment."),nR()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Jt.create("invalid-analytics-context",{errorInfo:e});$t.warn(t.message)}}function Xq(n,e,t){Zq();let r=n.options.appId;if(!r)throw Jt.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)$t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Jt.create("no-api-key");if(Tu[r]!=null)throw Jt.create("already-exists",{id:r});if(!iP){Oq(XI);let{wrappedGtag:o,gtagCore:s}=Lq(Tu,tP,nP,XI,Jq);lP=o,rP=s,iP=!0}return Tu[r]=Yq(n,tP,nP,e,rP,XI,t),new iw(n)}function dP(n=mo()){n=Xe(n);let e=Tn(n,np);return e.isInitialized()?e.getImmediate():ez(n)}function ez(n,e={}){let t=Tn(n,np);if(t.isInitialized()){let i=t.getImmediate();if(cn(e,t.getOptions()))return i;throw Jt.create("already-initialized")}return t.initialize({options:e})}function tz(n,e,t,r){n=Xe(n),Gq(lP,Tu[n.app.options.appId],e,t,r).catch(i=>$t.error(i))}var oP="@firebase/analytics",sP="0.10.17";function nz(){Ut(new et(np,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Xq(r,i,t)},"PUBLIC")),Ut(new et("analytics-internal",n,"PRIVATE")),at(oP,sP),at(oP,sP,"esm2017");function n(e){try{let t=e.getProvider(np).getImmediate();return{logEvent:(r,i,o)=>tz(t,r,i,o)}}catch(t){throw Jt.create("interop-component-reg-failed",{reason:t})}}}nz();function SP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var AP=SP,RP=new Qt("auth","Firebase",SP());var cp=new zn("@firebase/auth");function rz(n,...e){cp.logLevel<=de.WARN&&cp.warn(`Auth (${di}): ${n}`,...e)}function ip(n,...e){cp.logLevel<=de.ERROR&&cp.error(`Auth (${di}): ${n}`,...e)}function tr(n,...e){throw Rw(n,...e)}function Po(n,...e){return Rw(n,...e)}function NP(n,e,t){let r=Object.assign(Object.assign({},AP()),{[e]:t});return new Qt("auth","Firebase",r).create(e,{appName:n.name})}function Fr(n){return NP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return RP.create(n,...e)}function W(n,e,...t){if(!n)throw Rw(e,...t)}function xr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ip(e),new Error(e)}function bi(n,e){n||xr(e)}function uw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function iz(){return hP()==="http:"||hP()==="https:"}function hP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function oz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iz()||tf()||"connection"in navigator)?navigator.onLine:!0}function sz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Oo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,bi(t>e,"Short delay should be less than long delay!"),this.isMobile=JA()||XA()}get(){return oz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Nw(n,e){bi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var up=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var az={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var cz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uz=new Oo(3e4,6e4);function Lr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function nr(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return MP(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Zc(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return ZA()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&ui(n.emulatorConfig.host)&&(y.credentials="include"),up.fetch()(yield PP(n,n.config.apiHost,t,p),y)}))})}function MP(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},az),e);try{let i=new lw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw rp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rp(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw rp(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw rp(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw NP(n,h,l);tr(n,h)}}catch(i){if(i instanceof st)throw i;tr(n,"network-request-failed",{message:String(i)})}})}function Pu(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield nr(n,e,t,r,i);return"mfaPendingCredential"in l&&tr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function PP(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Nw(n.config,i):`${n.config.apiScheme}://${i}`;return cz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function lz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var lw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Po(this.auth,"network-request-failed")),uz.get())})}};function rp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Po(n,e,r);return i.customData._tokenResponse=t,i}function fP(n){return n!==void 0&&n.enterprise!==void 0}var dw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function dz(n,e){return v(this,null,function*(){return nr(n,"GET","/v2/recaptchaConfig",Lr(n,e))})}function hz(n,e){return v(this,null,function*(){return nr(n,"POST","/v1/accounts:delete",e)})}function lp(n,e){return v(this,null,function*(){return nr(n,"POST","/v1/accounts:lookup",e)})}function Cu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function OP(n,e=!1){return v(this,null,function*(){let t=Xe(n),r=yield t.getIdToken(e),i=Mw(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Cu(sw(i.auth_time)),issuedAtTime:Cu(sw(i.iat)),expirationTime:Cu(sw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function sw(n){return Number(n)*1e3}function Mw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ip("JWT malformed, contained fewer than 3 sections"),null;try{let i=Jh(t);return i?JSON.parse(i):(ip("Failed to decode base64 JWT payload"),null)}catch(i){return ip("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pP(n){let e=Mw(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function da(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof st&&fz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function fz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var hw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Au=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function dp(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield da(n,lp(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?kP(o.providerUserInfo):[],a=pz(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Au(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function xP(n){return v(this,null,function*(){let e=Xe(n);yield dp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function pz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function kP(n){return n.map(e=>{var{providerId:t}=e,r=wg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function gz(n,e){return v(this,null,function*(){let t=yield MP(n,{},()=>v(null,null,function*(){let r=Zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield PP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&ui(n.emulatorConfig.host)&&(u.credentials="include"),up.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function mz(n,e){return v(this,null,function*(){return nr(n,"POST","/v2/accounts:revokeToken",Lr(n,e))})}var Su=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=pP(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield gz(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return xr("not implemented")}};function Ii(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var wi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Au(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield da(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return OP(this,e)}reload(){return xP(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield dp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Bt(this.auth.app))return Promise.reject(Fr(this.auth));let e=yield this.getIdToken();return yield da(this,hz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,G=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:pe,isAnonymous:He,providerData:le,stsTokenManager:b}=t;W($&&b,e,"internal-error");let _=Su.fromJSON(this.name,b);W(typeof $=="string",e,"internal-error"),Ii(p,e.name),Ii(m,e.name),W(typeof pe=="boolean",e,"internal-error"),W(typeof He=="boolean",e,"internal-error"),Ii(y,e.name),Ii(C,e.name),Ii(N,e.name),Ii(R,e.name),Ii(k,e.name),Ii(G,e.name);let I=new n({uid:$,auth:e,email:m,emailVerified:pe,displayName:p,isAnonymous:He,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:k,lastLoginAt:G});return le&&Array.isArray(le)&&(I.providerData=le.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Su;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield dp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?kP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Su;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Au(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var gP=new Map;function kr(n){bi(n instanceof Function,"Expected a class definition");let e=gP.get(n);return e?(bi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gP.set(n,e),e)}var yz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),fw=yz;function op(n,e,t){return`firebase:${n}:${e}:${t}`}var hp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=op(this.userKey,i.apiKey,o),this.fullPersistenceKey=op("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield lp(this.auth,{idToken:e}).catch(()=>{});return t?wi._fromGetAccountInfoResponse(this.auth,t,e):null}return wi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(kr(fw),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||kr(fw),s=op(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield lp(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield wi._fromGetAccountInfoResponse(e,m,h)}else p=wi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function mP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BP(e))return"Blackberry";if($P(e))return"Webos";if(LP(e))return"Safari";if((e.includes("chrome/")||VP(e))&&!e.includes("edge/"))return"Chrome";if(UP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function FP(n=Ze()){return/firefox\//i.test(n)}function LP(n=Ze()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VP(n=Ze()){return/crios\//i.test(n)}function jP(n=Ze()){return/iemobile/i.test(n)}function UP(n=Ze()){return/android/i.test(n)}function BP(n=Ze()){return/blackberry/i.test(n)}function $P(n=Ze()){return/webos/i.test(n)}function Pw(n=Ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function vz(n=Ze()){var e;return Pw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _z(){return eR()&&document.documentMode===10}function HP(n=Ze()){return Pw(n)||UP(n)||$P(n)||BP(n)||/windows phone/i.test(n)||jP(n)}function qP(n,e=[]){let t;switch(n){case"Browser":t=mP(Ze());break;case"Worker":t=`${mP(Ze())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${di}/${r}`}var pw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Ez(t){return v(this,arguments,function*(n,e={}){return nr(n,"GET","/v2/passwordPolicy",Lr(n,e))})}var Iz=6,gw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Iz,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var mw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fp(this),this.idTokenSubscription=new fp(this),this.beforeStateQueue=new pw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield hp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield lp(this,{idToken:e}),r=yield wi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Bt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield dp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=sz()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Bt(this.app))return Promise.reject(Fr(this));let t=e?Xe(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Bt(this.app)?Promise.reject(Fr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Bt(this.app)?Promise.reject(Fr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(kr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Ez(this),t=new gw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield mz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&kr(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield hp.create(this,[kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&rz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ti(n){return Xe(n)}var fp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=iR(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ip={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wz(n){Ip=n}function zP(n){return Ip.loadJS(n)}function bz(){return Ip.recaptchaEnterpriseScript}function Tz(){return Ip.gapiScript}function GP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var yw=class{constructor(){this.enterprise=new vw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},vw=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Dz="recaptcha-enterprise",WP="NO_RECAPTCHA",_w=class{constructor(e){this.type=Dz,this.auth=Ti(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){dz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new dw(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;fP(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(WP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yw().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&fP(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=bz();u.length!==0&&(u+=a),zP(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Du(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new _w(n),s;if(i)s=WP;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function pp(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Du(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Du(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Du(n,e,t);return r(n,a).catch(u=>v(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Du(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield Du(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function KP(n,e){let t=Tn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(cn(o,e??{}))return i;tr(i,"already-initialized")}return t.initialize({options:e})}function Cz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(kr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function QP(n,e,t){let r=Ti(n);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=YP(e),{host:s,port:a}=Sz(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(cn(l,r.config.emulator)&&cn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ui(s)?(Xh(`${o}//${s}${u}`),ef("Auth",!0)):i||Az()}function YP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Sz(n){let e=YP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:yP(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:yP(s)}}}function yP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Az(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ru=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,t){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}};function Rz(n,e){return v(this,null,function*(){return nr(n,"POST","/v1/accounts:signUp",e)})}function Nz(n,e){return v(this,null,function*(){return Pu(n,"POST","/v1/accounts:signInWithPassword",Lr(n,e))})}function Mz(n,e){return v(this,null,function*(){return nr(n,"POST","/v1/accounts:sendOobCode",Lr(n,e))})}function Pz(n,e){return v(this,null,function*(){return Mz(n,e)})}function Oz(n,e){return v(this,null,function*(){return Pu(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))})}function xz(n,e){return v(this,null,function*(){return Pu(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))})}var Nu=class n extends Ru{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pp(e,t,"signInWithPassword",Nz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Oz(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pp(e,r,"signUpPassword",Rz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return xz(e,{idToken:t,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function aw(n,e){return v(this,null,function*(){return Pu(n,"POST","/v1/accounts:signInWithIdp",Lr(n,e))})}function kz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fz(n){let e=Ls(Vs(n)).link,t=e?Ls(Vs(e)).deep_link_id:null,r=Ls(Vs(n)).deep_link_id;return(r?Ls(Vs(r)).link:null)||r||t||e||n}var gp=class n{constructor(e){var t,r,i,o,s,a;let u=Ls(Vs(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=kz((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Fz(e);try{return new n(t)}catch{return null}}};var JP=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Nu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=gp.parseLink(r);return W(i,"argument-error"),Nu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),mp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ew=class extends mp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Lz(n,e){return v(this,null,function*(){return Pu(n,"POST","/v1/accounts:signUp",Lr(n,e))})}var ha=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield wi._fromIdTokenResponse(e,r,i),s=vP(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vP(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function vP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Iw=class n extends st{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function ZP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Iw._fromErrorAndOperation(n,o,e,r):o})}function Vz(n,e,t=!1){return v(this,null,function*(){let r=yield da(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ha._forOperation(n,"link",r)})}function jz(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Bt(r.app))return Promise.reject(Fr(r));let i="reauthenticate";try{let o=yield da(n,ZP(r,i,e,n),t);W(o.idToken,r,"internal-error");let s=Mw(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(n.uid===a,r,"user-mismatch"),ha._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&tr(r,"user-mismatch"),o}})}function XP(n,e,t=!1){return v(this,null,function*(){if(Bt(n.app))return Promise.reject(Fr(n));let r="signIn",i=yield ZP(n,r,e),o=yield ha._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function eO(n,e){return v(this,null,function*(){return XP(Ti(n),e)})}function Uz(n,e,t){var r;W(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),W(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),W(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(W(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(W(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function tO(n){return v(this,null,function*(){let e=Ti(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function wp(n,e,t){return v(this,null,function*(){let r=Ti(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Uz(r,i,t),yield pp(r,i,"getOobCode",Pz,"EMAIL_PASSWORD_PROVIDER")})}function Ow(n,e,t){return v(this,null,function*(){if(Bt(n.app))return Promise.reject(Fr(n));let r=Ti(n),s=yield pp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lz,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&tO(n),u}),a=yield ha._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function xw(n,e,t){return Bt(n.app)?Promise.reject(Fr(n)):eO(Xe(n),JP.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&tO(n),r}))}function Bz(n,e){return v(this,null,function*(){return nr(n,"POST","/v1/accounts:update",e)})}function kw(r,i){return v(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=Xe(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield da(o,Bz(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function nO(n,e,t,r){return Xe(n).onIdTokenChanged(e,t,r)}function rO(n,e,t){return Xe(n).beforeAuthStateChanged(e,t)}function Fw(n){return Xe(n).signOut()}var yp="__sak";var vp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yp,"1"),this.storage.removeItem(yp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var $z=1e3,Hz=10,qz=(()=>{class n extends vp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);_z()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Hz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},$z)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Hr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Hr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Hr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),iO=qz;var zz=(()=>{class n extends vp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Lw=zz;function Gz(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Wz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield Gz(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function oO(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ww=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=oO("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function er(){return window}function Kz(n){er().location.href=n}function sO(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}function Qz(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Yz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Jz(){return sO()?self:null}var aO="firebaseLocalStorageDb",Zz=1,_p="firebaseLocalStorage",cO="fbase_key",xo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function bp(n,e){return n.transaction([_p],e?"readwrite":"readonly").objectStore(_p)}function Xz(){let n=indexedDB.deleteDatabase(aO);return new xo(n).toPromise()}function bw(){let n=indexedDB.open(aO,Zz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(_p,{keyPath:cO})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(_p)?e(r):(r.close(),yield Xz(),e(yield bw()))}))})}function _P(n,e,t){return v(this,null,function*(){let r=bp(n,!0).put({[cO]:e,value:t});return new xo(r).toPromise()})}function e3(n,e){return v(this,null,function*(){let t=bp(n,!1).get(e),r=yield new xo(t).toPromise();return r===void 0?null:r.value})}function EP(n,e){let t=bp(n,!0).delete(e);return new xo(t).toPromise()}var t3=800,n3=3,r3=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield bw(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>n3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return sO()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=Wz._getInstance(Jz()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Qz(),!this.activeServiceWorker)return;this.sender=new ww(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Yz()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield bw();return yield _P(t,yp,"1"),yield EP(t,yp),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>_P(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>e3(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>EP(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=bp(o,!1).getAll();return new xo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),t3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),uO=r3;var Dse=GP("rcb"),Cse=new Oo(3e4,6e4);function i3(n,e){return e?kr(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Mu=class extends Ru{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return aw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return aw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return aw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function o3(n){return XP(n.auth,new Mu(n),n.bypassAuthState)}function s3(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),jz(t,new Mu(n),n.bypassAuthState)}function a3(n){return v(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),Vz(t,new Mu(n),n.bypassAuthState)})}var Tw=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o3;case"linkViaPopup":case"linkViaRedirect":return a3;case"reauthViaPopup":case"reauthViaRedirect":return s3;default:tr(this.auth,"internal-error")}}resolve(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Sse=new Oo(2e3,1e4);var c3="pendingRedirect",sp=new Map,Dw=class n extends Tw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=sp.get(this.auth._key());if(!e){try{let r=(yield u3(this.resolver,this.auth))?yield Hr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}sp.set(this.auth._key(),e)}return this.bypassAuthState||sp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Hr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Hr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function u3(n,e){return v(this,null,function*(){let t=h3(e),r=d3(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function l3(n,e){sp.set(n._key(),e)}function d3(n){return kr(n._redirectPersistence)}function h3(n){return op(c3,n.config.apiKey,n.name)}function f3(n,e,t=!1){return v(this,null,function*(){if(Bt(n.app))return Promise.reject(Fr(n));let r=Ti(n),i=i3(r,e),s=yield new Dw(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var p3=10*60*1e3,Cw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lO(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Po(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=p3&&this.cachedEventUids.clear(),this.cachedEventUids.has(IP(e))}saveEventToCache(e){this.cachedEventUids.add(IP(e)),this.lastProcessedEventTime=Date.now()}};function IP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lO({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function g3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lO(n);default:return!1}}function m3(t){return v(this,arguments,function*(n,e={}){return nr(n,"GET","/v1/projects",e)})}var y3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v3=/^https?/;function _3(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield m3(n);for(let t of e)try{if(E3(t))return}catch{}tr(n,"unauthorized-domain")})}function E3(n){let e=uw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!v3.test(t))return!1;if(y3.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var I3=new Oo(3e4,6e4);function wP(){let n=er().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function w3(n){return new Promise((e,t)=>{var r,i,o;function s(){wP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wP(),t(Po(n,"network-request-failed"))},timeout:I3.get()})}if(!((i=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=er().gapi)===null||o===void 0)&&o.load)s();else{let a=GP("iframefcb");return er()[a]=()=>{gapi.load?s():t(Po(n,"network-request-failed"))},zP(`${Tz()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw ap=null,e})}var ap=null;function b3(n){return ap=ap||w3(n),ap}var T3=new Oo(5e3,15e3),D3="__/auth/iframe",C3="emulator/auth/iframe",S3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R3(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Nw(e,C3):`https://${n.config.authDomain}/${D3}`,r={apiKey:e.apiKey,appName:n.name,v:di},i=A3.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Zc(r).slice(1)}`}function N3(n){return v(this,null,function*(){let e=yield b3(n),t=er().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:R3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S3,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Po(n,"network-request-failed"),a=er().setTimeout(()=>{o(s)},T3.get());function u(){er().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var M3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P3=500,O3=600,x3="_blank",k3="http://localhost",Ep=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function F3(n,e,t,r=P3,i=O3){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},M3),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ze().toLowerCase();t&&(a=VP(l)?x3:t),FP(l)&&(e=e||k3,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(vz(l)&&a!=="_self")return L3(e||"",a),new Ep(null);let p=window.open(e||"",a,h);W(p,n,"popup-blocked");try{p.focus()}catch{}return new Ep(p)}function L3(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var V3="__/auth/handler",j3="emulator/auth/handler",U3=encodeURIComponent("fac");function bP(n,e,t,r,i,o){return v(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:di,eventId:i};if(e instanceof mp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",rR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Ew){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${U3}=${encodeURIComponent(u)}`:"";return`${B3(n)}?${Zc(a).slice(1)}${l}`})}function B3({config:n}){return n.emulator?Nw(n,j3):`https://${n.authDomain}/${V3}`}var cw="webStorageSupport",Sw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lw,this._completeRedirectFn=f3,this._overrideRedirectResult=l3}_openPopup(e,t,r,i){return v(this,null,function*(){var o;bi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield bP(e,t,r,uw(),i);return F3(e,s,oO())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield bP(e,t,r,uw(),i);return Kz(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(bi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield N3(e),r=new Cw(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cw,{type:cw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[cw];s!==void 0&&t(!!s),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HP()||LP()||Pw()}},dO=Sw;var TP="@firebase/auth",DP="1.10.8";var Aw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function $3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H3(n){Ut(new et("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qP(n)},l=new mw(r,i,o,u);return Cz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ut(new et("auth-internal",e=>{let t=Ti(e.getProvider("auth").getImmediate());return(r=>new Aw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),at(TP,DP,$3(n)),at(TP,DP,"esm2017")}var q3=5*60,z3=p_("authIdTokenMaxAge")||q3,CP=null,G3=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>z3)return;let i=t?.token;CP!==i&&(CP=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Vw(n=mo()){let e=Tn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=KP(n,{popupRedirectResolver:dO,persistence:[uO,iO,Lw]}),r=p_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=G3(o.toString());rO(t,s,()=>s(t.currentUser)),nO(t,a=>s(a))}}let i=h_("auth");return i&&QP(t,`http://${i}`),t}function W3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Po("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",W3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H3("Browser");var Di={production:!1,firebase:{apiKey:"AIzaSyBO2LgH44L2i_SgV9iEwBr9sznXatAbDLY",authDomain:"database-9f5ec.firebaseapp.com",projectId:"database-9f5ec",storageBucket:"database-9f5ec.firebasestorage.app",messagingSenderId:"225913763350",appId:"1:225913763350:web:ae6008a4ecf405f0d62737",measurementId:"G-5EYMTM0X1L"}};var K3={apiKey:Di.firebase.apiKey,authDomain:Di.firebase.authDomain,projectId:Di.firebase.projectId,storageBucket:Di.firebase.storageBucket,messagingSenderId:Di.firebase.messagingSenderId,appId:Di.firebase.appId,measurementId:Di.firebase.measurementId},jw=N_(K3),ko=Vw(jw),An=TM(jw),Zae=dP(jw);var Tp=class n{currentUserSubject=new Ie(null);currentUser$=this.currentUserSubject.asObservable();currentUserProfileSubject=new Ie(null);currentUserProfile$=this.currentUserProfileSubject.asObservable();constructor(){ko.onAuthStateChanged(e=>v(this,null,function*(){if(this.currentUserSubject.next(e),e){this.updateLastLogin(e.uid);let t=yield this.getUserProfile(e.uid);this.currentUserProfileSubject.next(t)}else this.currentUserProfileSubject.next(null)}))}register(e,t,r,i){return v(this,null,function*(){try{let s=(yield Ow(ko,e,t)).user;if(r||i){let a=`${r||""} ${i||""}`.trim();yield kw(s,{displayName:a})}return yield this.saveUserProfile(s,r,i),s}catch(o){throw new Error(this.getErrorMessage(o.code))}})}signIn(e,t){return v(this,null,function*(){try{return(yield xw(ko,e,t)).user}catch(r){throw new Error(this.getErrorMessage(r.code))}})}signOut(){return v(this,null,function*(){try{yield Fw(ko)}catch{throw new Error("Sign out failed")}})}saveUserProfile(e,t,r){return v(this,null,function*(){let i={uid:e.uid,email:e.email,displayName:e.displayName||void 0,firstName:t,lastName:r,role:"user",createdAt:new Date,lastLoginAt:new Date,preferences:{favoriteGenres:[],newsletter:!1}};yield Ei(Sn(An,"users",e.uid),i)})}updateLastLogin(e){return v(this,null,function*(){try{let t=Sn(An,"users",e);(yield bu(t)).exists()&&(yield Ei(t,{lastLoginAt:new Date},{merge:!0}))}catch(t){console.error("Error updating last login:",t)}})}getUserProfile(e){return v(this,null,function*(){try{let t=Sn(An,"users",e),r=yield bu(t);return r.exists()?r.data():null}catch(t){return console.error("Error getting user profile:",t),null}})}updateUserProfile(e,t){return v(this,null,function*(){try{let r=Sn(An,"users",e);yield Ei(r,t,{merge:!0})}catch(r){throw console.error("Error updating user profile:",r),new Error("Failed to update profile")}})}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return!!this.currentUserSubject.value}isAdmin(){return this.currentUserProfileSubject.value?.role==="admin"}getCurrentUserProfile(){return this.currentUserProfileSubject.value}promoteToAdmin(e){return v(this,null,function*(){try{let t=Sn(An,"users",e);if(yield Ei(t,{role:"admin"},{merge:!0}),e===this.getCurrentUser()?.uid){let r=yield this.getUserProfile(e);this.currentUserProfileSubject.next(r)}}catch(t){throw console.error("Error promoting user to admin:",t),new Error("Failed to promote user to admin")}})}demoteFromAdmin(e){return v(this,null,function*(){try{let t=Sn(An,"users",e);if(yield Ei(t,{role:"user"},{merge:!0}),e===this.getCurrentUser()?.uid){let r=yield this.getUserProfile(e);this.currentUserProfileSubject.next(r)}}catch(t){throw console.error("Error demoting user from admin:",t),new Error("Failed to demote user from admin")}})}sendPasswordReset(e){return v(this,null,function*(){try{yield wp(ko,e)}catch(t){throw new Error(this.getErrorMessage(t.code))}})}getErrorMessage(e){switch(e){case"auth/user-not-found":return"No user found with this email address.";case"auth/wrong-password":return"Incorrect password.";case"auth/email-already-in-use":return"This email address is already registered.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/invalid-email":return"Invalid email address format.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"An error occurred. Please try again."}}sendPasswordResetEmail(e){return v(this,null,function*(){try{yield wp(ko,e)}catch(t){throw t}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Dp=class n{notifications=[];notificationsSubject=new Ie([]);notifications$=this.notificationsSubject.asObservable();show(e){let t=this.generateId(),r=P({id:t,duration:5e3},e);return this.notifications.push(r),this.notificationsSubject.next([...this.notifications]),!r.persistent&&r.duration&&setTimeout(()=>{this.hide(t)},r.duration),t}hide(e){this.notifications=this.notifications.filter(t=>t.id!==e),this.notificationsSubject.next([...this.notifications])}clearAll(){this.notifications=[],this.notificationsSubject.next([])}success(e,t,r){return this.show({type:"success",title:e,message:t,duration:r})}info(e,t,r){return this.show({type:"info",title:e,message:t,duration:r})}warning(e,t,r){return this.show({type:"warning",title:e,message:t,duration:r})}error(e,t,r){return this.show({type:"error",title:e,message:t,persistent:r})}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var hO=class n{constructor(e,t){this.authService=e;this.notificationService=t;this.initializeCart(),this.setupAuthListener()}cartItems=[];cartSubject=new Ie([]);CART_STORAGE_KEY="readify_cart";cart$=this.cartSubject.asObservable();initializeCart(){return v(this,null,function*(){this.loadCartFromLocalStorage();let e=this.authService.getCurrentUser();e&&(yield this.syncCartWithFirebase(e.uid))})}setupAuthListener(){this.authService.currentUser$.subscribe(e=>v(this,null,function*(){e?(this.cartItems.length>0&&this.notificationService.info("Cart Sync","Syncing your cart with your account...",2e3),yield this.syncCartWithFirebase(e.uid)):(this.cartItems.length>0&&this.notificationService.info("Signed Out","Cart saved locally. Sign in to sync across devices.",4e3),yield this.handleUserLogout())}))}syncCartWithFirebase(e){return v(this,null,function*(){try{let t=yield this.loadCartFromFirebase(e),r=this.cartItems,i=r.length>0,o=t.length>0,s=[...t],a=0;r.forEach(u=>{t.some(h=>h.book.id===u.book.id)||(s.push(u),a++)}),this.cartItems=s,this.cartSubject.next([...this.cartItems]),s.length>0&&(yield this.saveCartToFirebase(e)),localStorage.removeItem(this.CART_STORAGE_KEY),o&&i&&a>0?this.notificationService.success("Cart Merged",`Added ${a} local items to your account cart.`,3e3):o&&!i&&this.notificationService.success("Cart Restored",`Restored ${t.length} items from your account.`,3e3)}catch(t){console.error("Error syncing cart with Firebase:",t),this.loadCartFromLocalStorage()}})}handleUserLogout(){return v(this,null,function*(){this.saveCartToLocalStorage()})}addToCart(e,t=1){return v(this,null,function*(){let r=this.cartItems.find(i=>i.book.id===e.id);if(r)r.quantity+=t;else{let i={book:e,quantity:t,addedAt:new Date};this.cartItems.push(i)}yield this.updateCart()})}removeFromCart(e){return v(this,null,function*(){this.cartItems=this.cartItems.filter(t=>t.book.id!==e),yield this.updateCart()})}updateQuantity(e,t){return v(this,null,function*(){let r=this.cartItems.find(i=>i.book.id===e);r&&(t<=0?yield this.removeFromCart(e):(r.quantity=t,yield this.updateCart()))})}clearCart(){return v(this,null,function*(){this.cartItems=[],yield this.updateCart()})}getTotalItems(){return this.cartItems.reduce((e,t)=>e+t.quantity,0)}getTotalPrice(){return this.cartItems.reduce((e,t)=>e+t.book.price*t.quantity,0)}isInCart(e){return this.cartItems.some(t=>t.book.id===e)}getBookQuantity(e){let t=this.cartItems.find(r=>r.book.id===e);return t?t.quantity:0}updateCart(){return v(this,null,function*(){this.cartSubject.next([...this.cartItems]);let e=this.authService.getCurrentUser();e?yield this.saveCartToFirebase(e.uid):this.saveCartToLocalStorage()})}saveCartToFirebase(e){return v(this,null,function*(){try{let t=Sn(An,"carts",e),r={items:this.cartItems,updatedAt:new Date,totalItems:this.getTotalItems(),totalPrice:this.getTotalPrice()};yield Ei(t,r)}catch(t){console.error("Error saving cart to Firebase:",t),this.saveCartToLocalStorage()}})}loadCartFromFirebase(e){return v(this,null,function*(){try{let t=Sn(An,"carts",e),r=yield bu(t);return r.exists()?r.data().items||[]:[]}catch(t){return console.error("Error loading cart from Firebase:",t),[]}})}deleteCartFromFirebase(e){return v(this,null,function*(){try{let t=Sn(An,"carts",e);yield OM(t)}catch(t){console.error("Error deleting cart from Firebase:",t)}})}saveCartToLocalStorage(){try{localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(this.cartItems))}catch(e){console.error("Error saving cart to localStorage:",e)}}loadCartFromLocalStorage(){try{let e=localStorage.getItem(this.CART_STORAGE_KEY);e&&(this.cartItems=JSON.parse(e),this.cartSubject.next([...this.cartItems]))}catch(e){console.error("Error loading cart from localStorage:",e),this.cartItems=[]}}static \u0275fac=function(t){return new(t||n)(B(Tp),B(Dp))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var bO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(z(vn),z(St))};static \u0275dir=ye({type:n})}return n})(),ju=(()=>{class n extends bO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,features:[ze]})}return n})(),Lo=new U(""),J3={provide:Lo,useExisting:Ye(()=>Z3),multi:!0},Z3=(()=>{class n extends ju{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&sn("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[At([J3]),ze]})}return n})(),X3={provide:Lo,useExisting:Ye(()=>TO),multi:!0};function eG(){let n=an()?an().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var tG=new U(""),TO=(()=>{class n extends bO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!eG())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(z(vn),z(St),z(tG,8))};static \u0275dir=ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&sn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[At([X3]),ze]})}return n})();function Hw(n){return n==null||qw(n)===0}function qw(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Si=new U(""),Lp=new U(""),nG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fO=class{static min(e){return DO(e)}static max(e){return CO(e)}static required(e){return SO(e)}static requiredTrue(e){return rG(e)}static email(e){return iG(e)}static minLength(e){return AO(e)}static maxLength(e){return oG(e)}static pattern(e){return sG(e)}static nullValidator(e){return Sp()}static compose(e){return xO(e)}static composeAsync(e){return kO(e)}};function DO(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function CO(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function SO(n){return Hw(n.value)?{required:!0}:null}function rG(n){return n.value===!0?null:{required:!0}}function iG(n){return Hw(n.value)||nG.test(n.value)?null:{email:!0}}function AO(n){return e=>{let t=e.value?.length??qw(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function oG(n){return e=>{let t=e.value?.length??qw(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function sG(n){if(!n)return Sp;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Hw(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Sp(n){return null}function RO(n){return n!=null}function NO(n){return _r(n)?be(n):n}function MO(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function PO(n,e){return e.map(t=>t(n))}function aG(n){return!n.validate}function OO(n){return n.map(e=>aG(e)?e:t=>e.validate(t))}function xO(n){if(!n)return null;let e=n.filter(RO);return e.length==0?null:function(t){return MO(PO(t,e))}}function zw(n){return n!=null?xO(OO(n)):null}function kO(n){if(!n)return null;let e=n.filter(RO);return e.length==0?null:function(t){let r=PO(t,e).map(NO);return Tg(r).pipe(J(MO))}}function Gw(n){return n!=null?kO(OO(n)):null}function pO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function FO(n){return n._rawValidators}function LO(n){return n._rawAsyncValidators}function Uw(n){return n?Array.isArray(n)?n:[n]:[]}function Ap(n,e){return Array.isArray(n)?n.includes(e):n===e}function gO(n,e){let t=Uw(e);return Uw(n).forEach(i=>{Ap(t,i)||t.push(i)}),t}function mO(n,e){return Uw(e).filter(t=>!Ap(n,t))}var Rp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Gw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Vr=class extends Rp{name;get formDirective(){return null}get path(){return null}},Fo=class extends Rp{_parent=null;name=null;valueAccessor=null},Np=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},cG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Oce=Y(P({},cG),{"[class.ng-submitted]":"isSubmitted"}),xce=(()=>{class n extends Np{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(z(Fo,2))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&_c("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ze]})}return n})(),kce=(()=>{class n extends Np{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(z(Vr,10))};static \u0275dir=ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&_c("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ze]})}return n})();var Ou="VALID",Cp="INVALID",fa="PENDING",xu="DISABLED",Ci=class{},Mp=class extends Ci{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Fu=class extends Ci{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Lu=class extends Ci{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},pa=class extends Ci{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Pp=class extends Ci{source;constructor(e){super(),this.source=e}},Op=class extends Ci{source;constructor(e){super(),this.source=e}};function Ww(n){return(Vp(n)?n.validators:n)||null}function uG(n){return Array.isArray(n)?zw(n):n||null}function Kw(n,e){return(Vp(e)?e.asyncValidators:n)||null}function lG(n){return Array.isArray(n)?Gw(n):n||null}function Vp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function VO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[t])throw new V(1001,"")}function jO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new V(1002,"")})}var ga=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rt(this.statusReactive)}set status(e){Rt(()=>this.statusReactive.set(e))}_status=so(()=>this.statusReactive());statusReactive=Fn(void 0);get valid(){return this.status===Ou}get invalid(){return this.status===Cp}get pending(){return this.status==fa}get disabled(){return this.status===xu}get enabled(){return this.status!==xu}errors;get pristine(){return Rt(this.pristineReactive)}set pristine(e){Rt(()=>this.pristineReactive.set(e))}_pristine=so(()=>this.pristineReactive());pristineReactive=Fn(!0);get dirty(){return!this.pristine}get touched(){return Rt(this.touchedReactive)}set touched(e){Rt(()=>this.touchedReactive.set(e))}_touched=so(()=>this.touchedReactive());touchedReactive=Fn(!1);get untouched(){return!this.touched}_events=new xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mO(e,this._rawAsyncValidators))}hasValidator(e){return Ap(this._rawValidators,e)}hasAsyncValidator(e){return Ap(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Y(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Lu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Lu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Y(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fu(!0,r))}markAsPending(e={}){this.status=fa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Y(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xu,this.errors=null,this._forEachChild(i=>{i.disable(Y(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mp(this.value,r)),this._events.next(new pa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ou,this._forEachChild(r=>{r.enable(Y(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Y(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ou||this.status===fa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mp(this.value,t)),this._events.next(new pa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Y(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xu:Ou}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=fa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=NO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new pa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ae,this.statusChanges=new Ae}_calculateStatus(){return this._allControlsDisabled()?xu:this.errors?Cp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fa)?fa:this._anyControlsHaveStatus(Cp)?Cp:Ou}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Fu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Lu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=uG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=lG(this._rawAsyncValidators)}},ma=class extends ga{constructor(e,t,r){super(Ww(t),Kw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){jO(this,!0,e),Object.keys(e).forEach(r=>{VO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bw=class extends ma{};var Uu=new U("",{providedIn:"root",factory:()=>jp}),jp="always";function UO(n,e){return[...e.path,n]}function xp(n,e,t=jp){Qw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),hG(n,e),pG(n,e),fG(n,e),dG(n,e)}function yO(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Fp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function kp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Qw(n,e){let t=FO(n);e.validator!==null?n.setValidators(pO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=LO(n);e.asyncValidator!==null?n.setAsyncValidators(pO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();kp(e._rawValidators,i),kp(e._rawAsyncValidators,i)}function Fp(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=FO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=LO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return kp(e._rawValidators,r),kp(e._rawAsyncValidators,r),t}function hG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&BO(n,e)})}function fG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&BO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function BO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function $O(n,e){n==null,Qw(n,e)}function gG(n,e){return Fp(n,e)}function HO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function mG(n){return Object.getPrototypeOf(n.constructor)===ju}function qO(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function zO(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===TO?t=o:mG(o)?r=o:i=o}),i||r||t||null}function yG(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var vG={provide:Vr,useExisting:Ye(()=>_G)},ku=Promise.resolve(),_G=(()=>{class n extends Vr{callSetDisabledState;get submitted(){return Rt(this.submittedReactive)}_submitted=so(()=>this.submittedReactive());submittedReactive=Fn(!1);_directives=new Set;form;ngSubmit=new Ae;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new ma({},zw(t),Gw(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ku.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),xp(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ku.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ku.then(()=>{let r=this._findContainer(t.path),i=new ma({});$O(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ku.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ku.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),qO(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Pp(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Op(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(z(Si,10),z(Lp,10),z(Uu,8))};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&sn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[At([vG]),ze]})}return n})();function vO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _O(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Vu=class extends ga{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Ww(t),Kw(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_O(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_O(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var EG=n=>n instanceof Vu;var IG={provide:Fo,useExisting:Ye(()=>wG)},EO=Promise.resolve(),wG=(()=>{class n extends Fo{_changeDetectorRef;callSetDisabledState;control=new Vu;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ae;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=zO(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),HO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){xp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){EO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ni(r);EO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?UO(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(z(Vr,9),z(Si,10),z(Lp,10),z(Lo,10),z(Ir,8),z(Uu,8))};static \u0275dir=ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[At([IG]),ze,rn]})}return n})();var Lce=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),bG={provide:Lo,useExisting:Ye(()=>TG),multi:!0},TG=(()=>{class n extends ju{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&sn("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[At([bG]),ze]})}return n})();var GO=new U("");var DG={provide:Vr,useExisting:Ye(()=>CG)},CG=(()=>{class n extends Vr{callSetDisabledState;get submitted(){return Rt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=so(()=>this._submittedReactive());_submittedReactive=Fn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ae;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return xp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){yO(t.control||null,t,!1),yG(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),qO(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Pp(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new Op(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(yO(r||null,t),EG(i)&&(xp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);$O(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&gG(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Qw(this.form,this),this._oldForm&&Fp(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(z(Si,10),z(Lp,10),z(Uu,8))};static \u0275dir=ye({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&sn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[At([DG]),ze,rn]})}return n})();var SG={provide:Fo,useExisting:Ye(()=>AG)},AG=(()=>{class n extends Fo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ae;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=zO(this,o)}ngOnChanges(t){this._added||this._setUpControl(),HO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return UO(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(z(Vr,13),z(Si,10),z(Lp,10),z(Lo,10),z(GO,8))};static \u0275dir=ye({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[At([SG]),ze,rn]})}return n})();var RG={provide:Lo,useExisting:Ye(()=>KO),multi:!0};function WO(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function NG(n){return n.split(":")[0]}var KO=(()=>{class n extends ju{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=WO(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=NG(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&sn("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[At([RG]),ze]})}return n})(),Vce=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(WO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(z(St),z(vn),z(KO,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),MG={provide:Lo,useExisting:Ye(()=>QO),multi:!0};function IO(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function PG(n){return n.split(":")[0]}var QO=(()=>{class n extends ju{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=PG(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&sn("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[At([MG]),ze]})}return n})(),jce=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(IO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(IO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(z(St),z(vn),z(QO,9))};static \u0275dir=ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function OG(n){return typeof n=="number"?n:parseInt(n,10)}function YO(n){return typeof n=="number"?n:parseFloat(n)}var Up=(()=>{class n{_validator=Sp;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Sp,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ye({type:n,features:[rn]})}return n})(),xG={provide:Si,useExisting:Ye(()=>kG),multi:!0},kG=(()=>{class n extends Up{max;inputName="max";normalizeInput=t=>YO(t);createValidator=t=>CO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Er("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[At([xG]),ze]})}return n})(),FG={provide:Si,useExisting:Ye(()=>LG),multi:!0},LG=(()=>{class n extends Up{min;inputName="min";normalizeInput=t=>YO(t);createValidator=t=>DO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Er("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[At([FG]),ze]})}return n})(),VG={provide:Si,useExisting:Ye(()=>jG),multi:!0};var jG=(()=>{class n extends Up{required;inputName="required";normalizeInput=ni;createValidator=t=>SO;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Er("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[At([VG]),ze]})}return n})();var UG={provide:Si,useExisting:Ye(()=>BG),multi:!0},BG=(()=>{class n extends Up{minlength;inputName="minlength";normalizeInput=t=>OG(t);createValidator=t=>AO(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=ye({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Er("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[At([UG]),ze]})}return n})();var JO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=on({type:n});static \u0275inj=qt({})}return n})(),$w=class extends ga{constructor(e,t,r){super(Ww(t),Kw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){jO(this,!1,e),e.forEach((r,i)=>{VO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function wO(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Uce=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return wO(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new ma(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Bw(i,r)}control(t,r,i){let o={};return this.useNonNullable?(wO(r)?o=r:(o.validators=r,o.asyncValidators=i),new Vu(t,Y(P({},o),{nonNullable:!0}))):new Vu(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new $w(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Vu)return t;if(t instanceof ga)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Uu,useValue:t.callSetDisabledState??jp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=on({type:n});static \u0275inj=qt({imports:[JO]})}return n})(),$ce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:GO,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Uu,useValue:t.callSetDisabledState??jp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=on({type:n});static \u0275inj=qt({imports:[JO]})}return n})();export{P as a,Y as b,v as c,Me as d,xe as e,J as f,ht as g,qx as h,ar as i,zx as j,L as k,qt as l,B as m,M as n,uD as o,lD as p,$k as q,ms as r,kC as s,P1 as t,Z1 as u,z as v,Hy as w,on as x,qy as y,DS as z,Er as A,OS as B,Xy as C,ev as D,Xd as E,cV as F,sn as G,lV as H,dV as I,VS as J,_c as K,wV as L,OV as M,qS as N,iv as O,zS as P,WS as Q,LV as R,KS as S,$V as T,HV as U,zV as V,WV as W,QV as X,JV as Y,g0 as Z,Rj as _,Oj as $,m0 as aa,sre as ba,Yj as ca,b2 as da,T2 as ea,Kt as fa,qn as ga,Xv as ha,bn as ia,Kh as ja,tB as ka,iB as la,oB as ma,Fs as na,Qh as oa,$A as pa,Tp as qa,Dp as ra,hO as sa,Z3 as ta,TO as ua,fO as va,xce as wa,kce as xa,_G as ya,wG as za,Lce as Aa,TG as Ba,CG as Ca,AG as Da,KO as Ea,Vce as Fa,jce as Ga,kG as Ha,LG as Ia,jG as Ja,BG as Ka,Uce as La,Bce as Ma,$ce as Na};
